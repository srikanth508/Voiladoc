/**
 * @license OpenTok.js 2.16.3 08194dfcf
 *
 * Copyright (c) 2010-2019 TokBox, Inc.
 * Subject to the applicable Software Development Kit (SDK) License Agreement:
 * https://tokbox.com/support/sdk_license
 *
 * Date: Thu, 19 Sep 2019 06:56:51 GMT
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OT=t():e.OT=t()}(window,function(){return d=[function(e,t,n){"use strict";var o=n(457),r=n(134),a=n(136),i=r(function(r){var i={};return Object.keys(a).forEach(function(e){var t=a[e].method,n=o("OpenTok:"+r+":"+e.toLowerCase());n.log=console[t].bind(console),i[e.toLowerCase()]=n}),i});i.setLogLevel=function(t){var n;try{n=window.localStorage.debug}catch(e){n=""}var e=Object.keys(a).map(function(e){return(t>=a[e].priority?"":"-")+"(autogen)?OpenTok:*:"+e.toLowerCase()}),r=[].concat(e,(n||"").split(/[\s,]/).filter(function(e){return-1===e.indexOf("(autogen)?")})).filter(function(e){return e}).join(",");o.enable(r)},e.exports=i},function(e,t,n){(function(j){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */
e.exports=function(){"use strict";function u(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,i=void 0,a=function(e,t){f[r]=e,f[r+1]=t,2===(r+=2)&&(i?i(p):h())};var e="undefined"!=typeof window?window:void 0,o=e||{},s=o.MutationObserver||o.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==j&&"[object process]"==={}.toString.call(j),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function l(){var e=setTimeout;return function(){return e(p,1)}}var f=new Array(1e3);function p(){for(var e=0;e<r;e+=2){var t=f[e],n=f[e+1];t(n),f[e]=void 0,f[e+1]=void 0}r=0}var h=void 0;function v(e,t){var n=this,r=new this.constructor(b);void 0===r[m]&&M(r);var i=n._state;if(i){var o=arguments[i-1];a(function(){return k(i,r,o,n._result)})}else R(n,r,e,t);return r}function g(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(b);return O(t,e),t}h=c?function(){return j.nextTick(p)}:s?function(){var e=0,t=new s(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():d?function(){var e=new MessageChannel;return e.port1.onmessage=p,function(){return e.port2.postMessage(0)}}():void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0===(t=e.runOnLoop||e.runOnContext)?l():function(){t(p)}}catch(e){return l()}}():l();var m=Math.random().toString(36).substring(2);function b(){}var y=void 0,E=1,_=2,C={error:null};function T(e){try{return e.then}catch(e){return C.error=e,C}}function S(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function w(e,t,n){t.constructor===e.constructor&&n===v&&t.constructor.resolve===g?function(t,e){e._state===E?A(t,e._result):e._state===_?x(t,e._result):R(e,void 0,function(e){return O(t,e)},function(e){return x(t,e)})}(e,t):n===C?(x(e,C.error),C.error=null):void 0===n?A(e,t):u(n)?function(e,r,i){a(function(t){var n=!1,e=S(i,r,function(e){n||(n=!0,r!==e?O(t,e):A(t,e))},function(e){n||(n=!0,x(t,e))},t._label);!n&&e&&(n=!0,x(t,e))},e)}(e,t,n):A(e,t)}function O(e,t){e===t?x(e,new TypeError("You cannot resolve a promise with itself")):!function(e){var t=typeof e;return null!==e&&("object"==t||"function"==t)}(t)?A(e,t):w(e,t,T(t))}function I(e){e._onerror&&e._onerror(e._result),N(e)}function A(e,t){e._state===y&&(e._result=t,e._state=E,0!==e._subscribers.length&&a(N,e))}function x(e,t){e._state===y&&(e._state=_,e._result=t,a(I,e))}function R(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+E]=n,i[o+_]=r,0===o&&e._state&&a(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?k(n,r,i,o):i(o);e._subscribers.length=0}}function k(e,t,n,r){var i=u(n),o=void 0,a=void 0,s=void 0,c=void 0;if(i){if((o=function(e,t){try{return e(t)}catch(e){return C.error=e,C}}(n,r))===C?(c=!0,a=o.error,o.error=null):s=!0,t===o)return void x(t,new TypeError("A promises callback cannot return that same promise."))}else o=r,s=!0;t._state!==y||(i&&s?O(t,o):c?x(t,a):e===E?A(t,o):e===_&&x(t,o))}var D=0;function M(e){e[m]=D++,e._state=void 0,e._result=void 0,e._subscribers=[]}var P=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[m]||M(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&A(this.promise,this._result))):x(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===y&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===g){var i=T(t);if(i===v&&t._state!==y)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===L){var o=new n(b);w(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===y&&(this._remaining--,e===_?x(r,n):this._result[t]=n),0===this._remaining&&A(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;R(e,void 0,function(e){return n._settledAt(E,t,e)},function(e){return n._settledAt(_,t,e)})},e}();var L=function(){function t(e){this[m]=D++,this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){O(t,e)},function(e){x(t,e)})}catch(e){x(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return u(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return L.prototype.then=v,L.all=function(e){return new P(this,e).promise},L.race=function(i){var o=this;return n(i)?new o(function(e,t){for(var n=i.length,r=0;r<n;r++)o.resolve(i[r]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},L.resolve=g,L.reject=function(e){var t=new this(b);return x(t,e),t},L._setScheduler=function(e){i=e},L._setAsap=function(e){a=e},L._asap=a,L.polyfill=function(){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=L},L.Promise=L}()}).call(this,n(68))},function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";var r=n(223),i=n(225),o=n(5),a=n(0);r.logging=a("OT.$"),r.ElementCollection=n(224),r.env=n(4),r.ajax=n(236),r.statable=n(510),r.Analytics=n(238),r.Collection=n(241),r.domExtras=n(514),r.Error=n(242),i(r,"useLogHelpers",{value:function(t){var n=a("useLogHelpersDeprecatedMixin");return Object.keys(n).forEach(function(e){t[e]=n[e]}),t},name:"OT.useLogHelpers",getWarning:"Please use an external library for your debugging needs"}),r.defaults=n(141),i(r,"eventing",{value:o,name:"OT.$.eventing",getWarning:"Please use an external library to create an event emitter."}),Object.keys(r).forEach(function(t){var n=r[t]._attachToOTHelpers||{};Object.keys(n).forEach(function(e){!Object.hasOwnProperty.call(r,e)||"util"===t&&"bind"===e||console.warn("More than one module is trying to define "+e+" on OTHelpers."),r[e]=n[e]})}),e.exports=r},function(n,e,t){"use strict";(function(e){var t={version:-1,name:"unknown"};e&&e.versions&&"string"==typeof e.versions.node?(t.name="Node",t.version=parseInt(e.versions.node,10),t.userAgent=t.name+" "+t.version):(t.userAgent=window.navigator.userAgent.toLowerCase(),t.appName=window.navigator.appName,t.navigatorVendor=void 0,t.name="unknown",-1<t.userAgent.indexOf("opera")||-1<t.userAgent.indexOf("opr/")?(t.name="Opera",null!==/opr\/([0-9]{1,}[.0-9]{0,})/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))):-1<t.userAgent.indexOf("firefox")?(t.name="Firefox",null!==/firefox\/([0-9]{1,}[.0-9]{0,})/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))):"Microsoft Internet Explorer"===t.appName?(t.name="IE",null!==/msie ([0-9]{1,}[.0-9]{0,})/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))):-1<t.userAgent.search(/edge\/\d+(\.\d+)?$/)?(t.name="Edge",null!==/edge\/(\d+(\.\d+)?)$/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))):"Netscape"===t.appName&&-1<t.userAgent.indexOf("trident")?(t.name="IE",null!==/trident\/.*rv:([0-9]{1,}[.0-9]{0,})/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))):-1<t.userAgent.indexOf("chrome")?(t.name="Chrome",t.isElectron=-1<t.userAgent.indexOf("electron/"),null!==/chrome\/([0-9]{1,}[.0-9]{0,})/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))):window.navigator.vendor&&-1<window.navigator.vendor.toLowerCase().indexOf("apple")&&(t.name="Safari",null!==/version\/([0-9]{1,}[.0-9]{0,})/.exec(t.userAgent)&&(t.version=parseFloat(RegExp.$1))),t.userAgent=window.navigator.userAgent,t.protocol=window.location.protocol,t.hostName=window.location.hostName),n.exports=t}).call(this,t(68))},function(e,t,n){"use strict";var o=n(35),a=n(13),s=n(0)("Events"),c=n(6),u=n(471);e.exports=function(r){var i=new o;i.on("newListener",function(e){i.emit(e+":added")}),i.on("removeListener",function(e){i.emit(e+":removed")});var e={on:function(t,n,r){return"string"==typeof t&&n?t.split(" ").forEach(function(e){i.on(e,u(n,r))}):Object.keys(t).forEach(function(e){i.on(e,u(t[e],n))}),this},off:function(t,n,r){return"string"==typeof t?this.off(t.split(" "),n,r):Array.isArray(t)?t.forEach(function(e){n&&a(n)?i.removeListener(e,u(n,r)):i.removeAllListeners(e)}):t?Object.keys(t).forEach(function(e){i.removeListener(e,u(t[e],n))}):i.removeAllListeners(),this},once:function(t,n,r){return"string"==typeof t&&n?t.split(" ").forEach(function(e){i.once(e,u(n,r))}):Object.keys(t).forEach(function(e){i.once(e,u(t[e],n))}),this},dispatchEvent:function(e){if(!e.type)throw new Error("dispatchEvent: Event has no type");return e.target||(e.target=this),this.trigger(e.type,e),this},trigger:function(e){try{for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))}catch(e){console.error("An error occurred in an event handler",e)}return this},emit:function(){return r.trigger.apply(r,arguments)},addEventListener:function(e,t,n){return s.warn("The addEventListener() method is deprecated. Use on() or once() instead."),r.on(e,t,n)},removeEventListener:function(e,t,n){return s.warn("The removeEventListener() method is deprecated. Use off() instead."),r.off(e,t,n)},listenerCount:function(e){return i.listenerCount(e)}};return c(r,e)}},function(e,t,n){var r=n(83),i=n(43),o=n(226),a=n(22),s=n(66),c=n(31),u=Object.prototype.hasOwnProperty,d=o(function(e,t){if(s(t)||a(t))i(t,c(t),e);else for(var n in t)u.call(t,n)&&r(e,n,t[n])});e.exports=d},function(C,e,T){"use strict";(function(a){var e=T(2),s=e(T(17)),n=e(T(18)),t=T(27),r=T(3),i=T(541),o=T(104),c=new t,u={};if(C.exports=u,(window.OTPlugin=u).isSupported=function(){return"IE"===r.env.name&&9<=r.env.version},u.isSupported()){var d=T(255),l=T(0)("Plugin"),f=T(556),p=T(557),h=T(260),v=T(101),g=T(560),m=T(103),b=T(102),y=T(569),E=T(261),_=T(262);u.isReady=b.isReady,u.meta=v,u.isInstalled=function(){return!!u.isSupported()&&d.isinstalled()},u.settings=y,u.version=v.version,u.installedVersion=v.installedVersion,u.pathToInstaller=v.pathToInstaller,u.ready=function(e){b.listen(e.bind(u))},u.getUserMedia=function(){var t=(0,n.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new f(t),e.next=3,o(m.createMediaPeer.bind(m))({});case 3:return r=e.sent,e.abrupt("return",new a(function(t,e){return r._.getUserMedia(n.toHash(),y.usePreviousDeviceSelection,function(e){return t(h.fromJson(e,r))},e)}));case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),u.enumerateDevices=function(t){b.listen(function(e){e?t(e):m.mediaCapturer.enumerateDevices(t)})},u.initPeerConnection=function(){var r=(0,n.default)(s.default.mark(function e(t,n,r){var i,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,!r||!r._.plugin){e.next=5;break}i=r._.plugin,e.next=8;break;case 5:return e.next=7,new a(function(n,r){m.createMediaPeer({},function(e,t){e?r(e):n(t)})});case 7:i=e.sent;case 8:return l.debug("Got PeerConnection for "+i.id),e.next=11,g(t,n,i);case 11:return o=e.sent,i._.getProxyInfo(function(e){o.proxyInfo=e}),e.abrupt("return",o);case 14:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),u.RTCSessionDescription=_,u.RTCIceCandidate=E,u.mediaDevices=new p,u.supportedVideoCodecs=["H264","VP8","VP9"],i({analytics:c,meta:v,readiness:b}),C.exports=u}else u.isInstalled=function(){return!1}}).call(this,T(1))},function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e){"use strict";e.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ENDED:"OT_MEDIA_ENDED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_GOING_AWAY:"OT_SOCKET_CLOSE_GOING_AWAY",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",CANCEL:"OT_CANCEL",UNABLE_TO_CAPTURE_MEDIA:"OT_UNABLE_TO_CAPTURE_MEDIA",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",UNSUPPORTED_BROWSER:"OT_UNSUPPORTED_BROWSER",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR",API_KEY_DISABLED:"OT_API_KEY_DISABLED",UNABLE_TO_ACCESS_MEDIA_ENGINE:"OT_UNABLE_TO_ACCESS_MEDIA_ENGINE"}},function(e){var t=Array.isArray;e.exports=t},function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e){"use strict";e.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007,UNABLE_TO_ACCESS_MEDIA_ENGINE:5001}},function(e,t,n){var r=n(30),i=n(8);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){var r=n(173),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){var r=n(512),i=n(513),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});var i=e.errorReporting||n(190)(),t=e.Errors||n(9),o=e.OTErrorClass||n(38),a=Object.keys(t).map(function(e){return t[e]});return function(e,t,n){if(-1===a.indexOf(e))return new Error("Attempt to use invalid error name ("+e+"). Original message: "+t.message);if(!(t instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(t))))return new Error("Did not pass Error as second argument: "+t);var r=new o(void 0,t.message);if(r.name=e,!t.stack)try{throw t}catch(e){}return r.stack=t.stack,n&&(r.code=n),i.send(r),r}}},function(e,t,n){e.exports=n(539)},function(e,t,n){(function(u){function c(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):u.resolve(c).then(r,i)}e.exports=function(s){return function(){var e=this,a=arguments;return new u(function(t,n){var r=s.apply(e,a);function i(e){c(r,t,n,i,o,"next",e)}function o(e){c(r,t,n,i,o,"throw",e)}i(void 0)})}}}).call(this,n(1))},function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";var i=n(192),r=n(386),o=Object.prototype.toString;function a(e){return"[object Array]"===o.call(e)}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===o.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:r,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:u,merge:function n(){var r={};function e(e,t){"object"==typeof r[t]&&"object"==typeof e?r[t]=n(r[t],e):r[t]=e}for(var t=0,i=arguments.length;t<i;t++)u(arguments[t],e);return r},extend:function(n,e,r){return u(e,function(e,t){n[t]=r&&"function"==typeof e?i(e,r):e}),n},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,c){"use strict";var n=c(2),u=n(c(32)),d=n(c(50)),l=c(143),f=c(26);e.exports=function(e){void 0===e&&(e={});var n=e.logging||c(0)("Events"),t={ExceptionEvent:function(e,t,n,r,i,o,a){return new l(e,!1,{error:a,message:t,title:n,code:r,component:i,target:o})},IssueReportedEvent:function(e,t){return new l(e,!1,{issueId:t})},EnvLoadedEvent:function(e){return new l(e,!1)}},i=!1;t.ConnectionEvent=function(r){function e(e,t,n){return r.call(this,e,!1,{connection:t,reason:n})||this}return(0,d.default)(e,r),(0,u.default)(e,[{key:"connections",get:function(){return i||(n.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),i=!0),[this.connection]}}]),e}(l);var r=!1;t.StreamEvent=function(i){function e(e,t,n,r){return i.call(this,e,r,{stream:t,reason:n})||this}return(0,d.default)(e,i),(0,u.default)(e,[{key:"streams",get:function(){return r||(n.warn("OT.StreamEvent streams property is deprecated, use stream instead."),r=!0),[this.stream]}}]),e}(l);var o=!1,a=!1,s=!1;return t.SessionConnectEvent=function(t){function e(e){return t.call(this,e,!1)||this}return(0,d.default)(e,t),(0,u.default)(e,[{key:"connections",get:function(){return o||(n.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),o=!0),[]}},{key:"streams",get:function(){return a||(n.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),a=!0),[]}},{key:"archives",get:function(){return s||(n.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),s=!0),[]}}]),e}(l),t.SessionReconnectingEvent=function(){return new l(f.SESSION_RECONNECTING,!1)},t.SessionReconnectedEvent=function(){return new l(f.SESSION_RECONNECTED)},t.SessionDisconnectEvent=function(e,t,n){return new l(e,n,{reason:t})},t.StreamPropertyChangedEvent=function(e,t,n,r,i){return new l(e,!1,{stream:t,changedProperty:n,oldValue:r,newValue:i})},t.VideoDimensionsChangedEvent=function(e,t,n){return new l("videoDimensionsChanged",!1,{target:e,oldValue:t,newValue:n})},t.ArchiveEvent=function(e,t){return new l(e,!1,{id:t.id,name:t.name,status:t.status,archive:t})},t.ArchiveUpdatedEvent=function(e,t,n,r){return new l("updated",!1,{target:e,changedProperty:t,oldValue:n,newValue:r})},t.SignalEvent=function(e,t,n){return new l(e?"signal:"+e:f.SIGNAL,!1,{data:t,from:n})},t.StreamUpdatedEvent=function(e,t,n,r){return new l("updated",!1,{target:e,changedProperty:t,oldValue:n,newValue:r})},t.DestroyedEvent=function(e,t,n){return new l(e,!1,{target:t,reason:n})},t.ConnectionStateChangedEvent=function(e,t){return new l(e,!1,{target:t})},t.VideoEnabledChangedEvent=function(e,t){return new l(e,!1,{reason:t.reason})},t.VideoDisableWarningEvent=function(e){return new l(e,!1)},t.AudioLevelUpdatedEvent=function(e){return new l(f.AUDIO_LEVEL_UPDATED,!1,{audioLevel:e})},t.MediaStoppedEvent=function(e,t){return new l(f.MEDIA_STOPPED,!0,{target:e,track:t})},t.VideoElementCreatedEvent=function(e){return new l(f.VIDEO_ELEMENT_CREATED,!1,{element:e})},t}},function(e,t,n){var r=n(13),i=n(116);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},function(a,e,s){"use strict";(function(u){var e=s(2),d=e(s(23)),n=e(s(32)),r=s(191),l=s(45),t=s(124),i=s(454),f=s(0)("StaticConfig"),p=s(137).prependProxyToUrlIfNeeded,h=l({version:"v2.16.3",buildHash:"08194dfcf",minimumVersion:{firefox:52,chrome:49},debug:"false",websiteURL:"http://www.tokbox.com",configURL:"https://config.opentok.com",ipWhitelistConfigURL:"",cdnURL:"https://static.opentok.com",loggingURL:"https://hlg.tokbox.com/prod",apiURL:"https://anvil.opentok.com",sentryDSN:"https://40bf769a2f474b2a8ef66d2809c7cfe0@sentry.io/104064"}),v=t(["apiURL","assetURL","cdnURL","enableErrorReporting","sessionInfoOverrides","loggingURL"]),o={apiUrl:"apiURL",loggingUrl:"loggingURL"},g=i(function(e){return o[e]});a.exports=function(e){var t=(void 0===e?{}:e).axios,c=void 0===t?r:t;return function(){function s(e){Object.defineProperty(this,"config",{value:Object.freeze(l(e))})}return s.onlyLocal=function(){var e=l(window.OTProperties);return new s((0,d.default)({},h,v(e)))},s.get=function(e){var n=this,r=e.partnerId,i=e.token,o=e.useIpWhitelistConfigUrl,a=e.proxyUrl;return function(){var e=n.onlyLocal();if(!e.configUrl)return u.resolve({});if(!0===o&&!e.ipWhitelistConfigUrl)return u.resolve({});var t=!0===o?e.ipWhitelistConfigUrl:e.configUrl;return t=p(t,a),c.get(t+"/project/"+r+"/config.json",{headers:{"X-TB-TOKEN-AUTH":i}}).then(function(e){return e.data})}().catch(function(e){return f.error("could not reach live config service",e),{}}).then(function(e){var t=l(window.OTProperties);return new s((0,d.default)({},h,v(t),g(e)))})},(0,n.default)(s,[{key:"configUrl",get:function(){return this.config.configURL}},{key:"ipWhitelistConfigUrl",get:function(){return this.config.ipWhitelistConfigURL}},{key:"apiUrl",get:function(){return this.config.apiURL}},{key:"loggingUrl",get:function(){return this.config.loggingURL}},{key:"enableErrorReporting",get:function(){return Boolean(this.config.enableErrorReporting)}},{key:"apiEnabled",get:function(){return void 0===this.config.apiEnabled||this.config.apiEnabled}},{key:"version",get:function(){return this.config.version}},{key:"clientVersion",get:function(){return"js-"+(this.version||"unknown").replace("v","")}},{key:"buildHash",get:function(){return this.config.buildHash}},{key:"minimumVersion",get:function(){return this.config.minimumVersion}},{key:"sentryDSN",get:function(){return this.config.sentryDSN}},{key:"websiteUrl",get:function(){return this.config.websiteURL}},{key:"debug",get:function(){return"true"===this.config.debug||!0===this.config.debug}},{key:"sessionInfoOverrides",get:function(){return this.config.sessionInfoOverrides}},{key:"cdnUrl",get:function(){return this.config.cdnURL||window.location.protocol+"//"+window.location.host}},{key:"assetUrl",get:function(){return this.config.assetURL||this.cdnUrl+"/webrtc/"+this.version}}]),s}()}}).call(this,s(1))},function(e,t,n){"use strict";var r=n(56);e.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},function(e){"use strict";e.exports={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"}},function(e,t,n){"use strict";var r=n(2),l=r(n(23)),i=r(n(32)),f=n(245),o=n(238),u=n(246),p=n(24)(),a=n(5),s=n(137).prependProxyToUrlIfNeeded,c=function(){function d(e){var t=void 0===e?{}:e,n=t.staticConfig,r=void 0===n?p.onlyLocal():n,i=t.sessionInfo,o=void 0===i?new u:i,a=t.ajax,s=t.queue,c=t.proxyUrl;this.proxyUrl=c,this.ajax=a,this.queue=s,this.sessionInfo=o,this.staticConfig=r}var e=d.prototype;return e._getCommon=function(){return{clientVersion:this.staticConfig.clientVersion,buildHash:this.staticConfig.buildHash,source:window.location&&window.location.href,logVersion:"2",apiServer:this.staticConfig.apiUrl,clientSystemTime:(new Date).getTime(),sessionId:this.sessionInfo.sessionId,mediaServerName:this.sessionInfo.mediaServerName,p2p:this.sessionInfo.p2pEnabled,messagingServer:this.sessionInfo.messagingServer,messagingUrl:this.sessionInfo.messagingURL,version:this.staticConfig.version,partnerId:this.sessionInfo.partnerId}},e.logError=function(i,o,a,s,c){var u=this;void 0===c&&(c={}),f.get(function(e,t){var n;if(!e){var r=[i,o,a,s,(0,l.default)({guid:t},u.combineWithCommon(c))];d.emit.apply(d,["logError"].concat(r)),(n=u._analytics).logError.apply(n,r)}})},e.combineWithCommon=function(e){return(0,l.default)({},this._getCommon(),e)},e.logEvent=function(r,i,o){var a=this;void 0===r&&(r={}),f.get(function(e,t){if(!e){var n=(0,l.default)({guid:t},a.combineWithCommon(r));d.emit("logEvent",n),a._analytics.logEvent(n,!1,i,o)}})},e.logQOS=function(r){var i=this;void 0===r&&(r={}),f.get(function(e,t){if(!e){var n=(0,l.default)({guid:t,duration:0},i.combineWithCommon(r));d.emit("logQOS",n),i._analytics.logQOS(n)}})},(0,i.default)(d,[{key:"staticConfig",get:function(){return this._staticConfig},set:function(e){this._staticConfig=e,this._analytics=new o({loggingUrl:s(this.staticConfig.loggingUrl,this.proxyUrl),ajax:this.ajax,queue:this.queue})}}]),d}();a(c),e.exports=c},function(e){"use strict";var t=!0,n=!0;function r(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}e.exports={extractVersion:r,wrapPeerConnectionEvent:function(e,r,i){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,o=t.addEventListener;t.addEventListener=function(e,n){if(e!==r)return o.apply(this,arguments);function t(e){var t=i(e);t&&n(t)}return this._eventMap=this._eventMap||{},this._eventMap[n]=t,o.apply(this,[e,t])};var a=t.removeEventListener;t.removeEventListener=function(e,t){if(e!==r||!this._eventMap||!this._eventMap[t])return a.apply(this,arguments);var n=this._eventMap[t];return delete this._eventMap[t],a.apply(this,[e,n])},Object.defineProperty(t,"on"+r,{get:function(){return this["_on"+r]},set:function(e){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),e&&this.addEventListener(r,this["_on"+r]=e)},enumerable:!0,configurable:!0})}},disableLog:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(t=e)?"adapter.js logging disabled":"adapter.js logging enabled"},disableWarnings:function(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(n=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},log:function(){if("object"==typeof window){if(t)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},deprecated:function(e,t){n&&console.warn(e+" is deprecated, please use "+t+" instead.")},detectBrowser:function(e){var t=e&&e.navigator,n={browser:null,version:null};if(void 0===e||!e.navigator)return n.browser="Not a browser.",n;if(t.mozGetUserMedia)n.browser="firefox",n.version=r(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia)n.browser="chrome",n.version=r(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\/(\d+).(\d+)$/))n.browser="edge",n.version=r(t.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\/(\d+)\./))return n.browser="Not a supported browser.",n;n.browser="safari",n.version=r(t.userAgent,/AppleWebKit\/(\d+)\./,1)}return n}}},function(e,t,n){var r=n(77);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(42),i=n(346),o=n(347),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(177),i=n(118),o=n(22);e.exports=function(e){return o(e)?r(e):i(e)}},function(e){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,n){var r=n(431),i=n(439),o=n(88),a=n(10),s=n(444);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,d=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}((e.exports=i).EventEmitter=i).prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function a(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),0<(i=c(e))&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,function(e){console&&console.warn&&console.warn(e)}(s)}return e}function s(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,d(this.listener,this.target,e))}.bind(r);return i.listener=n,r.wrapFn=i}function u(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function l(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(0<t.length&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var s=i[e];if(void 0===s)return!1;if("function"==typeof s)d(s,this,t);else{var c=s.length,u=f(s,c);for(n=0;n<c;++n)d(u[n],this,t)}return!0},i.prototype.on=i.prototype.addListener=function(e,t){return a(this,e,t,!1)},i.prototype.prependListener=function(e,t){return a(this,e,t,!0)},i.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,s(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,s(this,e,t)),this},i.prototype.off=i.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},i.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;0<=r;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return u(this,e,!0)},i.prototype.rawListeners=function(e){return u(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):l.call(e,t)},i.prototype.listenerCount=l,i.prototype.eventNames=function(){return 0<this._eventsCount?t(this._events):[]}},function(e,t,n){"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function a(e){return window.Buffer&&"function"==typeof window.Buffer.isBuffer?window.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var d=n(543),r=Object.prototype.hasOwnProperty,l=Array.prototype.slice,i="foo"===function(){}.name;function s(e){return Object.prototype.toString.call(e)}function c(e){return!a(e)&&("function"==typeof window.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var u=e.exports=m,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(d.isFunction(e)){if(i)return e.name;var t=e.toString().match(f);return t&&t[1]}}function h(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function v(e){if(i||!d.isFunction(e))return d.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,n,r,i){throw new u.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function m(e,t){e||g(e,!0,t,"==",u.ok)}function b(e,t,n,r){if(e===t)return!0;if(a(e)&&a(t))return 0===o(e,t);if(d.isDate(e)&&d.isDate(t))return e.getTime()===t.getTime();if(d.isRegExp(e)&&d.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(c(e)&&c(t)&&s(e)===s(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===o(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null==e||null==t)return!1;if(d.isPrimitive(e)||d.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=y(e),o=y(t);if(i&&!o||!i&&o)return!1;if(i)return e=l.call(e),t=l.call(t),b(e,t,n);var a,s,c=C(e),u=C(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),s=c.length-1;0<=s;s--)if(c[s]!==u[s])return!1;for(s=c.length-1;0<=s;s--)if(a=c[s],!b(e[a],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function y(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function E(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e,t,n,r){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(e){t=e}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&g(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!e&&i&&!n;if((!e&&d.isError(i)&&o&&E(i,n)||a)&&g(i,n,"Got unwanted exception"+r),e&&i&&n&&!E(i,n)||!e&&i)throw i}u.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return h(v(e.actual),128)+" "+e.operator+" "+h(v(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=p(t),o=r.indexOf("\n"+i);if(0<=o){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},d.inherits(u.AssertionError,Error),u.fail=g,u.ok=m,u.equal=function(e,t,n){e!=t&&g(e,t,n,"==",u.equal)},u.notEqual=function(e,t,n){e==t&&g(e,t,n,"!=",u.notEqual)},u.deepEqual=function(e,t,n){b(e,t,!1)||g(e,t,n,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(e,t,n){b(e,t,!0)||g(e,t,n,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(e,t,n){b(e,t,!1)&&g(e,t,n,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function e(t,n,r){b(t,n,!0)&&g(t,n,r,"notDeepStrictEqual",e)},u.strictEqual=function(e,t,n){e!==t&&g(e,t,n,"===",u.strictEqual)},u.notStrictEqual=function(e,t,n){e===t&&g(e,t,n,"!==",u.notStrictEqual)},u.throws=function(e,t,n){_(!0,e,t,n)},u.doesNotThrow=function(e,t,n){_(!1,e,t,n)},u.ifError=function(e){if(e)throw e};var C=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t}},function(e,t,n){var r=n(563);e.exports=function(e){return r(2,e)}},function(e,t,n){"use strict";function l(e,t){Error.call(this),this.code=e,this.message=t}var f=n(0)("GlobalExceptionHandler"),r=n(5),p=n(26),h=n(21)();(l.prototype=Object.create(Error.prototype)).constructor=l,r(e.exports=l);var i={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1553:"ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected",5001:"Unable to access media engine"};l.getTitleByCode=function(e){return i[+e]},l.handleJsException=function(e){var t=e.error,n=e.errorMsg,r=e.code,i=e.target,o=e.analytics;if(!i)throw new Error("handleJsException requires target");function a(){return void 0!==r?r:t&&t.code}function s(){return void 0!==n?n:t&&t.message}var c=l.getTitleByCode(a());f.error("OT.exception :: title: "+c+" ("+a()+") msg: "+s());try{var u={partnerId:i.session?i.session.apiKey:i.apiKey,sessionId:i.session?i.session.sessionId:i.sessionId};o.logError(a(),"tb.exception",c,{details:s()},u);var d=new h.ExceptionEvent(p.EXCEPTION,s(),c,a(),i,i,t);if(t)d.stack=t.stack;else try{throw new Error}catch(e){d.stack=e.stack}l.dispatchEvent(d)}catch(e){f.error("OT.exception :: Failed to dispatch exception - "+e.toString())}}},function(e,t,n){"use strict";var r=n(241),i={publishers:new r("guid"),subscribers:new r("widgetId"),sessions:new r};e.exports=i},function(e,t,n){"use strict";var i=n(3);e.exports=function(t,e){var n,r=e||{};t.setDisplayMode=function(e){var t=e||"auto";n!==t&&(i.removeClass(this.domElement,"OT_mode-"+n),i.addClass(this.domElement,"OT_mode-"+t),n=t)},t.getDisplayMode=function(){return n},t.showAfterLoading=function(){i.removeClass(this.domElement,"OT_hide-forced")},t.hideWhileLoading=function(){i.addClass(this.domElement,"OT_hide-forced")},t.destroy=function(){return r.onDestroy&&r.onDestroy(this.domElement),this.domElement&&i.removeElement(this.domElement),t},t.appendTo=function(e){return this.domElement=i.createElement(r.nodeName||"div",r.htmlAttributes,r.htmlContent),r.onCreate&&r.onCreate(this.domElement),t.setDisplayMode(r.mode),"auto"===r.mode&&(i.addClass(t.domElement,"OT_mode-on-hold"),setTimeout(function(){i.removeClass(t.domElement,"OT_mode-on-hold")},2e3)),e.appendChild(this.domElement),t}}},function(e,t,n){var r=n(345),i=n(350);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(14).Symbol;e.exports=r},function(e,t,n){var u=n(83),d=n(61);e.exports=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?d(n,s,c):u(n,s,c)}return n}},function(e,t,n){var r=n(374),i=n(113),o=n(375),a=n(185),s=n(186),c=n(30),u=n(174),d="[object Map]",l="[object Promise]",f="[object Set]",p="[object WeakMap]",h="[object DataView]",v=u(r),g=u(i),m=u(o),b=u(a),y=u(s),E=c;(r&&E(new r(new ArrayBuffer(1)))!=h||i&&E(new i)!=d||o&&E(o.resolve())!=l||a&&E(new a)!=f||s&&E(new s)!=p)&&(E=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return h;case g:return d;case m:return l;case b:return f;case y:return p}return t}),e.exports=E},function(e,t,n){var r=n(77);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(70);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){"use strict";e.exports=n(486)()?Symbol:n(487)},function(e){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e){"use strict";var t=window.performance||{};e.exports=function(){return t.now?t.timing.navigationStart+t.now():Date.now()}},function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}},function(e){"use strict";e.exports=function(e,t,n){function r(){!o||n<a||(a+=1,e(),i=setTimeout(r,s))}void 0===n&&(n=1/0);var i=null,o=!1,a=1,s=1e3/t;this.start=function(){o||(o=!0,setTimeout(r,s))},this.stop=function(){window.clearTimeout(i),o=!1}}},function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var i=n(95);e.exports=function(e,t,n){var r=null==e?void 0:i(e,t);return void 0===r?n:r}},function(e,t,n){var r=n(10),i=n(133),o=n(217),a=n(96);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){"use strict";var r=n(231)();e.exports=function(e){return e!==r&&null!==e}},function(e,t,o){"use strict";var n=o(37),a=o(24)();t.check=function(e){void 0===e&&(e={});var t=e.env||o(4),n=e.hasPeerConnectionCapability||o(588),r=e.logging||o(0)("hasOpenTokSupport"),i=((e.staticConfig||a.onlyLocal()).minimumVersion||{})[t.name.toLowerCase()];return i&&i>t.version?(r.debug("Support for",t.name,"is disabled because we require",i,"but this is",t.version),!1):"Node"===t.name||n()},t.once=n(function(){return t.check()})},function(e,t,n){"use strict";var r=n(6),E=n(59),i=n(275),_=n(0)("SDPHelpers"),C={getSections:function(e){return e.split(/\r\n|\r|\n/).reduce(function(e,t){var n=t.match(/^m=(\w+) \d+/);return n&&(e.sections[e.section=n[1]]=[]),e.sections[e.section].push(t),e},{sections:{header:[]},section:"header"}).sections},getCodecsAndCodecMap:function(e,t){var n=C.getSections(e)[t];if(!n)throw new Error("no mediaType "+t);return{codecs:n[0].match(/m=\w+ \d+ [A-Z/]+ ([\d ]+)$/)[1].split(" "),codecMap:r.apply(void 0,n.filter(function(e){return e.match(/^a=rtpmap:\d+/)}).map(function(e){return e.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1)}).map(function(e){var t,n=e[0],r=e[1];return(t={})[n]=r,t}))}},getCodecs:function(e,t){var n=C.getCodecsAndCodecMap(e,t);return n.codecs.map(function(e){return n.codecMap[e]||"Unknown codec"})}};(e.exports=C).getMLineIndex=function(e,t){var n="m="+t;return i(e,function(e){return-1!==e.indexOf(n)})},C.getMLine=function(e,t){var n=C.getMLineIndex(e,t);return-1<n?e[n]:void 0},C.hasMediaType=function(e,t){var n=new RegExp("^m="+t),r=e.split("\r\n");return 0<=i(r,function(e){return n.test(e)})},C.hasMLinePayloadType=function(e,t,n){var r=C.getMLine(e,t);return-1<C.getMLinePayloadTypes(r,t).indexOf(n)},C.getMLinePayloadTypes=function(e,t){var n=new RegExp("^m="+t+" \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$","i"),r=e.match(n);return!r||r.length<2?[]:r[2].trim().split(" ")},C.removeTypesFromMLine=function(e,t){var n=/[0-9 ]*$/.exec(e)[0],r=n.split(" ").filter(function(e){return""!==e&&-1===t.indexOf(e)});return e.replace(n," "+r.join(" "))},C.removeMediaEncoding=function(e,t,n){var r,i,o,a=e.split("\r\n"),s=C.getMLineIndex(a,t),c=-1<s?a[s]:void 0,u=[];if(-1===s)return a.join("\r\n");if(0===C.getMLinePayloadTypes(c,t).length)return a.join("\r\n");for(r=s;r<a.length;r++){var d=new RegExp(n,"i");0===a[r].indexOf("a=rtpmap:")&&2===(o=a[r].split(" ")).length&&d.test(o[1])&&u.push(o[0].substr(9))}if(!u.length)return a.join("\r\n");for(r=s;r<a.length;r++)if(0===a[r].indexOf("a=fmtp:"))for(o=a[r].split(" "),i=0;i<u.length;i++)2===o.length&&o[1]==="apt="+u[i]&&u.push(o[0].substr(7));return a=a.filter(function(e){for(var t=0;t<u.length;t++)if(0===e.indexOf("a=rtpmap:"+u[t]+" ")||0===e.indexOf("a=fmtp:"+u[t]+" ")||0===e.indexOf("a=rtcp-fb:"+u[t]+" "))return!1;return!0}),0<u.length&&-1<s&&(a[s]=C.removeTypesFromMLine(c,u)),a.join("\r\n")},C.disableMediaType=function(e,n){var t,r,i=e.split("\r\n"),o=[];i.forEach(function(e){var t=e;/^m=/.test(t)&&(r=void 0),r||(r=[],o.push(r)),r.push(t)});var a=new RegExp("^m="+n+" \\d+ ([^ ]+) [0-9 ]+$"),s=o.map(function(e){var t=e[0].match(a);return t?["m="+n+" 0 "+t[1]+" 0","a=inactive"].concat(e.filter(function(e){return/^c=/.test(e)||/^a=mid:/.test(e)||""===e})):e});return(t=[]).concat.apply(t,s).join("\r\n")},C.removeVideoCodec=function(e,t){return C.removeMediaEncoding(e,"video",t)};C.getAttributesForMediaType=function(e,t){for(var n,r,i,o,a,s,c,u,d,l=C.getMLineIndex(e,t),f=new RegExp("m=(?!"+t+").+ ","i"),p=new RegExp("a=ssrc:\\d+ .*","i"),h=new RegExp("a=ssrc-group:FID (\\d+).*?","i"),v=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),g=[],m=l+1;m<e.length&&!f.test(e[m]);m++){(a=e[m].match(h))&&(n=m,o=a[1]),(s=e[m].match("a=ssrc:"+o+" msid:(.+)"))&&(c=s[1]);var b=p.test(e[m]);(void 0===n||void 0!==r||b)&&m!==e.length-1||(r=m);var y=e[m].match(/a=mid:(.+)/);y&&(u=y[1],d=m),(i=v.exec(e[m]))&&3===i.length&&g.push({lineIndex:m,name:i[1],value:i[2]})}return g.ssrcStartIndex=n,g.ssrcEndIndex=r,g.msid=c,g.mid=u,g.midIndex=d,Array.prototype.find||(g.find=E.bind(void 0,g)),g.isUsingRTX=function(e,t){var n=t.filterByName("ssrc-group:FID");switch((n=0===n.length?[]:n[0].value.split(" ")).length){case 0:case 1:var r=t.find(function(e){return 0===e.name.indexOf("rtpmap:")&&-1<e.value.indexOf("rtx/90000")});if(!r)return!1;var i=r.name.split(":")[1];return-1<i.indexOf("/")&&(i=i.split("/")[0]),C.hasMLinePayloadType(e,"video",i);default:return _.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}}.bind(null,e,g),g.filterByName=function(t){return this.filter(function(e){return e.name===t})},g.getRtpNumber=function(n){var r=new RegExp("rtpmap:(.+)");return E(g.map(function(e){var t=e.name.match(r);return t&&0<=e.value.indexOf(n)?t[1]:null}),function(e){return null!==e})},g};function o(e,t,n){var r=t.split("\r\n");if(!C.getMLine(r,"audio"))return _.debug("No audio m-line, not enabling stereo."),t;var i=C.getAttributesForMediaType(r,"audio"),o=i.getRtpNumber("opus");if(!o)return _.debug("Could not find rtp number for opus, not enabling stereo."),t;var a=i.find(function(e){return e.name==="fmtp:"+o});if(!a)return _.debug("Could not find a=fmtp line for opus, not enabling stereo."),t;var s,c=r[a.lineIndex];switch(e){case"send":(s=/sprop-stereo=\d+(\s*;?\s*)/).test(a.value)?c=c.replace(s,n?"sprop-stereo=1$1":""):n&&(c+="; sprop-stereo=1");break;case"receive":(s=/([^-])stereo=\d+(\s*;?\s*)/).test(a.value)?c=c.replace(s,n?"$1stereo=1$2":"$1"):n&&(c+="; stereo=1");break;default:throw new Error("Invalid type "+e+" passed into enableStereo")}return c=c.replace(/[;\s]*$/,""),r[a.lineIndex]=c,r.join("\r\n")}C.modifySendStereo=o.bind(null,"send"),C.modifyReceiveStereo=o.bind(null,"receive"),C.setAudioBitrate=function(e,t){var n=C.getAudioBitrate(e);if(void 0!==n)return _.debug("Audio bitrate already set to "+n+", not setting audio bitrate"),e;var r=e.split("\r\n");if(!C.getMLine(r,"audio"))return _.debug("No audio m-line, not setting audio bitrate."),e;var i=C.getAttributesForMediaType(r,"audio");if(!i.midIndex)return _.debug("No audio mid line, not setting audio bitrate."),e;var o=Math.floor(t/1e3);return r.splice(i.midIndex+1,0,"b=AS:"+o),r.join("\r\n")},C.hasSendStereo=function(e){return/[\s;]sprop-stereo=1/.test(e)},C.getAudioBitrate=function(e){var t=e.match(/\sb=AS:(\d+)/);if(t)return 1e3*Number(t[1])},C.enableSimulcast=function(e,t){var n,r,i=e.split("\r\n");if(!C.getMLine(i,"video"))return _.debug("No video m-line, not enabling simulcast."),e;var o=C.getAttributesForMediaType(i,"video");if(0<o.filterByName("ssrc-group:SIM").length)return _.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),e;if(!o.msid)return _.debug("No local stream attached, not enabling simulcast."),e;var a=o.isUsingRTX(),s=[],c=[];for(r=0;r<t;++r)s.push(1e4+r),a&&c.push(2e4+r);if(n=["a=ssrc-group:SIM "+s.join(" ")],a)for(r=0;r<t;++r)n.push("a=ssrc-group:FID "+s[r]+" "+c[r]);for(r=0;r<t;++r)n.push("a=ssrc:"+s[r]+" cname:localCname","a=ssrc:"+s[r]+" msid:"+o.msid);if(a)for(r=0;r<t;++r)n.push("a=ssrc:"+c[r]+" cname:localCname","a=ssrc:"+c[r]+" msid:"+o.msid);return n.unshift(o.ssrcStartIndex,o.ssrcEndIndex-o.ssrcStartIndex),i.splice.apply(i,n),i.join("\r\n")},C.reprioritizeVideoCodec=function(e,t,n){var r=e.split("\r\n"),i=C.getMLineIndex(r,"video");if(-1===i)return e;var o=C.getMLinePayloadTypes(r[i],"video"),a=new RegExp("^a=rtpmap:(\\d+).* "+t,"i"),s=r.map(function(e){return e.match(a)}).filter(function(e){return null!==e});if(0===s.length)return e;var c,u=s.map(function(e){return e[1]}),d=o.filter(function(e){return-1===u.indexOf(e)});if("top"===n)(c=d).unshift.apply(c,u);else if("bottom"===n){var l;(l=d).push.apply(l,u)}else _.error("Unexpected location param: "+n+"; not changing "+t+" priority"),d=o;var f=r[i].replace(o.join(" "),d.join(" "));return r[i]=f,r.join("\r\n")}},function(e,t,n){var r=n(598)(n(275));e.exports=r},function(e){"use strict";e.exports=function(o){var a=[];return{on:function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(a.push({eventName:e,handler:t,args:r}),o.on)o.on(e,t);else{if(!o.addEventListener)throw new Error("Object does not support events",o);o.addEventListener.apply(o,[e,t].concat(r))}},off:function(e,t){if(o.off)o.off(e,t);else{if(!o.removeEventListener)throw new Error("Object does not support events",o);for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];o.removeEventListener.apply(o,[e,t].concat(r))}},once:function(e,t){for(var n=arguments.length,r=new Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];a.push({eventName:e,handler:t,args:r}),o.once(e,t)},removeAll:function(){var i=this;a.forEach(function(e){var t=e.eventName,n=e.handler,r=e.args;i.off.apply(i,[t,n].concat(r))}),a.splice(0,a.length)}}}},function(e,t,n){var r=n(175);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(364),i=n(19),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=c},function(e,s,c){(function(e){var t=c(14),n=c(365),r=s&&!s.nodeType&&s,i=r&&"object"==typeof e&&e&&!e.nodeType&&e,o=i&&i.exports===r?t.Buffer:void 0,a=(o?o.isBuffer:void 0)||n;e.exports=a}).call(this,c(84)(e))},function(e){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&-1<e&&e%1==0&&e<t}},function(e){e.exports=function(t){return function(e){return t(e)}}},function(e){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(177),i=n(369),o=n(22);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e){var n,r,t=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],u=!1,d=-1;function l(){u&&s&&(u=!1,s.length?c=s.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=a(l);u=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=h,t.addListener=h,t.once=h,t.off=h,t.removeListener=h,t.removeAllListeners=h,t.emit=h,t.prependListener=h,t.prependOnceListener=h,t.listeners=function(){return[]},t.binding=function(){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(e){e.exports={}},function(e,t,n){var r=n(30),i=n(19);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t,n){var r=n(451),i=n(135)(function(e,t){return null==e?{}:r(e,t)});e.exports=i},function(e,t,n){"use strict";if("Node"===n(3).env.name)e.exports={value:""};else{var r=Array.prototype.slice.call(document.getElementsByTagName("script")).pop().getAttribute("src"),i=(r&&r.match(/[?&]apikey=([^&]+)/i)||[])[1];e.exports={value:i||""}}},function(e,t,n){var r=n(88),i=n(220),o=n(129);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){"use strict";var c=n(140),u=n(232),d=n(482),l=n(233);(e.exports=function(e,t,n){var r,i,o,a,s;return arguments.length<2||"string"!=typeof e?(a=t,t=e,e=null):a=n,null==e?(r=o=!0,i=!1):(r=l.call(e,"c"),i=l.call(e,"e"),o=l.call(e,"w")),s={value:t,configurable:r,enumerable:i,writable:o},a?c(u(a),s):s}).gs=function(e,t,n,r){var i,o,a,s;return"string"!=typeof e?(a=n,n=t,t=e,e=null):a=r,null==t?t=void 0:d(t)?null==n?n=void 0:d(n)||(a=n,n=void 0):(a=t,t=n=void 0),o=null==e?!(i=!0):(i=l.call(e,"c"),l.call(e,"e")),s={get:t,set:n,configurable:i,enumerable:o},a?c(u(a),s):s}},function(e,t,n){"use strict";var u=n(124),d=n(633),l=n(634),r=n(8),f={};function p(e){return Number(e.framerateMean||e.googFrameRateSent||e.googFrameRateReceived||e.googFrameRateInput||e.googFrameRateOutput||0)}function h(e){return Number(e.framesEncoded||e.framesDecoded)}function i(t,e){if(!e)return{};var n=e.filter(function(e){return e.id===t.mediaTrackId});return n.length?n[0]:{}}var v={isVideoStat:function(e,t){var n=i(e,t);return"video"===e.mediaType||"googFrameWidthReceived"in e||"googFrameWidthInput"in e||"inbound-rtp"===e.type&&-1!==e.id.indexOf("Video")||"inboundrtp"===e.type&&0!==n.frameWidth},isVideoSenderStat:function(e){return"googFrameWidthSent"in e||"video"===e.mediaType||void 0!==e.id&&-1!==e.id.toLowerCase().indexOf("video")},isAudioStat:function(e,t){var n=i(e,t);return"audio"===e.mediaType||"audioInputLevel"in e||"audioOutputLevel"in e||"inbound-rtp"===e.type&&-1!==e.id.indexOf("Audio")||"inboundrtp"===e.type&&0===n.frameWidth},isInboundStat:function(e){return"bytesReceived"in e||"packetsReceived"in e},isOutboundStat:function(e){return"bytesSent"in e||"packetsSent"in e},isVideoTrackStat:function(e){return"track"===e.type&&(0<e.frameHeight||0<e.frameWidth||0<e.framesCorrupted||0<e.framesDecoded||0<e.framesPerSecond||0<e.framesSent||0<e.framesReceived)},parseStatCategory:function(e){var t={packetsLost:0,packetsReceived:0,bytesReceived:0};return"packetsReceived"in e&&(t.packetsReceived=parseInt(e.packetsReceived,10)),"packetsLost"in e&&(t.packetsLost=parseInt(e.packetsLost,10)),"bytesReceived"in e&&(t.bytesReceived=parseInt(e.bytesReceived,10)),this.isVideoStat(e)&&("framerateMean"in e?t.frameRate=Number(e.framerateMean):"googFrameRateOutput"in e?t.frameRate=Number(e.googFrameRateOutput):"googFrameRateInput"in e&&(t.frameRate=Number(e.googFrameRateInput))),t},normalizeTimestamp:function(e,t){return void 0===t&&(t=Date.now()),r(e)&&"getTime"in e?e.getTime():Math.abs(e/(1e3*t)-1)<.05?e/1e3:e},normalizeStats:function(t,n,e){void 0===n&&(n=!0);var r=t.filter(function(e){return v.isVideoStat(e,t)}).filter(function(e){return v.isInboundStat(e)===n})[0],i=t.filter(function(e){return v.isAudioStat(e,t)}).filter(function(e){return v.isInboundStat(e)===n})[0];if(!i&&!r)throw new Error("could not find stats for either audio or video");var o={timestamp:v.normalizeTimestamp(r?r.timestamp:i.timestamp)},a=u(["packetsSent","packetsLost","bytesSent"]),s=u(["packetsReceived","packetsLost","bytesReceived"]),c=n?s:a;return r&&(o.video=d(l(Number,c(r)),{frameRate:function(e,t){if(p(e))return p(e);if(h(e)){var n=0;return n=void 0!==f[e.id]?(h(e)-f[e.id].frames)/((e.timestamp-f[e.id].timestamp)/1e3):h(e)/((e.timestamp-t)/1e3),f[e.id]={frames:h(e),timestamp:e.timestamp},Math.round(100*n)/100}}(r,e)})),i&&(o.audio=l(Number,c(i))),o}};e.exports=v},function(e,t){"use strict";t.__esModule=!0,t.codes=t.messages=void 0;t.messages={1001:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."};t.codes={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null}},function(e,t,n){var m=n(78),b=n(115),y=n(83),E=n(176),_=n(368),C=n(179),T=n(53),S=n(371),w=n(373),O=n(182),I=n(184),A=n(44),x=n(376),R=n(377),N=n(189),k=n(10),D=n(63),M=n(381),P=n(8),L=n(383),j=n(31),U=1,F=2,B=4,V="[object Arguments]",z="[object Function]",W="[object GeneratorFunction]",H="[object Object]",G={};G[V]=G["[object Array]"]=G["[object ArrayBuffer]"]=G["[object DataView]"]=G["[object Boolean]"]=G["[object Date]"]=G["[object Float32Array]"]=G["[object Float64Array]"]=G["[object Int8Array]"]=G["[object Int16Array]"]=G["[object Int32Array]"]=G["[object Map]"]=G["[object Number]"]=G[H]=G["[object RegExp]"]=G["[object Set]"]=G["[object String]"]=G["[object Symbol]"]=G["[object Uint8Array]"]=G["[object Uint8ClampedArray]"]=G["[object Uint16Array]"]=G["[object Uint32Array]"]=!0,G["[object Error]"]=G[z]=G["[object WeakMap]"]=!1,e.exports=function n(r,i,o,e,t,a){var s,c=i&U,u=i&F,d=i&B;if(o&&(s=t?o(r,e,t,a):o(r)),void 0!==s)return s;if(!P(r))return r;var l=k(r);if(l){if(s=x(r),!c)return T(r,s)}else{var f=A(r),p=f==z||f==W;if(D(r))return C(r,c);if(f==H||f==V||p&&!t){if(s=u||p?{}:N(r),!c)return u?w(r,_(s,r)):S(r,E(s,r))}else{if(!G[f])return t?r:{};s=R(r,f,c)}}a||(a=new m);var h=a.get(r);if(h)return h;if(a.set(r,s),L(r))return r.forEach(function(e){s.add(n(e,i,o,e,r,a))}),s;if(M(r))return r.forEach(function(e,t){s.set(t,n(e,i,o,t,r,a))}),s;var v=d?u?I:O:u?keysIn:j,g=l?void 0:v(r);return b(g||r,function(e,t){g&&(e=r[t=e]),y(s,t,n(e,i,o,t,r,a))}),s}},function(e,t,n){var r=n(79),i=n(340),o=n(341),a=n(342),s=n(343),c=n(344);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=c,e.exports=u},function(e,t,n){var r=n(335),i=n(336),o=n(337),a=n(338),s=n(339);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(52);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(41)(Object,"create");e.exports=r},function(e,t,n){var r=n(359);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var i=n(61),o=n(52),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var r=e[t];a.call(e,t)&&o(r,n)&&(void 0!==n||t in e)||i(e,t,n)}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(366),i=n(65),o=n(117),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t,n){function r(e){if(!i(e))return{};if(o)return o(e);a.prototype=e;var t=new a;return a.prototype=void 0,t}var i=n(8),o=Object.create;function a(){}e.exports=r},function(e,t,n){var r=n(403),i=n(405);e.exports=function(e,t,n){return r(i,e,t,n)}},function(e){e.exports=function(e){return e}},function(e,t,n){var i=n(86),o=n(8);e.exports=function(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=i(r.prototype),n=r.apply(t,e);return o(n)?n:t}}},function(e,t,n){var r=n(420);e.exports=function(e,t){return!!(null==e?0:e.length)&&-1<r(e,t,0)}},function(e,t,n){var r=n(426);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(114),i=n(434),o=n(435);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e){e.exports=function(e,t){return e.has(t)}},function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var i=n(55),o=n(46);e.exports=function(e,t){for(var n=0,r=(t=i(t,e)).length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}},function(e,t,n){var r=n(441);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(221),i=n(31);e.exports=function(e,t){return e&&r(e,t,i)}},function(e){"use strict";var t=Object.prototype.toString,n=t.call(function(){return arguments}());e.exports=function(e){return t.call(e)===n}},function(e){"use strict";var t=Object.prototype.toString,n=t.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||t.call(e)===n)||!1}},function(e,t,n){var r=n(22),i=n(19);e.exports=function(e){return i(e)&&r(e)}},function(e,t,n){"use strict";var c=n(0)("meta"),u=n(3),r=n(542),d=r.pluginVersion,i=r.maxPluginVersion,o=n(24)().onlyLocal(),a=n(254),s={};e.exports=s;function l(){if(void 0===f){var e="TokBox.OpenTokPluginInstaller"+h,t="application/x-opentokplugininstaller"+h,n=window.navigator.plugins[e]||window.navigator.plugins.OpenTokPluginInstaller;if(v=-1,n)for(var r,i,o=n.length,a=new RegExp(t.replace("-","\\-")+",version=([0-9a-zA-Z-_.]+)","i"),s=0;s<o&&(!(r=n[s])||!r.enabledPlugin||r.enabledPlugin.name!==n.name||-1===r.type.indexOf(t)||null===(i=a.exec(r.type))||(v=i[1])!==d);++s);else if("IE"===u.env.name)try{n=new ActiveXObject(e),v=n.getMasterVersion()}catch(e){c.info(e)}f=-1!==v?t+",version="+v:null}}var f,p="IE"===u.env.name&&-1!==u.env.userAgent.indexOf("Win64"),h=p?"_x64":"",v=-1;s.getInstallerMimeType=function(){return void 0===f&&l(),f},s.installedVersion=function(){return l(),v},v=s.installedVersion(),s.mimeType="application/x-opentokplugin"+h+",version="+v,s.activeXName="TokBox.OpenTokPlugin"+h+"."+v,s.version=function(){return d},s.maxPluginVersion=function(){return i},s.hasBrokenUpdater=function(){var e="0.4.0.9"===s.installedVersion()||!a(s.installedVersion(),"0.4.0.4");return s.hasBrokenUpdater=function(){return e},e},s.pathToInstaller=function(e){var t=o.assetUrl+"/plugin/OpenTokPluginMain_x"+(p?"64":"32")+".msi";return e&&e(t),t}},function(e,t,n){"use strict";function r(){var e;for(d=!0;(e=l.pop())&&o(e);)e.call(void 0,i)}var i,o=n(13),a=n(255),s=n(0)("readiness"),c=n(103),u=n(259),d=!1,l=[];u.on("unload",function(){c.removeAll()}),u.whenLoaded.then(function(){a.get(function(e,t){if(e)return i="Error while loading the AutoUpdater: "+e,void r();t.hasRequiredVersion()?c.createMediaCapturer(function(e){(i=e)||c.mediaCapturer&&c.mediaCapturer.isValid()||(i="The TB Plugin failed to load properly"),r()}):t.autoUpdate()})}),e.exports={listen:function(e){o(e)?d?e.call(void 0,i):l.push(e):s.warn("registerReadyListener was called with something that was not a function.")},isReady:function(){return d}}},function(e,t,n){"use strict";var r=n(6),i=n(101),o=n(547),a=n(554),s=n(555),c=new function(){},u={};c.mediaCapturer=null,c.removeAll=function(){for(var e in u)u.hasOwnProperty(e)&&u[e].destroy();c.mediaCapturer&&c.mediaCapturer.destroy()},c.create=function(e,t){var n=o(e,t);return(u[n.uuid]=n).on("destroy",function(){!function(e){c.mediaCapturer&&c.mediaCapturer.id===e.id?c.mediaCapturer=null:u.hasOwnProperty(e.id)&&delete u[e.id],e.OTHelpers&&e.OTHelpers.remove()}(n)}),n},c.createMediaPeer=function(e,t){void 0===e&&(e={});var n=c.create(r(e||{},{mimeType:i.mimeType,isVisible:!0,windowless:!0}),function(e){e?t.call(void 0,e):(u[n.id]=n,t.call(void 0,void 0,n))});a(n)},c.createMediaCapturer=function(t){c.mediaCapturer?t.call(void 0,void 0,c.mediaCapturer):(c.mediaCapturer=c.create({mimeType:i.mimeType,isVisible:!1,windowless:!1},function(e){t.call(void 0,e,c.mediaCapturer)}),s(c.mediaCapturer))},e.exports=c},function(e,t,n){"use strict";(function(i){e.exports=function(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new i(function(i,o){r.apply(void 0,t.concat([function(e){if(e)o(e);else{for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];1!==n.length?i(n):i(n[0])}}]))})}}}).call(this,n(1))},function(e,t,n){var r=n(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return r.resolve(e).then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){return r.reject(e)})})}},function(e,n){"use strict";n.adaptIceServers=function(e){return e.map(function(e){return{url:e.url,urls:e.urls||[e.url],username:e.username,credential:e.credential}})},n.parseIceServers=function(e){var t;try{t=JSON.parse(e.data).content.iceServers}catch(e){return[]}return n.adaptIceServers(t)}},function(e,t,i){"use strict";(function(be){var ye=i(156),Ee=i(49),_e=i(6),Ce=i(45),Te=i(244),Se=i(151),we=i(273),Oe=i(15),Ie=i(5),Ae=i(242),xe=i(157),Re=i(58);e.exports=function(e){void 0===e&&(e={});function ee(){}var t,n,r=e.hasValidPeerConnection||i(599),te=e.applySdpTransform||i(158),ne=e.createPeerConnection||i(600),re=e.env||i(4),ie=e.sdpTransformDefaults||i(602),oe=e.getStatsAdapter||i(276),ae=e.IceCandidateProcessor||i(607),se=e.logging||i(0),ce=e.offerProcessor||i(609),ue=e.PeerConnectionChannels||i(611),de=e.subscribeProcessor||i(613),le=e.Qos||i(278).default,fe=e.global||window,pe=e.debounce||i(616),he=e.needsToSwapH264Profiles||i(618).once,ve="IE"===re.name?be.resolve(!0):r(fe.RTCPeerConnection),ge=e.NativeRTCIceCandidate||((t=i(7)).isInstalled()&&t.RTCIceCandidate||fe.RTCIceCandidate),me=e.NativeRTCSessionDescription||((n=i(7)).isInstalled()&&n.RTCSessionDescription||fe.RTCSessionDescription);return function(e){void 0===e&&(e={});var o,r=!1,t=e,n=t.iceConfig,i=void 0===n?{servers:[]}:n,s=t.isPublisher,a=t.logAnalyticsEvent,c=void 0===a?ee:a,u=t.offerOverrides,d=t.answerOverrides,l=t.sdpTransformOptions,f=t.sendMessage,p=t.p2p,h=t.codecFlags,v=!1,g=!1,m=!1,b=he(),y=0,E=!1,_=xe();function C(e,t){if(!r&&-1<["candidate","offer","answer","pranswer"].indexOf(e)){var n="candidate"===e?t.candidate:t.sdp;r=-1!==n.indexOf("typ relay")}f(e,t)}var T=Ee();c("createPeerConnection","Attempt");var S={};S.id=Oe();var w=se("PeerConnection:"+S.id);w.debug("construct",{id:S.id,options:e});function O(e){return"relay"===i.transportPolicy&&null!=e&&-1===e.candidate.indexOf("typ relay")}var I,A,x,R,N,k,D=Se({},ie,l),M=we(e,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage","sdpTransformOptions"]),P=[],L=(N=M.overrideSimulcastEnabled||!1,{get:function(){return N},set:function(e){var t=Boolean(e)&&1<M.capableSimulcastStreams;t!==N&&void 0===M.overrideSimulcastEnabled&&(N=t,S.generateOffer())}}),j=(k=!1,{get:function(){return k},set:function(e){var t=Boolean(e);t!==k&&((k=t)&&!S.iceConnectionStateIsConnected()?S.generateOffer():w.debug("iceRestart is going to wait until we disconnect and then restart ice"))}}),U=oe(),F={clean:function(){delete this.promise,delete this.resolve,delete this.reject}};F.promise=new be(function(e,t){F.resolve=e,F.reject=t});var B=new ae,V="new";Object.defineProperty(S,"signalingState",{get:function(){return I.signalingState},set:function(e){return I.signalingState=e}}),Ie(S),S.once("iceConnected",function(){var e={pcc:parseInt(Ee()-T,10),hasRelayCandidates:r,proxyInfo:""};I&&I.proxyInfo&&(e.proxyInfo=I.proxyInfo),c("createPeerConnection","Success",e)}),"IE"!==re.name&&F.resolve();function z(e,t){if(w.debug("internalCreatePeerConnection: called"),I)return w.debug("internalCreatePeerConnection: resolving synchronously"),void e.call(null,null,I);if(P.push(e),!(1<P.length)){var n={optional:[{DtlsSrtpKeyAgreement:!0}]};if(w.debug('Creating peer connection config "'+JSON.stringify(M)+'".'),0===i.servers.length&&(w.error("No ice servers present"),c("Error","noIceServers")),"relay"===i.transportPolicy){var r=function(e){return e&&0===e.indexOf("turn")};i.servers=i.servers.map(function(e){var t=Ce(e);return Array.isArray(t.urls)||(t.urls=[t.urls]),t.urls=t.urls.filter(r),0===t.urls.length?void 0:t}).filter(function(e){return void 0!==e})}M.iceTransportPolicy=i.transportPolicy,M.iceServers=i.servers,ve.then(function(e){if(!e)throw w.error("createPeerConnection: Invalid RTCPeerConnection object"),new Error("Failed to create valid RTCPeerConnection object");return ne({window:fe,config:M,constraints:n,webRTCStream:t})}).then(function(e){return Y(null,e)},function(e){return Y(e)})}}function W(){B&&(B.destroy(),B=null),P=[],$.stopCollecting(),_.releaseAll(),F.clean(),null!==I&&(I.destroy&&I.destroy(),I=null,S.trigger("close")),S.off()}function H(){var e;if(I.getRemoteStreams)e=I.getRemoteStreams();else{if(!I.remoteStreams)throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");e=I.remoteStreams}return Array.prototype.slice.call(e)}function G(e,t,n){m=!1,Q({reason:"PeerConnection.offerProcessor "+e+": "+t,prefix:n})}var Y=function(e,t){if(e)return Q({reason:"Failed to create PeerConnection, exception: "+e,prefix:"NewPeerConnection"}),void(P=[]);w.debug("OT attachEventsToPeerConnection"),I=t,B&&B.setPeerConnection(t),A=new ue(I),M.channels&&A.addMany(M.channels);function n(e){F.resolve(),O(e.candidate)?w.debug("Ignore candidate",e.candidate.candidate):o(e)}function r(e){I?(w.debug("iceconnectionstatechange",I.iceConnectionState),"connected"===I.iceConnectionState?S.emit("iceConnected"):"completed"===I.iceConnectionState&&"Edge"===re.name&&setTimeout(function(){return $.startCollecting(I)},1e3)):w.debug("iceconnectionstatechange on peerConnection that no longer exists",S);var t=e.target.iceConnectionState;S.trigger("iceConnectionStateChange",t),"disconnected"!==a&&"failed"===t?Q({reason:"The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",prefix:"ICEWorkflow"}):c("attachEventsToPeerConnection","iceconnectionstatechange",t),"disconnected"===t&&j.get()&&(w.debug("Restarting ice!"),S.generateOffer()),a=t}function i(){c("peerConnection:negotiationNeeded","Event"),s&&S.generateOffer()}var o=function(e){var t=e.sendMessage,n=e.logging,r={};return function(e){e.candidate?(r[e.candidate.sdpMid]=e.candidate.sdpMLineIndex,t("candidate",{candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid||"",sdpMLineIndex:e.candidate.sdpMLineIndex||0})):n.debug("IceCandidateForwarder: No more ICE candidates.")}}({sendMessage:C,logging:w}),a=I.iceConnectionState;I.onaddstream=ee,I.addEventListener("icecandidate",n),I.addEventListener("addstream",K),I.addEventListener("removestream",J),I.addEventListener("signalingstatechange",Z),I.addEventListener("negotiationneeded",i),I.addEventListener("iceconnectionstatechange",r),_.add(function(){I&&(I.onaddstream=null,I.removeEventListener("icecandidate",n),I.removeEventListener("addstream",K),I.removeEventListener("removestream",J),I.removeEventListener("signalingstatechange",Z),I.removeEventListener("negotiationneeded",i),I.removeEventListener("iceconnectionstatechange",r))}),q(null)},q=function(){for(;P.length;)P.shift().call(null)},Z=function(e){var t=e.target.signalingState;if(S.emit("signalingStateChange",t),"stable"===t&&S.emit("signalingStateStable"),t&&t!==V)switch(V=t,w.debug("stateChange: "+V),V){case"closed":W()}},K=function(e){c("createPeerConnection","StreamAdded"),S.trigger("streamAdded",e.stream)},J=function(e){c("peerConnection:streamRemoved","Event"),S.trigger("streamRemoved",e.stream)};S.generateOffer=pe(function(){v?g=!0:function(){v=!0,c("peerConnection:processSubscribe","Event"),w.debug("processSubscribe: Sending offer to subscriber.");var e=L.get()?M.capableSimulcastStreams:1;z(function(){de({peerConnection:I,NativeRTCSessionDescription:me,sdpTransforms:D,simulcastStreams:e,offerOverrides:u,offerConstraints:{iceRestart:j.get()},replaceBaselineProfile:b}).then(function(e){w.debug("processSubscribe: got offer, waiting for _readyToSendOffer"),x=e,F.promise.then(function(){w.debug("processSubscribe: sending offer"),C("offer",x)})},function(e){Q({reason:"subscribeProcessor "+e.message+": "+e.reason,prefix:e.prefix})}),j.set(!1)})}()},100);var Q=function(e){var t=e.reason,n=e.prefix;w.error(t,"in state",I?{connectionState:I.connectionState,iceConnectionState:I.iceConnectionState,iceGatheringState:I.iceGatheringState,signalingState:I.signalingState}:"(none)"),S.trigger("error",{reason:t,prefix:n})};function X(e){this.track=e}S.addTrack=function(t,n){var e=new be(function(t,n){z(function(e){if(e)return n(e);t()})}).then(function(){if(I.addTrack)return I.addTrack(t,n);var e=I.getLocalStreams()[0];if(void 0===e)throw new Error("PeerConnection has no existing streams, cannot addTrack");e.addTrack(t),S.generateOffer()}).then(function(){return new be(function(e){S.once("signalingStateStable",function(){e()})})});return ye(e,15e3,"Renegotiation timed out")},S.removeTrack=function(e){var t=be.resolve().then(function(){return e instanceof X?(I.getLocalStreams()[0].removeTrack(e.track),void S.generateOffer()):I.removeTrack(e)}).then(function(){return new be(function(e){S.once("signalingStateStable",function(){e()})})});return ye(t,15e3,"Renegotiation timed out")},S.addLocalStream=function(r){return new be(function(t,n){z(function(e){if(e)n(e);else{try{I.addStream(r)}catch(e){return void n(e)}t()}},r)})},S.getLocalStreams=function(){return I.getLocalStreams()},S.getSenders=function(){return I.getSenders?I.getSenders():I.getLocalStreams()[0].getTracks().map(function(e){return new X(e)})},S.disconnect=function(){B&&(B.destroy(),B=null),I&&I.signalingState&&"closed"!==I.signalingState.toLowerCase()&&(I.close(),"Firefox"===re.name&&setTimeout(W))},S.iceRestart=function(){return j.set(!0)},S.processMessage=function(e,t){switch(w.debug("processMessage: Received "+e+" from "+t.fromAddress,t),w.debug(t),e){case"generateoffer":t.content&&void 0!==t.content.simulcastEnabled&&L.set(t.content.simulcastEnabled),S.generateOffer(),r();break;case"offer":!function t(e){if(m)o=e;else{m=!0,c("peerConnection:processOffer","Event");var n=new me({type:"offer",sdp:e.content.sdp}),r=function(e){m=!1,B&&B.process(),C("answer",e),"Edge"!==re.name&&$.startCollecting(I,s),o&&(t(o),o=null)},i=function(e){return S.trigger("remoteVideoSupported",e)};z(function(){ce(I,fe.RTCPeerConnection,fe.RTCSessionDescription,me,D,n,h,p,r,G,i,b)})}}(t),r();break;case"answer":case"pranswer":!function(e){c("peerConnection:processAnswer","Event");function t(e){Q({reason:"Error while setting RemoteDescription "+e,prefix:"SetRemoteDescription"})}e.content.sdp?(R=new me({type:"answer",sdp:te(D,"remote","answer",_e({replaceBaselineProfile:b},d),e.content.sdp).local}),I.setRemoteDescription(R).then(function(){w.debug("processAnswer: setRemoteDescription Success"),B&&B.process()}).catch(t),v=!1,g&&(g=!1,S.generateOffer()),"Edge"!==re.name&&$.startCollecting(I,s)):t("Weird answer message, no SDP.")}(t);break;case"candidate":var n=new ge(t.content);if(O(n))return w.debug("Ignore candidate",n.candidate),S;B&&B.addIceCandidate(n).catch(function(e){w.warn("Error while adding ICE candidate: "+JSON.stringify(n)+": "+e.toString())});break;default:w.debug("processMessage: Received an unexpected message of type "+e+" from "+t.fromAddress+": "+JSON.stringify(t))}function r(){y+=1,$.handleOfferMessageReceived(),1<y&&(c("Renegotiation","Attempt"),E=!0)}return S},S.remoteStreams=function(){return I?H():[]},S.remoteTracks=function(){return I?I.getReceivers?Array.prototype.slice.apply(I.getReceivers()).map(function(e){return e.track}):Array.prototype.concat.apply([],H().map(function(e){return e.getTracks()})):[]},S.remoteDescription=function(){return I.remoteDescription},S.getStats=function(e){I?U(I,e):e(new Ae("Cannot call getStats before there is a connection.","NotConnectedError",{code:1015}))};S.getDataChannel=function(e,t,n){I?function e(t,n,r,i){var o,a=A.get(n,r);if(!a){if(0<t)return void setTimeout(e.bind(null,t-1,n,r,i),200);o=new Ae("A channel with that label and options could not be found. Label:"+n+". Options: "+JSON.stringify(r))}i(o,a)}(100,e,t,n):n(new Ae("Cannot create a DataChannel before there is a connection."))},S.iceConnectionStateIsConnected=function(){return I&&-1<["connected","completed"].indexOf(I.iceConnectionState)},S.findAndReplaceTrack=function(t,n){return be.resolve().then(function(){var e=I.getSenders().filter(function(e){return e.track===t})[0];if(!e)return be.resolve();if("function"!=typeof e.replaceTrack)throw new Error("Sender does not support replaceTrack");return e.replaceTrack(n)})},S.hasRelayCandidates=function(){return r},S.getNegotiatedCodecs=function(){if(!I.localDescription||!I.remoteDescription)return null;function e(e){return Te(Re.getCodecs(I.localDescription.sdp,e),Re.getCodecs(I.remoteDescription.sdp,e))}return{audio:e("audio"),video:e("video")}},S.on("signalingStateStable",function(){E&&(E=!1,c("Renegotiation","Success",S.getNegotiatedCodecs()))}),S.on("error",function(e){var t=e.prefix;E&&-1!==["CreateOffer","SetRemoteDescription"].indexOf(t)&&(E=!1,c("Renegotiation","Failure"))}),S.on("close",function(){E&&(E=!1,c("Renegotiation","Cancel"))});var $=new le;return $.on("stats",function(e){e.dataChannels=A.sampleQos(),S.trigger("qos",{parsedStats:e,simulcastEnabled:L.get()})}),S}}}).call(this,i(1))},function(e){"use strict";e.exports=function(e){function t(){r&&(e(),n=window.requestAnimationFrame(t))}var n=null,r=!1;this.start=function(){r||(r=!0,window.requestAnimationFrame(t))},this.stop=function(){window.cancelAnimationFrame(n),r=!1}}},function(e,t,n){"use strict";var i=n(6);e.exports=function(t,n){var r={};Object.keys(n).forEach(function(e){r[e]=function(t,n,r){return n&&!r?function(){return n.call(t)}:n&&r?function(e){return void 0!==e&&r.call(t,e),n.call(t)}:function(e){void 0!==e&&r.call(t,e)}}(t,n[e].get,n[e].set)}),i(t,r)}},function(e,t,o){"use strict";(function(i){e.exports=function(e){void 0===e&&(e={});var t=e.getNativeEnumerateDevices||o(286)(),n={},r={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audioInput:"audioInput",videoInput:"videoInput"};return n.hasEnumerateDevicesCapability=function(){return"function"==typeof t()},n.getMediaDevices=function(){return n.hasEnumerateDevicesCapability()?t()().then(function(e){return e.map(function(e){return{deviceId:e.deviceId||e.id,label:e.label,kind:r[e.kind]}}).filter(function(e){return"audioInput"===e.kind||"videoInput"===e.kind})}):i.reject(new Error("This browser does not support enumerateDevices APIs"))},n.shouldAskForDevices=function(){return n.hasEnumerateDevicesCapability()?n.getMediaDevices().then(function(e){if(0===e.length)return{video:!0,audio:!0};var t=e.filter(function(e){return"audioInput"===e.kind}),n=e.filter(function(e){return"videoInput"===e.kind});return{video:0<n.length,audio:0<t.length,videoDevices:n,audioDevices:t}}).catch(function(){return{video:!0,audio:!0}}):i.resolve({video:!0,audio:!0})},n}}).call(this,o(1))},function(e,t,n){"use strict";var c=n(292),u=n(638),d=n(7);e.exports=function(e){var t=void 0===e?{}:e,n=t.NativeVideoElementWrapper,r=void 0===n?c():n,i=t.PluginVideoElementWrapper,o=void 0===i?u:i,a=t.OTPlugin,s=(void 0===a?d:a).isInstalled()?o:r;return function(e){var t=void 0===e?{}:e,n=t.fallbackText,r=void 0===n?"Sorry, Web RTC is not available in your browser":n,i=t.fitMode,o=t.muted,a=t._inject;return new s({fallbackText:r,fitMode:i,muted:o,defaultAudioVolume:50,_inject:a})}}},function(e){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},function(e,t,n){var r=n(41)(n(14),"Map");e.exports=r},function(e,t,n){var r=n(351),i=n(358),o=n(360),a=n(361),s=n(362);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e){e.exports=function(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=9007199254740991}},function(e,a,s){(function(e){var t=s(173),n=a&&!a.nodeType&&a,r=n&&"object"==typeof e&&e&&!e.nodeType&&e,i=r&&r.exports===n&&t.process,o=function(){try{var e=r&&r.require&&r.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o}).call(this,s(84)(e))},function(e,t,n){var r=n(66),i=n(367),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(372),i=n(180),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),function(e){return o.call(t,e)}))}:i;e.exports=s},function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(178)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(187);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(s,e,c){"use strict";(function(e){var n=c(20),r=c(388),t={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o,a={adapter:("undefined"!=typeof XMLHttpRequest?o=c(193):void 0!==e&&(o=c(193)),o),transformRequest:[function(e,t){return r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],function(e){a.headers[e]={}}),n.forEach(["post","put","patch"],function(e){a.headers[e]=n.merge(t)}),s.exports=a}).call(this,c(68))},function(e,t,n){var r=n(87)("pick",n(71));r.placeholder=n(69),e.exports=r},function(e,t,n){var v=n(197),g=n(407),m=n(408),b=n(199),y=n(424),E=n(203),_=n(425),C=n(206),T=n(208),S=n(91),w=Math.max;e.exports=function(e,t,n,r,i,o,a,s){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),a=void 0===a?a:w(S(a),0),s=void 0===s?s:S(s),u-=i?i.length:0,64&t){var d=r,l=i;r=i=void 0}var f=c?void 0:E(e),p=[e,t,n,r,i,d,l,o,a,s];if(f&&_(p,f),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=void 0===p[9]?c?0:e.length:w(p[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)h=8==t||16==t?m(e,t,s):32!=t&&33!=t||i.length?b.apply(void 0,p):y(e,t,n,r);else var h=g(e,t,n);return T((f?v:C)(h,p),e,t)}},function(e){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(86),i=n(128);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}(o.prototype=r(i.prototype)).constructor=o,e.exports=o},function(e){e.exports=function(){}},function(e,t,n){var r=n(417),i=n(207)(r);e.exports=i},function(e){var s="__lodash_placeholder__";e.exports=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}},function(e,t,n){var r=n(30),i=n(121),o=n(19),a=Function.prototype,s=Object.prototype,c=a.toString,u=s.hasOwnProperty,d=c.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==d}},function(e,t,n){var a=n(433),s=n(19);e.exports=function e(t,n,r,i,o){return t===n||(null==t||null==n||!s(t)&&!s(n)?t!=t&&n!=n:a(t,n,r,i,e,o))}},function(e,t,n){var r=n(10),i=n(70),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},function(e,t,n){var r=n(114),s="Expected a function";function c(i,o){if("function"!=typeof i||null!=o&&"function"!=typeof o)throw new TypeError(s);var a=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=a.cache;if(n.has(t))return n.get(t);var r=i.apply(this,e);return a.cache=n.set(t,r)||n,r};return a.cache=new(c.Cache||r),a}c.Cache=r,e.exports=c},function(e,t,n){var r=n(448),i=n(220),o=n(129);e.exports=function(e){return o(i(e,void 0,r),e+"")}},function(e){"use strict";e.exports={error:{priority:1,method:"error"},warn:{priority:2,method:"warn"},info:{priority:3,method:"info"},log:{priority:4,method:"log"},debug:{priority:5,method:"debug"},spam:{priority:6,method:"log"}}},function(e,t,n){"use strict";var o=n(222);e.exports={prependProxyToUrlIfNeeded:function(e,t){if(!t)return e;var n=o.parse(t),r=o.parse(e);if(!n.protocol||!r.protocol)return e;var i=n.protocol.match(/^https/);return(r.protocol.match(/^ws/i)?"ws":"http")+(i?"s":"")+"://"+function(e){return(""+e.host+e.pathname).replace(/\/$/,"")}(n)+"/"+(""+r.host+r.pathname+(r.search||""))}}},function(e,t,n){var i=n(52),o=n(22),a=n(64),s=n(8);e.exports=function(e,t,n){if(!s(n))return!1;var r=typeof t;return!!("number"==r?o(n)&&a(t,n.length):"string"==r&&t in n)&&i(n[t],e)}},function(e,t,n){"use strict";e.exports=n(228)()?Object.setPrototypeOf:n(229)},function(e,t,n){"use strict";e.exports=n(477)()?Object.assign:n(478)},function(e,t,n){var r=n(73),l=n(52),f=n(138),p=n(67),h=Object.prototype,v=h.hasOwnProperty,i=r(function(e,t){e=Object(e);var n=-1,r=t.length,i=2<r?t[2]:void 0;for(i&&f(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=p(o),s=-1,c=a.length;++s<c;){var u=a[s],d=e[u];(void 0===d||l(d,h[u])&&!v.call(e,u))&&(e[u]=o[u])}return e});e.exports=i},function(e,t,n){var a=n(243),r="undefined"!=typeof window?window:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{};function i(e){return void 0===e}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(){if(!("fetch"in r))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function d(e,t){var n,r;if(i(e.length))for(n in e)f(e,n)&&t.call(null,n,e[n]);else if(r=e.length)for(n=0;n<r;n++)t.call(null,n,e[n])}function l(e,t){if("number"!=typeof t)throw new Error("2nd argument to `truncate` function should be a number");return"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+""}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e){for(var t,n=[],r=0,i=e.length;r<i;r++)c(t=e[r])?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function h(e){var t,n,r,i,o,a=[];if(!e||!e.tagName)return"";if(a.push(e.tagName.toLowerCase()),e.id&&a.push("#"+e.id),(t=e.className)&&c(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)a.push("."+n[o]);var s=["type","name","title","alt"];for(o=0;o<s.length;o++)r=s[o],(i=e.getAttribute(r))&&a.push("["+r+'="'+i+'"]');return a.join("")}function v(e,t){return!!(!!e^!!t)}function g(e,t){if(v(e,t))return!1;var n,r,i=e.frames,o=t.frames;if(void 0===i||void 0===o)return!1;if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(n=i[a],r=o[a],n.filename!==r.filename||n.lineno!==r.lineno||n.colno!==r.colno||n.function!==r.function)return!1;return!0}var m=3,b=51200;function y(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function E(e){if("string"==typeof e){return l(e,40)}if("number"==typeof e||"boolean"==typeof e||void 0===e)return e;var t=Object.prototype.toString.call(e);return"[object Object]"===t?"[Object]":"[object Array]"===t?"[Array]":"[object Function]"===t?e.name?"[Function: "+e.name+"]":"[Function]":e}e.exports={isObject:function(e){return"object"==typeof e&&null!==e},isError:function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},isErrorEvent:function(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)},isDOMError:function(e){return"[object DOMError]"===Object.prototype.toString.call(e)},isDOMException:function(e){return"[object DOMException]"===Object.prototype.toString.call(e)},isUndefined:i,isFunction:function(e){return"function"==typeof e},isPlainObject:s,isString:c,isArray:u,isEmptyObject:function(e){if(!s(e))return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},supportsErrorEvent:function(){try{return new ErrorEvent(""),!0}catch(e){return!1}},supportsDOMError:function(){try{return new DOMError(""),!0}catch(e){return!1}},supportsDOMException:function(){try{return new DOMException(""),!0}catch(e){return!1}},supportsFetch:o,supportsReferrerPolicy:function(){if(!o())return!1;try{return new Request("pickleRick",{referrerPolicy:"origin"}),!0}catch(e){return!1}},supportsPromiseRejectionEvent:function(){return"function"==typeof PromiseRejectionEvent},wrappedCallback:function(r){return function(e,t){var n=r(e)||e;return t&&t(n)||n}},each:d,objectMerge:function(n,e){return e&&d(e,function(e,t){n[e]=t}),n},truncate:l,objectFrozen:function(e){return!!Object.isFrozen&&Object.isFrozen(e)},hasKey:f,joinRegExp:p,urlencode:function(e){var n=[];return d(e,function(e,t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}),n.join("&")},uuid4:function(){var e=r.crypto||r.msCrypto;if(i(e)||!e.getRandomValues)return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});var t=new Uint16Array(8);function n(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t}return e.getRandomValues(t),t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768,n(t[0])+n(t[1])+n(t[2])+n(t[3])+n(t[4])+n(t[5])+n(t[6])+n(t[7])},htmlTreeAsString:function(e){for(var t,n=[],r=0,i=0,o=" > ".length;e&&r++<5&&!("html"===(t=h(e))||1<r&&80<=i+n.length*o+t.length);)n.push(t),i+=t.length,e=e.parentNode;return n.reverse().join(" > ")},htmlElementAsString:h,isSameException:function(e,t){return!v(e,t)&&(e=e.values[0],t=t.values[0],e.type===t.type&&e.value===t.value&&(!function(e,t){return i(e)&&i(t)}(e.stacktrace,t.stacktrace)&&g(e.stacktrace,t.stacktrace)))},isSameStacktrace:g,parseUrl:function(e){if("string"!=typeof e)return{};var t=e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),n=t[6]||"",r=t[8]||"";return{protocol:t[2],host:t[4],path:t[5],relative:t[5]+n+r}},fill:function(e,t,n,r){if(null!=e){var i=e[t];e[t]=n(i),e[t].__raven__=!0,e[t].__orig__=i,r&&r.push([e,t,i])}},safeJoin:function(e,t){if(!u(e))return"";for(var n=[],r=0;r<e.length;r++)try{n.push(String(e[r]))}catch(e){n.push("[value cannot be serialized]")}return n.join(t)},serializeException:function e(t,n,r){if(!s(t))return t;r="number"!=typeof(n="number"!=typeof n?m:n)?b:r;var i=function n(r,i){return 0===i?E(r):s(r)?Object.keys(r).reduce(function(e,t){return e[t]=n(r[t],i-1),e},{}):Array.isArray(r)?r.map(function(e){return n(e,i-1)}):E(r)}(t,n);return y(a(i))>r?e(t,n-1):i},serializeKeysForMessage:function(e,t){if("number"==typeof e||"string"==typeof e)return e.toString();if(!Array.isArray(e))return"";if(0===(e=e.filter(function(e){return"string"==typeof e})).length)return"[object has no keys]";if(t="number"!=typeof t?40:t,e[0].length>=t)return e[0];for(var n=e.length;0<n;n--){var r=e.slice(0,n).join(", ");if(!(r.length>t))return n===e.length?r:r+""}return""},sanitize:function(t,e){if(!u(e)||u(e)&&0===e.length)return t;var n,i=p(e),o="********";try{n=JSON.parse(a(t))}catch(e){return t}return function n(r){return u(r)?r.map(function(e){return n(e)}):s(r)?Object.keys(r).reduce(function(e,t){return i.test(t)?e[t]=o:e[t]=n(r[t]),e},{}):r}(n)}}},function(e,t,n){"use strict";var r=n(0)("Event"),i=n(6),o=n(244);e.exports=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n={}),this.type=e,this.cancelable=t,this._defaultPrevented=!1;var r=o(Object.keys(this),Object.keys(n));if(0<r.length)throw new Error("Cannot used reserved property names: "+r.join(","));i(this,n)}var t=e.prototype;return t.preventDefault=function(){this.cancelable?this._defaultPrevented=!0:r.warn("Event.preventDefault :: Trying to preventDefault on an event that isn't cancelable")},t.isDefaultPrevented=function(){return this._defaultPrevented},e}()},function(e){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(module,exports,__webpack_require__){"use strict";var extendES5Native=__webpack_require__(524),webrtcAdapter=__webpack_require__(525),logging=__webpack_require__(0)("createWindowMock"),env=__webpack_require__(4),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"requestAnimationFrame",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCSctpTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"},{key:"RTCTrackEvent",type:"class"},{key:"RTCTransceiver",type:"class"},{key:"RTCDtmfSender",type:"class"},{key:"RTCDTMFSender",type:"class"},{key:"MediaStreamTrackEvent",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=function(e,t){if("function"!=typeof t)return logging.warn("Non-function passed into bindWithStaticProperties()"),t;var n=t.bind(e);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},extendParentClass=function extendParentClass(ParentClass){try{var ChildClass=eval('\n      "use strict"; // Chrome<49 requires strict mode\n\n      const getOwnProperties = (target) => {\n        const properties = {};\n        Object.getOwnPropertyNames(target).forEach((key) => {\n          properties[key] = Object.getOwnPropertyDescriptor(target, key);\n        });\n        return properties;\n      };\n\n      class ChildClass extends ParentClass {\n        constructor(...args) {\n          super(...args);\n          try {\n            this.__proto__ = ChildClass.prototype;\n          } catch (e) {}\n        }\n      };\n\n      Object.defineProperties(ChildClass.prototype, getOwnProperties(ParentClass.prototype));\n      Object.keys(ParentClass)\n        .forEach((staticKey) => {\n          ChildClass[staticKey] = ParentClass[staticKey];\n        });\n\n      ChildClass; // Ensure the final statement is returned in FF\n    ');if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(e){}return null},canUseES6Class=function(e){var t=e.RTCPeerConnection||e.webkitRTCPeerConnection||e.mozRTCPeerConnection,n=extendParentClass(t);if(n)try{n.prototype.foo="bar";var r=new n({iceServers:[]}),i="bar"===r.foo;try{r.close()}catch(e){}return i}catch(e){}return!1},extendClass=function(e,t,n){if("function"!=typeof e)return logging.warn("Non-function passed into extendClass()"),e;var r=n&&extendParentClass(e);return r||(r=extendES5Native(e)),r},getCopyProperties=function(a){return function(i,o,e){e.forEach(function(e){var t=e.key,n=e.type,r=o[t];if(void 0!==r){switch(n){case"function":r=bindWithStaticProperties(o,r);break;case"class":r=extendClass(r,t,a);break;case"string":case"object":break;default:throw new Error("Invalid type of window key: "+n)}i[t]=r}})}},cloneWindow=function(e){var t={},n=getCopyProperties(canUseES6Class(e));return n(t,e,windowKeys),void 0!==e.navigator&&(t.navigator={},n(t.navigator,e.navigator,navigatorKeys),void 0!==e.navigator.mediaDevices&&(t.navigator.mediaDevices={},n(t.navigator.mediaDevices,e.navigator.mediaDevices,mediaDevicesKeys))),t};module.exports=function(e){if(void 0!==e.adapter||"Edge"===env.name||"IE"===env.name)return e;var t=cloneWindow(e);return webrtcAdapter({window:t}),t}},function(e){"use strict";e.exports=function(){var n=null;this.transform=function(e){n=null===n||n<=e?e:.3*e+.7*n;var t=Math.log(n)/Math.LN10/1.5+1;return Math.min(Math.max(t,0),1)}}},function(e,t,n){"use strict";function a(t){return Object.keys(t).map(function(e){return t[e]})}var s=n(5),c=n(6);e.exports=function(n){function r(e,t){c(t,{parent:i}),t.appendTo(n.parent),o[e]=t,i[e]=t}var i=this,o={};n.parent&&(s(this),this.destroy=function(){i.off(),i.hideWhileLoading(),a(o).forEach(function(e){return e.destroy()})},this.showAfterLoading=function(){a(o).forEach(function(e){return e.showAfterLoading()})},this.hideWhileLoading=function(){a(o).forEach(function(e){return e.hideWhileLoading()})},this.set=function(t,e){return"string"==typeof t&&e?r(t,e):Object.keys(t).forEach(function(e){r(e,t[e])}),i})}},function(e,t,n){"use strict";var r=n(2)(n(11));e.exports=function(){function e(e){(0,r.default)(this,"_analyser",null),(0,r.default)(this,"_timeDomainData",null),(0,r.default)(this,"_sourceNode",null),this._audioContext=e}var t=e.prototype;return t._initAudioAnalyser=function(e){this._analyser=this._audioContext.createAnalyser(),this._sourceNode=this._audioContext.createMediaStreamSource(e),this._sourceNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)},t.webRTCStream=function(e){this._sourceNode&&this._sourceNode.disconnect(this._analyser),"suspended"===this._audioContext.state&&this._audioContext.resume(),this._initAudioAnalyser(e)},t.destroy=function(){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._timeDomainData=null},t.sample=function(e){if("function"==typeof e)throw new Error("sample no longer takes a callback");if(this._analyser&&this._timeDomainData){this._analyser.getByteTimeDomainData(this._timeDomainData);for(var t=0,n=this._timeDomainData.length-1;0<=n;n-=1)t=Math.max(t,Math.abs(this._timeDomainData[n]-128));return t/128}return null},e}()},function(e,t,n){"use strict";var o=n(0)("EnvironmentLoader"),a=n(7),s=n(259),c=n(26),u=n(5),d=n(21)();e.exports=new function(){var n=this;u(n);var t=!a.isSupported()||a.isReady();function r(){return s.isDomLoaded()&&!s.isDomUnloaded()&&t}function i(){r()&&n.dispatchEvent(new d.EnvLoadedEvent(c.ENV_LOADED))}function e(){n.dispatchEvent(new d.EnvLoadedEvent(c.ENV_UNLOADED))}s.whenLoaded.then(function(){s.whenUnloaded.then(e),i()}),a.isSupported()&&a.ready(function(e){t=!0,e&&o.info("OTPlugin failed to load or was not installed:",e),i()}),this.onLoad=function(e,t){r()?e.call(t):n.on(c.ENV_LOADED,e,t)},this.onUnload=function(e,t){this.isUnloaded()?e.call(t):n.on(c.ENV_UNLOADED,e,t)},this.isUnloaded=function(){return s.isDomUnloaded()}}},function(t,e,n){"use strict";(function(e){t.exports=function(t){return new e(function(e){return setTimeout(e,t)})}}).call(this,n(1))},function(e,t,n){var r=n(570),i=n(226)(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){"use strict";var o=n(272),r=n(5),a=n(0)("StreamChannel"),i=n(153)();e.exports=function(e){this.id=e.id,this.type=e.type,this.active=o(e.active),this.orientation=e.orientation||i.ROTATED_NORMAL,e.frameRate&&(this.frameRate=parseFloat(e.frameRate)),e.preferredFrameRate&&(this.preferredFrameRate=parseFloat(e.preferredFrameRate)),e.preferredWidth&&(this.preferredWidth=parseInt(e.preferredWidth,10)),e.preferredHeight&&(this.preferredHeight=parseInt(e.preferredHeight,10)),this.width=parseInt(e.width,10),this.height=parseInt(e.height,10),this.source=e.source||"camera",this.fitMode=e.fitMode||"cover",r(this),this.update=function(e){var t={},n={};for(var r in e)if(e.hasOwnProperty(r)){var i=this[r];switch(r){case"active":this.active=o(e[r]);break;case"disableWarning":this.disableWarning=o(e[r]);break;case"frameRate":this.frameRate=parseFloat(e[r],10);break;case"width":case"height":this[r]=parseInt(e[r],10),t[r]=this[r],n[r]=i;break;case"orientation":this[r]=e[r],t[r]=this[r],n[r]=i;break;case"fitMode":case"source":this[r]=e[r];break;default:return a.warn("Tried to update unknown key "+r+" on "+this.type+" channel "+this.id),!1}this.trigger("update",this,r,i,this[r])}return Object.keys(t).length&&this.trigger("update",this,"videoDimensions",n,t),!0}}},function(e){"use strict";e.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},function(e,t,n){"use strict";var s=n(585),c=n(0)("StylableComponent"),u=n(586),d=n(587);e.exports=function(r,e,t,i){if(!r.trigger)throw new Error("OT.StylableComponent is dependent on the eventing mixin. Ensure that this is included in the object before StylableComponent.");i=i||function(){};var o=!1;!1===t&&(e={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},i({showControls:!(o=!0)}));var a=new u(e,function(e,t,n){n?r.trigger("styleValueChanged",e,t,n):r.trigger("styleValueChanged",e,t)});r.getStyle=function(e){return a.get(e)},r.setStyle=function(e,t,n){return o?c.warn("Calling setStyle() has no effect because theshowControls option was set to false"):("string"!=typeof e?r=e:(r={})[e]=t,r.backgroundImageURI&&(r.backgroundImageURI=s(r.backgroundImageURI)),a.setAll(r,n),i(d(r))),this;var r}}},function(e,t,n){"use strict";var r=n(37),i=n(24)(),o=n(27),a=n(72),s=n(252),c=n(149),u=n(57).once,d=n(589),l=n(7),f=n(3),p=n(0)("systemRequirements"),h=n(590),v=n(253),g=i.onlyLocal(),m=new o;var b=r(function(){m.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:a.value,payload:{userAgent:f.env.userAgent}})}),y=!1;e.exports={check:function(){p.debug("OT.checkSystemRequirements()");var e=Number(d&&u()||l.isInstalled());return e||b(),e},upgrade:function(e){var t=void 0===e?{}:e,n=t.isSupportedButOld,r=void 0===n?f.env.name.toLowerCase()in g.minimumVersion:n,i=t.userAgent,o=void 0===i?navigator.userAgent:i;c.onLoad(function(){if(l.isSupported())!function(){var e=s.Plugin.promptToInstall();e.on("download",function(){window.location=l.pathToInstaller()}),e.on("refresh",function(){window.location.reload()})}();else if(!y){var e,t=new v(h);y=!0,t.on("close",function(){y=!1}),t.open(),e=o.match(/(iPad|iPhone|iPod|android|webOS)/i)?(r?"supported-":"")+"mobile-browser":(r?"upgrade":"normal")+"-install",t.el("#section-"+e).style.display="block"}})}}},function(i,e,o){"use strict";(function(e){var t=o(2),r=t(o(50)),n=t(o(591)),a=o(594),s=function(n){function e(e){var t;return(t=n.call(this,e)||this).name="TimeoutError",t}return(0,r.default)(e,n),e}((0,n.default)(Error));i.exports=function(r,i,o){return new e(function(t,n){if("number"!=typeof i||i<0)throw new TypeError("Expected `ms` to be a positive number");var e=setTimeout(function(){if("function"!=typeof o){var e=o instanceof Error?o:new s("string"==typeof o?o:"Promise timed out after "+i+" milliseconds");"function"==typeof r.cancel&&r.cancel(),n(e)}else try{t(o())}catch(e){n(e)}},i);a(r.then(t,n),function(){clearTimeout(e)})})},i.exports.TimeoutError=s}).call(this,o(1))},function(e){"use strict";e.exports=function(){var r=[];return{add:function(e){r.push(e)},remove:function(e){var t=r.indexOf(e);0<=t&&r.splice(t,1)},releaseAll:function(){for(var t=[];0<r.length;){var e=r.pop();try{e()}catch(e){t.push(e)}}var n=t.length;if(0<n)throw new Error("Failed to complete "+n+" cleanup job"+(1===n?"":"s")+": "+t.map(function(e){return"<"+e+">"}).join(", "))}}}},function(e,t,n){"use strict";var d=n(0)("applySdpTransform");e.exports=function(e,t,n,r,i){var o=e[t][n],a=t+" "+n,s="sdpTransforms ("+("local offer"==a||"remote answer"==a?"publisher":"subscriber")+"): "+t+" "+n,c="local"===t?"created":"received";d.debug(s+": "+c+":\n"+i);var u=o(r,i);return u.local===i?d.debug(s+": not modified"):d.debug(s+": modified to:\n"+u.local),u}},function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e){"use strict";var n;e.exports=function(e){void 0===e&&(e={});var t=e.AudioContext||window.AudioContext||window.webkitAudioContext;return function(){if(null==(n=n||t&&new t))throw new Error("AudioContext could not be created, hardware limit reached.");return n}}},function(e,t,n){"use strict";var r=n(29);e.exports=function(){return function(e,t,n){var a=t.slice(),s=r(n);return function(n){var r=e,i=null;function t(e,t){n({message:e,newState:t,currentState:r,previousState:i})}function o(e){return function(e){return-1!==a.indexOf(e)}(e)?!!function(e,t){return s[e]&&-1!==s[e].indexOf(t)}(r,e)||(t("'"+r+"' cannot transition to '"+e+"'",e),!1):(t("'"+e+"' is not a valid state",e),!1)}this.current=r,this.set=function(e){o(e)&&(i=r,this.current=e,r=e)}}}}},function(e,t,c){"use strict";(function(h){var s=c(59);e.exports=function(e){void 0===e&&(e={});function r(){var e=s(Object.keys(f.extensionClasses),function(e){return f.extensionClasses[e].isSupportedInThisBrowser});return void 0===e?{}:{name:e,proto:f.extensionClasses[e],instance:f.extensionByKind[e]}}var t=e.chromeExtensionHelper||c(279)(),n=e.electronExtensionHelper||c(623)(),u=e.Errors||c(9),i=e.firefoxExtensionHelper||c(624),o=e.getDisplayMediaExtensionHelper||c(287),a=e.ieExtensionHelper||c(625),d=e.otError||c(16)(),l=e.OTHelpers||c(3),f={extensionByKind:{},extensionClasses:{},registerExtensionHelper:function(e,t){(f.extensionClasses[e]=t).autoRegisters&&t.isSupportedInThisBrowser&&f.registerExtension(e)},registerExtension:function(e){var t;if(null==f.extensionClasses[e])throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=(t=f.extensionClasses[e]).register.apply(t,r);f.extensionByKind[e]=o}};f.pickHelper=function(){return r()},f.checkCapability=function(t){var n={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},e=r();if(void 0!==e.name){if(n.supported=!0,n.extensionRequired=e.proto.extensionRequired?e.name:void 0,n.supportedSources={screen:e.proto.sources.screen,application:e.proto.sources.application,window:e.proto.sources.window,browser:e.proto.sources.browser},!e.instance)return n.extensionRegistered=!1,n.extensionRequired&&(n.extensionInstalled=!1),void setTimeout(t.bind(null,n));n.extensionRegistered=!!n.extensionRequired||void 0,e.instance.isInstalled(function(e){n.extensionInstalled=n.extensionRequired||"Firefox"===l.env.name?e:void 0,t(n)})}else setTimeout(t.bind(null,n))},f.registerExtensionHelper("electron",n),f.registerExtensionHelper("getDisplayMedia",o),f.registerExtensionHelper("chrome",t),f.registerExtensionHelper("firefox",i),f.registerExtensionHelper("OpenTokPlugin",a);function p(){}return f.getConstraints=function(e){var t=e.onAccessDialogOpened,o=void 0===t?p:t,n=e.onAccessDialogClosed,a=void 0===n?p:n,s=e.videoSource,c=e.constraints;return new h(function(r,i){f.checkCapability(function(e){if(e.supported)if(!1===e.extensionRegistered)i(d(u.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(e.extensionRequired&&!1===e.extensionInstalled)i(d(u.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{var n=f.pickHelper();n.proto.getConstraintsShowsPermissionUI&&o(),n.instance.getConstraints(s,c,function(e,t){n.proto.getConstraintsShowsPermissionUI&&a(),e?i(e):r(t)})}else{var t="Screen Sharing is not supported in this browser";"Chrome"===l.env.name&&73<l.env.version&&"https:"!==window.location.protocol&&(t="https:// is required for screen sharing"),i(d(u.SCREEN_SHARING_NOT_SUPPORTED,new Error(t)))}})})},f}}).call(this,c(1))},function(e){"use strict";var t="Node";"undefined"!=typeof navigator&&(t=navigator.userAgent),e.exports=function(e){return void 0===e&&(e={userAgent:t}),/iPhone|iPad/.test(e.userAgent)}},function(e,t,n){"use strict";e.exports=function(e){var t;void 0===e&&(e={});var l=e.Errors||n(9),f=e.ExceptionCodes||n(12),p=e.otError||n(16)(),h={ICEWorkflow:l.ICE_WORKFLOW_FAILED,NewPeerConnection:l.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:l.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:(t={404:l.STREAM_NOT_FOUND},t[f.STREAM_LIMIT_EXCEEDED]=l.STREAM_LIMIT_EXCEEDED,t)};return function(e,t,n,r,i){var o=(n?n+": ":"")+i+" PeerConnection with connection "+r+" failed: "+t,a=h[n]||{},s="string"==typeof a?a:a[e],c="Publisher"===i?f.UNABLE_TO_PUBLISH:f.UNABLE_TO_SUBSCRIBE;if(!s){var u=new Error(o);return u.code=c,u}var d="ICEWorkflow"===n?"Publisher"===i?f.PUBLISHER_ICE_WORKFLOW_FAILED:f.SUBSCRIBER_ICE_WORKFLOW_FAILED:s===l.STREAM_LIMIT_EXCEEDED?f.STREAM_LIMIT_EXCEEDED:c;return p(s,new Error(o),d)}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});var r=e.OTHelpers||n(3),i=(e.global||window).RTCPeerConnection;return function(t,n){"Firefox"===r.env.name&&i&&i.generateCertificate?i.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).catch(function(e){n(e)}).then(function(e){t.certificates=[e],n(void 0,t)}):setTimeout(function(){n(void 0,t)})}}},function(e,t,n){"use strict";var r=n(2),h=r(n(17)),f=r(n(18)),v=r(n(32)),R=r(n(11)),N=n(5),p=n(641),g=n(0)("WidgetView"),m=n(3),b=n(7),y=n(163),E=n(642),_=n(254),k=n(4),i=n(167),D=i.default,M=i.CancellationError,P=n(168),L=n(644),j=n(645),U=n(646),F=n(647),B=n(648),V=n(60),z=n(111);z();e.exports=function(e){var t=void 0===e?{}:e,n=t.logging,C=void 0===n?g:n,r=t.OTHelpers,T=void 0===r?m:r,i=t.OTPlugin,S=void 0===i?b:i,o=t.isiOS,w=void 0===o?y:o,a=t.iOSVersion,O=void 0===a?E:a,s=t.versionGreaterThan,I=void 0===s?_:s,c=t.VideoElementFacade,u=void 0===c?z():c,d=t.env,A=void 0===d?k:d,x=p({window:window}),l=function(){function p(e,t){var n=this,r=void 0===t?{}:t,i=r.insertDefaultUI,o=void 0===i||i,a=r.width,s=void 0===a?264:a,c=r.height,u=void 0===c?198:c,d=r.fitMode,l=void 0===d?"cover":d,f=r.mirror,p=void 0!==f&&f,h=r.insertMode,v=r.classNames,g=r.style;(0,R.default)(this,"_videoElementFacade",void 0),(0,R.default)(this,"_container",void 0),(0,R.default)(this,"_posterContainer",document.createElement("div")),(0,R.default)(this,"_widgetContainer",document.createElement("div")),(0,R.default)(this,"_loading",!0),(0,R.default)(this,"_audioOnly",!1),(0,R.default)(this,"_showPoster",void 0),(0,R.default)(this,"_poster",void 0),(0,R.default)(this,"_cancelBind",void 0),N(this),!1===/^(contain|cover)$/.test(l)&&C.warn('Invalid fit value "'+l+'" passed. Only "contain" and "cover" can be used.'),this._fitMode=l,this._insertDefaultUI=o;var m=V(this._widgetContainer);if(m.on("click",this.userGesture.bind(this)),m.on("touchstart",this.userGesture.bind(this),!!x&&{passive:!0}),this.once("destroy",function(){return m.removeAll()}),this._widgetContainer.classList.add("OT_widget-container"),this._widgetContainer.style.width="100%",!(this._widgetContainer.style.height="100%")!==o&&(this._container=F(e,h),"Safari"===A.name&&w()&&O()&&I("11.2",O())&&this._container.classList.add("OT_ForceContain"),this._container.style.width=B(s),this._container.style.height=B(u),this._container.style.overflow="hidden",U(this._container),p&&T.addClass(this._container,"OT_mirrored"),v&&v.trim().split(/\s+/).forEach(function(e){return n._container.classList.add(e)}),this._container.classList.add("OT_loading"),this._container.classList.add("OT_fit-mode-"+l),this._container.appendChild(this._widgetContainer),!S.isInstalled())){var b=T(this._container).observeSize(function(){return U(n._container)})[0],y=T.observeNodeOrChildNodeRemoval(this._container,function(e){n._videoElementFacade&&e.some(function(e){return e===n._widgetContainer||e===n._videoElementFacade.domElement()})&&n.destroyVideo()});this.once("destroy",function(){C.debug("disconnecting observers"),b.disconnect(),y.disconnect()})}this._posterContainer.classList.add("OT_video-poster"),this._widgetContainer.appendChild(this._posterContainer);var E=document.createElement("div");E.classList.add("OT_video-loading");var _=document.createElement("div");_.classList.add("OT_video-loading-spinner"),E.appendChild(_),this._widgetContainer.appendChild(E),g&&g.backgroundImageURI&&this.setBackgroundImageURI(g.backgroundImageURI)}var e=p.prototype;return e.addError=function(e,t,n){this._container&&(this._container.innerHTML="<p>"+e+(t?' <span class="ot-help-message">'+t+"</span>":"")+"</p>",T.addClass(this._container,n||"OT_subscriber_error"),this._container.querySelector("p").offsetHeight>this._container.offsetHeight&&(this._container.querySelector("span").style.display="none"))},e.destroy=function(){this.emit("destroy"),this.destroyVideo(),this._container&&(T.removeElement(this._container),this._container=null)},e.setBackgroundImageURI=function(e){T.css(this._posterContainer,"backgroundImage","url("+e+")"),T.css(this._posterContainer,"backgroundSize","contain"),T.css(this._posterContainer,"opacity","1.0")},e.isAudioBlocked=function(){return Boolean(this._videoElementFacade&&this._videoElementFacade.isAudioBlocked())},e.unblockAudio=function(){return this._videoElementFacade.unblockAudio()},e.userGesture=function(){this.isAudioBlocked()&&P().then(function(){return C.debug("Successfully unblocked audio")},function(e){return C.error("Error retrying audio on user interaction:",e)})},e.setAudioBlockedUi=function(e){this._container&&(e?this._container.classList.add("OT_container-audio-blocked"):this._container.classList.remove("OT_container-audio-blocked"))},e.bindVideo=function(){var n=(0,f.default)(h.default.mark(function e(t,n){var r,i,o,a,s,c,u,d,l,f=this;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.audioVolume,i=n.muted,o=n.fallbackText,a=n._inject,C.debug("bindVideo ",{webRTCStream:t}),s=this._videoElementFacade,c=document.createElement("div"),this._cancelBind&&(C.debug("Cancelling last bindVideo request"),this._cancelBind.cancel()),this._cancelBind=new D,u=this._cancelBind,this.once("destroy",function(){return u.cancel()}),this._videoElementFacade=new p.VideoElementFacade({defaultAudioVolume:parseFloat(r,100),fallbackText:o,fitMode:this._fitMode,_inject:a,muted:i}),d=V(this._videoElementFacade),this._videoFacadeEvents&&(C.debug("Remove event listeners from old video facade"),this._videoFacadeEvents.removeAll()),(this._videoFacadeEvents=d).on("error",function(){f.trigger("error")}),d.on("videoDimensionsChanged",function(e,t){f.trigger("videoDimensionsChanged",e,t)}),d.on("mediaStopped",function(e){f.trigger("mediaStopped",e)}),d.on("audioBlocked",function(){return f.trigger("audioBlocked")}),d.on("audioUnblocked",function(){return f.trigger("audioUnblocked")}),void 0!==r)try{this._videoElementFacade.setAudioVolume(r)}catch(e){C.warn("bindVideo "+e)}return this._videoElementFacade.audioChannelType("telephony"),s?this._videoElementFacade.appendTo(c):(C.debug("Appending the video facade"),this._videoElementFacade.appendTo(this._widgetContainer)),e.prev=20,e.next=23,this._videoElementFacade.bindToStream(t);case 23:e.next=34;break;case 25:if(e.prev=25,e.t0=e.catch(20),u.isCanceled())throw C.debug("Refusing to destroyVideo as bindVideo was cancelled"),new M("CANCEL");e.next=32;break;case 32:throw this.destroyVideo(),e.t0;case 34:if(s||(this._videoElementFacade.domElement()&&this.trigger("videoElementCreated",this._videoElementFacade.domElement()),d.on("videoElementCreated",function(e){f.trigger("videoElementCreated",e)})),u.isCanceled())throw C.debug("bindVideo bailing due to cancellation"),new M("CANCEL");e.next=38;break;case 38:if(l=j(this._videoElementFacade,5e3),0<t.getVideoTracks().length)return C.debug("Waiting for correct resolution"),e.next=43,L(this._videoElementFacade,5e3);e.next=44;break;case 43:C.debug("Resolution: "+this._videoElementFacade.videoWidth()+"x"+this._videoElementFacade.videoHeight());case 44:return C.debug("Waiting for video to be playing"),e.next=47,l;case 47:if(C.debug("Video is playing"),u.isCanceled())throw C.debug("bindVideo bailing due to cancellation"),new M("CANCEL");e.next=51;break;case 51:s&&(this._videoElementFacade.domElement()&&this.trigger("videoElementCreated",this._videoElementFacade.domElement()),d.on("videoElementCreated",function(e){f.trigger("videoElementCreated",e)}),C.debug("Destroy the old video facade"),s.destroy(),C.debug("Insert the new video facade"),this._videoElementFacade.appendTo(this._widgetContainer)),!1!==this._insertDefaultUI&&T.addClass(this._videoElementFacade.domElement(),"OT_video-element");case 53:case"end":return e.stop()}},e,this,[[20,25]])}));return function(e,t){return n.apply(this,arguments)}}(),e.destroyVideo=function(){this._videoElementFacade&&(this._videoElementFacade.destroy(),this._videoElementFacade=null)},e.video=function(){return this._videoElementFacade},e.showPoster=function(e){return void 0===e?!T.isDisplayNone(this._posterContainer):(this._showPoster=e,T[e?"show":"hide"](this._posterContainer),this.showPoster())},e.poster=function(e){return void 0===e?T.css(this._posterContainer,"backgroundImage"):(this._poster=e,T.css(this._posterContainer,"backgroundImage","url("+e+")"),this.poster())},e.loading=function(e){return void 0===e?this._loading:(this._loading=Boolean(e),this._container&&this._container.classList[e?"add":"remove"]("OT_loading"),this.loading())},e.audioOnly=function(e){return void 0===e?this._audioOnly:(this._audioOnly=e,this._container&&this._container.classList[e?"add":"remove"]("OT_audio-only"),this.audioOnly())},e.domId=function(){return this._container&&this._container.getAttribute("id")},(0,v.default)(p,[{key:"domElement",get:function(){return this._container}},{key:"videoElement",get:function(){return this._videoElementFacade&&this._videoElementFacade.domElement()||void 0}},{key:"width",get:function(){return this.videoElement&&this.videoElement.offsetWidth}},{key:"height",get:function(){return this.videoElement&&this.videoElement.offsetHeight}}]),p}();return l.VideoElementFacade=u,l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationError=t.default=void 0;var r=o(n(643)),i=o(n(298));function o(e){return e&&e.__esModule?e:{default:e}}t.default=r.default,t.CancellationError=i.default},function(n,e,r){"use strict";(function(e){var t=r(39);n.exports=function(){return e.all(t.subscribers.where().map(function(e){if(e.isAudioBlocked())return e._.unblockAudio()}))}}).call(this,r(1))},function(n,e,d){"use strict";(function(Ze){var e=d(2),Ke=e(d(17)),Je=e(d(18)),Qe=e(d(23)),i=e(d(661)),Xe=d(54),o=d(36),$e=d(6),et=d(45),tt=d(59),nt=d(71),rt=d(37),it=d(15),ot=d(266),at=d(227),t=d(167),st=t.CancellationError,ct=t.default,ut=d(4),a=d(662),dt=d(104),lt=d(75),ft=d(26),pt=d(5),ht=d(143),s=d(27),c=d(51),vt=d(157),gt=d(663),u=d(166)(),mt=d(664),bt=d(665),yt=d(168),Et=d(110)().getMediaDevices,_t=d(7);n.exports=function(e){void 0===e&&(e={});var t=e,n=t.FORCE_DISCONNECT_OLD_PEER_CONNECTIONS_DELAY,Ee=void 0===n?3e4:n,r=(0,i.default)(t,["FORCE_DISCONNECT_OLD_PEER_CONNECTIONS_DELAY"]);["processPubOptions"].forEach(function(e){o(r[e],e+" dependency must be injected into Publisher")});var _e=r.AnalyticsHelper||s,Ce=r.calculateCapableSimulcastStreams||d(250),Te=r.createChromeMixin||d(281)(),Se=r.deviceHelpers||d(110)(),we=r.EnvironmentLoader||d(149),Oe=r.Errors||d(9),Ie=r.Events||d(21)(),Ae=r.ExceptionCodes||d(12),xe=r.interpretPeerConnectionError||d(164)(),Re=r.IntervalRunner||c,Ne=r.logging||d(0)("Publisher"),ke=r.Microphone||d(290)(),De=r.otError||d(16)(),Me=r.OTErrorClass||d(38),Pe=r.OTHelpers||d(3),Le=r.parseIceServers||d(106).parseIceServers,je=r.PUBLISH_MAX_DELAY||d(271),Ue=r.PublisherPeerConnection||d(295)(),Fe=r.PublishingState||d(297)(),Be=r.StreamChannel||d(152),Ve=r.systemRequirements||d(155),ze=r.VideoOrientation||d(153)(),We=r.WidgetView||u,He=r.global||window,Ge=r.createSendMethod||d(301),Ye=r.setEncodersActiveState||a,qe=r.processPubOptions;return function(h){var v=this;void 0===h&&(h={});function p(e){return c.get(e)}var g=pt({}),c=new at;pt(this);var m,u,b,d,r,y,l,i,o,a,s,f,E=vt(),_=new _e;Ve.check()||Ve.upgrade();var C,T,n=!1,S=0,e=function(){return v.session||T||{isConnected:function(){return!1}}};function w(){return{connectionId:e().isConnected()?e().connection.connectionId:null,streamId:u,widgetType:"Publisher"}}this.once("publishComplete",function(e){e||(n=!0)}),this.on("audioAcquisitionProblem",function(e){var t=e.method;Z("publisher:audioAcquisitionProblem","Event",{didPublishComplete:n,method:t})});function O(e){throw e.name===Oe.USER_MEDIA_ACCESS_DENIED||e.name===Oe.NOT_SUPPORTED&&e.originalMessage.match(/Only secure origins/)?function(e){var t,n=et(e);try{t=window.self!==window.top}catch(e){}"https:"!==window.location.protocol&&(P?n.message+=" Note: https:// is required for screen sharing.":"Chrome"===Pe.env.name&&"localhost"!==Pe.env.hostName&&(n.message+=" Note: Chrome requires HTTPS for camera and microphone access.")),t&&!P&&(n.message+=" Note: Check that the iframe has the allow attribute for camera and microphone"),Ne.error(n.message),y.set("Failed"),n.message="OT.Publisher Access Denied: Permission Denied: "+n.message,n.code=Ae.UNABLE_TO_PUBLISH,m&&(m.destroy(),m=null),K("Cancel",{reason:"AccessDenied"}),v.trigger("publishComplete",n),v.dispatchEvent(new ht(ft.ACCESS_DENIED))}(e):qe.isScreenSharing?function(e){var t=et(e);t.code=Ae.UNABLE_TO_PUBLISH,Ne.error("OT.Publisher.onScreenSharingError "+t.message),y.set("Failed"),t.message="Screensharing: "+t.message,v.trigger("publishComplete",t),K("Failure",{},{failureReason:"ScreenSharing",failureMessage:t.message}),m&&(m.destroy(),m=null)}(e):function(e){var t=Object.keys(Oe).map(function(e){return Oe[e]}),n=De(-1<t.indexOf(e.name)?e.name:Oe.MEDIA_ERR_ABORTED,e,Ae.UNABLE_TO_PUBLISH);Ne.error("onStreamAvailableError "+n.name+": "+n.message),y.set("Failed"),m&&(m.destroy(),m=null);var r={failureReason:"GetUserMedia",failureCode:Ae.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to access camera/mic: "+n.message};K("Failure",{},r),Me.handleJsException({error:n,errorMsg:r.failureReason,code:r.failureCode,target:v,analytics:_}),v.trigger("publishComplete",n)}(e),e}function I(){Z("accessDialog","Opened"),v.dispatchEvent(new ht(ft.ACCESS_DIALOG_OPENED,!0))}function A(){Z("accessDialog","Closed"),v.dispatchEvent(new ht(ft.ACCESS_DIALOG_CLOSED,!1))}var x=it(),R={},N=!1,k={},D=!1,M=qe(h,"OT.Publisher",function(){return y&&y.isDestroyed()});M.on({accessDialogOpened:I,accessDialogClosed:A});var t=M,P=t.isScreenSharing,L=t.isCustomAudioTrack,j=t.isCustomVideoTrack,U=t.shouldAllowAudio,F=t.properties,B=t.getUserMedia;function V(e){e.forEach(function(e){return e()})}Object.defineProperty(this,"loudness",{writable:!1,value:void 0,configurable:!0});function z(e,t,n){return e.addEventListener?(e.addEventListener(t,n),function(){return e.removeEventListener(t,n)}):function(){}}var W;(function(){var t=this,n=[];g.on("streamDestroy",function(){return V(n)}),g.on("streamChange",function(){V(n);var e=b.getAudioTracks().map(function(e){return z(e,"ended",function(){D=!0,t.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})})});n.splice.apply(n,[0,n.length].concat(e))})}).call(this),W=[],g.on("streamDestroy",function(){return V(W)}),g.on("streamChange",function(){V(W),P||b.getTracks().forEach(function(e){e.addEventListener&&(W.push(z(e,"mute",se)),W.push(z(e,"unmute",se)))})});function H(e,t){Z("ICERestart",e,t)}function G(){b&&(g.emit("streamDestroy"),He.MediaStreamTrack&&He.MediaStreamTrack.prototype.stop?b.getTracks().forEach(function(e){return e.stop()}):b.stop())}function Y(e){function t(e,n){var r;return e.forEach(function(t){if(Object.prototype.hasOwnProperty.call(t,"deviceId"))r=t.deviceId.toString();else if(t.label&&n){var e=tt(n,function(e){return e.label===t.label});e&&(r=e.deviceId)}}),r}Ne.debug("OT.Publisher.onStreamAvailable"),y.set("BindingMedia"),G(),b=e,g.emit("streamChange"),s=t(b.getVideoTracks(),a),f=t(b.getAudioTracks(),o),r=new ke(b,!F.publishAudio),le(),de(),v.accessAllowed=!0,v.dispatchEvent(new ht(ft.ACCESS_ALLOWED,!1))}function q(e){var t=De(Oe.MEDIA_ERR_DECODE,e,Ae.UNABLE_TO_PUBLISH);t.message="OT.Publisher while playing stream: "+t.message,Ne.error("OT.Publisher.onVideoError:",t),Z("stream",null,{reason:t.message});var n=y.isAttemptingToPublish();y.set("Failed"),n?v.trigger("publishComplete",t):v.trigger("error",t.message),Me.handleJsException({error:t,target:v,analytics:_})}var Z=h.logAnalyticsEvent||function(e,t,n,r,i){var o=$e({action:e,variation:t,payload:n},w(),r);"Failure"===t&&(o=$e(k,o)),k=nt(o,"sessionId","connectionId","partnerId"),_.logEvent(o,i)},K=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),"Non-fatal"!==n.failureReason&&("Attempt"===e&&(i=(new Date).getTime(),C&&(C.stop(),Ne.error("_connectivityAttemptPinger should have been cleaned up")),C=new Re(function(){Z("Publish","Attempting",t,(0,Qe.default)({},w(),n))},.2,6)),"Failure"===e||"Success"===e||"Cancel"===e?(C?(C.stop(),C=void 0):Ne.warn('Received connectivity event: "'+e+'" without "Attempt"'),Z("Publish",e,(0,Qe.default)({videoInputDevices:a,audioInputDevices:o,videoInputDeviceCount:a?a.length:void 0,audioInputDeviceCount:o?o.length:void 0,selectedVideoInputDeviceId:s,selectedAudioInputDeviceId:f},t),(0,Qe.default)({attemptDuration:(new Date).getTime()-i},n))):Z("Publish",e,t,n))},J=rt(function(){Z("GetStats","Called")}),Q=function(){var e=(0,Je.default)(Ke.default.mark(function e(){var t;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={muted:!0},m){e.next=3;break}throw new Error("Cannot bind video after widget view has been destroyed");case 3:return e.abrupt("return",m.bindVideo(b,t));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();this._removePeerConnection=function(e){var t=p(e).peerConnectionId;delete R[t],e.destroy()},this._removeSubscriber=function(e){ne(e).then(function(e){e.forEach(function(e){return v._removePeerConnection(e)})})};function X(e){var t=e.peerConnectionId,a=e.send,s=e.log,c=e.logQoS;if(re(t))return Ze.reject(new Error("PeerConnection already exists"));var u=Ce({browserName:Pe.env.name,isScreenSharing:P,isCustomVideoTrack:j,sessionInfo:v.session.sessionInfo,constraints:F.constraints,videoDimensions:function(){var e,t,n=m&&m.video();return t=F.videoDimensions?(e=Math.min(F.videoDimensions.width,n&&n.videoWidth()||640),Math.min(F.videoDimensions.height,n&&n.videoHeight()||480)):(e=n&&n.videoWidth()||640,n&&n.videoHeight()||480),{width:e,height:t}}()});return R[t]=Ze.all([v.session._.getIceConfig(),v.session._.getVideoCodecsCompatible(b)]).then(function(e){var t=e[0],n=e[1],r=b;if(!n&&!_t.isSupported()){var i=(r=b.clone()).getVideoTracks()[0];i&&(i.stop(),r.removeTrack(i))}var o=new Ue({iceConfig:t,sendMessage:function(e,t){"offer"===e&&v.trigger("connected"),a(e,t)},webRTCStream:r,channels:F.channels,capableSimulcastStreams:u,overrideSimulcastEnabled:h._enableSimulcast,logAnalyticsEvent:s,offerOverrides:{enableStereo:F.enableStereo,audioBitrate:F.audioBitrate,priorityVideoCodec:F._priorityVideoCodec||v.session.sessionInfo.priorityVideoCodec,codecFlags:F._codecFlags||v.session._.getCodecFlags()},answerOverrides:v.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:F.audioBitrate}});return o.on({disconnected:function(){return function(e){Ne.debug("Subscriber has been disconnected from the Publisher's PeerConnection");var t=p(e),n=t.peerPriority,r=t.remoteSubscriberId,i=p(e).peerConnectionId;Z("disconnect","PeerConnection",{subscriberConnection:i}),n<S?v._removePeerConnection(e):v._removeSubscriber(r)}(o)},error:function(e){var t=e.reason,n=e.prefix;return te(o,{reason:t,prefix:n})},qos:c,iceRestartSuccess:function(){return function(e){var t=p(e).remoteConnectionId;H("Success",{remoteConnectionId:t})}(o)},iceRestartFailure:function(){return function(e){var t=p(e).remoteConnectionId;H("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:t})}(o)},audioAcquisitionProblem:function(){D=!0,v.trigger("audioAcquisitionProblem",{method:"getStats"})}}),new Ze(function(t,n){function r(e){n(e)}o.once("error",r),o.init(l,function(e){if(e)return n(e);o.off("error",r),t(o)})})}),re(t)}function $(){return Ze.all(Object.keys(R).map(re))}function ee(){v.off("publishComplete",se),ie&&ie.reset(),E.releaseAll(),v.disconnect(),r=null,G(),b=null,m&&(m.destroy(),m=null),v.session&&v._.unpublishFromSession(v.session,"reset"),v.id=null,v.stream=null,N=!1,v.session=null,y.isDestroyed()||y.set("NotPublishing")}var te=function(){var n=(0,Je.default)(Ke.default.mark(function e(t,n){var r,i,o,a,s,c,u,d,l,f;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.reason,i=n.prefix,o=v.session&&v.session.sessionInfo,"ICEWorkflow"===i&&o&&o.reconnection&&N)return Ne.debug("Ignoring peer connection failure due to possibility of reconnection."),e.abrupt("return");e.next=5;break;case 5:return a=p(t)||{},s=a.remoteConnectionId,c=void 0===s?"(not found)":s,u=a.peerConnectionId,d=xe(void 0,r,i,c,"Publisher"),l={hasRelayCandidates:t&&t.hasRelayCandidates()},f={failureReason:i||"PeerConnectionError",failureCode:d.code,failureMessage:d.message},y.isPublishing()?f.reason="Non-fatal":v.trigger("publishComplete",d),K("Failure",l,f),Me.handleJsException({errorMsg:"OT.Publisher PeerConnection Error: "+r,code:d.code,target:v,analytics:_}),e.next=14,R[u];case 14:e.sent.destroy(),delete R[u];case 17:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),ne=function(t){return $().then(function(e){return e.filter(function(e){return p(e).remoteSubscriberId===t})})},re=function(e){return R[e]},ie=Te(this,{name:F.name,publishAudio:F.publishAudio,publishVideo:F.publishVideo,audioSource:F.audioSource,showControls:F.showControls,shouldAllowAudio:U,logAnalyticsEvent:Z}),oe=function(){return!(!b||0===b.getVideoTracks().length)&&b.getVideoTracks().reduce(function(e,t){return e&&!t.muted&&t.enabled&&"ended"!==t.readyState},F.publishVideo)},ae=function(){return!(!b||0===b.getAudioTracks().length)&&(0<b.getAudioTracks().length&&b.getAudioTracks().reduce(function(e,t){return e&&!t.muted&&t.enabled&&"ended"!==t.readyState},F.publishAudio))},se=function e(){m&&(m.audioOnly(!oe()),m.showPoster(!oe())),ie&&ie.setAudioOnly(!oe()&&ae()),v.stream?(v.stream.setChannelActiveState("audio",ae()),v.stream.setChannelActiveState("video",oe())):v.once("publishComplete",e)};this.publish=function(e){return Ne.debug("OT.Publisher: publish"),(y.isAttemptingToPublish()||y.isPublishing())&&ee(),y.set("GetUserMedia"),F.style&&v.setStyle(F.style,null,!0),F.classNames="OT_root OT_publisher",we.onLoad(function(){Ne.debug("OT.Publisher: publish: environment loaded"),m=new We(e,F),U&&mt({publisher:v,widgetView:m}),m.on("error",q),v.id=m.domId(),v.element=m.domElement,v.element&&ie&&ie.init(m),m.on("videoDimensionsChanged",function(e,t){v.stream&&v.stream.setVideoDimensions(t.width,t.height),v.dispatchEvent(new Ie.VideoDimensionsChangedEvent(v,e,t))}),m.on("mediaStopped",function(e){var t=new Ie.MediaStoppedEvent(v,e);if(v.dispatchEvent(t),!t.isDefaultPrevented())if(e){var n=String(e.kind).toLowerCase();"audio"===n?de():"video"===n?le():Ne.warn("Track with invalid kind has ended: "+e.kind)}else v.session?v._.unpublishFromSession(v.session,"mediaStopped"):v.destroy("mediaStopped")}),m.on("videoElementCreated",function(e){var t=new Ie.VideoElementCreatedEvent(e);v.dispatchEvent(t)}),B().catch(O).then(function(e){return o=M.audioDevices,a=M.videoDevices,Y(e),Q().catch(function(e){if(!(e instanceof st))throw e}).then(function(){y.isDestroyed()?m&&m.destroyVideo():(Ne.debug("OT.Publisher.onLoaded; resolution:",v.videoWidth()+"x"+v.videoHeight()),y.set("MediaBound"),yt().catch(Ne.error),m.loading(!!v.session&&!v.stream),N=!0),y.isDestroyed()||(v.trigger("initSuccess"),v.trigger("loaded",v))},function(e){Ne.error("OT.Publisher.publish failed to bind video: "+e),function(e){var t=De(Oe.CONNECT_FAILED,e,Ae.P2P_CONNECTION_FAILED);t.message="OT.Publisher PeerConnection Error: "+t.message,K("Failure",{},{failureReason:"PeerConnectionError",failureCode:t.code,failureMessage:t.message}),y.set("Failed"),v.trigger("publishComplete",t),Me.handleJsException({error:t,target:v,analytics:_})}(e)})})}),v};function ce(e){return b&&0<b["get"+ot(e)+"Tracks"]().length&&b["get"+ot(e)+"Tracks"]().every(function(e){return"ended"!==e.readyState})}var ue,de=function(){var e=ce("audio")&&F.publishAudio;ie&&ie.setMuted(!e),r&&r.muted(!e),se()};this.publishAudio=function(e){return F.publishAudio=e,de(),v};var le=function(){var r=ce("video")&&F.publishVideo;"Chrome"===ut.name&&69<=ut.version&&(0,Je.default)(Ke.default.mark(function e(){var t,n;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return ue&&ue.cancel(),ue=new ct,t=ue,e.next=5,$();case 5:n=e.sent,t.isCanceled()||n.forEach(function(e){Ye(e,r)});case 7:case"end":return e.stop()}},e)}))(),b&&b.getVideoTracks().forEach(function(e){e.enabled=r}),se()};this.publishVideo=function(e){return F.publishVideo=e,le(),v},this.destroy=function(e,t){return y.isAttemptingToPublish()&&this.session&&K("Cancel",{reason:"destroy"}),y.isDestroyed()||(y.set("Destroyed"),ee(),M&&(M.off(),M=null),ie&&(ie.destroy(),ie=null),g&&(g.off(),g=null),!0!==t&&this.dispatchEvent(new Ie.DestroyedEvent(ft.PUBLISHER_DESTROYED,this,e)),this.off()),this},this.disconnect=function(){Object.keys(R).forEach(function(e){var t=re(e);delete R[e],t.then(function(e){return v._removePeerConnection(e)})})},this.processMessage=function(t,n,r){var i=Xe(r,"params.subscriber",n).replace(/^INVALID-STREAM$/,n),a=Xe(r,"content.peerId"),s=Number(Xe(r,"content.peerPriority")),o=i+"~"+a+"~"+s;Ne.debug("OT.Publisher.processMessage: Received "+t+" from "+n+" for "+o),Ne.debug(r);var e=re(o);switch(("generateoffer"===t||"offer"===t)&&s<S&&Ne.debug("Ignore offer from lower priority peer connection"),t){case"unsubscribe":v._removeSubscriber(i);break;default:e?e.then(function(e){return e.processMessage(t,r)}):function(){S<s&&(Ne.info("PeerConnection escalation to "+a+":"+s),function(t){return $().then(function(e){return e.filter(function(e){return p(e).peerPriority===t})})}(S).then(function(e){e.forEach(function(e){setTimeout(function(){Ne.info("PeerConnection escalation removing old peer connection with force"),v._removePeerConnection(e)},Ee)})}),S=s);var e=Ge({socket:v.session._.getSocket(),uri:r.uri,content:{peerPriority:s,peerId:a}});X({peerConnectionId:o,send:e,log:function(e,t,n,r,i){void 0===r&&(r={});var o=(0,Qe.default)({peerId:a,peerPriority:s},r);return Z(e,t,n,o,i)},logQoS:function(e){!function(e){var t=e.parsedStats,n=e.simulcastEnabled,r=e.remoteConnectionId,i={peerPriority:e.peerPriority,peerId:e.peerId,widgetType:"Publisher",connectionId:v.session&&v.session.isConnected()?v.session.connection.connectionId:null,streamId:u,width:m.width,height:m.height,audioTrack:b&&0<b.getAudioTracks().length,hasAudio:ae(),publishAudio:F.publishAudio,videoTrack:b&&0<b.getVideoTracks().length,hasVideo:oe(),publishVideo:F.publishVideo,audioSource:L?"Custom":void 0,videoSource:P&&h.videoSource||j&&"Custom"||F.constraints.video&&"Camera"||null,duration:d?Math.round(((new Date).getTime()-d.getTime())/1e3):0,remoteConnectionId:r,scalableVideo:n},o={videoWidth:v.videoWidth(),videoHeight:v.videoHeight()},a=$e(t,o);_.logQOS($e(i,t)),v.trigger("qos",a)}((0,Qe.default)({},e,{peerId:a,peerPriority:s,remoteConnectionId:n}))}}).then(function(e){return function(e,t){c.set(e,t)}(e,{remoteConnectionId:n,remoteSubscriberId:i,peerPriority:s,peerId:a,peerConnectionId:o}),e.processMessage(t,r),null}).catch(function(e){Ne.error("OT.Publisher failed to create a peerConnection",e)})}()}},this.getImgData=function(){if(!N)return Ne.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;var e=m&&m.video();return e?e.imgData():null};function fe(e){e.getSenders().forEach(function(e){return"audio"===e.track.kind&&b.getAudioTracks().length?e.replaceTrack(b.getAudioTracks()[0]):"video"===e.track.kind&&b.getVideoTracks().length?e.replaceTrack(b.getVideoTracks()[0]):void 0})}function pe(t){return void 0===t&&(t=fe),$().then(function(e){return e.map(t),Ze.all([])})}var he=0;this.cycleVideo=bt((0,Je.default)(Ke.default.mark(function e(){var t,n,r,i,o,a,s,c,u,d,l,f;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("IE"!==Pe.env.name&&"Edge"!==Pe.env.name&&He.RTCRtpSender&&"function"==typeof He.RTCRtpSender.prototype.replaceTrack){e.next=2;break}throw De(Oe.UNSUPPORTED_BROWSER,new Error("Publisher#cycleVideo is not supported in your browser."),Ae.UNABLE_TO_PUBLISH);case 2:if(t=0<b.getVideoTracks().length&&b.getVideoTracks()[0]){e.next=5;break}throw De(Oe.NOT_SUPPORTED,new Error("Publisher#cycleVideo cannot cycleVideo when you have no video source."));case 5:return he+=1,e.next=8,Se.shouldAskForDevices();case 8:if(n=e.sent,r=n.videoDevices,n.video&&r&&r.length){e.next=12;break}throw De(Oe.NO_DEVICES_FOUND,new Error("No video devices available"),Ae.UNABLE_TO_PUBLISH);case 12:if("Chrome"===Pe.env.name&&-1<Pe.env.userAgent.toLowerCase().indexOf("android")&&t&&t.stop&&t.stop(),g.emit("streamDestroy"),1!==he||!t){e.next=23;break}i=0;case 16:if(!(i<r.length)){e.next=23;break}if(r[i].label&&r[i].label!==t.label)return he=i,e.abrupt("break",23);e.next=20;break;case 20:i+=1,e.next=16;break;case 23:return o=r[he%r.length],a=o.deviceId,(s=et(h)).audioSource=null,s.videoSource=a,(M=qe(s,"OT.Publisher.cycleVideo",function(){return y&&y.isDestroyed()})).on({accessDialogOpened:I,accessDialogClosed:A}),c=M.getUserMedia,e.next=33,c().catch(O);case 33:return u=e.sent,d=u.getVideoTracks()[0],e.next=37,$();case 37:return l=e.sent,e.next=40,Ze.all(l.map(function(e){return e.findAndReplaceTrack(t,d)}));case 40:return b.addTrack(d),b.removeTrack(t),t&&t.stop&&t.stop(),"Firefox"!==Pe.env.name&&"Safari"!==Pe.env.name||(v.videoElement().srcObject=null,v.videoElement().srcObject=b),(f=m&&m.video())&&f.refreshTracks(),g.emit("streamChange"),le(),e.abrupt("return",{deviceId:a});case 49:case"end":return e.stop()}},e)})));function ve(e,t){t&&b.addTrack(t),e&&b.removeTrack(e);var n=m&&m.video();n&&n.refreshTracks(),ie&&(t&&!e&&ie.addAudioTrack(),e&&!t&&ie.removeAudioTrack()),e&&e.stop&&e.stop(),t&&(de(),r=new ke(b,!F.publishAudio)),g.emit("streamChange"),se()}var ge,me,be,ye=function(){var t=(0,Je.default)(Ke.default.mark(function e(t){var n,r,i,o,a,s,c,u,d,l,f,p;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="Operation did not succeed due to a new request.",ge&&ge.cancel(),ge=new ct,r=ge,i=function(e){if(r.isCanceled())throw e.getTracks(function(e){return e.stop()}),De(Oe.CANCEL,new Error(n));return ye(e.getAudioTracks()[0])},"IE"!==Pe.env.name&&"Edge"!==Pe.env.name&&He.RTCRtpSender&&"function"==typeof He.RTCRtpSender.prototype.replaceTrack){e.next=7;break}throw De(Oe.UNSUPPORTED_BROWSER,new Error("Publisher#setAudioSource is not supported in your browser."));case 7:if(o=v.getAudioSource()){e.next=10;break}throw De(Oe.NOT_SUPPORTED,new Error("Publisher#setAudioSource cannot add an audio source when you started without one."));case 10:if(t instanceof MediaStreamTrack)return e.next=13,$();e.next=21;break;case 13:if(a=e.sent,r.isCanceled())throw De(Oe.CANCEL,new Error(n));e.next=16;break;case 16:return e.next=18,Ze.all(a.map(function(e){return e.findAndReplaceTrack(o,t)}));case 18:return e.abrupt("return",ve(o,t));case 21:if("string"==typeof t)return(s=et(h)).audioSource=t,s.videoSource=null,(M=qe(s,"OT.Publisher.setAudioSource",function(){return r.isCanceled()||y&&y.isDestroyed()})).on({accessDialogOpened:I,accessDialogClosed:A}),c=o.label,u=o.getConstraints&&o.getSettings().deviceId||void 0,o&&o.stop(),d=M.getUserMedia,e.prev=31,e.t0=i,e.next=35,d();e.next=69;break;case 35:return e.t1=e.sent,e.next=38,(0,e.t0)(e.t1);case 38:return e.abrupt("return",e.sent);case 41:if(e.prev=41,e.t2=e.catch(31),r.isCanceled())throw De(Oe.CANCEL,new Error(n));e.next=45;break;case 45:if((l=et(h)).videoSource=null,l.audioSource=u,!l.audioSource&&c)return e.next=51,Et();e.next=56;break;case 51:if(e.t3=function(e){return e.label===c},f=e.sent.filter(e.t3)[0],r.isCanceled())throw De(Oe.CANCEL,new Error(n));e.next=55;break;case 55:f&&(l.audioSource=f.deviceId);case 56:if(l.audioSource){e.next=59;break}throw e.t2.message+=" (could not determine previous audio device)",De(Oe.NOT_FOUND,e.t2);case 59:return M=qe(l,"OT.Publisher.setAudioSource",function(){return r.isCanceled()||y&&y.isDestroyed()}),e.next=62,M.getUserMedia().catch(function(e){throw e.message+=" (could not obtain previous audio device)",e});case 62:return p=e.sent,e.next=65,i(p);case 65:throw e.t2.message+=" (reverted to previous audio device)",e.t2;case 67:e.next=70;break;case 69:throw De(Oe.INVALID_PARAMETER,new Error("Invalid parameter passed to OT.Publisher.setAudioSource(). Expected string or MediaStreamTrack."));case 70:case"end":return e.stop()}},e,null,[[31,41]])}));return function(e){return t.apply(this,arguments)}}();this.setAudioSource=ye,this.getAudioSource=function(){return b&&0<b.getAudioTracks().length?b.getAudioTracks()[0]:null},this._={publishToSession:function(s,e){e&&(_=e),T=s,v.session=s;var c=it();u=c,v.streamId=c,K("Attempt",{dataChannels:F.channels,properties:gt(F)});var t=new Ze(function(e,r){N?e():(v.once("initSuccess",e),v.once("destroyed",function(e){var t=e.reason,n="";t&&(n=" Reason: "+t),r(new Error("Publisher destroyed before it finished loading."+n))}))});Ne.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");var n=new Ze(function(t,n){v.once("publishComplete",function(e){e?n(e):(Ne.debug("publishToSession: got publishComplete"),t())})});Ne.debug("publishToSession: waiting for loaded");var r=t.then(function(){return s._.getVideoCodecsCompatible(b)}).then(function(e){if(Ne.debug("publishToSession: loaded"),v.session){var t=setTimeout(function(){!function(e){var t,n;Ne.error("OT.Publisher.onPublishingTimeout"),n=D?(t=Oe.CHROME_MICROPHONE_ACQUISITION_ERROR,"Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(t=Oe.TIMEOUT,"Could not publish in a reasonable amount of time");var r={failureReason:"ICEWorkflow",failureCode:Ae.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};K("Failure",{},r),Me.handleJsException({errorMsg:r.failureReason,code:r.failureCode,target:v,analytics:_}),e.isConnected()&&v.streamId&&e._.streamDestroy(v.streamId),v.disconnect(),v.session=null,y.isDestroyed()||y.set("MediaBound"),v.trigger("publishComplete",De(t,new Error(n),Ae.UNABLE_TO_PUBLISH))}(s)},je);v.once("publishComplete",function(){clearTimeout(t)}),y.set("PublishingToSession");var n=[],r=e&&m&&m.video(),i=0<b.getVideoTracks().length,o=null!==F.videoSource&&!1!==F.videoSource;r&&i&&o&&n.push(new Be({id:"video1",type:"video",active:F.publishVideo,orientation:ze.ROTATED_NORMAL,frameRate:F.frameRate,width:r.videoWidth(),height:r.videoHeight(),source:P?"screen":j?"custom":"camera",fitMode:F.fitMode}));var a=0<b.getAudioTracks().length;return null!==F.audioSource&&!1!==F.audioSource&&a&&n.push(new Be({id:"audio1",type:"audio",active:F.publishAudio})),Ne.debug("publishToSession: creating rumor stream id"),new Ze(function(r,i){s._.streamCreate(F.name||"",c,F.audioFallbackEnabled,n,F.minVideoBitrate,function(e,t,n){e?i(function(e){var t=-1<[403,404,409].indexOf(e.code)?De(Oe.STREAM_CREATE_FAILED,new Error("Failed to create stream in server model: "+e.message),Ae.UNABLE_TO_PUBLISH):De(Oe.UNEXPECTED_SERVER_RESPONSE,new Error("Unexpected server response: "+e.message),Ae.UNEXPECTED_SERVER_RESPONSE);throw K("Failure",{},{failureReason:"Publish",failureCode:t.code,failureMessage:t.message}),y.isAttemptingToPublish()&&v.trigger("publishComplete",t),Me.handleJsException({errorMsg:e.message,code:t.code,target:v,error:e,analytics:_}),t}(e)):r({streamId:t,message:n})})})}}).then(function(e){if(void 0!==e){var t=e.streamId,n=e.message;if(Ne.debug("publishToSession: rumor stream id created:",t,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),t!==c)throw new Error("streamId response does not match request");v.streamId=t,l=Le(n)}}).catch(function(e){throw v.trigger("publishComplete",e),e});return Ze.all([r,n])},unpublishFromSession:function(e,t){if(!v.session||e.id!==v.session.id){if("unpublished"===t){var n=v.session&&v.session.id||"no session";Ne.warn("The publisher "+x+" is trying to unpublish from a session "+e.id+" it is not attached to (it is attached to "+n+")")}return v}if(e.isConnected()&&(v.stream||y.isAttemptingToPublish())&&e._.streamDestroy(v.streamId),E.releaseAll(),v.disconnect(),y.isAttemptingToPublish()){K("Cancel",{reason:"unpublish"});var r=new Error(function(){switch(t){case"mediaStopped":return"The video element fired the ended event, indicating there is an issue with the media";case"unpublished":return"The publisher was unpublished before it could be published";case"reset":return"The publisher was reset";default:return"The publisher was destroyed due to "+t}}());v.trigger("publishComplete",De("mediaStopped"===t?Oe.MEDIA_ENDED:Oe.CANCEL,r))}return v.session=null,Z("unpublish","Success"),v._.streamDestroyed(t),v},unpublishStreamFromSession:function(e,t,n){return u&&e.id===u?v._.unpublishFromSession(t,n):(Ne.warn("The publisher "+x+" is trying to destroy a stream "+e.id+" that is not attached to it (it has "+(u||"no stream")+" attached to it)"),v)},streamDestroyed:function(e){["reset"].indexOf(e)<0&&(y.isDestroyed()||y.set("MediaBound"));var t=new Ie.StreamEvent("streamDestroyed",v.stream,e,!0);v.dispatchEvent(t),t.isDefaultPrevented()||v.destroy()},archivingStatus:function(e){return ie&&ie.setArchivingStatus(e),e},webRtcStream:function(){return b},switchTracks:(be=(0,Je.default)(Ke.default.mark(function e(){var n;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B().catch(O);case 3:n=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),Ne.error("OT.Publisher.switchTracks failed to getUserMedia: "+e.t0),e.t0;case 10:t=n,G(),b=t,g.emit("streamChange"),r=new ke(b,!F.publishAudio),e.prev=11,Q(),e.next=21;break;case 15:if(e.prev=15,e.t1=e.catch(11),e.t1 instanceof st)return e.abrupt("return");e.next=19;break;case 19:throw Ne.error("Error while binding video",e.t1),e.t1;case 21:e.prev=21,pe(),e.next=29;break;case 25:throw e.prev=25,e.t2=e.catch(21),Ne.error("Error replacing tracks",e.t2),e.t2;case 29:case"end":return e.stop()}var t},e,null,[[0,6],[11,15],[21,25]])})),function(){return be.apply(this,arguments)}),getDataChannel:function(t,n,r){var e=re(Object.keys(R)[0]);e?e.then(function(e){e.getDataChannel(t,n,r)}):r(new Pe.Error("Cannot create a DataChannel before there is a subscriber."))},iceRestart:function(){$().then(function(e){e.forEach(function(e){var t=p(e).remoteConnectionId;H("Attempt",{remoteConnectionId:t}),Ne.debug("Publisher: ice restart attempt"),e.iceRestart()})})},getState:function(){return y},demoOnlyCycleVideo:this.cycleVideo,testOnlyGetFramesEncoded:(me=(0,Je.default)(Ke.default.mark(function e(){var t;return Ke.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:if((t=e.sent).length){e.next=5;break}throw new Error("No established PeerConnections yet");case 5:return e.abrupt("return",t[0]._testOnlyGetFramesEncoded());case 6:case"end":return e.stop()}},e)})),function(){return me.apply(this,arguments)}),onStreamAvailable:Y},this.detectDevices=function(){Ne.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){Ne.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return Ne.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){Ne.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return Ne.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){Ne.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){Ne.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return x},this.videoElement=function(){var e=m&&m.video();return e?e.domElement():null},this.setStream=function(e){if("PublishingToSession"!==y.current)throw new Error("assignStream called when publisher is not successfully publishing");E.releaseAll(),v.stream=e,v.stream.on("destroyed",v.disconnect,v),E.add(function(){v.stream&&v.stream.off("destroyed",v.disconnect,v)}),y.set("Publishing"),m.loading(!N),d=new Date,v.dispatchEvent(new Ie.StreamEvent("streamCreated",e,null,!1)),K("Success"),v.trigger("publishComplete",null,v)},this.isWebRTC=!0,this.isLoading=function(){return m&&m.loading()},this.videoWidth=function(){var e=m&&m.video();return e?e.videoWidth():void 0},this.videoHeight=function(){var e=m&&m.video();return e?e.videoHeight():void 0},this.getStats=function(n){J(),$().then(function(e){return Ze.all(e.map(function(t){return dt(t.getStats.bind(t))().then(function(e){return{pc:t,stats:e}})}))}).then(function(e){var a=d?d.getTime():Date.now(),t=e.map(function(e){var t=e.pc,n=e.stats,r=p(t),i=r.remoteConnectionId,o=r.remoteSubscriberId;return $e(i.match(/^symphony\./)?{}:{subscriberId:o,connectionId:i},{stats:lt.normalizeStats(n,!1,a)})});n(null,t)}).catch(n)},y=new Fe(function(e){Ne.error("OT.Publisher State Change Failed: ",e.message),Ne.debug(e)}),this.accessAllowed=!1}}}).call(this,d(1))},function(e,t,n){"use strict";var r=n(57).once;e.exports=function(e){var t=this;this.publish=-1!==e.indexOf("publish")?1:0,this.subscribe=-1!==e.indexOf("subscribe")?1:0,this.forceUnpublish=-1!==e.indexOf("forceunpublish")?1:0,this.forceDisconnect=-1!==e.indexOf("forcedisconnect")?1:0,this.supportsWebRTC=r()?1:0,this.permittedTo=function(e){return Object.prototype.hasOwnProperty.call(t,e)&&1===t[e]}}},function(e,t){"use strict";t.__esModule=!0,t.STATUS=t.PONG=t.PING=t.DISCONNECT=t.CONNECT=t.MESSAGE=t.UNSUBSCRIBE=t.SUBSCRIBE=void 0;t.SUBSCRIBE=0;t.UNSUBSCRIBE=1;t.MESSAGE=2;t.CONNECT=3;t.DISCONNECT=4;t.PING=7;t.PONG=8;t.STATUS=9},function(e,t,n){"use strict";var a=n(6),s=n(170),c=n(5),u=n(21)(),d=n(692);function l(e,t,n,r,i){var o,a=this;this.id=e,this.connectionId=e,this.creationTime=t?Number(t):null,this.data=n,this.capabilities=d(r),this.permissions=new s(i),this.quality=null,c(this),this.destroy=function(e,t){o=e||"clientDisconnected",!0!==t&&a.dispatchEvent(new u.DestroyedEvent("destroyed",a,o))},this.destroyed=function(){return void 0!==o},this.destroyedReason=function(){return o}}l.fromHash=function(e){var t=e.id,n=e.creationTime,r=e.data,i=e.capablities,o=e.permissions;return new l(t,n,r,a(i||{},{supportsWebRTC:!0}),o||[])},e.exports=l},function(e){var t="object"==typeof window&&window&&window.Object===Object&&window;e.exports=t},function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(41),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t,n){var r=n(43),i=n(31);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var d=n(363),l=n(62),f=n(10),p=n(63),h=n(64),v=n(85),g=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=f(e),r=!n&&l(e),i=!n&&!r&&p(e),o=!n&&!r&&!i&&v(e),a=n||r||i||o,s=a?d(e.length,String):[],c=s.length;for(var u in e)!t&&!g.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||h(u,c))||s.push(u);return s}},function(e){e.exports=function(t,n){return function(e){return t(n(e))}}},function(e,a,s){(function(e){var t=s(14),n=a&&!a.nodeType&&a,r=n&&"object"==typeof e&&e&&!e.nodeType&&e,i=r&&r.exports===n?t.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}}).call(this,s(84)(e))},function(e){e.exports=function(){return[]}},function(e,t,n){var r=n(120),i=n(121),o=n(119),a=n(180),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t,n){var r=n(183),i=n(119),o=n(31);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var i=n(120),o=n(10);e.exports=function(e,t,n){var r=t(e);return o(e)?r:i(r,n(e))}},function(e,t,n){var r=n(183),i=n(181),o=n(67);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(41)(n(14),"Set");e.exports=r},function(e,t,n){var r=n(41)(n(14),"WeakMap");e.exports=r},function(e,t,n){var r=n(14).Uint8Array;e.exports=r},function(e,t,n){var r=n(122);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(86),i=n(121),o=n(66);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,d){"use strict";var l=d(24)();e.exports=function(e){void 0===e&&(e={});var i=e.APIKEY||d(72),o=e.logging||d(0)("errorReporting"),a=e.staticConfig||l.onlyLocal(),s=a.enableErrorReporting,t=e.global;t||"undefined"==typeof window||(t=window);var c=e.Raven;!c&&t&&(c=d(515));function n(e){return!!s&&(!!(e&&e.tags&&e.tags.otError)&&(delete e.tags.otError,!0))}var r=/(opentok|ot|tb|tokbox)(?:\.min)?\.js/,u={send:function(e){if(!s||!c)return null;var t=function(t){var n;if(t instanceof Error||"string"==typeof t?n=t:null==t?n=new Error("Undefined or null error was reported!"):(n=new Error(t.message),["name","title","code","stack"].forEach(function(e){t[e]&&(n[e]=t[e])})),n instanceof Error&&!n.stack)try{throw n}catch(e){}return n}(e),n={fingerprint:function(t){var n=["{{ default }}"];return"string"==typeof t?n.push("message::"+t):null!=t&&["message","name","title","code"].forEach(function(e){t[e]&&n.push(e+"::"+t[e])}),n}(t),tags:function(t){var n={otError:!0,partnerId:i.value,buildHash:a.buildHash};return t instanceof Error&&["name","title","code"].forEach(function(e){t[e]&&(n["error."+e]=t[e])}),n}(t)};c.captureException(t,n);var r=c.lastEventId();return o.debug("Reported error with ID: "+r,t,n),r}};return s&&(t.addEventListener("error",function(e){null!=e.error&&u.send(e.error)}),c&&c.config(a.sentryDSN,{whitelistUrls:[r],logger:"webrtc-js",release:a.version,autoBreadcrumbs:!1,shouldSendCallback:n}).install().noConflict()),u}},function(e,t,n){e.exports=n(385)},function(e){"use strict";e.exports=function(n,r){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return n.apply(r,e)}}},function(t,e,y){"use strict";(function(e){var f=y(20),p=y(389),h=y(391),v=y(392),g=y(393),m=y(194),b="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||y(394);t.exports=function(l){return new e(function(n,r){var i=l.data,o=l.headers;f.isFormData(i)&&delete o["Content-Type"];var a=new XMLHttpRequest,e="onreadystatechange",s=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in a||g(l.url)||(a=new window.XDomainRequest,e="onload",s=!0,a.onprogress=function(){},a.ontimeout=function(){}),l.auth){var t=l.auth.username||"",c=l.auth.password||"";o.Authorization="Basic "+b(t+":"+c)}if(a.open(l.method.toUpperCase(),h(l.url,l.params,l.paramsSerializer),!0),a.timeout=l.timeout,a[e]=function(){if(a&&(4===a.readyState||s)&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in a?v(a.getAllResponseHeaders()):null,t={data:l.responseType&&"text"!==l.responseType?a.response:a.responseText,status:1223===a.status?204:a.status,statusText:1223===a.status?"No Content":a.statusText,headers:e,config:l,request:a};p(n,r,t),a=null}},a.onerror=function(){r(m("Network Error",l,null,a)),a=null},a.ontimeout=function(){r(m("timeout of "+l.timeout+"ms exceeded",l,"ECONNABORTED",a)),a=null},f.isStandardBrowserEnv()){var u=y(395),d=(l.withCredentials||g(l.url))&&l.xsrfCookieName?u.read(l.xsrfCookieName):void 0;d&&(o[l.xsrfHeaderName]=d)}if("setRequestHeader"in a&&f.forEach(o,function(e,t){void 0===i&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)}),l.withCredentials&&(a.withCredentials=!0),l.responseType)try{a.responseType=l.responseType}catch(e){if("json"!==l.responseType)throw e}"function"==typeof l.onDownloadProgress&&a.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(e){a&&(a.abort(),r(e),a=null)}),void 0===i&&(i=null),a.send(i)})}}).call(this,y(1))},function(e,t,n){"use strict";var a=n(390);e.exports=function(e,t,n,r,i){var o=new Error(e);return a(o,t,n,r,i)}},function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},function(e,t,n){var r=n(88),i=n(198),o=i?function(e,t){return i.set(e,t),e}:r;e.exports=o},function(e,t,n){var r=n(186),i=r&&new r;e.exports=i},function(e,t,n){var w=n(200),O=n(201),I=n(409),A=n(89),x=n(202),R=n(210),N=n(423),k=n(130),D=n(14),r=1,i=2,o=8,a=16,s=128,c=512;function M(u,d,l,f,p,h,v,g,m,b){var y=d&s,E=d&r,_=d&i,C=d&(o|a),T=d&c,S=_?void 0:A(u);return function e(){for(var t=arguments.length,n=Array(t),r=t;r--;)n[r]=arguments[r];if(C)var i=R(e),o=I(n,i);if(f&&(n=w(n,f,p,C)),h&&(n=O(n,h,v,C)),t-=o,C&&t<b){var a=k(n,i);return x(u,d,M,e.placeholder,l,n,a,g,m,b-t)}var s=E?l:this,c=_?s[u]:u;return t=n.length,g?n=N(n,g):T&&1<t&&n.reverse(),y&&m<t&&(n.length=m),this&&this!==D&&this instanceof e&&(c=S||A(c)),c.apply(s,n)}}e.exports=M},function(e){var f=Math.max;e.exports=function(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,c=t.length,u=f(o-a,0),d=Array(c+u),l=!r;++s<c;)d[s]=t[s];for(;++i<a;)(l||i<o)&&(d[n[i]]=e[i]);for(;u--;)d[s++]=e[i++];return d}},function(e){var h=Math.max;e.exports=function(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,c=-1,u=t.length,d=h(o-s,0),l=Array(d+u),f=!r;++i<d;)l[i]=e[i];for(var p=i;++c<u;)l[p+c]=t[c];for(;++a<s;)(f||i<o)&&(l[p+n[a]]=e[i++]);return l}},function(e,t,n){var p=n(410),h=n(206),v=n(208);e.exports=function(e,t,n,r,i,o,a,s,c,u){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var l=[e,t,i,d?o:void 0,d?a:void 0,d?void 0:o,d?void 0:a,s,c,u],f=n.apply(void 0,l);return p(e)&&h(f,l),f.placeholder=r,v(f,e,t)}},function(e,t,n){var r=n(198),i=n(204),o=r?function(e){return r.get(e)}:i;e.exports=o},function(e){e.exports=function(){}},function(e,t,n){var r=n(86),i=n(128);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}(o.prototype=r(i.prototype)).constructor=o,e.exports=o},function(e,t,n){var r=n(197),i=n(207)(r);e.exports=i},function(e){var a=Date.now;e.exports=function(r){var i=0,o=0;return function(e){var t=a(),n=16-(t-o);if(o=t,0<n){if(800<=++i)return e}else i=0;return r.apply(void 0,arguments)}}},function(e,t,n){var i=n(415),o=n(416),a=n(129),s=n(419);e.exports=function(e,t,n){var r=t+"";return a(e,o(r,s(i(r),n)))}},function(e){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e){e.exports=function(e){return e.placeholder}},function(e,t,n){var r=n(8),i=n(70),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){var g=n(92),m=n(213),b=n(93);e.exports=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&s<c))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var d=-1,l=!0,f=2&n?new g:void 0;for(o.set(e,t),o.set(t,e);++d<s;){var p=e[d],h=t[d];if(r)var v=a?r(h,p,d,t,e,o):r(p,h,d,e,t,o);if(void 0!==v){if(v)continue;l=!1;break}if(f){if(!m(t,function(e,t){if(!b(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)})){l=!1;break}}else if(p!==h&&!i(p,h,n,r,o)){l=!1;break}}return o.delete(e),o.delete(t),l}},function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e){e.exports=function(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}},function(e,t,n){var r=n(8);e.exports=function(e){return e==e&&!r(e)}},function(e){e.exports=function(t,n){return function(e){return null!=e&&(e[t]===n&&(void 0!==n||t in Object(e)))}}},function(e,t,n){var r=n(440),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,i=r(function(e){var i=[];return 46===e.charCodeAt(0)&&i.push(""),e.replace(o,function(e,t,n,r){i.push(n?r.replace(a,"$1"):t||e)}),i});e.exports=i},function(e,t,n){var r=n(442),i=n(443);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var u=n(120),d=n(449);e.exports=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=d),o||(o=[]);++a<s;){var c=t[a];0<n&&r(c)?1<n?e(c,n-1,r,i,o):u(o,c):i||(o[o.length]=c)}return o}},function(e,t,n){var c=n(126),u=Math.max;e.exports=function(o,a,s){return a=u(void 0===a?o.length-1:a,0),function(){for(var e=arguments,t=-1,n=u(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];t=-1;for(var i=Array(a+1);++t<a;)i[t]=e[t];return i[a]=s(r),c(o,this,i)}}},function(e,t,n){var r=n(456)();e.exports=r},function(e,t,n){"use strict";var D=n(460),M=n(461);function I(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=o,t.resolve=function(e,t){return o(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},t.format=function(e){M.isString(e)&&(e=o(e));return e instanceof I?e.format():I.prototype.format.call(e)},t.Url=I;var P=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,L=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),j=["'"].concat(i),U=["%","/","?",";","#"].concat(j),F=["/","?","#"],B=/^[+a-z0-9A-Z_-]{0,63}$/,V=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,z={javascript:!0,"javascript:":!0},W={javascript:!0,"javascript:":!0},H={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},G=n(462);function o(e,t,n){if(e&&M.isObject(e)&&e instanceof I)return e;var r=new I;return r.parse(e,t,n),r}I.prototype.parse=function(e,t,n){if(!M.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/");var a=e=o.join(i);if(a=a.trim(),!n&&1===e.split("#").length){var s=L.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?G.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var c=P.exec(a);if(c){var u=(c=c[0]).toLowerCase();this.protocol=u,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var d="//"===a.substr(0,2);!d||c&&W[c]||(a=a.substr(2),this.slashes=!0)}if(!W[c]&&(d||c&&!H[c])){for(var l,f,p=-1,h=0;h<F.length;h++){-1!==(v=a.indexOf(F[h]))&&(-1===p||v<p)&&(p=v)}-1!==(f=-1===p?a.lastIndexOf("@"):a.lastIndexOf("@",p))&&(l=a.slice(0,f),a=a.slice(f+1),this.auth=decodeURIComponent(l)),p=-1;for(h=0;h<U.length;h++){var v;-1!==(v=a.indexOf(U[h]))&&(-1===p||v<p)&&(p=v)}-1===p&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),b=(h=0,m.length);h<b;h++){var y=m[h];if(y&&!y.match(B)){for(var E="",_=0,C=y.length;_<C;_++)127<y.charCodeAt(_)?E+="x":E+=y[_];if(!E.match(B)){var T=m.slice(0,h),S=m.slice(h+1),w=y.match(V);w&&(T.push(w[1]),S.unshift(w[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=T.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=D.toASCII(this.hostname));var O=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+O,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!z[u])for(h=0,b=j.length;h<b;h++){var A=j[h];if(-1!==a.indexOf(A)){var x=encodeURIComponent(A);x===A&&(x=escape(A)),a=a.split(A).join(x)}}var R=a.indexOf("#");-1!==R&&(this.hash=a.substr(R),a=a.slice(0,R));var N=a.indexOf("?");if(-1!==N?(this.search=a.substr(N),this.query=a.substr(N+1),t&&(this.query=G.parse(this.query)),a=a.slice(0,N)):t&&(this.search="",this.query={}),a&&(this.pathname=a),H[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var k=this.search||"";this.path=O+k}return this.href=this.format(),this},I.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&M.isObject(this.query)&&Object.keys(this.query).length&&(o=G.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||H[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),t+i+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+r},I.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},I.prototype.resolveObject=function(e){if(M.isString(e)){var t=new I;t.parse(e,!1,!0),e=t}for(var n=new I,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),s=0;s<a.length;s++){var c=a[s];"protocol"!==c&&(n[c]=e[c])}return H[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!H[e.protocol]){for(var u=Object.keys(e),d=0;d<u.length;d++){var l=u[d];n[l]=e[l]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||W[e.protocol])n.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),n.pathname=f.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var p=n.pathname||"",h=n.search||"";n.path=p+h}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),m=g||v||n.host&&e.pathname,b=m,y=n.pathname&&n.pathname.split("/")||[],E=(f=e.pathname&&e.pathname.split("/")||[],n.protocol&&!H[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===y[0]?y[0]=n.host:y.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),m=m&&(""===f[0]||""===y[0])),g)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,y=f;else if(f.length)y||(y=[]),y.pop(),y=y.concat(f),n.search=e.search,n.query=e.query;else if(!M.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=y.shift(),(w=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=w.shift(),n.host=n.hostname=w.shift());return n.search=e.search,n.query=e.query,M.isNull(n.pathname)&&M.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!y.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var _=y.slice(-1)[0],C=(n.host||e.host||1<y.length)&&("."===_||".."===_)||""===_,T=0,S=y.length;0<=S;S--)"."===(_=y[S])?y.splice(S,1):".."===_?(y.splice(S,1),T++):T&&(y.splice(S,1),T--);if(!m&&!b)for(;T--;)y.unshift("..");!m||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),C&&"/"!==y.join("/").substr(-1)&&y.push("");var w,O=""===y[0]||y[0]&&"/"===y[0].charAt(0);E&&(n.hostname=n.host=O?"":y.length?y.shift():"",(w=!!(n.host&&0<n.host.indexOf("@"))&&n.host.split("@"))&&(n.auth=w.shift(),n.host=n.hostname=w.shift()));return(m=m||n.host&&y.length)&&!O&&y.unshift(""),y.length?n.pathname=y.join("/"):(n.pathname=null,n.path=null),M.isNull(n.pathname)&&M.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},I.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t){return new r(e,t)}},function(e,t,n){"use strict";function o(e){if("IE"!==c.name||9<c.version)return Array.prototype.slice.call(e);for(var t=[],n=0,r=e.length;n<r;++n)t.push(e[n]);return t}function i(e,t){var n=function(e,t){var n;if(void 0===e)return[];if("string"==typeof e){n=[];var r=s.exec(e);if(t=t||document,r&&r[1]){var i=t.getElementById(r[1]);i&&n.push(i)}else n=t.querySelectorAll(e)}else e&&(e.nodeType||window.XMLHttpRequest&&e instanceof window.XMLHttpRequest||e===window)?(n=[e],t=e):Array.isArray(e)?(n=e.slice(),t=null):n=o(n);return n}(e,t);this.context=t,this.toArray=function(){return n},this.length=n.length,this.first=n[0],this.last=n[n.length-1],this.get=function(e){return void 0===e?n:n[e]}}var r=n(13),a={attributes:n(465),css:n(466),classNames:n(467),observers:n(469)},s=/^#([\w-]*)$/,c=n(4);((e.exports=i)._attachToOTHelpers={}).removeElement=function(e){return new i(e).remove()},i.prototype.getAsArray=function(){var e=this.get();return r(e.forEach)||(e=o(e)),e},i.prototype.some=function(e,t){return this.getAsArray().some(e,t)},i.prototype.forEach=function(e,t){return this.getAsArray().forEach(e,t),this},i.prototype.map=function(e,t){return new i(this.getAsArray().map(e,t),this.context)},i.prototype.filter=function(e,t){return new i(this.getAsArray().filter(e,t),this.context)},i.prototype.find=function(e){return new i(e,this.first)},i.prototype.on=function(t,n){return this.forEach(function(e){e.addEventListener(t,n,!1)})},i.prototype.off=function(t,n){return this.forEach(function(e){e.removeEventListener(t,n,!1)})},i.prototype.once=function(e,t){var n=function(){this.off(e,n),t.apply(void 0,arguments)}.bind(this);return this.on(e,n)},i.prototype.appendTo=function(t){if(!t)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach(function(e){t.appendChild(e)})},i.prototype.append=function(){var t=this.first;return t&&Array.prototype.forEach.call(arguments,function(e){t.appendChild(e)}),this},i.prototype.prepend=function(){if(0===arguments.length)return this;var e,t=this.first;return t&&(e=Array.prototype.slice.call(arguments),t.firstElementChild||t.appendChild(e.shift()),e.forEach(function(e){t.insertBefore(e,t.firstElementChild)})),this},i.prototype.after=function(t){if(!t)throw new Error("after requires a DOMElement to insert after");return this.forEach(function(e){e.parentElement&&(t!==e.parentNode.lastChild?e.parentElement.insertBefore(e,t):e.parentElement.appendChild(e))})},i.prototype.before=function(t){if(!t)throw new Error("before requires a DOMElement to insert before");return this.forEach(function(e){e.parentElement&&e.parentElement.insertBefore(e,t)})},i.prototype.remove=function(){return this.forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})},i.prototype.empty=function(){return this.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})},i.prototype.isDisplayNone=function(){return this.some(function(e){return(0===e.offsetWidth||0===e.offsetHeight)&&"none"===new i(e).css("display")||!(!e.parentNode||!e.parentNode.style)&&new i(e.parentNode).isDisplayNone()})};function u(e){return 0!==e.offsetWidth&&0!==e.offsetHeight||"none"!==new i(e).css("display")?e.parentNode&&e.parentNode.style?u(e.parentNode):null:e}i._attachToOTHelpers.emptyElement=function(e){return new i(e).empty()},i._attachToOTHelpers._findElementWithDisplayNone=u,a.css(i,u),a.attributes(i),a.classNames(i),a.observers(i),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach(function(r){i._attachToOTHelpers[r]=function(){var e=Array.prototype.slice.apply(arguments),t=e.shift(),n=new i(t);return i.prototype[r].apply(n,e)}})},function(e,t,n){"use strict";var b=n(0)("deprecation");e.exports=function(e,t,n){var r=void 0===n?{}:n,i=r.value,o=r.name,a=void 0===o?""+t:o,s=r.getWarning,c=void 0===s?"":s,u=r.setWarning,d=void 0===u?"":u,l=r.canSet,f=void 0!==l&&l,p=r.warnOnSet,h=i,v=!1,g=!(void 0!==p&&p),m={get:function(){return v||(v=!0,b.warn((a+" is deprecated, and will be removed in the future. "+c).trim())),h},set:function(e){f&&(h=e),g||(g=!0,b.warn((a+" is deprecated, and will be removed in the future. "+d).trim()))}};Object.defineProperty(e,t,m)}},function(e,t,n){var r=n(73),c=n(138);e.exports=function(s){return r(function(e,t){var n=-1,r=t.length,i=1<r?t[r-1]:void 0,o=2<r?t[2]:void 0;for(i=3<s.length&&"function"==typeof i?(r--,i):void 0,o&&c(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&s(e,a,n,i)}return e})}},function(e,t,n){"use strict";e.exports=n(472)()?WeakMap:n(473)},function(e){"use strict";var n=Object.create,r=Object.getPrototypeOf,i={};e.exports=function(e){var t=Object.setPrototypeOf;return"function"==typeof t&&r(t((e||n)(null),i))===i}},function(e,t,n){"use strict";var i,r,o,a,s=n(230),c=n(25),u=Object.prototype.isPrototypeOf,d=Object.defineProperty,l={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(c(e),null===t||s(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=(r=function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{(e=r.set).call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:((t={}).__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}())?(o=2===r.level?r.set?(a=r.set,function(e,t){return a.call(i(e,t),t),e}):function(e,t){return i(e,t).__proto__=t,e}:function e(t,n){var r;return i(t,n),(r=u.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,r&&d(e.nullPolyfill,"__proto__",l),t},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:r.level})):null,n(474)},function(e,t,n){"use strict";var r=n(56),i={function:!0,object:!0};e.exports=function(e){return r(e)&&i[typeof e]||!1}},function(e){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var r=n(56),i=Array.prototype.forEach,o=Object.create;e.exports=function(){var t=o(null);return i.call(arguments,function(e){r(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){"use strict";e.exports=n(483)()?String.prototype.contains:n(484)},function(e,t,n){"use strict";var r=n(98),i=n(99),o=n(485),a=n(505),s=n(506),c=n(47).iterator;e.exports=function(e){return"function"==typeof s(e)[c]?e[c]():r(e)?new o(e):i(e)?new a(e):new o(e)}},function(e,t,n){"use strict";var r,i=n(490),o=n(140),a=n(48),s=n(25),c=n(74),u=n(491),d=n(47),l=Object.defineProperty,f=Object.defineProperties;e.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");f(this,{__list__:c("w",s(e)),__context__:c("w",t),__nextIndex__:c("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,f(r.prototype,o({_next:c(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:c(function(){return this._createResult(this._next())}),_createResult:c(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:c(function(e){return this.__list__[e]}),_unBind:c(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:c(function(){return"[object "+(this[d.toStringTag]||"Object")+"]"})},u({_onAdd:c(function(n){n>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,t){n<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(n)):l(this,"__redo__",c("c",[n])))}),_onDelete:c(function(n){var e;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(n))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){n<e&&(this.__redo__[t]=--e)},this)))}),_onClear:c(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),l(r.prototype,d.iterator,c(function(){return this}))},function(e,t,n){"use strict";var a=n(223),r=n(4),i=n(237),o=n(6),s={};e.exports=s,"Node"!==r.name&&(s.request=function(e,t,n){var r=new window.XMLHttpRequest,i=t||{};if(i.method){for(var o in t.overrideMimeType&&(r.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),delete t.overrideMimeType),n&&(a(r).on("load",function(e){var t=e.target.status;200<=t&&(t<300||304===t)?n(null,e):n(e)}),a(r).on("error",n)),r.open(t.method,e,!0),i.headers||(i.headers={}),i.headers)Object.prototype.hasOwnProperty.call(i.headers,o)&&r.setRequestHeader(o,i.headers[o]);r.send(t.body&&function(t){if("string"==typeof t)return t;var n=[];return Object.keys(t).forEach(function(e){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]))}),n.join("&").replace(/\+/g,"%20")}(t.body))}else n(new Error("No HTTP method specified in options"))},s.get=function(e,t,n){var r=o(t||{},{method:"GET"});s.request(e,r,n)},s.post=function(e,t,n){var r=o(t||{},{method:"POST"});s.request(e,r,n)},s.getJSON=function(e,t,r){var n=o({Accept:"application/json"},(t=t||{}).headers||{});s.get(e,o(t||{},{headers:n}),function(e,t){if(e)r(e,t&&t.target&&t.target.responseText);else{var n;try{n=JSON.parse(t.target.responseText)}catch(e){return void r(e,t&&t.target&&t.target.responseText)}r(null,n,t)}})},i(s))},function(e){"use strict";e.exports=function(t){var n={};Object.keys(t).forEach(function(e){n[e]=t[e]}),t._attachToOTHelpers=n}},function(e,t,n){"use strict";var l=n(6),f=n(0)("analytics"),r=n(511),i=n(15),p=n(236),h=i(),v=new r;e.exports=function(e){var c=this,t=e.loggingUrl,n=e.queue,o=void 0===n?v:n,r=e.ajax,a=void 0===r?p:r;this.loggingUrl=t;var s=this.loggingUrl+"/logging/ClientEvent",u=this.loggingUrl+"/logging/ClientQos",d={};this.logError=function(e,t,n,r,i){void 0===r&&(r=null),void 0===i&&(i={});var o=i.partnerId;if(!function(e,t,n){if(!n)return!1;var r=[n,t,e].join("_");return 100<=(d[r]||0)}(e,t,o)){var a=[o,t,e].join("_"),s=r;d[a]=void 0!==d[a]?d[a]+1:1,c.logEvent(l(i,{action:t+"."+e,payload:s}),!1)}},this.logEvent=function(e,t,n,r){if(void 0===t&&(t=!1),void 0===r&&(r=function(){}),e.clientInstanceId=h,n&&!isNaN(n)&&Math.random()>n)f.debug("skipping sending analytics due to throttle:",e);else{var i;f.debug("queueing analytics:",c.loggingUrl,e);try{i=JSON.stringify(e)}catch(e){return void r(e)}!function(e,n,r){void 0===n&&(n=function(){}),o.add(function(t){f.debug("sending analytics:",c.loggingUrl,e),a.post(r?u:s,{body:e,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},function(e){e&&console.log("Failed to send ClientEvent, moving on to the next item."),n(e||void 0),t()})})}(i,r,t)}},this.logQOS=function(e){return c.logEvent(e,!0)}}},function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e){for(var i=[],t=0;t<256;++t)i[t]=(t+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},function(e,t,n){"use strict";var d=n(13),r=n(5),l=n(0)("Collection");e.exports=function(e){var i=[],o={},a=e||"id";r(this);function s(e,t){return d(e[t])?e[t]():e[t]}var c=function(e){this.trigger("update",e),this.trigger("update:"+e.target.id,e)}.bind(this),u=function(e){this.remove(e.target,e.reason)}.bind(this);this.reset=function(){i.forEach(function(e){e.off("updated",c,this),e.off("destroyed",u,this)},this),i=[],o={}},this.destroy=function(t){i.forEach(function(e){e&&"function"==typeof e.destroy&&e.destroy(t,!0)}),this.reset(),this.off()},this.get=function(e){return e&&void 0!==o[e]?i[o[e]]:void 0},this.has=function(e){return e&&void 0!==o[e]},this.toString=function(){return i.toString()},this.where=function(n,e){return d(n)?i.filter(n,e):i.filter(function(e){for(var t in n)if(n.hasOwnProperty(t)&&s(e,t)!==n[t])return!1;return!0})},this.find=function(n,e){var t;t=(t=d(n)?n:function(e){for(var t in n)if(n.hasOwnProperty(t)&&s(e,t)!==n[t])return!1;return!0}).bind(e);for(var r=0;r<i.length;++r)if(!0===t(i[r]))return i[r];return null},this.forEach=function(e,t){return i.forEach(e,t),this},this.map=function(e){return i.map(e)},this.add=function(e){var t=s(e,a);return this.has(t)?l.warn("Model "+t+" is already in the collection",i):(o[t]=i.push(e)-1,e.on("updated",c,this),e.on("destroyed",u,this),this.trigger("add",e),this.trigger("add:"+t,e)),this},this.remove=function(e,t){var n=s(e,a);i.splice(o[n],1);for(var r=o[n];r<i.length;++r)o[s(i[r],a)]=r;return delete o[n],e.off("updated",c,this),e.off("destroyed",u,this),this.trigger("remove",e,t),this.trigger("remove:"+n,e,t),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(e){this.trigger("add",e),this.trigger("add:"+s(e,a),e)},this)},this.length=function(){return i.length}}},function(e,t,n){"use strict";function r(e,t,n){switch(arguments.length){case 1:c(e)&&(n=e,e=t=void 0);break;case 2:c(t)&&(n=t,t=void 0)}if(n instanceof Error)for(var r=0,i=u.length;r<i;++r)this[u[r]]=n[u[r]];else if(c(n))for(var o in n)n.hasOwnProperty(o)&&(this[o]=n[o]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){var a=s();!this.fileName&&a.fileName&&(this.fileName=a.fileName),!this.lineNumber&&a.lineNumber&&(this.lineNumber=a.lineNumber),!this.columnNumber&&a.columnNumber&&(this.columnNumber=a.columnNumber),!this.stack&&a.stack&&(this.stack=a.stack)}!this.message&&e&&(this.message=e),this.name&&"Error"!==this.name||!t||(this.name=t)}var s,a=n(4),c=n(8),u=["description","fileName","lineNumber","message","name","number","stack"];((e.exports=r).prototype=Object.create(Error.prototype)).valueOf=r.prototype.toString=function(){var e="";return this.fileName&&(e+=" "+this.fileName),this.lineNumber&&(e+=" "+this.lineNumber,this.columnNumber&&(e+=":"+this.columnNumber)),"<"+(this.name?this.name+" ":"")+this.message+e+">"};function d(e,t){return t.slice(2).map(function(e){var t={fileName:e.getFileName(),linenumber:e.getLineNumber(),columnNumber:e.getColumnNumber()};return e.getFunctionName()&&(t.functionName=e.getFunctionName()),e.getMethodName()&&(t.methodName=e.getMethodName()),e.getThis()&&(t.self=e.getThis()),t})}s=function(){var e,t,n,r={};switch(a.name){case"Firefox":case"Safari":case"IE":try{window.call.js.is.explody()}catch(e){n=e}(e=(n.stack||"").split("\n")).shift(),e.shift(),r.stack=e,"IE"===a.name&&(r.stack.shift(),r.stack=e.map(function(e){return e.replace(/^\s+at\s+/g,"")})),(t=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(e[0]))&&(r.fileName=t[1],r.lineNumber=parseInt(t[2],10),3<t.length&&(r.columnNumber=parseInt(t[4],10)));break;case"Chrome":case"Node":case"Opera":var i=Error.prepareStackTrace;Error.prepareStackTrace=d,n=new Error,r.stack=n.stack,Error.prepareStackTrace=i;var o=r.stack[0];r.lineNumber=o.lineNumber,r.columnNumber=o.columnNumber,r.fileName=o.fileName,o.functionName&&(r.functionName=o.functionName),o.methodName&&(r.methodName=o.methodName),o.self&&(r.self=o.self);break;default:(n=new Error).stack&&(r.stack=n.stack.split("\n"))}return n.message&&(r.message=n.message),r}},function(e){function s(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function i(r,i){var o=[],a=[];return null==i&&(i=function(e,t){return o[0]===t?"[Circular ~]":"[Circular ~."+a.slice(0,s(o,t)).join(".")+"]"}),function(e,t){if(0<o.length){var n=s(o,this);~n?o.splice(n+1):o.push(this),~n?a.splice(n,1/0,e):a.push(e),~s(o,t)&&(t=i.call(this,e,t))}else o.push(t);return null==r?t instanceof Error?function(e){var t={stack:e.stack,message:e.message,name:e.name};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(t):t:r.call(this,e,t)}}(e.exports=function(e,t,n,r){return JSON.stringify(e,i(t,r),n)}).getSerialize=i},function(e,t,n){var r=n(34),i=n(521),o=n(73),a=n(522),s=o(function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]});e.exports=s},function(e,t,n){"use strict";var r,i,o=n(13),a=n(15),s=n(0)("guidStorage"),c={};e.exports=c;c.override=function(e){if(function(e){return!(o(e.get)&&o(e.set))}(e))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");r!==e&&(r=e,i&&r.set(i,function(e){e&&s.error("Failed to send initial Guid value ("+i+") to the newly assigned Guid Storage. The error was: "+e)}))},c.get=function(n){!function(e){i?e(null,i):r.get(e)}(function(e,t){e?n(e):(t?i||(i=t):(t=a(),r.set(t,function(e){e?n(e):i=t})),n(null,i))})},c.override({get:function(e){var t;try{t=window.localStorage.getItem("opentok_client_id")}catch(e){t||(t=a())}e(null,t)},set:function(e,t){try{window.localStorage.setItem("opentok_client_id",e)}catch(e){}t(null)}}),c.set=function(e){i=e}},function(e,t,n){"use strict";var r=n(2)(n(32)),i=n(54),o=n(45),a=function(){function e(e){void 0===e&&(e={}),Object.defineProperty(this,"_rawSessionInfo",{value:o(e)})}return(0,r.default)(e,[{key:"sessionId",get:function(){return this._rawSessionInfo.session_id}},{key:"partnerId",get:function(){return this._rawSessionInfo.partner_id}},{key:"messagingServer",get:function(){return this._rawSessionInfo.messaging_server_url}},{key:"mediaServerName",get:function(){return this._rawSessionInfo.media_server_hostname}},{key:"messagingURL",get:function(){return this._rawSessionInfo.messaging_url}},{key:"symphonyAddress",get:function(){return this._rawSessionInfo.symphony_address}},{key:"iceServers",get:function(){return this._rawSessionInfo.ice_servers}},{key:"simulcast",get:function(){return i(this._rawSessionInfo,"properties.simulcast")}},{key:"reconnection",get:function(){return i(this._rawSessionInfo,"properties.reconnection",!1)}},{key:"renegotiation",get:function(){return i(this._rawSessionInfo,"properties.renegotiation",!1)}},{key:"p2pEnabled",get:function(){return"enabled"===i(this._rawSessionInfo,"properties.p2p.preference.value")}},{key:"rememberDeviceChoiceIE",get:function(){return i(this._rawSessionInfo,"properties.rememberDeviceChoiceIE",!1)}},{key:"priorityVideoCodec",get:function(){return i(this._rawSessionInfo,"properties.priorityVideoCodec","")}},{key:"h264",get:function(){return i(this._rawSessionInfo,"properties.h264",!0)}},{key:"vp8",get:function(){return i(this._rawSessionInfo,"properties.vp8",!0)}},{key:"vp9",get:function(){return i(this._rawSessionInfo,"properties.vp9",!0)}},{key:"clientCandidates",get:function(){var e=i(this._rawSessionInfo,"properties.clientCandidates");return"relayed"===e?"relay":e}},{key:"peerRegeneration",get:function(){return i(this._rawSessionInfo,"properties.peerRegeneration",!0)}}]),e}();e.exports=a},function(r,e,t){var o=t(248);function i(e,t,n){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?r.exports=i=function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}:r.exports=i=Reflect.construct,i.apply(null,arguments)}r.exports=i},function(n){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.exports=r},function(e){"use strict";var d={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};d.localCName=d.generateIdentifier(),d.splitLines=function(e){return e.trim().split("\n").map(function(e){return e.trim()})},d.splitSections=function(e){return e.split("\nm=").map(function(e,t){return(0<t?"m="+e:e).trim()+"\r\n"})},d.getDescription=function(e){var t=d.splitSections(e);return t&&t[0]},d.getMediaSections=function(e){var t=d.splitSections(e);return t.shift(),t},d.matchPrefix=function(e,t){return d.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},d.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},d.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},d.parseIceOptions=function(e){return e.substr(14).split(" ")},d.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},d.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},d.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:0<t[0].indexOf("/")?t[0].split("/")[1]:"sendrecv",uri:t[1]}},d.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},d.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)n[(t=r[i].trim().split("="))[0].trim()]=t[1];return n},d.writeFmtp=function(t){var e="",n=t.payloadType;if(void 0!==t.preferredPayloadType&&(n=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){var r=[];Object.keys(t.parameters).forEach(function(e){t.parameters[e]?r.push(e+"="+t.parameters[e]):r.push(e)}),e+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return e},d.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},d.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"}),t},d.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return-1<r?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},d.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},d.getMid=function(e){var t=d.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},d.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},d.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:d.matchPrefix(e+t,"a=fingerprint:").map(d.parseFingerprint)}},d.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach(function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"}),n},d.getIceParameters=function(e,t){var n=d.splitLines(e);return{usernameFragment:(n=n.concat(d.splitLines(t))).filter(function(e){return 0===e.indexOf("a=ice-ufrag:")})[0].substr(12),password:n.filter(function(e){return 0===e.indexOf("a=ice-pwd:")})[0].substr(10)}},d.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},d.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=d.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var i=n[r],o=d.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(o){var a=d.parseRtpMap(o),s=d.matchPrefix(e,"a=fmtp:"+i+" ");switch(a.parameters=s.length?d.parseFmtp(s[0]):{},a.rtcpFeedback=d.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(d.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return d.matchPrefix(e,"a=extmap:").forEach(function(e){t.headerExtensions.push(d.parseExtmap(e))}),t},d.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=0<t.codecs.length?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(e){n+=d.writeRtpMap(e),n+=d.writeFmtp(e),n+=d.writeRtcpFb(e)});var r=0;return t.codecs.forEach(function(e){e.maxptime>r&&(r=e.maxptime)}),0<r&&(n+="a=maxptime:"+r+"\r\n"),n+="a=rtcp-mux\r\n",t.headerExtensions&&t.headerExtensions.forEach(function(e){n+=d.writeExtmap(e)}),n},d.parseRtpEncodingParameters=function(e){var n,r=[],t=d.parseRtpParameters(e),i=-1!==t.fecMechanisms.indexOf("RED"),o=-1!==t.fecMechanisms.indexOf("ULPFEC"),a=d.matchPrefix(e,"a=ssrc:").map(function(e){return d.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute}),s=0<a.length&&a[0].ssrc,c=d.matchPrefix(e,"a=ssrc-group:FID").map(function(e){return e.substr(17).split(" ").map(function(e){return parseInt(e,10)})});0<c.length&&1<c[0].length&&c[0][0]===s&&(n=c[0][1]),t.codecs.forEach(function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:s,codecPayloadType:parseInt(e.parameters.apt,10)};s&&n&&(t.rtx={ssrc:n}),r.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:s,mechanism:o?"red+ulpfec":"red"},r.push(t))}}),0===r.length&&s&&r.push({ssrc:s});var u=d.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=u})),r},d.parseRtcpParameters=function(e){var t={},n=d.matchPrefix(e,"a=ssrc:").map(function(e){return d.parseSsrcMedia(e)}).filter(function(e){return"cname"===e.attribute})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var r=d.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=0<r.length,t.compound=0===r.length;var i=d.matchPrefix(e,"a=rtcp-mux");return t.mux=0<i.length,t},d.parseMsid=function(e){var t,n=d.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var r=d.matchPrefix(e,"a=ssrc:").map(function(e){return d.parseSsrcMedia(e)}).filter(function(e){return"msid"===e.attribute});return 0<r.length?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},d.generateSessionId=function(){return Math.random().toString().substr(2,21)},d.writeSessionBoilerplate=function(e,t,n){var r=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||d.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},d.writeMediaSection=function(e,t,n,r){var i=d.writeRtpDescription(e.kind,t);if(i+=d.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=d.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var o="msid:"+r.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+o,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+o,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+o,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+d.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+d.localCName+"\r\n"),i},d.getDirection=function(e,t){for(var n=d.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?d.getDirection(t):"sendrecv"},d.getKind=function(e){return d.splitLines(e)[0].split(" ")[0].substr(2)},d.isRejected=function(e){return"0"===e.split(" ",2)[1]},d.parseMLine=function(e){var t=d.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},d.parseOLine=function(e){var t=d.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},d.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=d.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},e.exports=d},function(e){"use strict";e.exports=function(e){return-1===["Chrome","Safari"].indexOf(e.browserName)||e.isScreenSharing||e.sessionInfo.p2pEnabled||!e.constraints.video&&!e.isCustomVideoTrack?1:640<e.videoDimensions.width&&480<e.videoDimensions.height?3:2}},function(e,t,n){"use strict";var o=n(2)(n(11)),c=n(49);e.exports=function(){function e(e,t){var n,r=(void 0===t?{}:t).requestAnimationFrame,i=void 0===r?(n=window).requestAnimationFrame.bind(n):r;(0,o.default)(this,"_lastCalled",c()),(0,o.default)(this,"_audioLevel",void 0),(0,o.default)(this,"_running",!1),this._requestAnimationFrame=i,this._getStats=e,this._startLoop()}var t=e.prototype;return t._startLoop=function(){this._running||(this._running=!0,this._requestAnimationFrame(this._loop.bind(this)))},t._loop=function(){var s=this;this._getStats(function(e,t){var n=null;if(!e)for(var r=0;r<t.length;r+=1){var i=t[r],o=null;if(void 0!==i.audioOutputLevel){var a=parseFloat(i.audioOutputLevel)/32768;isNaN(a)||(o=a)}else void 0!==i.audioLevel&&(o=i.audioLevel);null!==o&&(null===n||n<o)&&(n=o)}s._audioLevel=n,s._running&&c()-s._lastCalled<1e4?s._requestAnimationFrame(s._loop.bind(s)):s._running=!1})},t.destroy=function(){this._running=!1},t.sample=function(e){if("function"==typeof e)throw new Error("sample no longer takes a callback");return this._startLoop(),this._lastCalled=c(),this._audioLevel},e}()},function(o,e,u){"use strict";(function(e){function a(){return r?e.resolve():(r=!0,new e(function(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.media="screen",t.href="//fonts.googleapis.com/css?family=Didact+Gothic",t.onload=e,document.head.appendChild(t)}))}var s=u(253),c=u(536),t=u(537),n=u(538),r=!1,i={promptToInstall:function(){var e=new s(c),t=e.el("[role=OT_acceptEULA]"),n=e.el("[role=OT_download]"),r=e.el("[role=OT_downloadSection]"),i=e.el("[role=OT_refreshSection]"),o=e.el("[role=OT_refresh]");return t.addEventListener("change",function(){n.disabled=!t.checked}),n.addEventListener("click",function(){e.emit("download"),setTimeout(function(){e.el(".OT_dialog-messages-main").innerHTML="To enable audio & video chat on this website, run the installer and then refresh your browser window.",r.classList.add("OT_dialog-hidden"),i.classList.remove("OT_dialog-hidden")},3e3)}),o.addEventListener("click",function(){return e.emit("refresh")}),a().then(function(){return e.open()}),e},updateInProgress:function(){var e=new s(t),n=e.el("[role=OT_progressText"),r=e.el("[role=OT_progressBar]");return e.setUpdateProgress=function(e){var t=Math.max(0,Math.min(Math.round(e),100));r.style.width=t+"%",n.innerText=t+"%"},a().then(function(){return e.open()}),e},updateComplete:function(e){var t=new s(n);return t.el("[role=OT_refresh]").addEventListener("click",function(){return t.emit("reload")}),e&&(t.el(".OT_dialog-messages-main").innerText="Update failed.",t.el(".OT_dialog-messages-minor").innerText=e||"NO ERROR"),a().then(function(){return t.open()}),t}};o.exports={Plugin:i}}).call(this,u(1))},function(e,t,n){"use strict";var r=n(2)(n(50)),i=n(35);e.exports=function(a){function e(e,t){var n,r=(void 0===t?{}:t).destroyOnClose,i=void 0===r||r;(n=a.call(this)||this).modalDiv=document.createElement("div"),n.modalDiv.classList.add("OT_ModalDialog"),n.modalDiv.innerHTML=e;var o=n.modalDiv.querySelectorAll("[role=OT_close]");return[].forEach.call(o,function(e){return e.addEventListener("click",function(e){e.preventDefault(),n.close()})}),n.close(),document.body.appendChild(n.modalDiv),i&&n.on("closed",function(){return n.destroy()}),n}(0,r.default)(e,a);var t=e.prototype;return t.open=function(){this.modalDiv.style.display="block",this.emit("opened")},t.close=function(){this.modalDiv.style.display="none",this.emit("closed")},t.destroy=function(){this.modalDiv.innerHTML="",this.modalDiv.parentNode.removeChild(this.modalDiv),this.emit("destroyed")},t.el=function(e){return this.modalDiv.querySelector(e)},e}(i)},function(e,t,n){"use strict";var a=n(36),s=/^[0-9]+(\.[0-9]+)*$/;e.exports=function(e,t){a(s.test(e)),a(s.test(t));var n=String(e).split(".").map(Number),r=String(t).split(".").map(Number);a(n.length===r.length);for(var i=n.length,o=0;o<i;o+=1)if(n[o]!==r[o])return n[o]>r[o];return a(e===t),!1}},function(e,t,n){"use strict";function r(){var a;this.hasRequiredVersion=function(){return 1!==d(u.version(),u.installedVersion())&&-1===d(u.installedVersion(),u.maxPluginVersion())},this.autoUpdate=function(n){var r=arguments;return function(){a?n(void 0,r):p.create({mimeType:u.getInstallerMimeType(),isVisible:!1,windowless:!1},function(e,t){if(a=t,!e)return n.apply(void 0,r);c.error("Error while loading the AutoUpdater: "+e)})}}(function(){var i=l.Dialogs.Plugin.updateInProgress(),o={ieVersion:f.env.version,pluginOldVersion:u.installedVersion(),pluginNewVersion:u.version},e=s(function(){h.logEvent({action:"OTPluginAutoUpdate",variation:"Success",partnerId:l.APIKEY,payload:JSON.stringify(o)}),a.destroy(),i.close(),l.Dialogs.Plugin.updateComplete().on("reload",function(){window.location.reload()})}),t=s(function(e,t,n){o.errorCode=e,o.systemErrorCode=n,h.logEvent({action:"OTPluginAutoUpdate",variation:"Failure",partnerId:l.APIKEY,payload:JSON.stringify(o)}),a.destroy(),i.close();var r=t+" ("+e+"). Please restart your browser and try again.";i=l.Dialogs.Plugin.updateComplete(r).on("reload",i.close()),c.error("autoUpdate failed: "+t+" ("+e+"). Please restart yourbrowser and try again.")}),n=s(function(e){i.setUpdateProgress(e.toFixed())});a._.updatePlugin(u.pathToInstaller(),e,t,n)}),this.destroy=function(){a&&a.destroy()},navigator.plugins&&navigator.plugins.refresh(!1)}var i,o=n(27),s=n(256),c=n(0)("AutoUpdater"),u=n(101),d=n(546),l=window.OT,f=n(3),p=n(103),h=new o;r.get=function(e){if(!i){if(!this.isinstalled())return void e.call(null,"Plugin was not installed");i=new r}e.call(null,void 0,i)},r.isinstalled=function(){return null!==u.getInstallerMimeType()&&!u.hasBrokenUpdater()},r.installedVersion=function(){return u.installedVersion()},e.exports=r},function(e){"use strict";e.exports=function(t){return function(){var e=arguments;setTimeout(function(){t.apply(void 0,e)})}}},function(e,t,n){var p=n(92),h=n(90),v=n(144),g=n(34),m=n(65),b=n(93);e.exports=function(e,t,n,r){var i=-1,o=h,a=!0,s=e.length,c=[],u=t.length;if(!s)return c;n&&(t=g(t,m(n))),r?(o=v,a=!1):200<=t.length&&(o=b,a=!1,t=new p(t));e:for(;++i<s;){var d=e[i],l=null==n?d:n(d);if(d=r||0!==d?d:0,a&&l==l){for(var f=u;f--;)if(t[f]===l)continue e;c.push(d)}else o(t,l,r)||c.push(d)}return c}},function(e,t,n){var r=n(257),i=n(219),o=n(73),a=n(100),s=o(function(e,t){return a(e)?r(e,i(t,1,a,!0)):[]});e.exports=s},function(o,e,a){"use strict";(function(e){var t=a(5);function n(){return"undefined"==typeof document||"complete"===document.readyState||"interactive"===document.readyState&&document.body}var r=!1,i={isDomLoaded:n,isDomUnloaded:function(){return r},whenUnloaded:new e(function(e){if("undefined"!=typeof window){window.addEventListener("unload",function(){r=!0,i.emit("unload"),e()})}}),whenLoaded:new e(function(t){if(n())t();else{var e=function e(){document.removeEventListener("DOMContentLoaded",e),document.removeEventListener("load",e),i.emit("load"),t()};document.addEventListener("DOMContentLoaded",e),document.addEventListener("load",e)}})};t(i),o.exports=i}).call(this,a(1))},function(e,t,n){"use strict";var u=n(2)(n(11)),d=n(558),l=n(559),r=function(){function r(e,t){var n=this,r=e.id,i=e.videoTracks,o=e.audioTracks;(0,u.default)(this,"_audioTracks",[]),(0,u.default)(this,"_videoTracks",[]),this.id=r,t.refCounter.add(this);function a(e){return new d(r,e,t)}var s,c;i&&(s=this._videoTracks).push.apply(s,i.map(a));o&&(c=this._audioTracks).push.apply(c,o.map(a));this._={plugin:t,render:function(){return new l(t,n)}}}r.fromJson=function(e,t){if(!e)return null;var n=new r(JSON.parse(e),t);return r.streams[n.id]=n},r.getOrCreate=function(e,t){if(!e)return null;var n=JSON.parse(e).id;return r.streams[n]||r.fromJson(e,t)};var e=r.prototype;return e.getVideoTracks=function(){return this._videoTracks},e.getAudioTracks=function(){return this._audioTracks},e.getTracks=function(){return[].concat(this._videoTracks,this._audioTracks)},e.getTrackById=function(t){return this.getTracks().filter(function(e){return e.id===t})[0]||null},e.hasVideo=function(){return this._videoTracks.some(function(e){return e.enabled})},e.hasAudio=function(){return this._audioTracks.some(function(e){return e.enabled})},e.stop=function(){this._.plugin._.stopMediaStream(this.id),this._.plugin.refCounter.remove(this)},e.destroy=function(){this.stop()},r}();(0,u.default)(r,"streams",{}),e.exports=r},function(e){"use strict";e.exports=function(e){this.sdpMid=e.sdpMid,this.sdpMLineIndex=parseInt(e.sdpMLineIndex,10),this.candidate=e.candidate}},function(e){"use strict";e.exports=function(e){this.type=e.type,this.sdp=e.sdp}},function(e,t,n){"use strict";var u=n(151),r=n(573);function d(e,t,n){return!(!e.publish&&t)&&("boolean"==typeof e.source?e.source:n?{mandatory:{sourceId:e.source}}:{deviceId:{exact:e.source}})}function i(e){return{audio:function(e){var n=d(e.audio,e.enableRenegotiation,e.usingOptionalMandatoryStyle);if(!1===n)return!1;var t=e.usingOptionalMandatoryStyle,r=e.enableStereo,i=e.disableAudioProcessing,o=e.prefixedAudioConstraints;return(r||i||o)&&!0===n&&(n={}),r&&(t?(u(n,{optional:[]}),n.optional.push({channelCount:2})):n.channelCount=2),i&&(t?(u(n,{optional:[]}),n.optional.push({echoCancellation:!1})):n.echoCancellation=!1),o&&(t?(u(n,{optional:[]}),Object.keys(o).forEach(function(e){var t;n.optional.push(((t={})[e]=o[e],t))})):u(n,o)),n}(e),video:function(e){var t=d(e.video,e.enableRenegotiation,e.usingOptionalMandatoryStyle);if(!1===t)return!1;var n=e.videoDimensions,r=e.frameRate,i=e.maxResolution,o=e.facingMode,a=e.usingOptionalMandatoryStyle;if((n||r||i||o)&&!0===t&&(t={}),n){var s=n.width,c=n.height;a?(u(t,{optional:[]}),t.optional.push({minWidth:s},{maxWidth:s},{minHeight:c},{maxHeight:c})):u(t,{width:{ideal:s},height:{ideal:c}})}return r&&(a?(u(t,{optional:[]}),t.optional.push({minFrameRate:r},{maxFrameRate:r})):u(t,{frameRate:{ideal:r}})),i&&u(t,a?{mandatory:{maxWidth:i.width,maxHeight:i.height}}:{width:{max:i.width},height:{max:i.height}}),o&&(a?(u(t,{optional:[]}),t.optional.push({facingMode:o})):u(t,{facingMode:{ideal:o}})),t}(e)}}e.exports=function(e){var t=r(e);return{constraints:i(t),publishAudio:t.audio.publish,publishVideo:t.video.publish,frameRate:t.frameRate,videoDimensions:t.videoDimensions,audioDeviceId:"string"==typeof t.audio.source?t.audio.source:void 0,videoDeviceId:"string"==typeof t.video.source?t.video.source:void 0}}},function(e,t,n){var r=n(61),i=n(52);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e){e.exports=function(e,t){if("__proto__"!=t)return e[t]}},function(e,t,n){var r=n(96),i=n(574);e.exports=function(e){return i(r(e).toLowerCase())}},function(e){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(n=i<n?i:n)<0&&(n+=i),i=n<t?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},function(e){var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},function(e,t,n){var r=n(577),i=n(268),o=n(578);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var r=n(97),i=n(582)(r);e.exports=i},function(e){"use strict";e.exports=15e3},function(e){"use strict";e.exports=function(e,t){return void 0===t&&(t=!1),void 0===e?t:"true"===e||!0===e}},function(e,t,n){var o=n(34),a=n(77),s=n(595),c=n(55),u=n(43),d=n(597),r=n(135),l=n(184),i=r(function(t,e){var n={};if(null==t)return n;var r=!1;e=o(e,function(e){return e=c(e,t),r||(r=1<e.length),e}),u(t,l(t),n),r&&(n=a(n,7,d));for(var i=e.length;i--;)s(n,e[i]);return n});e.exports=i},function(e){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var o=n(209),a=n(33),s=n(91),c=Math.max;e.exports=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:s(n);return i<0&&(i=c(r+i,0)),o(e,a(t,3),i)}},function(e,t,n){"use strict";var r=n(7),i=n(4),o=n(603);e.exports=function(){return-1!==["Firefox","Edge","Safari"].indexOf(i.name)||r.isInstalled()?function(e,r){e.getStats(null).then(function(t){var n=[];"function"==typeof t.values?n=o(t.values()):"function"!=typeof t.forEach?n=Object.keys(t).map(function(e){return t[e]}):t.forEach(function(e){n.push(e)}),r(null,n)}).catch(r)}:function(e,t){e.getStats(function(e){var r=[];e.result().forEach(function(t){var n={};t.names().forEach(function(e){n[e]=t.stat(e)}),n.id=t.id,n.type=t.type,n.timestamp=t.timestamp,r.push(n)}),t(null,r)})}}},function(e,t,n){var r=n(606),i=n(31);e.exports=function(e){return null==e?[]:r(e,i(e))}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var a=r(n(159)),s=r(n(50)),c=r(n(11)),i=n(35),u=r(n(29)),d=r(n(614)),l=r(n(615)),f=r(n(49)),p=(0,r(n(0)).default)("QoS"),o=function(i){function o(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=i.call.apply(i,[this].concat(n))||this,(0,c.default)((0,a.default)(e),"_peerConnection",void 0),(0,c.default)((0,a.default)(e),"_isPublisher",void 0),(0,c.default)((0,a.default)(e),"timeoutId",void 0),(0,c.default)((0,a.default)(e),"_creationTime",(0,f.default)()),(0,c.default)((0,a.default)(e),"offerMessagesReceived",0),(0,c.default)((0,a.default)(e),"prevStats",{timeStamp:(0,f.default)()}),(0,c.default)((0,a.default)(e),"changeCounters",{videoCodec:new l.default,audioCodec:new l.default}),e}(0,s.default)(o,i);var e=o.prototype;return e.startCollecting=function(e,t){var i=this;if(e&&e.getStats){this._isPublisher=t;var n=Boolean(this._peerConnection);if(this._peerConnection=e,!n){this.timeoutId=setTimeout(function(){return function n(r){var e=(0,f.default)(),t={timeStamp:e,duration:Math.round((e-i._creationTime)/1e3),period:Math.round((e-i.prevStats.timeStamp)/1e3)};(0,d.default)(i._peerConnection,i.prevStats,t,i._isPublisher,function(e,t){e?p.error("Failed to Parse QOS Stats:",e):(i.handleParsedStats(t),clearTimeout(i.timeoutId),i.timeoutId=setTimeout(function(){return n(o.INTERVAL)},r))})}(o.INTERVAL-o.INITIAL_INTERVAL)},o.INITIAL_INTERVAL)}}},e.stopCollecting=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this._peerConnection=null},e.handleOfferMessageReceived=function(){this.offerMessagesReceived+=1},e.handleParsedStats=function(t){var n=this;Object.keys(this.changeCounters).forEach(function(e){n.changeCounters[e].onValue(t[e]),t[e+"ChangeCount"]=n.changeCounters[e].changeCount}),t.offerMessagesReceived=this.offerMessagesReceived;var r=(0,u.default)(t);["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"].forEach(function(e){r[e]=n.prevStats&&n.prevStats[e]?t[e]-n.prevStats[e]:t[e]}),this.prevStats=t,this.emit("stats",r)},o}(i.EventEmitter);o.INITIAL_INTERVAL=1e3,o.INTERVAL=3e4;var h=o;t.default=h},function(e,t,n){"use strict";var p=n(15),s=n(280).default,c=n(9),h=n(16);e.exports=function(e){var t=void 0===e?{}:e,n=t.haveGetDisplayMedia,r=void 0===n?s:n,i=t.global,u=void 0===i?window:i,o=t.Errors,d=void 0===o?c:o,a=t.otError,l=void 0===a?h():a,f=!r&&!!u.navigator.webkitGetUserMedia&&!u.navigator.userAgent.match(/android/i)&&void 0!==u.chrome;return{isSupportedInThisBrowser:f,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!0,browser:!0},register:function(e,t){return 2===t?this.registerVersion2(e):this.registerVersion1(e)},registerVersion1:function(e){if(!e)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");function o(e,t){var n={payload:t,from:"jsapi"};return n[c]=e,n}function a(e,t){var n,r=p();return i[r]=function(){clearTimeout(n),n=null,e.apply(void 0,arguments)},t&&(n=setTimeout(function(){delete i[r],e(l(d.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))},t)),r}function t(t){if(!t)throw new Error("isAvailable: callback is required.");if(r)if(void 0!==s)setTimeout(t.bind(null,s));else{var e=a(function(e){!0!==s&&(s="extensionLoaded"===e),t(s)},2e3),n=o("isExtensionInstalled",{requestId:e});u.postMessage(n,"*")}else setTimeout(t.bind(null,!1))}var r=f,i={},s=void 0,c="com.tokbox.screenSharing."+e;return u.addEventListener("message",function(e){if(e.origin===u.location.origin&&null!=e.data&&"object"==typeof e.data&&"extension"===e.data.from){var t=e.data[c],n=e.data.payload;if(n&&n.requestId){var r=i[n.requestId];delete i[n.requestId],r&&r(t,n)}"extensionLoaded"===t&&(s=!0)}}),{extensionAPIVersion:1,extensionID:e,isInstalled:t,getConstraints:function(n,r,i){if(!i)throw new Error("getSourceId: callback is required");t(function(e){if(!e)return i(l(d.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));var t=a(function(e,t){"object"==typeof e&&e.name&&e.stack?i(e):"permissionDenied"===e?i(l(d.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(r.video||(r.video={}),r.video.mandatory||(r.video.mandatory={}),r.video.mandatory.chromeMediaSource="desktop",r.video.mandatory.chromeMediaSourceId=t.sourceId,i(void 0,r))});u.postMessage(o("getSourceId",{requestId:t,source:n}),"*")})}}},registerVersion2:function(i){function e(t){if(!t)throw new Error("isAvailable: callback is required.");n?u.chrome.runtime.sendMessage(i,{type:"isInstalled"},null,function(e){setTimeout(t.bind(null,!!e))}):setTimeout(t.bind(null,!1))}var n=f&&void 0!==u.chrome.runtime;return{extensionAPIVersion:2,extensionID:i,isInstalled:e,getConstraints:function(t,n,r){if(!r)throw new Error("getSourceId: callback is required");e(function(e){if(!e)return r(l(d.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));u.chrome.runtime.sendMessage(i,{type:"getSourceId",source:t},null,function(e){"permissionDenied"===e.error?r(l(d.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):e.error?r(new Error("UnexpectError: "+e.error)):(n.video||(n.video={}),n.video.mandatory||(n.video.mandatory={}),n.video.mandatory.chromeMediaSource="desktop",n.video.mandatory.chromeMediaSourceId=e.sourceId,r(void 0,n))})})}}}}}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var i=r(n(54)),o="function"==typeof(0,i.default)(window,"navigator.getDisplayMedia",(0,i.default)(window,"navigator.mediaDevices.getDisplayMedia"));t.default=o},function(e,t,n){"use strict";(function(I){var A=n(157),x=n(108);e.exports=function(e){void 0===e&&(e={});var b=e.Archiving||n(619),y=e.AudioLevelMeter||n(282),E=e.AudioLevelTransformer||n(146),_=e.BackingBar||n(283),C=e.Chrome||n(147),T=e.MuteButton||n(284)(),S=e.NamePanel||n(285),w=e.StylableComponent||n(154),O=e.logging||n(0)("createChromeMixin");return function(o,e){function a(e){if(!1===e)return"off";var t=o.getStyle("buttonDisplayMode");return!1===t?"on":t}var s,c,u,t=void 0===e?{}:e,d=t.name,l=t.publishAudio,f=t.publishVideo,p=t.audioSource,n=t.showControls,r=t.shouldAllowAudio,h=t.logAnalyticsEvent,v={},g=A(),m=new I(function(i,e){v.init=function(e){o.getStyle("showArchiveStatus")||h("showArchiveStatus","createChrome",{mode:"off"});var t={backingBar:new _({nameMode:d?o.getStyle("nameDisplayMode"):"off",muteMode:a(o.getStyle("buttonDisplayMode"))}),name:new S({name:d,mode:o.getStyle("nameDisplayMode")}),archive:new b({show:Boolean(o.getStyle("showArchiveStatus"))&&"off"!==o.getStyle("archiveStatusDisplayMode"),archiving:!1}),muteButton:new T({muted:!1===l,mode:a.call(null,o.getStyle("buttonDisplayMode"))})};s=new y({mode:o.getStyle("audioLevelDisplayMode")});var n=new E,r=new x(function(){var e=l?n.transform(o.loudness):0;s.setValue(e)});s.watchVisibilityChanged(function(e){e?r.start():r.stop()}),s.audioOnly(!f&&l),t.audioLevel=s,e&&e.domElement&&(c=new C({parent:(u=e).domElement}).set(t).on({muted:function(){return o.publishAudio(!1)},unmuted:function(){return o.publishAudio(!0)}}),null!==p&&!1!==p||v.removeAudioTrack(),i())},v.reset=function(){e(new Error("Chrome still being created")),c&&(c.destroy(),c=null)},v.destroy=function(){v.reset(),g.releaseAll(),m=null}});m.catch(function(e){e&&"Chrome still being created"===e.message||O.error("createChromeMixin failed to setup UI",e)}),v.setAudioOnly=function(e){s&&s.audioOnly(e)},v.setArchivingStatus=function(e){c&&c.archive.setArchiving(e)},v.setMuted=function(e){c&&c.muteButton&&c.muteButton.muted(e)},v.removeAudioTrack=function(){c&&c.muteButton&&c.muteButton.remove()},v.addAudioTrack=function(){c&&c.muteButton&&c.muteButton.add()},w(o,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:r?"auto":"off",archiveStatusDisplayMode:"auto",backgroundImageURI:null},n,function(e){h("SetStyle","Publisher",e,null,.1)});function i(e,t){m.then(function(){switch(e){case"nameDisplayMode":c.name.setDisplayMode(t),c.backingBar.setNameMode(t);break;case"showArchiveStatus":h("showArchiveStatus","styleChange",{mode:t?"on":"off"}),c.archive.setShowArchiveStatus(Boolean(t));break;case"archiveStatusDisplayMode":c.archive.setShowArchiveStatus("off"!==t);break;case"buttonDisplayMode":c.muteButton.setDisplayMode(t),c.backingBar.setMuteMode(t);break;case"audioLevelDisplayMode":c.audioLevel.setDisplayMode(t);break;case"backgroundImageURI":u.setBackgroundImageURI(t)}})}return o.on("styleValueChanged",i),g.add(function(){return o.off("styleValueChanged",i)}),v}}}).call(this,n(1))},function(e,t,n){"use strict";(function(h){var v=n(109),g=n(40),m=n(3),b=n(35);e.exports=function(e){var t,n,r,i,o=this,a=new b,s=!0,c=!1,u="auto",d=e.maxValue||1,l=e.minValue||0;function f(){var e=(c&&"auto"===u||"on"===u)&&s;i!==e&&(i=e,a.emit("visibilityChanged",e))}v(o,{audioOnly:{get:function(){return c},set:function(e){c=e,f()}}}),o.setValue=function(e){r=e,function(){var e=(r-l)/(d-l);n.style.transform="scale("+Math.sqrt(e)+")"}()},o.watchVisibilityChanged=function(e){return a.on("visibilityChanged",e),h.resolve().then(function(){e(i)}),function(){a.removeListener("visibilityChanged",e)}};var p={mode:e?e.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:function(){n=m.createElement("div",{className:"OT_audio-level-meter__value"},""),t=m.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");var e=o.domElement;e.appendChild(t),e.appendChild(n),o.watchVisibilityChanged(function(e){e?m.removeClass(o.domElement,"OT_hide-forced"):m.addClass(o.domElement,"OT_hide-forced")})},onDestroy:function(){a.removeAllListeners("visibilityChanged")}};g(this,p),o.setDisplayMode=function(e){u=e,f()},o.getDisplayMode=function(){return u},o.showAfterLoading=function(){s=!0,f()},o.hideWhileLoading=function(){s=!1,f()},f()}}).call(this,n(1))},function(e,t,n){"use strict";var i=n(40);e.exports=function(e){var t=e.nameMode,n=e.muteMode;function r(){return"on"===t||"on"===n?"on":"mini"===t||"mini"===n?"mini":"mini-auto"===t||"mini-auto"===n?"mini-auto":"auto"===t||"auto"===n?"auto":"off"}i(this,{mode:r(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(e){t=e,this.setDisplayMode(r())},this.setMuteMode=function(e){n=e,this.setDisplayMode(r())}}},function(e,t,n){"use strict";var r=n(3),i=n(40),u=n(109);e.exports=function(e){void 0===e&&(e={});var s=e.OTHelpers||r,c=e.Widget||i;return function(e){function t(){i?s.addClass(r.domElement,"OT_active"):s.removeClass(r.domElement,"OT_active ")}function n(){return i=!i,t(),i?r.parent.trigger("muted",r):r.parent.trigger("unmuted",r),!1}var r=this,i=e.muted||!1;u(this,{muted:{get:function(){return i},set:function(e){i=e,t()}}});var o,a=i?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute";c(this,{mode:e.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:a,type:"button"},onCreate:function(e){s.on(e,"click",n)},onDestroy:function(e){s.off(e,"click",n)}}),this.remove=function(){r.domElement&&r.domElement.parentNode&&(o=r.domElement.parentNode,r.domElement.parentNode.removeChild(r.domElement))},this.add=function(){o&&r.domElement&&!r.domElement.parentNode&&o.appendChild(r.domElement)}}}},function(e,t,n){"use strict";var r=n(40);e.exports=function(e){var t=e.name;t&&""!==t.trim().length||(t=null,e.mode="off"),this.setName=function(e){t||this.setDisplayMode("auto"),t=e,this.domElement.innerHTML=t}.bind(this),r(this,{mode:e.mode,nodeName:"h1",htmlContent:t,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},function(e,t,i){"use strict";var o=i(104);e.exports=function(e){void 0===e&&(e={});var n=e.OTPlugin||i(7),r=e.global||window;return function(){if(r.navigator.mediaDevices){var e=r.navigator.mediaDevices;return e.enumerateDevices&&e.enumerateDevices.bind(e)}if(n.isInstalled()){var t=n.mediaDevices;return t.enumerateDevices&&o(t.enumerateDevices.bind(t))}}}},function(e,t,n){"use strict";var r=n(4),i=n(280).default;e.exports={isSupportedInThisBrowser:"Edge"!==r.name&&i,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:"Safari"!==r.name,browser:!0},register:function(){return{isInstalled:function(e){e(void 0)},getConstraints:function(e,t,n){n(void 0,{video:!0})}}}}},function(e,t){"use strict";t.isMediaStreamTrack=function(e){return e&&"object"==typeof e&&"string"==typeof e.kind&&"function"==typeof e.stop&&"boolean"==typeof e.enabled}},function(e,n,t){"use strict";t.r(n),function(u){var t=function(o,a,s,c){return new(s||(s=u))(function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((c=c.apply(o,a||[])).next())})},d=function(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=o[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[0,a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};n.default=function(a,s,c){return void 0===c&&(c=10),function(){for(var o=[],e=0;e<arguments.length;e++)o[e]=arguments[e];return t(this,void 0,void 0,function(){var i,t,n;return d(this,function(e){switch(e.label){case 0:i=0,t=function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,6]),t={},[4,a.apply(void 0,o)];case 1:return[2,(t.value=e.sent(),t)];case 2:if(n=e.sent(),!1===(r=s(n,i))||null==r||c<=i)throw n;return"number"!=typeof r?[3,4]:[4,new u(function(e){return window.setTimeout(e,r)})];case 3:return e.sent(),[3,5];case 4:if(!0!==r)throw new Error("onFailure must return boolean, or delay in ms");e.label=5;case 5:return[3,6];case 6:return[2]}})},e.label=1;case 1:return(i+=1)?[5,t()]:[3,3];case 2:return"object"==typeof(n=e.sent())?[2,n.value]:[3,1];case 3:return[2]}})})}}}.call(this,t(1))},function(e,t,n){"use strict";var r=n(109);e.exports=function(){return function(i,e){var o;r(this,{muted:{get:function(){return o},set:function(e){if(o!==e){o=e;for(var t=i.getAudioTracks(),n=0,r=t.length;n<r;++n)t[n].enabled=!o}}}}),void 0!==e?this.muted(!0===e):i.getAudioTracks().length?this.muted(!i.getAudioTracks()[0].enabled):this.muted(!1)}}},function(e,t,i){"use strict";e.exports=function(e){void 0===e&&(e={});var t=e.Errors||i(9),n=e.otError||i(16)(),r={};return window.MediaError&&(r[window.MediaError.MEDIA_ERR_ABORTED]={name:t.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},r[window.MediaError.MEDIA_ERR_NETWORK]={name:t.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},r[window.MediaError.MEDIA_ERR_DECODE]={name:t.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},r[window.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:t.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(e){var t=r[e.code];return t?n(t.name,new Error("There was an unexpected problem with the Video Stream: "+t.message)):new Error("An unknown error occurred"+(e.message?": "+e.message:"."))}}},function(n,e,S){"use strict";(function(t){var e=S(2),s=e(S(23)),v=e(S(11)),u=e(S(17)),d=e(S(18)),g=S(5),m=S(60),b=S(631),r=S(632),y=S(163),E=S(4);function _(e,t){var n=document.createElement("video");return r(n),n.autoplay=!0,n.playsinline=!0,n.innerHTML=e,n.setAttribute("autoplay",!0),n.setAttribute("playsinline",!0),!0===t&&(n.muted="true"),n}function C(e){var t=document.createElement("audio");return r(t),t.autoplay=!0,t.setAttribute("autoplay",!0),t.muted=e,t}var T=function(){var e=(0,d.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new t(function(e){return setTimeout(e)}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();n.exports=function(e){void 0===e&&(e={});var n=e.audioContext||S(160)(),l=e.canBeOrientatedMixin||S(293),r=e.document||window.document,i=e.listenForTracksEnded||S(294)(),f=e.logging||S(0),o=e.OTHelpers||S(3),p=e.videoElementErrorMap||S(291)(),a=e.WebaudioAudioLevelSampler||S(148),c=e.global||window,h=1;return function(){function e(e,t){var r=this,n=e._inject,i=(n=void 0===n?{}:n).createVideoElement,o=void 0===i?_:i,a=n.createAudioElement,s=void 0===a?C:a,c=e.muted,u=e.fallbackText;(0,v.default)(this,"_domElement",void 0),(0,v.default)(this,"_domAudioElement",void 0),(0,v.default)(this,"_blockedVolume",void 0),(0,v.default)(this,"_mediaStoppedListener",void 0),(0,v.default)(this,"_audioLevelSampler",void 0),(0,v.default)(this,"_playInterrupts",0),this.logging=f("NativeVideoElementWrapper:"+h),h+=1,g(this),this._defaultAudioVolume=t;var d=!1;this._domElement=o(u,c),this.trigger("videoElementCreated",this._domElement),this._domElementEvents=m(this._domElement),this._domElementEvents.on("timeupdate",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.trigger.apply(r,["timeupdate"].concat(t))}),this._domElementEvents.on("loadedmetadata",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.trigger.apply(r,["loadedmetadata"].concat(t))});this._domElementEvents.on("error",function(e){r.trigger("error",p(e.target.error))},!1),this._domElementEvents.on("pause",function(){d||(r.logging.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),d=!0),r.play()}),this.on("destroyed",function(){r._domElementEvents.removeAll(),r._domAudioElementEvents&&r._domAudioElementEvents.removeAll()}),l(this,function(){return r._domElement}),"Safari"===E.name&&(this._domAudioElement=s(),this._bindAudioElementEvents())}var t=e.prototype;return t._bindAudioElementEvents=function(){var r=this;this._domAudioElementEvents=m(this._domAudioElement),this._domAudioElementEvents.on("pause",function(){return r.play()}),this._domAudioElementEvents.on("timeupdate",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.trigger.apply(r,["timeupdate"].concat(t))}),this._domAudioElementEvents.on("loadedmetadata",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.trigger.apply(r,["loadedmetadata"].concat(t))})},t.whenTimeIncrements=function(e,t){var n=this;this.once("timeupdate",function(){e.call(t,n)})},t.domElement=function(){return this._domElement},t.videoWidth=function(){return this._domElement?Number(this._domElement["video"+(this.isRotated()?"Height":"Width")]):0},t.videoHeight=function(){return this._domElement?Number(this._domElement["video"+(this.isRotated()?"Width":"Height")]):0},t.aspectRatio=function(){return this.videoWidth()/this.videoHeight()},t.imgData=function(){var e=o.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});r.body.appendChild(e);var t=null;try{e.getContext("2d").drawImage(this._domElement,0,0,e.width,e.height),t=e.toDataURL("image/png")}catch(e){}return o.removeElement(e),null===t||"data:,"===t?(this.logging.warn("Cannot get image data yet"),null):t.replace("data:image/png;base64,","").trim()},t.appendTo=function(e){return e.appendChild(this._domElement),this._domAudioElement&&e.appendChild(this._domAudioElement),this},t.isAudioBlocked=function(){return void 0!==this._blockedVolume},t.unblockAudio=function(){var e=(0,d.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isAudioBlocked()){e.next=3;break}return this.logging.warn("Unexpected call to unblockAudio() without blocked audio"),e.abrupt("return");case 3:return t=this._blockedVolume,this._blockedVolume=void 0,this.setAudioVolume(t),e.prev=6,e.next=9,this.play();case 9:e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(6),this._blockedVolume=t,this._domElement.muted=!0,e.t0;case 16:this.trigger("audioUnblocked");case 17:case"end":return e.stop()}},e,this,[[6,11]])}));return function(){return e.apply(this,arguments)}}(),t.rebind=function(){var e=(0,d.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._domElement){e.next=2;break}throw new Error("Can't rebind because _domElement no longer exists");case 2:this._playInterrupts++,this._domElement.srcObject=this._domElement.srcObject,this._hasAudioElement()&&(this._domAudioElement.srcObject=this._domAudioElement.srcObject);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._createAudioLevelSampler=function(){if(this._removeAudioLevelSampler(),0<this._stream.getAudioTracks().length){try{this._audioContext=n()}catch(e){this.logging.warn("Failed to get AudioContext(), audio level visualisation will not work",e)}this._audioContext&&(this._audioLevelSampler=new a(this._audioContext),this._audioLevelSampler.webRTCStream(this._stream))}},t._removeAudioLevelSampler=function(){this._audioContext&&(delete this._audioContext,delete this._audioLevelSampler)},t._toggleVideoTracks=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._domElement.srcObject.getTracks().filter(function(e){return e.enabled}),1<t.length)return(n=t.filter(function(e){return"video"===e.kind})).forEach(function(e){e.enabled=!1}),e.next=7,T();e.next=8;break;case 7:n.forEach(function(e){e.enabled=!0});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._hasAudioElement=function(){return this._domAudioElement&&this._domAudioElement.srcObject},t.play=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,o,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._playInterrupts,n="Safari"===E.name,r=n&&y(),n)return e.next=6,T();e.next=6;break;case 6:return r&&this._toggleVideoTracks(),e.prev=7,i=this._hasAudioElement()?this._domAudioElement:this._domElement,e.next=11,i.play();case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(7),o=e.t0||{},a=o.name,"AbortError"===a&&this._playInterrupts++,this._playInterrupts>t)return e.abrupt("return",this.play());e.next=21;break;case 21:throw e.t0;case 22:case"end":return e.stop()}},e,this,[[7,14]])}));return function(){return e.apply(this,arguments)}}(),t._bindToStream=function(e){var t=(this._stream=e).getVideoTracks(),n=e.getAudioTracks(),r=t[0],i=void 0===r?{}:r,o=n[0],a=void 0===o?{}:o,s=!i.enabled&&a.enabled;this._domAudioElement&&s?(this._domAudioElement.srcObject=new c.MediaStream(n),this._domElement.srcObject=new c.MediaStream(t)):this._domElement.srcObject=e},t.bindToStream=function(){var t=(0,d.default)(u.default.mark(function e(n){var o,t,r,a=this;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._domElement){e.next=2;break}throw new Error("Can't bind because _domElement no longer exists");case 2:return this._bindToStream(n),(0,d.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.play();case 3:e.next=25;break;case 5:if(e.prev=5,e.t0=e.catch(0),t=!!n.getAudioTracks().length,a._hasAudioElement()&&"NotAllowedError"===e.t0.name)return a._domAudioElement.muted=!0,e.next=12,a.play();e.next=14;break;case 12:e.next=25;break;case 14:if(t)return a._blockedVolume=a.getAudioVolume(),a._domElement.muted=!0,e.next=19,a.play();e.next=22;break;case 19:a.trigger("audioBlocked"),e.next=25;break;case 22:return a._domElement.muted=!0,e.next=25,a.play();case 25:case"end":return e.stop()}},e,null,[[0,5]])}))().catch(function(e){a.logging.debug(".play() failed: ",e)}),o={width:this._domElement.videoWidth,height:this._domElement.videoHeight},this.trigger("videoDimensionsChanged",(0,s.default)({},o),(0,s.default)({},o)),this._domElementEvents.on("resize",function(){var e=a._domElement,t=e.videoWidth,n=e.videoHeight,r=t!==o.width,i=n!==o.height;(r||i)&&(a.trigger("videoDimensionsChanged",(0,s.default)({},o),{width:t,height:n}),o.width=t,o.height=n)}),t=function(){a._mediaStoppedListener.stop(),a._domElement&&(a._domElement.onended=null),a.trigger("mediaStopped")},r=function(e){a.trigger("mediaStopped",e)},this._domElement.onended=function(){return t()},this._mediaStoppedListener=i(n,t,r),this._createAudioLevelSampler(),e.abrupt("return",void 0);case 13:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.unbindStream=function(){return this._domElement&&(this._domElement.srcObject=null),this._domAudioElement&&(this._domAudioElement.srcObject=null),this._removeAudioLevelSampler(),this},t.setAudioVolume=function(e){if(this.isAudioBlocked())this._blockedVolume=e;else{var t=parseFloat(e)/100,n=this.domElement();n&&(n.volume=t,n.muted=0==t)}},t.getAudioVolume=function(){if(this.isAudioBlocked())return this._blockedVolume;var e=this.domElement();return e?e.muted?0:100*e.volume:this._defaultAudioVolume},t.audioChannelType=function(e){var t=this.domElement();return void 0!==e&&(t.mozAudioChannelType=e),"mozAudioChannelType"in this._domElement?t.mozAudioChannelType:"unknown"},t.getAudioInputLevel=function(){return this._audioLevelSampler.sample()},t.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh(),this._createAudioLevelSampler(),this._stream&&0<this._stream.getTracks().length&&(this._playInterrupts++,this.domElement().srcObject=new c.MediaStream(this._stream.getTracks()))},t.destroy=function(){this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.logging.debug("removing domElementEvents"),this._domElementEvents.removeAll(),this._domAudioElementEvents&&this._domAudioElementEvents.removeAll(),this.unbindStream(),this._domElement&&(o.removeElement(this._domElement),this._domElement=null),this._domAudioElement&&(o.removeElement(this._domAudioElement),this._domAudioElement=null),this.trigger("destroyed"),b("NativeVideoElementWrapper",this)},e}()}}).call(this,S(1))},function(e,t,n){"use strict";var o=n(109),a=n(3),s={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};e.exports=function(n,r,e){var i=e;o(n,{isRotated:{get:function(){return this.orientation()&&(270===this.orientation().videoOrientation||90===this.orientation().videoOrientation)}},orientation:{get:function(){return i},set:function(e){var t=s[(i=e).videoOrientation]||s.ROTATED_NORMAL;switch(a.env.name){case"Chrome":case"Safari":r().style.webkitTransform=t;break;case"IE":r().style.msTransform=t;break;default:r().style.transform=t}n.trigger("orientationChanged",i)}},audioChannelType:{get:function(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set:function(e){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=e)}}})}},function(e){"use strict";e.exports=function(){return function(n,r,i){var o=[];function a(t){setTimeout(function(){if(o.length)if(function(e){return e.getTracks().every(function(e){return"ended"===e.readyState})}(n))c(),"function"==typeof r&&r();else{var e=t.target;s(e),"function"==typeof i&&i(e)}},100)}function s(e){e.removeEventListener&&e.removeEventListener("ended",a),e.onended===a&&(e.onended=null);var t=o.indexOf(e);0<=t&&o.splice(t,1)}function c(){o.slice().forEach(s)}function e(){n.getTracks().forEach(function(e){o.push(e),e.onended=a,e.addEventListener&&e.addEventListener("ended",a)})}return e(),{stop:c,refresh:function(){c(),e()}}}}},function(e,t,n){"use strict";(function(t){var C=n(6),T=n(71),S=n(59),w=n(5);e.exports=function(e){void 0===e&&(e={});var b=e.getStatsHelpers||n(75),i=e.OTHelpers||n(3),y=e.PeerConnection||n(107)(),E=e.setCertificates||n(165)(),_=e.watchAudioAcquisition||n(636);return function(e){function o(){this.destroy(),r&&(r=!1,this.trigger("iceRestartFailure")),this.trigger("disconnected")}function a(e){var t=e.reason,n=e.prefix;this.trigger("error",{reason:t,prefix:n})}function s(e){var t=this;r&&c.iceConnectionStateIsConnected()&&(r=!1,this.trigger("iceRestartSuccess")),"connected"===e&&"Chrome"===i.env.name&&(n&&n(),n=_(c.getStats.bind(c),function(){return t.trigger("audioAcquisitionProblem")})),this.trigger("iceConnectionStateChange",e)}var c,n,u=e.iceConfig,d=e.webRTCStream,l=e.channels,f=e.sendMessage,p=e.capableSimulcastStreams,h=e.overrideSimulcastEnabled,v=e.logAnalyticsEvent,g=e.offerOverrides,m=e.answerOverrides,r=!1;w(this),this.getDataChannel=function(e,t,n){c.getDataChannel(e,t,n)},this.destroy=function(){n&&(n(),n=null),c&&(c.disconnect(),c=null),this.off()},this.processMessage=function(e,t){c.processMessage(e,t)},this.addTrack=function(e,t,n){return c.addTrack(e,t,n)},this.removeTrack=function(e){return c.removeTrack(e)},this.getLocalStreams=function(){return c.getLocalStreams()},this.init=function(e,r){var i=this,t={iceConfig:u.needRumorIceServersFallback?C(u,{servers:[].concat(e,u.servers)}):u,channels:l,capableSimulcastStreams:p,overrideSimulcastEnabled:h};E(t,function(e,t){if(e)r(e);else{var n=C({logAnalyticsEvent:v,isPublisher:!0,offerOverrides:g,answerOverrides:m},t);(c=new y(C({sendMessage:f},n))).on({close:o,error:a,qos:function(e){return i.trigger("qos",e)},iceConnectionStateChange:s},i),c.addLocalStream(d).then(function(){r(void 0)}).catch(r)}})},this.getSenders=function(){return c.getSenders()},this.iceRestart=function(){return r=!0,c.iceRestart()},this.hasRelayCandidates=function(){return c.hasRelayCandidates()},this.iceConnectionStateIsConnected=function(){return c.iceConnectionStateIsConnected()},this.findAndReplaceTrack=function(e,t){return c.findAndReplaceTrack(e,t)},this._testOnlyGetFramesEncoded=function(){return new t(function(r,i){c.getStats(function(e,t){if(e)i(e);else{var n=S(t,function(e){return b.isVideoSenderStat(e)&&b.isOutboundStat(e)});n?r(T(n,["timestamp","framesEncoded"])):i(new Error("Could not find framesEncoded in getStats report"))}})})},this.getStats=function(e){return c.getStats(e)}}}}).call(this,n(1))},function(e,t,n){"use strict";var w=n(6),O=n(5);e.exports=function(e){void 0===e&&(e={});var C=e.OTHelpers||n(3),T=e.PeerConnection||n(107)(),S=e.setCertificates||n(165)();return function(e){function o(){this.destroy(),E&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)}function a(e){this.trigger("remoteStreamAdded",e,this)}function s(e){this.trigger("remoteStreamRemoved",e,this)}function c(e){n.trigger("remoteVideoSupported",e)}function u(e){var t=e.reason,n=e.prefix;this.trigger("error",null,t,this,n)}function d(e){!E||"connected"!==e&&"completed"!==e||(E=!1,this.trigger("iceRestartSuccess")),this.trigger("iceConnectionStateChange",e)}function l(e){this.trigger("signalingStateChange",e)}function f(e){this.trigger("signalingStateStable",e)}function p(e,t){"answer"!==e&&"pranswer"!==e||n.trigger("connected"),r(e,t)}var h,n=this,v=e.clientCandidates,t=e.iceConfig,r=e.send,g=e.logAnalyticsEvent,m=e.p2p,b=e.codecFlags,y=this,i=!1,E=!1;O(this),this.close=function(){i||(i=!0,h&&(h.disconnect(),h=null),this.off())},this.destroy=function(){i||(this.subscribeToAudio(!1),this.close())},this.getDataChannel=function(e,t,n){h.getDataChannel(e,t,n)},this.processMessage=function(e,t){h.processMessage(e,t)},this.remoteDescription=function(){return h.remoteDescription()},this.getStats=function(e){h?h.getStats(e):e(new C.Error("Subscriber is not connected cannot getStats","NotConnectedError",{code:1015}))};function _(n){return function(t){h&&h.remoteTracks().forEach(function(e){e.kind===n&&e.enabled!==t&&(e.enabled=t)})}}this.subscribeToAudio=_("audio"),this.subscribeToVideo=_("video"),this.hasRelayCandidates=function(){return h.hasRelayCandidates()},this.iceRestart=function(){return E=!0,h.iceRestart()},this.iceConnectionStateIsConnected=function(){return h.iceConnectionStateIsConnected()},this.init=function(r){var i=this;S({iceConfig:t},function(e,t){if(e)r(e);else{var n=w({logAnalyticsEvent:g,clientCandidates:v,codecFlags:b},t);(h=new T(w({sendMessage:p,p2p:m},n))).on({iceConnected:function(){return y.emit("iceConnected")},close:o,streamAdded:a,streamRemoved:s,signalingStateChange:l,signalingStateStable:f,error:u,qos:function(e){return i.trigger("qos",e)},iceConnectionStateChange:d,remoteVideoSupported:c},y),0<h.remoteTracks().length?h.remoteStreams().forEach(a,y):r(void 0,y)}})}}}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});var t=(e.generateSimpleStateMachine||n(161)())("NotPublishing",["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],{NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]});return t.prototype.isDestroyed=function(){return"Destroyed"===this.current},t.prototype.isAttemptingToPublish=function(){return-1!==["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)},t.prototype.isPublishing=function(){return"Publishing"===this.current},t}},function(e,t){"use strict";function n(e){this.message=e||"Operation has been canceled.",this.name="CancellationError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}Object.defineProperty(t,"__esModule",{value:!0}),((t.default=n).prototype=Object.create(Error.prototype)).constructor=n},function(r,e,i){"use strict";(function(Je){var e=i(2),Qe=e(i(17)),Xe=e(i(18)),$e=e(i(23)),et=i(141),tt=i(151),nt=i(6),rt=i(277),it=i(274),ot=i(54),at=i(37),st=i(167).CancellationError,ct=i(15),ut=i(35),dt=i(49),lt=i(272),ft=i(26),pt=i(5),ht=i(649),vt=i(108),gt=i(60),mt=i(650),bt=i(9),j=i(166)(),yt=i(651),U=i(160)(),F=i(282),B=i(146),V=i(283),z=i(147),W=i(4),H=i(9),G=i(21)(),Y=i(12),q=i(251),Z=i(75),K=i(652),J=i(653),Q=i(164)(),X=i(0)("Subscriber"),$=i(284)(),ee=i(285),te=i(16)(),ne=i(38),re=i(3),ie=i(154),t=i(145)(window),n=i(107)({global:t}),oe=i(296)({PeerConnection:n}),ae=i(300),se=i(654),ce=i(655),ue=i(656),de=i(657),le=i(148),fe=i(301),pe=i(106).parseIceServers,Et=i(658),_t=i(659),Ct=i(660);r.exports=function(e){function Ee(e,t,n){var l=this;if(void 0===t&&(t={}),void 0===n&&(n=function(){}),void 0===t.analytics)throw new Error("Subscriber requires an instance of analytics");function s(e){return N[e]}function a(){return it(Object.keys(N).map(Number).sort())}function c(){return s(a())}function u(t){Object.keys(N).forEach(function(e){N[e]===t&&delete N[e]})}function f(e,t,n,r,i){var o=nt({action:e,variation:t,payload:n,streamId:P?P.id:null,sessionId:M?M.sessionId:null,connectionId:M&&M.isConnected()?M.connection.connectionId:null,partnerId:M&&M.sessionInfo?M.sessionInfo.partnerId:null,subscriberId:I,widgetType:"Subscriber"},r);("Failure"===t||"iceconnectionstatechange"===t&&"closed"===n)&&(o=nt(o,U));var a=[o];i&&a.push(i),O.logEvent.apply(O,a)}var p,d,r,h,v,g,m,b,y,E,i,_,C,T,o,S,w,O=t.analytics,I=ct(),A=Ee.hasAudioOutputLevelStatCapability()||ke(),x=this,R={},N={},k=!1,D=e||I,M=t.session,P=t.stream,L=!1,j=ft.SUBSCRIBER_DISCONNECTED,U={},F=null,B=!1,V=!0,z=[],W=et({},t,{showControls:!0,testNetwork:!1,fitMode:P.defaultFitMode||"cover",insertDefaultUI:!0}),H=M._.getSocket(),G=function(){return rt(N)},Y=_t({onInvalidTransition:function(e,t){var n="Invalid state transition: Event '"+e+"' not possible in state '"+t+"'";Me.error(n),f("Subscriber:InvalidStateTransition","Event",{details:n})}}),q="Unable to subscribe to stream in a reasonable amount of time";if(Et({connectivityState:Y,onWarning:function(){te("Warning",{})},onTimeout:function(){if(p&&p.addError(q),g.isAttemptingToSubscribe()){g.set("Failed"),l._disconnect({noStateTransition:!0});var e=je(bt.TIMEOUT,new Error(q));Y.fail({options:{failureReason:"Subscribe",failureMessage:q,failureCode:xe.UNABLE_TO_SUBSCRIBE},error:e})}},warningMs:15e3,timeoutMs:3e4}),R.promise=new Je(function(e,t){R.resolve=e,R.reject=t}),W.testNetwork&&M.sessionInfo.p2pEnabled&&Me.warn("You cannot test your network with a relayed session. Use a routed session."),this.id=D,this.widgetId=I,this.session=M,this.stream=W.stream,P=W.stream,this.streamId=P.id,!M)return Ue.handleJsException({errorMsg:"OT.Subscriber must be passed a session option",code:2e3,target:this,analytics:O}),null;function Z(e,t){f("ICERestart",e,t)}function K(){Me.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),Y.fail({options:{failureReason:"PeerConnectionError",failureCode:xe.UNABLE_TO_PUBLISH,failureMessage:"PeerConnection disconnected"},error:je(Ie.DISCONNECTED,new Error("ClientDisconnected"))}),l._disconnect({noStateTransition:!0}),(g.isAttemptingToSubscribe()||g.isSubscribing())&&g.set("Failed")}function J(e){var t=je(Ie.MEDIA_ERR_DECODE,e,e.code||xe.P2P_CONNECTION_FAILED);t.message="OT.Subscriber while playing stream: "+t.message,Me.error("OT.Subscriber.onVideoError"),Y.fail({options:{failureReason:"VideoElement",failureMessage:t.message,failureCode:t.code||xe.P2P_CONNECTION_FAILED},error:t});var n=g.isAttemptingToSubscribe();g.set("Failed"),n||x.trigger("error",t.message),Ue.handleJsException({error:t,code:xe.UNABLE_TO_SUBSCRIBE,target:x,analytics:O})}function Q(e,t,n,r){var i;if("SetRemoteDescription"===r&&!V&&t.match(/Unsupported video without audio for fallback/))return p&&p.addError("The stream is unable to be played.","Your browser does not support the video format."),(i="Safari"===Fe.env.name?new Error("VP8 is not supported in this version of Safari. You might want to consider switching to an H264 project. See https://tokbox.com/safari for more information."):new Error("Video format not supported in this browser.")).code=xe.UNSUPPORTED_VIDEO_CODEC,void J(i);if("ICEWorkflow"===r&&M.sessionInfo.reconnection&&k)Me.debug("Ignoring peer connection failure due to possibility of reconnection.");else{var o,a={failureReason:r||"PeerConnectionError",failureMessage:"OT.Subscriber PeerConnection Error: "+t,failureCode:o="ICEWorkflow"===r?xe.SUBSCRIBER_ICE_WORKFLOW_FAILED:e===xe.STREAM_LIMIT_EXCEEDED?e:xe.P2P_CONNECTION_FAILED},s=De(e,t,r,"(not found)","Subscriber");if(Y.fail({options:a,error:s}),g.isAttemptingToSubscribe()){var c={hasRelayCandidates:n&&n.hasRelayCandidates()};f("createPeerConnection","Failure",c,a),g.set("Failed")}else g.isSubscribing()&&(g.set("Failed"),l.trigger("error",t));l._disconnect({noStateTransition:!0}),404===Number(e)&&l._destroy({noStateTransition:!0}),Ue.handleJsException({errorMsg:"OT.Subscriber PeerConnection Error: "+t,errorCode:o,target:l,analytics:O}),se(e)}}function X(e){y=null,Me.debug("OT.Subscriber.onStreamRemoved");var t=p&&p.video();t&&t.stream===e&&p.destroyVideo(),l.trigger("streamRemoved",l)}function $(e){V!==e&&l.dispatchEvent(new Ae.VideoEnabledChangedEvent(e?"videoEnabled":"videoDisabled",{reason:e?"codecChanged":"codecNotSupported"})),V=e}function ee(e){p.setAudioBlockedUi(e);var t=d&&d.audioBlockedIndicator;t&&t.setAudioBlocked(e);var n=d&&d.videoUnsupportedIndicator;n&&n.setVideoUnsupported(!e&&!V)}pt(this),x.once("subscribeComplete",function(){try{n.apply(void 0,arguments)}catch(e){console.error("Completion handler threw an exception",e)}}),Y.observe({onEnterConnecting:function(){te("Attempt",null,{})},onEnterConnected:function(){te("Success",null,{})},onEnterDisconnected:function(e,t){var n=void 0===t?{}:t,r=n.options,i=void 0===r?{}:r,o=n.payload,a=void 0===o?null:o;te(function(e){var t=e.transition,n=e.from;return"fail"===t?"connected"===n?"Disconnect":"Failure":"disconnect"===t&&"connected"===n?"Disconnect":"Cancel"}(e),a,i)}}),Y.observe({onEnterConnected:function(){l.trigger("subscribeComplete",void 0,l)},onEnterDisconnected:function(e,t){var n=e.from,r=(void 0===t?{}:t).error;"connecting"===n&&l.trigger("subscribeComplete",r||new Error("An unknown error occurred"),l)}}),Ct({connectivityState:Y,logAttempt:function(){f("Subscribe","Attempting",null,{connectionId:M&&M.isConnected()?M.connection.connectionId:null})}});var te=function(e,t,n){"Attempt"===e&&(i=(new Date).getTime()),f("Subscribe",e,t,"Failure"===e||"Success"===e||"Cancel"===e?(0,$e.default)({},n,{attemptDuration:(new Date).getTime()-i}):n)},ne=function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){var n,r,i,o,a,s;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y=t,Me.debug("OT.Subscriber.onRemoteStreamAdded"),e.prev=2,e.next=5,ht(function(){return e=y,n=(t=P)&&t.hasVideo&&e&&0===e.getVideoTracks().length,r=t&&t.hasAudio&&e&&0===e.getAudioTracks().length,!(n||r);var e,t,n,r});case 5:e.next=14;break;case 7:if(e.prev=7,e.t0=e.catch(2),"TIMEOUT"!==e.t0.message){e.next=13;break}Me.error("The expected tracks never arrived"),e.next=14;break;case 13:throw e.t0;case 14:return g.set("BindingRemoteStream"),l.subscribeToAudio(C,!1),E="loading",l.subscribeToVideo(W.subscribeToVideo,"loading"),M.sessionInfo.p2pEnabled||(l.setPreferredResolution(W.preferredResolution),l.setPreferredFrameRate(W.preferredFrameRate)),n={error:J,audioVolume:T},t.getVideoTracks().forEach(function(e){window.webkitMediaStream?e.enabled=!1:e.enabled=P.hasVideo&&W.subscribeToVideo}),e.prev=21,e.next=24,p.bindVideo(t,n);case 24:e.next=32;break;case 26:if(e.prev=26,e.t1=e.catch(21),e.t1 instanceof st)return e.abrupt("return");e.next=30;break;case 30:throw J(e.t1),e.t1;case 32:return e.prev=32,p.loading(!1),e.finish(32);case 35:if(r=c(),G().filter(function(e){return e!==r}).forEach(function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){var n;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(t),e.next=3,t;case 3:n=e.sent,Me.debug("closing old peer connection"),n.close();case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),g.isDestroyed())throw new Error("Subscriber destroyed");e.next=39;break;case 39:return window.webkitMediaStream&&t.getVideoTracks().forEach(function(e){e.enabled=P.hasVideo&&W.subscribeToVideo}),(i=p&&p.video())&&i.orientation({width:P.videoDimensions.width,height:P.videoDimensions.height,videoOrientation:P.videoDimensions.orientation}),(o=d&&d.videoUnsupportedIndicator)&&o.setVideoUnsupported(!V),a=new Je(function(e,t){var n=p&&p.video();n&&n.domElement()?e():(p.once("videoElementCreated",e),x.once("destroyed",t))}),e.next=47,a;case 47:return e.next=49,R.promise;case 49:if(!g.isSubscribing()&&p&&p.video()&&(k=!0,B||(Y.connect(),B=!0),Me.debug("OT.Subscriber.onLoaded"),g.set("Subscribing"),v=dt(),p.loading(!1),d&&d.showAfterLoading(),L&&P.setRestrictFrameRate(!0),h&&h.audioOnly(p.audioOnly()),l.setAudioVolume(T),l.trigger("loaded",l)),m&&"webRTCStream"in m&&0<t.getAudioTracks().length&&m.webRTCStream(t),"Safari"===Fe.env.name)return S&&(S.destroy(),S=null),e.next=55,c();e.next=57;break;case 55:s=e.sent,S=Ge(s.getStats.bind(s));case 57:l.trigger("streamAdded",l);case 58:case"end":return e.stop()}},e,null,[[2,7],[21,26,32,35]])}));return function(e){return t.apply(this,arguments)}}();function re(e){var t=ae[e];t&&t!==j&&(j=t,p&&p.loading(t!==ft.SUBSCRIBER_CONNECTED),Me.debug("OT.Subscriber.connectionStateChanged to "+e),l.dispatchEvent(new Ae.ConnectionStateChangedEvent(t,l)))}function ie(){Z("Success")}function oe(){Z("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})}this.on("audioBlocked",function(){ee(!0)}),this.on("audioUnblocked",function(){ee(!1)});var ae={new:ft.SUBSCRIBER_DISCONNECTED,checking:ft.SUBSCRIBER_DISCONNECTED,connected:ft.SUBSCRIBER_CONNECTED,completed:ft.SUBSCRIBER_CONNECTED,disconnected:ft.SUBSCRIBER_DISCONNECTED};r={get:function(){return 0<P.getChannelsOfType("audio").length?x.getStyle("buttonDisplayMode"):"off"},update:function(){var e=r.get();d&&(d.muteButton.setDisplayMode(e),d.backingBar.setMuteMode(e))}};var se=function(e){var t,n;p&&(n=e===xe.STREAM_LIMIT_EXCEEDED?(t="The stream was unable to connect.","The limit for the number of media streams has been reached."):(t="The stream was unable to connect due to a network error.",B?"Ensure you have a stable connection and try again.":"Make sure you have a stable network connection and that it isn't blocked by a firewall."),p.addError(t,n))};function ce(n){G().forEach(function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.t0=!n,e.sent.subscribeToVideo(e.t0);case 4:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),p&&(p.audioOnly(n),p.showPoster(n)),h&&h.audioOnly(n)}Be(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},W.showControls,function(e){f("SetStyle","Subscriber",e,null,.1)});var ue=at(function(){f("GetStats","Called")});this._destroy=function(e){var t=e.reason,n=void 0===t?"Unknown":t,r=e.quiet,i=e.noStateTransition,o=void 0!==i&&i;return g.isDestroyed()||(g.set("Destroyed"),S&&(S.destroy(),S=null),U={sessionId:M.sessionId,connectionId:M&&M.isConnected()?M.connection.connectionId:null,partnerId:M&&M.sessionInfo?M.sessionInfo.partnerId:null,streamId:P&&!P.destroyed?P.id:null},l._disconnect({reason:n,noStateTransition:o}),d&&(d.destroy(),d=null),p&&(p.destroy(),p.off(),p=null,l.element=null),P&&!P.destroyed&&f("unsubscribe",null,{streamId:P.id}),P.off(_,l),l.id=null,D=null,l.stream=null,P=null,l.streamId=null,l.session=null,!(W=M=null)!==r&&(l.dispatchEvent(new Ae.DestroyedEvent(ft.SUBSCRIBER_DESTROYED,l,n)),l.off())),l},this.destroy=function(e,t){void 0===e&&(e="Unsubscribe"),Me.warn("Subscriber#destroy is deprecated and will be removed. Please use Session#unsubscribe instead"),l._destroy({reason:e,quiet:t})},this._disconnect=function(e){var t=void 0===e?{}:e,n=t.reason,r=void 0===n?"Unknown":n;if(!t.noStateTransition){var i="Unsubscribe"===r?void 0:je(Ie.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to"));Y.disconnect({payload:{reason:r},error:i})}g.isDestroyed()||g.isFailed()||g.set("NotSubscribing"),p&&p.destroyVideo(),G().forEach(function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.sent.destroy();case 3:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),Object.keys(N).forEach(function(e){delete N[e]}),H.is("connected")&&P&&!P.destroyed&&H.subscriberDestroy(P.id,l.widgetId)},this.disconnect=function(){Me.warn("Subscriber#disconnect is deprecated and will be removed. Please use Session#unsubscribe instead"),l._disconnect({reason:"Unsubscribe"})};var de=function(){var t=(0,Xe.default)(Qe.default.mark(function e(n){var c,u,d,r,i,o,a;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.peerPriority,u=n.peerId,d=n.fromConnectionId,s(c)){e.next=9;break}return Me.info("PeerConnection escalation to "+c),t={apiKey:M.apiKey,sessionId:M.sessionId,streamId:P.id,subscriberId:l.widgetId},r=["/v2/partner",t.apiKey,"session",t.sessionId,"stream",t.streamId,"subscriber",t.subscriberId].join("/"),i=qe({socket:l.session._.getSocket(),uri:r,content:{peerPriority:c,peerId:u}}),o=function(e,t,n,r,i){void 0===r&&(r={});var o=(0,$e.default)({peerId:u,peerPriority:c},r);return f(e,t,n,o,i)},a=function(e){return t=(0,$e.default)({},e,{peerId:u,peerPriority:c,remoteConnectionId:d}),n=t.parsedStats,r=t.remoteConnectionId,i=t.peerPriority,o=t.peerId,a={widgetType:"Subscriber",width:p.width,height:p.height,audioTrack:y&&0<y.getAudioTracks().length,hasAudio:P&&P.hasAudio,subscribeToAudio:C,audioVolume:l.getAudioVolume(),videoTrack:y&&0<y.getVideoTracks().length,connectionId:M?M.connection.connectionId:null,hasVideo:P&&P.hasVideo,subscribeToVideo:W.subscribeToVideo,congestionLevel:F,streamId:P.id,subscriberId:I,duration:Math.round((dt()-v)/1e3),remoteConnectionId:r,peerPriority:i,peerId:o},s=nt(a,n),O.logQOS(s),void l.trigger("qos",O.combineWithCommon(s));var t,n,r,i,o,a,s},e.next=9,l._setupPeerConnection({peerPriority:c,send:i,log:o,logQoS:a});case 9:case"end":return e.stop()}var t},e)}));return function(e){return t.apply(this,arguments)}}();function le(e){var t=p&&p.video();if(t)try{t.setAudioVolume(e)}catch(e){Me.warn("setAudioVolume: "+e),0===T&&(Me.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),x.subscribeToAudio(!1))}d&&d.muteButton.muted(0===e)}this.processMessage=function(){var r=(0,Xe.default)(Qe.default.mark(function e(t,n,r){var i,o;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Me.debug("OT.Subscriber.processMessage: Received "+t+" message from "+n),Me.debug(r),i=Number(ot(r,"content.peerPriority",0)),o=ot(r,"content.peerId"),i<a())return Me.debug("Ignoring "+t+" message from "+n+" with "+i+". PeerConnection is marked as obsolete"),e.abrupt("return");e.next=7;break;case 7:if("offer"===t)return e.next=10,de({peerPriority:i,peerId:o,fromConnectionId:n});e.next=10;break;case 10:return e.next=12,s(i);case 12:e.sent.processMessage(t,r);case 14:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}(),this.disableVideo=function(e){if(e){if("auto"!==E)return void Me.info("Video was not re-enabled because it was manually disabled");Me.info("Video has been re-enabled")}else Me.warn("Due to high packet loss and low bandwidth, video has been disabled");l.subscribeToVideo(e,"auto"),f("updateQuality","video",e?{videoEnabled:!0}:{videoDisabled:!0})},this.getImgData=function(){if(!l.isSubscribing())return Me.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;var e=p&&p.video();return e?e.imgData():null},this.getStats=function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c()){e.next=3;break}return t(je(Ie.NOT_CONNECTED,new Error("OT.Subscriber is not connected cannot getStats"),1015)),e.abrupt("return");case 3:return ue(),e.next=6,c();case 6:e.sent.getStats(function(e,i){if(e)return 1015===e.code&&(e=je(Ie.NOT_CONNECTED,e,1015)),void t(e);var o={timestamp:0};i.forEach(function(e){if(Ne.isInboundStat(e)){var t=Ne.isVideoStat(e,i),n=Ne.isAudioStat(e,i);(n||t)&&(o.timestamp=Ne.normalizeTimestamp(e.timestamp)),t?tt(o,{video:Ne.parseStatCategory(e)}):n&&tt(o,{audio:Ne.parseStatCategory(e)})}else if(Ne.isVideoTrackStat(e)){var r=e.framesPerSecond;S&&(r?(S.destroy(),S=null):r=S.getFrameRateFromStats(i)),tt(o,{video:{frameRate:r}})}}),t(null,o)});case 8:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),this.setAudioVolume=function(e){var t=function(e){return Math.max(0,Math.min(100,parseInt(e,10)))}(e);return isNaN(t)?(Me.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),l):(t!==e&&Me.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),t===T?le(T):(0<T&&(o=T),le(T=t),0<T&&!C&&(o=T,l.subscribeToAudio(!0))),l)},this.getAudioVolume=function(){var e=p&&p.video();if(e)try{return e.getAudioVolume()}catch(e){Me.warn("getAudioVolume "+e)}return T},this.subscribeToAudio=function(e){var n=lt(e,!0);G().forEach(function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:e.t0=n,e.sent.subscribeToAudio(e.t0);case 4:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}()),P&&0!==G().length&&P.setChannelActiveState("audio",n);var t=C!==n;return C=n,t&&l.setAudioVolume(n?o:0),l};var fe,pe,he,ve={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if("Safari"===Oe.name){var ge=function(){!Ke.hidden&&W.subscribeToVideo&&(Me.debug("document visibility restored in Safari - resubscribing to video"),l.subscribeToVideo(!1),l.subscribeToVideo(!0))};Ke.addEventListener("visibilitychange",ge),this.once("destroyed",function(){Ke.removeEventListener("visibilitychange",ge)})}if(this.subscribeToVideo=function(e,t){var n=lt(e,!0);return ce(!n||!P.hasVideo||!(y&&0<y.getVideoTracks().length)),P.hasVideo&&y&&0===y.getVideoTracks().length?(n&&Me.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),W.subscribeToVideo=!1):(d&&d.videoDisabledIndicator&&d.videoDisabledIndicator.disableVideo("auto"===t&&!n),0<G().length&&M&&P&&(n!==W.subscribeToVideo||t!==E)&&P.setChannelActiveState("video",n,t),W.subscribeToVideo=n,"loading"!==(E=t)&&(l.dispatchEvent(new Ae.VideoEnabledChangedEvent(n?"videoEnabled":"videoDisabled",{reason:ve[t]||"subscribeToVideo"})),"videoDisabled"===n&&"auto"===t&&(F=2))),l},this.setPreferredResolution=function(e){if(g.isDestroyed()||0===G().length&&"Connecting"===!g.current)Me.warn("Cannot set the max Resolution when not subscribing to a publisher");else if(W.preferredResolution=e,M.sessionInfo.p2pEnabled)Me.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");else{var t=P.getPreferredResolution();t&&e&&t.width===e.width&&t.height===e.height||!t&&!e||P.setPreferredResolution(e)}},this.setPreferredFrameRate=function(e){g.isDestroyed()||0===G().length&&"Connecting"===!g.current?Me.warn("Cannot set the max frameRate when not subscribing to a publisher"):(W.preferredFrameRate=e,M.sessionInfo.p2pEnabled?Me.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session"):P.getPreferredFrameRate()!==e&&P.setPreferredFrameRate(e))},this.isSubscribing=function(){return g.isSubscribing()},this.isWebRTC=!0,this.isLoading=function(){return p&&p.loading()},this.isAudioBlocked=function(){return Boolean(p&&p.isAudioBlocked())},this.videoElement=function(){var e=p&&p.video();return e?e.domElement():null},this.videoWidth=function(){var e=p&&p.video();return e?e.videoWidth():void 0},this.videoHeight=function(){var e=p&&p.video();return e?e.videoHeight():void 0},this._subscribeToSelf=(0,Xe.default)(Qe.default.mark(function e(){var t;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=M.getPublisherForStream(P))&&t._.webRtcStream()){e.next=5;break}Y.fail({payload:{reason:"streamNotFound"},error:je(Ie.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists"))}),e.next=14;break;case 5:return R.resolve(),e.prev=6,e.next=9,ne(t._.webRtcStream());case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),Me.error(e.t0);case 14:case"end":return e.stop()}},e,null,[[6,11]])})),this._setupPeerConnection=function(){var t=(0,Xe.default)(Qe.default.mark(function e(t){var a,s,c,u;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.peerPriority,s=t.send,c=t.log,u=t.logQoS,W.testNetwork&&l.setAudioVolume(0),0===G().length&&g.set("Connecting"),N[a]=new Je(function(i,o){M._.getIceConfig().then(function(e){e.needRumorIceServersFallback&&(e.servers=[].concat(z||[],e.servers||[]));var t={iceConfig:e,subscriberId:l.widgetId,send:s,logAnalyticsEvent:c,p2p:M.sessionInfo.p2pEnabled};Object.prototype.hasOwnProperty.call(W,"codecFlags")&&(t.codecFlags=W.codecFlags);var n=new Ee.SubscriberPeerConnection(t);if("IE"===Oe.name?R.resolve():(n.once("iceConnected",R.resolve),n.once("error",R.reject)),w){w.removeAll();var r=function e(){n.off("error",e),n.off("disconnected",e),delete N[a]};n.on("error",r),n.on("disconnected",r)}(w=gt(n)).on("disconnected",K),w.on("error",Q),w.on("remoteStreamAdded",(0,Xe.default)(Qe.default.mark(function e(){var t=arguments;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.apply(void 0,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Me.error(e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}))),w.on("remoteStreamRemoved",X),w.on("signalingStateStable",(0,Xe.default)(Qe.default.mark(function e(){var t;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x.trigger("signalingStateStable"),(t=p&&p.video())&&y)return e.prev=3,e.next=6,t.rebind();e.next=12;break;case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),Me.error("Could not bind to stream",e.t0);case 11:m&&"webRTCStream"in m&&0<y.getAudioTracks().length&&m.webRTCStream(y);case 12:case"end":return e.stop()}},e,null,[[3,8]])}))),n.on("qos",u),w.on("iceConnectionStateChange",re),w.on("iceRestartSuccess",ie),w.on("iceRestartFailure",oe),w.on("remoteVideoSupported",$),n.init(function(e){e?o(e):i(n)}),w.once("remoteStreamAdded",function(){if(b&&(b(),b=void 0),ke())try{m=new Ye(_e())}catch(e){Me.warn("Failed to get AudioContext()",e)}if(!m&&Ee.hasAudioOutputLevelStatCapability()&&(m=new Re(n.getStats)),m){var e=yt({subscriber:l,audioLevelSampler:m});b=e.destroyAudioLevelBehaviour}else Object.defineProperty(l,"loudness",{value:void 0,configurable:!0,writable:!1}),Me.error("No suitable audio level samplers found, audio level visualisation will not work")})}).catch(o)}),e.abrupt("return",N[a]);case 5:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),this.restrictFrameRate=function(e){return Me.debug("OT.Subscriber.restrictFrameRate("+e+")"),f("restrictFrameRate",e.toString(),{streamId:P.id}),M.sessionInfo.p2pEnabled&&Me.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),"boolean"!=typeof e?Me.error("OT.Subscriber.restrictFrameRate: expected a boolean value got a "+typeof e):(L=e,P.setRestrictFrameRate(e)),l},this.on("styleValueChanged",function(e,t){if(d)switch(e){case"nameDisplayMode":d.name.setDisplayMode(t),d.backingBar.setNameMode(t);break;case"videoUnsupportedDisplayMode":d.videoUnsupportedIndicator.setDisplayMode(t);break;case"videoDisabledDisplayMode":d.videoDisabledIndicator.setDisplayMode(t);break;case"audioBlockedDisplayMode":d.audioBlockedIndicator.setDisplayMode(t);break;case"showArchiveStatus":d.archive.setShowArchiveStatus(t);break;case"buttonDisplayMode":r.update();break;case"audioLevelDisplayMode":d.audioLevel.setDisplayMode(t);break;case"bugDisplayMode":break;case"backgroundImageURI":p.setBackgroundImageURI(t)}},this),this._={getDataChannel:(pe=(0,Xe.default)(Qe.default.mark(function e(t,n,r){return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c()){e.next=3;break}return r(new Fe.Error("Cannot create a DataChannel before there is a publisher connection.")),e.abrupt("return");case 3:return e.next=5,c();case 5:e.t0=t,e.t1=n,e.t2=r,e.sent.getDataChannel(e.t0,e.t1,e.t2);case 9:case"end":return e.stop()}},e)})),function(e,t,n){return pe.apply(this,arguments)}),iceRestart:(fe=(0,Xe.default)(Qe.default.mark(function e(){var t;return Qe.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:(t=e.sent)?(Z("Attempt"),Me.debug("Subscriber: iceRestart attempt"),t.iceRestart()):Me.debug("Subscriber: Skipping ice restart, we have no peer connection");case 4:case"end":return e.stop()}},e)})),function(){return fe.apply(this,arguments)}),unblockAudio:function(){return p&&p.unblockAudio()},webRtcStream:function(){return y},privateEvents:new ut},g=new Ve(function(e){Me.error("OT.Subscriber State Change Failed: ",e.message),Me.debug(e)}),Me.debug("OT.Subscriber: subscribe to "+P.id),g.set("Init"),!P)return Me.error("OT.Subscriber: No stream parameter."),!1;if(_={updated:function(e){var t=p&&p.video();switch(e.changedProperty){case"videoDimensions":if(!t)break;t.orientation({width:e.newValue.width,height:e.newValue.height,videoOrientation:e.newValue.orientation}),l.dispatchEvent(new Ae.VideoDimensionsChangedEvent(l,e.oldValue,e.newValue));break;case"videoDisableWarning":d&&d.videoDisabledIndicator.setWarning(e.newValue),l.dispatchEvent(new Ae.VideoDisableWarningEvent(e.newValue?"videoDisableWarning":"videoDisableWarningLifted")),F="videoDisableWarning"===e.newValue?1:null;break;case"hasVideo":ce(!P.hasVideo||!W.subscribeToVideo),l.dispatchEvent(new Ae.VideoEnabledChangedEvent(P.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":r.update()}}},P.on(_,this),W.name=W.name||P.name,W.classNames="OT_root OT_subscriber",W.style&&this.setStyle(W.style,null,!0),o=100,W.subscribeToVideo=lt(W.subscribeToVideo,!0),this.subscribeToAudio(lt(W.subscribeToAudio,!0)),this.setAudioVolume(function(e){return void 0!==e.audioVolume?e.audioVolume:!1===e.subscribeToAudio?0:100}(W)),(p=new Ee.WidgetView(e,W)).on("error",J),p.on("audioBlocked",function(){return l.trigger("audioBlocked")}),p.on("audioUnblocked",function(){return l.trigger("audioUnblocked")}),this.id=p.domId(),D=p.domId(),this.element=p.domElement,p.on("videoElementCreated",function(e){var t=new Ae.VideoElementCreatedEvent(e),n=l;k?l.dispatchEvent(t):l.once("loaded",function(){n.dispatchEvent(t)})}),this.element&&function(){var e={backingBar:new Se({nameMode:W.name?l.getStyle("nameDisplayMode"):"off",muteMode:r.get()}),name:new Le({name:W.name,mode:l.getStyle("nameDisplayMode")}),muteButton:new Pe({muted:0===T,mode:r.get()})};if(A){var t=new Te;h=new Ce({mode:x.getStyle("audioLevelDisplayMode")});var n=new vt(function(){h.setValue(t.transform(l.loudness))});h.watchVisibilityChanged(function(e){e?n.start():n.stop()}),h.setDisplayMode(l.getStyle("audioLevelDisplayMode")),h.audioOnly(!1),e.audioLevel=h}e.videoDisabledIndicator=new ze({mode:l.getStyle("videoDisabledDisplayMode")}),e.audioBlockedIndicator=new We({mode:l.getStyle("audioBlockedDisplayMode")}),e.videoUnsupportedIndicator=new He({mode:l.getStyle("videoUnsupportedDisplayMode")}),p&&p.domElement&&(d=new we({parent:p.domElement}).set(e).on({muted:function(){x.setAudioVolume(0)},unmuted:function(){x.setAudioVolume(o)}},l)).hideWhileLoading()}.call(this),W.subscribeToVideo||W.subscribeToAudio){var me=P.getChannelsOfType("audio"),be=P.getChannelsOfType("video");he=me.map(function(e){return{id:e.id,type:e.type,active:W.subscribeToAudio}}).concat(be.map(function(e){var t={id:e.id,type:e.type,active:W.subscribeToVideo,restrictFrameRate:void 0!==W.restrictFrameRate&&W.restrictFrameRate};return void 0!==W.preferredFrameRate&&(t.preferredFrameRate=parseFloat(W.preferredFrameRate)),void 0!==W.preferredHeight&&(t.preferredHeight=parseInt(W.preferredHeight,10)),void 0!==W.preferredWidth&&(t.preferredWidth=parseInt(W.preferredWidth,10)),t}))}var ye=!W.testNetwork&&function(e,t){return e.connection.id===t.connection.id}(P,M);return Y.beginConnect(),ye?this._subscribeToSelf():H.subscriberCreate(P.id,I,he,function(e,t){e&&!Y.is("disconnected")&&function(e){var t=mt(e);Ue.handleJsException({error:t,code:t.code,target:x,analytics:O}),l._disconnect({noStateTransition:!0});var n={failureReason:"Subscribe",failureMessage:"OT.Subscriber PeerConnection Error: "+t.message,failureCode:xe.P2P_CONNECTION_FAILED};f("createPeerConnection","Failure",{},n),se(t.code),Y.fail({options:n,error:je(t.name,new Error("Subscribe: Subscriber PeerConnection with connection (not found) failed: "+t.message),t.code)}),t.name===bt.STREAM_NOT_FOUND&&l._destroy({reason:"streamNotFound",noStateTransition:!0})}(e),z=Ze(t)}),this}var t=void 0===e?{}:e,n=t.audioContext,_e=void 0===n?U:n,r=t.AudioLevelMeter,Ce=void 0===r?F:r,i=t.AudioLevelTransformer,Te=void 0===i?B:i,o=t.BackingBar,Se=void 0===o?V:o,a=t.Chrome,we=void 0===a?z:a,s=t.env,Oe=void 0===s?W:s,c=t.Errors,Ie=void 0===c?H:c,u=t.Events,Ae=void 0===u?G:u,d=t.ExceptionCodes,xe=void 0===d?Y:d,l=t.GetstatsAudioOutputLevelSampler,Re=void 0===l?q:l,f=t.getStatsHelpers,Ne=void 0===f?Z:f,p=t.hasAudioOutputLevelStatCapability,h=void 0===p?K:p,v=t.hasRemoteStreamsWithWebAudio,ke=void 0===v?J:v,g=t.interpretPeerConnectionError,De=void 0===g?Q:g,m=t.logging,Me=void 0===m?X:m,b=t.MuteButton,Pe=void 0===b?$:b,y=t.NamePanel,Le=void 0===y?ee:y,E=t.otError,je=void 0===E?te:E,_=t.OTErrorClass,Ue=void 0===_?ne:_,C=t.OTHelpers,Fe=void 0===C?re:C,T=t.StylableComponent,Be=void 0===T?ie:T,S=t.SubscriberPeerConnection,w=void 0===S?oe:S,O=t.SubscribingState,Ve=void 0===O?ae:O,I=t.VideoDisabledIndicator,ze=void 0===I?se:I,A=t.AudioBlockedIndicator,We=void 0===A?ce:A,x=t.VideoUnsupportedIndicator,He=void 0===x?ue:x,R=t.watchFrameRate,Ge=void 0===R?de:R,N=t.WebaudioAudioLevelSampler,Ye=void 0===N?le:N,k=t.createSendMethod,qe=void 0===k?fe:k,D=t.parseIceServers,Ze=void 0===D?pe:D,M=t.document,Ke=void 0===M?window.document:M,P=t.WidgetView,L=void 0===P?j:P;return Ee.hasAudioOutputLevelStatCapability=h,Ee.WidgetView=L,Ee.SubscriberPeerConnection=w,Ee}}).call(this,i(1))},function(e,t,n){"use strict";var r=n(161)()("NotSubscribing",["NotSubscribing","Init","Connecting","BindingRemoteStream","Subscribing","Failed","Destroyed"],{NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","Connecting","BindingRemoteStream","Destroyed"],Connecting:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]});r.prototype.isDestroyed=function(){return"Destroyed"===this.current},r.prototype.isFailed=function(){return"Failed"===this.current},r.prototype.isSubscribing=function(){return"Subscribing"===this.current},r.prototype.isAttemptingToSubscribe=function(){return-1!==["Init","Connecting","BindingRemoteStream"].indexOf(this.current)},e.exports=r},function(e,t,n){"use strict";var o=n(2)(n(23));e.exports=function(e){var n=e.socket,r=e.uri,i=e.content;return function(e,t){return n.send({uri:r,method:e,content:(0,o.default)({},i,t)})}}},function(e){var t;t=function(){return i={},r.m=n=[function(e){"use strict";e.exports=function(e){var t,n,r;for(t=1;t<arguments.length;t++)for(r in n=arguments[t])n.hasOwnProperty(r)&&(e[r]=n[r]);return e}},function(e,t,n){"use strict";var a=n(0);e.exports={build:function(e,t){var n,r,i,o=t.plugins;for(n=0,r=o.length;n<r;n++)(i=o[n]).methods&&a(e,i.methods),i.properties&&Object.defineProperties(e,i.properties)},hook:function(e,t,n){var r,i,o,a,s=e.config.plugins,c=[e.context];for(n&&(c=c.concat(n)),r=0,i=s.length;r<i;r++)a=s[r],(o=s[r][t])&&o.apply(a,c)}}},function(e){"use strict";function n(e){if(0===e.length)return e;var t,n,r=e.split(/[_-]/);if(1===r.length&&r[0][0].toLowerCase()===r[0][0])return e;for(n=r[0].toLowerCase(),t=1;t<r.length;t++)n=n+r[t].charAt(0).toUpperCase()+r[t].substring(1).toLowerCase();return n}n.prepended=function(e,t){return e+(t=n(t))[0].toUpperCase()+t.substring(1)},e.exports=n},function(e,t,n){"use strict";var r=n(0),i=n(2);function o(e,t){e=e||{},this.options=e,this.defaults=t.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(e.init),this.data=this.configureData(e.data),this.methods=this.configureMethods(e.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(e.transitions||[]),this.plugins=this.configurePlugins(e.plugins,t.plugin)}r(o.prototype,{addState:function(e){this.map[e]||(this.states.push(e),this.addStateLifecycleNames(e),this.map[e]={})},addStateLifecycleNames:function(e){this.lifecycle.onEnter[e]=i.prepended("onEnter",e),this.lifecycle.onLeave[e]=i.prepended("onLeave",e),this.lifecycle.on[e]=i.prepended("on",e)},addTransition:function(e){this.transitions.indexOf(e)<0&&(this.transitions.push(e),this.addTransitionLifecycleNames(e))},addTransitionLifecycleNames:function(e){this.lifecycle.onBefore[e]=i.prepended("onBefore",e),this.lifecycle.onAfter[e]=i.prepended("onAfter",e),this.lifecycle.on[e]=i.prepended("on",e)},mapTransition:function(e){var t=e.name,n=e.from,r=e.to;return this.addState(n),"function"!=typeof r&&this.addState(r),this.addTransition(t),this.map[n][t]=e},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(e){return"string"==typeof e?this.mapTransition(r({},this.defaults.init,{to:e,active:!0})):"object"==typeof e?this.mapTransition(r({},this.defaults.init,e,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(e){return"function"==typeof e?e:"object"==typeof e?function(){return e}:function(){return{}}},configureMethods:function(e){return e||{}},configurePlugins:function(e){var t,n,r;for(t=0,n=(e=e||[]).length;t<n;t++)"function"==typeof(r=e[t])&&(e[t]=r=r()),r.configure&&r.configure(this);return e},configureTransitions:function(e){var t,n,r,i,o,a=this.defaults.wildcard;for(n=0;n<e.length;n++)for(r=e[n],i=Array.isArray(r.from)?r.from:[r.from||a],o=r.to||a,t=0;t<i.length;t++)this.mapTransition({name:r.name,from:i[t],to:o})},transitionFor:function(e,t){var n=this.defaults.wildcard;return this.map[e][t]||this.map[n][t]},transitionsFor:function(e){var t=this.defaults.wildcard;return Object.keys(this.map[e]).concat(Object.keys(this.map[t]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),e.exports=o},function(e,t,n){var r=n(0),i=n(6),u=n(1),a=[null,[]];function o(e,t){this.context=e,this.config=t,this.state=t.init.from,this.observers=[e]}r(o.prototype,{init:function(e){if(r(this.context,this.config.data.apply(this.context,e)),u.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(e){return Array.isArray(e)?0<=e.indexOf(this.state):this.state===e},isPending:function(){return this.pending},can:function(e){return!this.isPending()&&!!this.seek(e)},cannot:function(e){return!this.can(e)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(e,t){var n=this.config.defaults.wildcard,r=this.config.transitionFor(this.state,e),i=r&&r.to;return"function"==typeof i?i.apply(this.context,t):i===n?this.state:i},fire:function(e,t){return this.transit(e,this.state,this.seek(e,t),t)},transit:function(e,t,n,r){var i=this.config.lifecycle,o=this.config.options.observeUnchangedState||t!==n;return n?this.isPending()?this.context.onPendingTransition(e,t,n):(this.config.addState(n),this.beginTransit(),r.unshift({transition:e,from:t,to:n,fsm:this.context}),this.observeEvents([this.observersForEvent(i.onBefore.transition),this.observersForEvent(i.onBefore[e]),o?this.observersForEvent(i.onLeave.state):a,o?this.observersForEvent(i.onLeave[t]):a,this.observersForEvent(i.on.transition),o?["doTransit",[this]]:a,o?this.observersForEvent(i.onEnter.state):a,o?this.observersForEvent(i.onEnter[n]):a,o?this.observersForEvent(i.on[n]):a,this.observersForEvent(i.onAfter.transition),this.observersForEvent(i.onAfter[e]),this.observersForEvent(i.on[e])],r)):this.context.onInvalidTransition(e,t,n)},beginTransit:function(){this.pending=!0},endTransit:function(e){return this.pending=!1,e},failTransit:function(e){throw this.pending=!1,e},doTransit:function(e){this.state=e.to},observe:function(e){if(2===e.length){var t={};t[e[0]]=e[1],this.observers.push(t)}else this.observers.push(e[0])},observersForEvent:function(e){for(var t,n=0,r=this.observers.length,i=[];n<r;n++)(t=this.observers[n])[e]&&i.push(t);return[e,i,!0]},observeEvents:function(e,t,n,r){if(0===e.length)return this.endTransit(void 0===r||r);var i=e[0][0],o=e[0][1],a=e[0][2];if((t[0].event=i)&&a&&i!==n&&u.hook(this,"lifecycle",t),0===o.length)return e.shift(),this.observeEvents(e,t,i,r);var s=o.shift(),c=s[i].apply(s,t);return c&&"function"==typeof c.then?c.then(this.observeEvents.bind(this,e,t,i)).catch(this.failTransit.bind(this)):!1===c?this.endTransit(!1):this.observeEvents(e,t,i,c)},onInvalidTransition:function(e,t,n){throw new i("transition is invalid in current state",e,t,n,this.state)},onPendingTransition:function(e,t,n){throw new i("transition is invalid while previous transition is still in progress",e,t,n,this.state)}}),e.exports=o},function(e,t,n){"use strict";var r=n(0),i=n(2),o=n(1),a=n(3),s=n(4),c={is:function(e){return this._fsm.is(e)},can:function(e){return this._fsm.can(e)},cannot:function(e){return this._fsm.cannot(e)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(e,t,n){return this._fsm.onInvalidTransition(e,t,n)},onPendingTransition:function(e,t,n){return this._fsm.onPendingTransition(e,t,n)}},u={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(){throw Error("use transitions to change state")}}};function d(e){return l(this||{},e)}function l(e,t){return f(e,new a(t,d)),e._fsm(),e}function f(t,e){if("object"!=typeof t||Array.isArray(t))throw Error("StateMachine can only be applied to objects");o.build(t,e),Object.defineProperties(t,u),r(t,c),r(t,e.methods),e.allTransitions().forEach(function(e){t[i(e)]=function(){return this._fsm.fire(e,[].slice.call(arguments))}}),t._fsm=function(){this._fsm=new s(this,e),this._fsm.init(arguments)}}d.version="3.0.1",d.factory=function(){var e,t;t="function"==typeof arguments[0]?(e=arguments[0],arguments[1]||{}):(e=function(){this._fsm.apply(this,arguments)},arguments[0]||{});var n=new a(t,d);return f(e.prototype,n),e.prototype._fsm.config=n,e},d.apply=l,d.defaults={wildcard:"*",init:{name:"init",from:"none"}},e.exports=d},function(e){"use strict";e.exports=function(e,t,n,r,i){this.message=e,this.transition=t,this.from=n,this.to=r,this.current=i}}],r.c=i,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5);function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,i},e.exports=t()},function(e,t,n){"use strict";var g=n(13),m=n(8);e.exports=function(e){void 0===e&&(e={});var u=e.Errors||n(9),d=e.ExceptionCodes||n(12),l=e.logging||n(0)("publisherInit"),f=e.otError||n(16)(),p=e.OTHelpers||n(3),h=e.Publisher||n(169)(),v=e.sessionObjects||n(39);return function(e,t,n,r){var i;l.debug("OT.initPublisher("+e+")"),"string"!=typeof e||document.getElementById(e)||(e=t,t=n,n=r),"function"==typeof e?(n=e,e=t=void 0):m(e)&&!p.isElementNode(e)&&(n=t,t=e,e=void 0),"function"==typeof t&&(n=t,t=void 0),t&&!m(t)&&(i="properties argument to Publisher constructor, if provided, should be an object",t=void 0),t&&!1===t.insertDefaultUI&&e&&(i="You cannot specify a target element if insertDefaultUI is false");var o=new h(t||{});v.publishers.add(o);function a(){n&&g(n)&&(n.apply(void 0,arguments),n=void 0)}void 0!==i&&(l.error(i),a(f(u.INVALID_PARAMETER,new Error(i),d.INVALID_PARAMETER)));function s(e){o.off("publishComplete",c),a(e)}var c=function(e){o.off("initSuccess",s),e&&a(e)};return o.once("initSuccess",s),o.once("publishComplete",c),o.publish(e),o}}},function(e,t,i){"use strict";(function(Te){var Se=i(2)(i(23)),we=i(35),Oe=i(666),Ie=i(8),Ae=i(13),xe=i(6),Re=i(26),Ne=i(5),t=i(27),n=i(24)(),ke=i(51),De=i(104),Me=i(668),r=i(669),Pe=i(137).prependProxyToUrlIfNeeded;e.exports=function(e){void 0===e&&(e={});var q=e.adaptIceServers||i(106).adaptIceServers,Z=e.AnalyticsHelper||t,K=e.APIKEY||i(72),J=e.Capabilities||i(170),Q=e.convertAnvilErrorCode||i(670),X=e.convertRumorError||i(305),$=e.Errors||i(9),ee=e.Events||i(21)(),te=e.ExceptionCodes||i(12),ne=e.hasIceRestartsCapability||i(306),re=e.logging||i(0)("Session"),ie=e.otError||i(16)(),oe=e.OTErrorClass||i(38),ae=e.OTHelpers||i(3),se=e.OTPlugin||i(7),ce=e.StaticConfig||n,ue=e.staticConfig||ce.onlyLocal(),de=e.Publisher||i(169)(),le=e.RaptorSocket||i(671).default(),fe=e.SessionDispatcher||i(313),pe=e.sessionObjects||i(39),he=e.sessionTag||i(312),ve=e.socketCloseCodes||i(76),ge=e.Subscriber||i(299)(),me=e.systemRequirements||i(155),be=e.uuid||i(15),ye=r({otError:ie}),Ee=e.global||window,_e=e.getSessionInfo||i(695)(),Ce=e.initPublisher||i(303)({Publisher:de});return function(p,h,e){var u,a,v,g,m,s,i,t,b=this,n=void 0===e?{}:e,r=n.allowPeerRegeneration,o=void 0===r||r,c=n.iceConfig,d=n.connectionEventsSuppressed,l=n.ipWhitelist,y=void 0!==l&&l,E=n.proxyUrl,_=new Z({proxyUrl:E});Ne(this),this._tag=he,me.check()||me.upgrade(),null==h&&(h=p,p=null),ye(c),this.id=h,this.sessionId=h;var f,C,T,S,w=!0,O=p,I=this,A=h,x=be(),R=be(),N=re,k=ae.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connection=null,this.connections=new ae.Collection,this.streams=new ae.Collection,this.archives=new ae.Collection;function D(e){k("disconnected"),e.code||(e.code=te.CONNECT_FAILED),N.error((e.name||"Unknown Error")+": "+e.message),oe.handleJsException({error:e,target:this,analytics:_}),this.trigger("sessionConnectFailed",e)}function M(e){var t=this,n=e.reason;this.logEvent("Connect","Disconnected",{reason:e.reason});var r=new ee.SessionDisconnectEvent("sessionDisconnected",n.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),C(),f.call(this,n),setTimeout(function(){t.dispatchEvent(r),T.call(t,r.reason),r.isDefaultPrevented()||S.call(t,r.reason)})}function P(e){d||e.id.match(/^symphony\./)||this.dispatchEvent(new ee.ConnectionEvent(Re.CONNECTION_CREATED,e))}function L(e,t){e.id.match(/^symphony\./)||u&&e.id===u.id()||this.dispatchEvent(new ee.ConnectionEvent(Re.CONNECTION_DESTROYED,e,t))}function j(e){!e||!e.connection||this.connection&&e.connection.id===this.connection.id||this.dispatchEvent(new ee.StreamEvent(Re.STREAM_CREATED,e,null,!1))}function U(e){var t=e.target,n=e.changedProperty,r=e.newValue;"videoDisableWarning"!==n&&"audioDisableWarning"!==n&&("videoDimensions"===n&&(r={width:r.width,height:r.height}),this.dispatchEvent(new ee.StreamPropertyChangedEvent(Re.STREAM_PROPERTY_CHANGED,t,n,e.oldValue,r)))}function F(t,n){var r=this;if(void 0===n&&(n="clientDisconnected"),t.connection.id!==this.connection.id){var i=new ee.StreamEvent("streamDestroyed",t,n,!0);this.dispatchEvent(i),pe.subscribers.where({streamId:t.id}).filter(function(e){return e.session.id===r.id&&e.stream}).forEach(function(e){e._disconnect({reason:n}),i.isDefaultPrevented()||e._destroy({reason:n,noStateTransition:!0})})}else pe.publishers.where({streamId:t.id}).forEach(function(e){e._.unpublishStreamFromSession(t,this,n)},this)}function B(e){this.dispatchEvent(new ee.ArchiveEvent("archiveStarted",e))}function V(e){this.dispatchEvent(new ee.ArchiveEvent("archiveDestroyed",e))}function z(e){var t=e.target,n=e.changedProperty,r=e.newValue;"status"===n&&"stopped"===r?this.dispatchEvent(new ee.ArchiveEvent("archiveStopped",t)):this.dispatchEvent(new ee.ArchiveEvent("archiveUpdated",t))}function W(){I.token=null,v=null,k("disconnected"),u=null,a&&(a.stop(),a=null),I.connection=null,I.capabilities=new J([]),I.connections.destroy(),I.streams.destroy(),I.archives.destroy()}C=function(){R=be(),W()},f=function(t){pe.publishers.where({session:this}).forEach(function(e){e.disconnect(t)}),pe.subscribers.where({session:this}).forEach(function(e){e._disconnect()})},T=function(t){pe.publishers.where({session:this}).forEach(function(e){e._.streamDestroyed(t)})},S=function(t){pe.subscribers.where({session:this}).forEach(function(e){e._destroy({reason:t})})};function H(){var a=this;N.debug("OT.Session: connecting to Raptor");var e=Pe(this.sessionInfo.messagingURL,E),t=[];o&&!0===this.sessionInfo.peerRegeneration&&t.push("peerRegeneration"),(u=new le(R,x,e,this.sessionInfo.symphonyAddress,fe(this,{connectionEventsSuppressed:d}),_,t)).connect(v,this.sessionInfo,{connectionEventsSuppressed:d},function(e,t){if(e){var n,r={};if("ConnectToSession"===e.reason||"GetSessionState"===e.reason){var i=X(e);xe(r,{originalMessage:e.message,originalCode:e.code}),e.code=i.code,e.message=i.message}(e.code||e.message||e.reason)&&(n={failureCode:e.code,failureMessage:e.message,failureReason:e.reason,socketId:u.socketId}),u=null,a.logConnectivityEvent("Failure",r,n);var o=function(e,t){var n;switch(e){case"WebSocketConnection":if(n=Oe(ve.codes,function(e){return e===t}))return $["SOCKET_"+n];break;case"ConnectToSession":case"GetSessionState":switch(t){case te.CONNECT_FAILED:return $.CONNECT_FAILED;case te.UNEXPECTED_SERVER_RESPONSE:return $.UNEXPECTED_SERVER_RESPONSE;case te.CONNECTION_LIMIT_EXCEEDED:return $.CONNECTION_LIMIT_EXCEEDED}}}(e.reason,e.code);return o&&(e=ie(o,new Error(e.message),e.code)),void D.call(a,e)}N.debug("OT.Session: Received session state from Raptor",t),a.connection=a.connections.get(u.id()),a.connection&&(a.capabilities=a.connection.permissions),k("connected"),a.logConnectivityEvent("Success",{connectionId:a.connection.id}),a.connection.on("destroyed",M,a),a.dispatchEvent(new ee.SessionConnectEvent(Re.SESSION_CONNECTED)),a.connections.on({add:P,remove:L},a),a.streams.on({add:j,remove:F,update:U},a),a.archives.on({add:B,remove:V,update:z},a),a.connections._triggerAddEvents(),a.streams._triggerAddEvents(),a.archives._triggerAddEvents()})}function G(e){return b.capabilities.permittedTo(e)}function Y(e,t){re.error(e.name+": "+e.message),t(e),oe.handleJsException({error:e,target:b,analytics:_})}this.reportIssue=function(e){var t=e.id;return De(_.logEvent.bind(_))({action:"ReportIssue",variation:"Event",payload:{reportIssueId:t}},null)},this.logEvent=function(e,t,n,r){var i={action:e,variation:t,payload:n,sessionId:A,messagingServer:m,p2p:g,partnerId:O,connectionId:R};r&&(i=xe(r,i)),_.logEvent(i)},this.logConfigurationFileEvent=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n={}),"Attempt"===e)i=(new Date).getTime();else if("Failure"===e||"Success"===e){var r=(new Date).getTime()-i;xe({attemptDuration:r},n)}this.logEvent("ConfigurationFile",e,t,(0,Se.default)({},n))},this.logConnectivityEvent=function(t,n,r){var i=this;if(void 0===n&&(n=null),void 0===r&&(r={}),"Attempt"===t&&(a&&(a.stop(),re.error("_connectivityAttemptPinger should have been cleaned up")),s=(new Date).getTime(),(a=new ke(function(){i.logEvent("Connect","Attempting",n,(0,Se.default)({},r))},.2,6)).start()),"Failure"===t||"Success"===t||"Cancel"===t){var o=function(e){a&&(a.stop(),a=void 0),i.logEvent("Connect",t,n,(0,Se.default)({},r,{attemptDuration:(new Date).getTime()-s,iceConfig:e,ipWhitelist:y}))};"Success"===t?this._.getIceConfig().then(function(e){var t={includeServers:c&&c.includeServers||"all",transportPolicy:e.transportPolicy};t.servers=e.servers?e.servers.map(function(e){return{url:e.urls}}):[],o(t)}):o()}else this.logEvent("Connect",t,n,r)},this.connect=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=1<n.length&&("string"==typeof n[0]||"number"==typeof n[0])&&"string"==typeof n[1]?(null==p&&(O=n[0].toString()),n[1]):n[0];var i=n[n.length-1];if(b.is("connecting","connected"))return N.warn("OT.Session: Cannot connect, the session is already "+b.state),b;W(),k("connecting");var o,a=R;function s(){var e=R!==a;return e&&re.debug("Connection was interrupted"),e}if(b.token=!Ae(e)&&e,v=!Ae(e)&&e,w?w=!1:x=be(),i&&Ae(i)){var c,u=function(){c();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(void 0,[void 0].concat(t))},d=function(){c(),i.apply(void 0,arguments)};c=function(){b.off("sessionConnected",u),b.off("sessionConnectFailed",d)},b.once("sessionConnected",u),b.once("sessionConnectFailed",d)}if(null==O||Ae(O))return setTimeout(D.bind(b,ie($.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),te.AUTHENTICATION_ERROR))),b;if(!A||Ie(A)||Array.isArray(A))return A?(o="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",A=A.toString()):o="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout(D.bind(b,ie($.INVALID_SESSION_ID,new Error(o),te.INVALID_SESSION_ID))),b.logConnectivityEvent("Attempt"),b.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:te.INVALID_SESSION_ID,failureMessage:o}),b;b.apiKey=O.toString(),O=O.toString(),0===K.value.length&&(K.value=O);var l=Boolean(ce.onlyLocal().configUrl),f=!0===y&&Boolean(ce.onlyLocal().ipWhitelistConfigUrl);return l||f?b.logConfigurationFileEvent("Attempt"):b.logConfigurationFileEvent("Event",{message:"No configUrl, using local config only"}),(l||f?ce.get({partnerId:O,token:e,useIpWhitelistConfigUrl:f,proxyUrl:E}):Te.resolve(ce.onlyLocal())).then(function(e){return(l||f)&&b.logConfigurationFileEvent("Success"),e},function(e){return(l||f)&&b.logConfigurationFileEvent("Failure",{failureMessage:e.message,failureStack:e.stack}),ce.onlyLocal()}).then(function(n){if(b.staticConfig=n,!1===(_.staticConfig=n).apiEnabled)throw ie($.API_KEY_DISABLED,new Error("The API KEY has been disabled. Access to the service is currently being restricted. Please contact support."));if(!s()){b.logConnectivityEvent("Attempt"),b.logEvent("SessionInfo","Attempt");var r=function(e){e.code=Q(e.code),b.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:e.code||"No code",failureMessage:e.message,failureName:e.name}),e.name&&(e=ie(e.name,new Error(e.message+(e.code?" ("+e.code+")":"")),e.code)),D.call(b,e)},e=Pe(n.apiUrl,E);return _e({anvilUrl:e,sessionId:h,token:v,connectionId:R,clientVersion:n.clientVersion}).then(function(e){if(!s())if(e.partnerId&&e.partnerId!==O){r(ie($.AUTHENTICATION_ERROR,new Error("Authentication Error: The API key does not match the token or session."),te.AUTHENTICATION_ERROR))}else if(_.sessionInfo=e,Object.prototype.hasOwnProperty.call(se,"settings")&&(se.settings.usePreviousDeviceSelection=e.rememberDeviceChoiceIE),b.is("connecting")){b.sessionInfo=e,b._.setIceServers(b.sessionInfo.iceServers),g=e.p2pEnabled,m=e.messagingServer,b.logEvent("SessionInfo","Success",null,{features:{reconnection:e.reconnection,renegotiation:ne()&&e.renegotiation,simulcast:void 0!==e.simulcast&&(e.simulcast&&"Chrome"===ae.env.name)}},{messagingServer:e.messagingServer});var t=n.sessionInfoOverrides;null!=t&&"object"==typeof t&&Object.keys(t).forEach(function(e){Object.defineProperty(b.sessionInfo,e,{value:t[e]})}),H.call(b)}},r)}}).catch(function(e){D.call(b,e)}),b},this.disconnect=function(){u&&u.isNot("disconnected")?u.isNot("disconnecting")&&(u.isNot("connecting")||this.logConnectivityEvent("Cancel"),k("disconnecting"),u.disconnect()):C()},this.destroy=function(){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),this.disconnect()},this.publish=function(e,t,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),r=r||function(){},this.isNot("connected"))return _.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:te.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:A,streamId:e&&e.stream?e.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:O}),Y(ie($.NOT_CONNECTED,new Error("We need to be connected before you can publish"),te.NOT_CONNECTED),r),null;if(!G("publish")){var n="This token does not allow publishing. The role must be at least `publisher` to enable this functionality",i={failureReason:"Permission",failureCode:te.UNABLE_TO_PUBLISH,failureMessage:n};return this.logEvent("Publish","Failure",null,i),Y(ie($.PERMISSION_DENIED,new Error(n),te.UNABLE_TO_PUBLISH),r),null}if(!e||"string"==typeof e||ae.isElementNode(e))e=Ce(e,t);else{if(!(e instanceof de))return void Y(ie($.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),te.UNABLE_TO_PUBLISH),r);"session"in e&&e.session&&"sessionId"in e.session&&(e.session.sessionId===this.sessionId?N.warn("Cannot publish "+e.guid()+" again to "+this.sessionId+". Please call session.unpublish(publisher) first."):N.warn("Cannot publish "+e.guid()+" publisher already attached to "+e.session.sessionId+". Please call session.unpublish(publisher) first."))}return e._.publishToSession(this,_).catch(function(e){throw e.message="Session.publish :: "+e.message,N.error(e.code,e.message),e}).then(function(){return e}).then(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(void 0,[null].concat(t))},function(e){return r(e)}),e},this.unpublish=function(e){e?e._.unpublishFromSession(this,"unpublished"):N.error("OT.Session.unpublish: publisher parameter missing.")},this.subscribe=function(e,t,n,r){if("function"==typeof t&&(r=t,n=t=void 0),"function"==typeof n&&(r=n,n=void 0),r=r||function(){},this.connection&&this.connection.connectionId)if(e)if(Object.prototype.hasOwnProperty.call(e,"streamId")){if(!n||!1!==n.insertDefaultUI||!t){t&&!1===t.insertDefaultUI&&(n=t,t=void 0);var i=new ge(t,xe(n||{},{stream:e,session:this,analytics:_}),function(e){e?Y(e,r):r(null,i)});return pe.subscribers.add(i),i}Y(ie($.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),te.INVALID_PARAMETER),r)}else Y(ie($.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),te.UNABLE_TO_SUBSCRIBE),r);else Y(ie($.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),te.UNABLE_TO_SUBSCRIBE),r);else Y(ie($.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),te.UNABLE_TO_SUBSCRIBE),r)},this.unsubscribe=function(e){if(e)return e.stream?(N.debug("OT.Session.unsubscribe: subscriber "+e.id),e._destroy({reason:"Unsubscribe"}),!0):(N.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1);var t="OT.Session.unsubscribe: subscriber cannot be null";throw N.error(t),new Error(t)},this.getSubscribersForStream=function(e){return pe.subscribers.where({streamId:e.id})},this.getPublisherForStream=function(e){var t,n;if("string"==typeof e)t=e;else{if("object"!=typeof e||!e||!Object.hasOwnProperty.call(e,"id"))throw n="Session.getPublisherForStream :: Invalid stream type",N.error(n),new Error(n);t=e.id}return pe.publishers.where({streamId:t})[0]},this._={getSocket:function(){return u},reconnecting:function(){this.dispatchEvent(new ee.SessionReconnectingEvent)}.bind(this),reconnected:function(){this.dispatchEvent(new ee.SessionReconnectedEvent),this.sessionInfo.renegotiation&&(pe.publishers.where({session:this}).forEach(function(e){e._.iceRestart()}),pe.subscribers.where({session:this}).forEach(function(e){e._.iceRestart()}))}.bind(this),dispatchSignal:function(e,t,n){var r=new ee.SignalEvent(t,n,e);(r.target=this).trigger(Re.SIGNAL,r),t&&this.dispatchEvent(r)}.bind(this),subscriberChannelUpdate:function(e,t,n,r){return u?u.subscriberChannelUpdate(e.id,t.widgetId,n.id,r):(N.warn("You are disconnected, cannot update subscriber properties ",r),null)},streamCreate:function(e,t,n,r,i,o){u?u.streamCreate(e,t,n,r,i,void 0,o):N.warn("You are disconnected, cannot create stream ",t)},streamDestroy:function(e){u?u.streamDestroy(e):N.warn("You are disconnected, cannot destroy stream ",e)},streamChannelUpdate:function(e,t,n){u?u.streamChannelUpdate(e.id,t.id,n):N.warn("You are disconnected, cannot update stream properties ",n)},setSocket:function(e){u=e},setLogging:function(e){N=e},setState:k,setIceServers:function(e){e&&(t={iceServers:q(e),timestamp:Date.now()})},getOtIceServerInfo:function(){if(3e5<864e5-(t?Date.now()-t.timestamp:1/0))return Te.resolve({transportPolicy:I&&I.sessionInfo&&I.sessionInfo.clientCandidates,servers:t&&t.iceServers});if(!v)return Te.resolve({transportPolicy:I&&I.sessionInfo&&I.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0});var e=ue.clientVersion;return _e({anvilUrl:(this.staticConfig||ue).apiUrl,sessionId:h,token:v,connectionId:R,clientVersion:e}).then(function(e){return I._.setIceServers(e.iceServers),t?{transportPolicy:I&&I.sessionInfo&&I.sessionInfo.clientCandidates,servers:t&&t.iceServers}:{transportPolicy:I.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0}})},getCodecFlags:function(){return{h264:I.sessionInfo.h264,vp9:I.sessionInfo.vp9,vp8:I.sessionInfo.vp8}},getVideoCodecsCompatible:function(e){return Me({RTCPeerConnection:Ee.RTCPeerConnection,env:ae.env,stream:e,codecFlags:I._.getCodecFlags()})},getIceConfig:function(){if(!c)return I._.getOtIceServerInfo();var t=c&&"relay"===c.transportPolicy?"relay":I.sessionInfo.clientCandidates;return("custom"===c.includeServers?Te.resolve({servers:[]}):I._.getOtIceServerInfo()).then(function(e){return xe(e,{transportPolicy:t,servers:[].concat(e.servers,c.customServers)})})},privateEvents:new we},this.signal=function(e,t){var n=e,o=t||function(){};if(Ae(n)&&(o=n,n=null),this.isNot("connected")){Y(ie($.NOT_CONNECTED,new Error("Unable to send signal - you are not connected to the session."),500),o)}else u.signal(n,function(e){if(e){var t=function(e){switch(e){case 400:case 413:return $.INVALID_PARAMETER;case 429:return $.RATE_LIMIT_EXCEEDED;case 404:return $.NOT_FOUND;case 500:return $.NOT_CONNECTED;case 403:return $.PERMISSION_DENIED;case 2001:return $.UNEXPECTED_SERVER_RESPONSE;default:return}}(e.code);return t&&(e=ie(t,new Error(e.message),e.code)),void o(e)}for(var n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];o.apply(void 0,[e].concat(r))},this.logEvent),e&&e.data&&"string"!=typeof e.data&&N.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string.")},this.forceDisconnect=function(e,i){if(this.isNot("connected")){Y(ie($.NOT_CONNECTED,new Error("Cannot call forceDisconnect(). You are not connected to the session."),te.NOT_CONNECTED),i)}else{var t="string"==typeof e?e:e.id,o="Invalid Parameter. Check that you have passed valid parameter values into the method call.";if(t){G("forceDisconnect")?u.forceDisconnect(t,function(e){if(e)Y(ie($.INVALID_PARAMETER,new Error(o),te.INVALID_PARAMETER),i);else if(i&&Ae(i)){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.apply(void 0,[e].concat(n))}}):Y(ie($.PERMISSION_DENIED,new Error("This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality"),te.UNABLE_TO_FORCE_DISCONNECT),i)}else Y(ie($.INVALID_PARAMETER,new Error(o),te.INVALID_PARAMETER),i)}},this.forceUnpublish=function(e,t){void 0===t&&(t=function(){});function n(e){return Y(ie(e.name,new Error(e.msg),e.code),t)}var r={msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:te.INVALID_PARAMETER,name:$.INVALID_PARAMETER},i={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:te.NOT_CONNECTED,name:$.NOT_CONNECTED},o={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:te.UNABLE_TO_FORCE_UNPUBLISH,name:$.PERMISSION_DENIED},a={msg:"The stream does not exist.",name:$.NOT_FOUND},s={msg:"An unexpected error occurred.",name:$.UNEXPECTED_SERVER_RESPONSE,code:te.UNEXPECTED_SERVER_RESPONSE};if(e)if(b.isNot("connected"))n(i);else{var c=function(e){return"string"==typeof e?b.streams.get(e)||{id:e}:e}(e);G("forceUnpublish")?u.forceUnpublish(c.id,function(e){e?"404"===e.code?n(a):"403"===e.code?n(o):n(s):t(null)}):n(o)}else n(r)},this.isConnected=function(){return b.is("connected")},this.capabilities=new J([])}}}).call(this,i(1))},function(e,t,n){"use strict";var r=n(12),i=n(38),o=[400,403,409,r.CONNECTION_LIMIT_EXCEEDED],a="ConnectToSession",s="GetSessionState";e.exports=function(e){var t,n;if(e.reason===a&&e.code===r.CONNECT_FAILED)t=e.code,n=i.getTitleByCode(e.code);else if(e.code&&-1<o.indexOf(Number(e.code)))switch(t=r.CONNECT_FAILED,e.reason){case a:switch(e.code){case r.CONNECTION_LIMIT_EXCEEDED:t=e.code,n="Cannot connect -- the limit for concurrent connections to the session has been reached";break;default:n="Received error response to connection create message."}break;case s:n="Received error response to session read";break;default:n=""}else t=r.UNEXPECTED_SERVER_RESPONSE,n="Unexpected server response. Try this operation again later.";return{code:t,message:n}}},function(e,t,n){"use strict";var r=n(4),i=n(57).once;e.exports=function(){return i()&&-1!==["Chrome","Safari"].indexOf(r.name)}},function(e){"use strict";e.exports=function(e){return JSON.stringify(e)}},function(e,t){"use strict";t.__esModule=!0,t.default=void 0;t.default=function(e){var i=e.logger,t=e.obj;e.eventNames.forEach(function(r){t.on(r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.spam("emitted",r,t)})})}},function(e,t,n){"use strict";function r(){a(this),this.callbacks={}}var i=n(13),o=n(38),a=n(5),s=n(0)("Dispatcher"),c=n(171),u=n(686);(e.exports=r).prototype.registerCallback=function(e,t){this.callbacks[e]=t},r.prototype.triggerCallback=function(e){if(e){var t=this.callbacks[e];if(t&&i(t)){var n=Array.prototype.slice.call(arguments);n.shift(),t.apply(void 0,n)}delete this.callbacks[e]}},r.prototype.onClose=function(e){this.emit("close",e)},r.prototype.onReconnected=function(){this.emit("reconnected")},r.prototype.onReconnecting=function(){this.emit("reconnecting")},r.prototype.dispatch=function(e){if(e.type!==c.STATUS){var t=u(e);switch(s.debug(t.signature+":",t),t.resource){case"session":this.dispatchSession(t);break;case"connection":this.dispatchConnection(t);break;case"stream":this.dispatchStream(t);break;case"stream_channel":this.dispatchStreamChannel(t);break;case"subscriber":this.dispatchSubscriber(t);break;case"subscriber_channel":this.dispatchSubscriberChannel(t);break;case"signal":this.dispatchSignal(t);break;case"archive":this.dispatchArchive(t);break;default:s.debug("Type "+t.resource+" is not currently implemented")}}else{var n;if(s.debug(e),e.isError){var r;if("string"==typeof e.data)try{var i=JSON.parse(e.data);i&&"object"==typeof i&&(r=i.reason)}catch(e){s.warn("Failed to parse rumorMessage.data",e)}n=new o(e.status,r)}this.triggerCallback(e.transactionId,n,e)}},r.prototype.dispatchSession=function(e){switch(e.method){case"read":this.emit("session#read",e.content,e.transactionId);break;default:s.debug(e.signature+" is not currently implemented")}},r.prototype.dispatchConnection=function(e){switch(e.method){case"created":this.emit("connection#created",e.content);break;case"deleted":this.emit("connection#deleted",e.params.connection,e.reason);break;default:s.debug(e.signature+" is not currently implemented")}},r.prototype.dispatchStream=function(e){switch(e.method){case"created":this.emit("stream#created",e.content,e.transactionId);break;case"deleted":this.emit("stream#deleted",e.params.stream,e.reason);break;case"updated":this.emit("stream#updated",e.params.stream,e.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(e.method,e);break;default:s.debug(e.signature+" is not currently implemented")}},r.prototype.dispatchStreamChannel=function(e){switch(e.method){case"updated":this.emit("streamChannel#updated",e.params.stream,e.params.channel,e.content);break;default:s.debug(e.signature+" is not currently implemented")}},r.prototype.dispatchJsep=function(e,t){this.emit("jsep#"+e,t.params.stream,t.fromAddress,t)},r.prototype.dispatchSubscriberChannel=function(e){switch(e.method){case"updated":this.emit("subscriberChannel#updated",e.params.stream,e.params.channel,e.content);break;case"update":this.emit("subscriberChannel#update",e.params.subscriber,e.params.stream,e.content);break;default:s.debug(e.signature+" is not currently implemented")}},r.prototype.dispatchSubscriber=function(e){switch(e.method){case"created":this.emit("subscriber#created",e.params.stream,e.fromAddress,e.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",e),this.emit("subscriber#deleted",e.params.stream,e.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(e.method,e);break;default:s.debug(e.signature+" is not currently implemented")}},r.prototype.dispatchSignal=function(e){"signal"===e.method?this.emit("signal",e.fromAddress,e.content):s.debug(e.signature+" is not currently implemented")},r.prototype.dispatchArchive=function(e){switch(e.method){case"created":this.emit("archive#created",e.content);break;case"updated":this.emit("archive#updated",e.params.archive,e.content)}}},function(e,t,n){"use strict";var a=n(15),s=n(3),c=n(689),u=n(690),d=n(307),l=n(691),f=n(24)().onlyLocal(),p={};(e.exports=p).connections={},p.connections.create=function(e){var t=e.apiKey,n=e.sessionId,r=e.connectionId,i=e.connectionEventsSuppressed,o=e.capabilities;return d({method:"create",uri:"/v2/partner/"+t+"/session/"+n+"/connection/"+r,content:{userAgent:s.env.userAgent,clientVersion:f.clientVersion,capabilities:o||[],connectionEventsSuppressed:i}})},p.connections.destroy=function(e){var t=e.apiKey,n=e.sessionId,r=e.connectionId;return d({method:"delete",uri:"/v2/partner/"+t+"/session/"+n+"/connection/"+r,content:{}})},p.sessions={},p.sessions.get=function(e,t){return d({method:"read",uri:"/v2/partner/"+e+"/session/"+t,content:{}})},p.streams={},p.streams.get=function(e,t,n){return d({method:"read",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n,content:{}})},p.streams.channelFromOTChannel=function(e){var t={id:e.id,type:e.type,active:e.active};return"video"===e.type&&(t.width=e.width,t.height=e.height,t.orientation=e.orientation,t.frameRate=e.frameRate,"default"!==e.source&&(t.source=e.source),t.fitMode=e.fitMode),t},p.streams.create=function(e,t,n,r,i,o,a,s){var c={id:n,name:r,audioFallbackEnabled:i,channel:o.map(function(e){return p.streams.channelFromOTChannel(e)})};return a&&(c.minBitrate=Math.round(a)),s&&(c.maxBitrate=Math.round(s)),d({method:"create",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n,content:c})},p.streams.destroy=function(e,t,n){return d({method:"delete",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n,content:{}})},p.streamChannels={},p.streamChannels.update=function(e,t,n,r,i){return d({method:"update",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/channel/"+r,content:i})},p.subscribers={},p.subscribers.create=function(e,t,n,r,i,o){var a={id:r,connection:i,keyManagementMethod:l(),bundleSupport:c(),rtcpMuxSupport:u()};return o&&(a.channel=o),d({method:"create",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+r,content:a})},p.subscribers.destroy=function(e,t,n,r){return d({method:"delete",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+r,content:{}})},p.subscribers.update=function(e,t,n,r,i){return d({method:"update",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+r,content:i})},p.subscriberChannels={},p.subscriberChannels.update=function(e,t,n,r,i,o){return d({method:"update",uri:"/v2/partner/"+e+"/session/"+t+"/stream/"+n+"/subscriber/"+r+"/channel/"+i,content:o})},p.signals={},p.signals.create=function(e,t,n,r,i){var o={};return void 0!==r&&(o.type=r),void 0!==i&&(o.data=i),d({method:"signal",uri:"/v2/partner/"+e+"/session/"+t+(void 0!==n?"/connection/"+n:"")+"/signal/"+a(),content:o})}},function(e,t,n){"use strict";var c=n(29),u=n(72),d=n(172),l=n(310),f=n(312);e.exports=function(t,e,n){var r,i,o,a,s;this.toRaptorMessage=function(){var e=this.to;return e&&"string"!=typeof e&&(e=e.id),l.signals.create(u.value,t,e,this.type,this.data)},this.toHash=function(){return n},this.error=null,this.retryAfterReconnect=!0,n&&(n.hasOwnProperty("data")&&(this.data=c(n.data),this.error=function(e){var t=null;if(null==e)t={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{8192<JSON.stringify(e).length&&(t={code:413,reason:"The data field was too long, the maximum size of it is 8192 characters"})}catch(e){t={code:400,reason:"The data field was not valid JSON"}}return t}(this.data)),n.hasOwnProperty("to")&&(this.to=n.to,this.error||(this.error=(s=this.to)?s instanceof d||s._tag===f?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"})),n.hasOwnProperty("type")&&(this.error||(this.error=(o=n.type,(a=null)==o?a={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:128<o.length?a={code:413,reason:"The signal type was too long, the maximum length of it is 128 characters"}:!/^[a-zA-Z0-9\-\._~]+$/.exec(o)&&(a={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),a)),this.type=n.type),n.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=(r=n.retryAfterReconnect,!(i=null)!==r&&!1!==r&&(i={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),i)),this.retryAfterReconnect=n.retryAfterReconnect)),this.valid=null===this.error}},function(e){"use strict";e.exports={}},function(e,t,n){"use strict";var r=n(2),l=r(n(17)),f=r(n(18)),i=n(314),p=n(49),h=n(172),o=n(694),v=n(309),g=n(0)("SessionDispatcher"),m=n(39),a=n(315),s=n(152);function b(e,t){if(!t.streams.has(e.id)){var n=function(e,t){var n=e.channel.map(function(e){return new s(e)}),r=e.connectionId?e.connectionId:e.connection.id;return new a(e.id,e.name,e.creationTime,t.connections.get(r),t,n)}(e,t);return t.streams.add(n),n}}function y(e,t){if(!t.archives.has(e.id)){var n=function(e){return new i(e.id,e.name,e.status)}(e);return t.archives.add(n),n}}function E(r){var i={};this.enqueue=function(e){var t=e,n=Array.prototype.slice.call(arguments,1);i[t]||(i[t]=new o(r)),i[t].enqueue.apply(i[t],n)},this.triggerConnectionCreated=function(e){i["connectionCreated"+e.id]&&i["connectionCreated"+e.id].triggerAll()},this.triggerSessionConnected=function(e){i.sessionConnected&&i.sessionConnected.triggerAll(),e.forEach(function(e){this.triggerConnectionCreated(e)},this)}}var _={};e.exports=function(d,e){var a=(void 0===e?{}:e).connectionEventsSuppressed,i=new v,s=!1,c=new E(i);i.on("reconnecting",function(){d._.reconnecting()}),i.on("reconnected",function(){d._.reconnected()}),i.on("close",function(e){var t=d.connection;t&&(t.destroyedReason()?g.debug("Socket was closed but the connection had already been destroyed. Reason: "+t.destroyedReason()):t.destroy(e))});function u(r,i){return d.connections.has(r.id)?d.connections.get(r.id):(r=h.fromHash(r),(i||d.connection&&r.id!==d.connection.id)&&(d.connections.add(r),c.triggerConnectionCreated(r)),Object.keys(_).forEach(function(e){var t=_[e];if(t&&r.id===t.connection.id){b(t,d),delete _[t.id];var n={debug:i?"connection came in session#read":"connection came in connection#created",streamId:t.id,connectionId:r.id};d.logEvent("streamCreated","warning",n)}}),r)}i.on("session#read",function(e,t){var n,r={streams:[],connections:[],archives:[]};e.connection.forEach(function(e){n=u(e,!0),r.connections.push(n)}),e.stream.forEach(function(e){r.streams.push(b(e,d))}),(e.archive||e.archives).forEach(function(e){r.archives.push(y(e,d))}),i.triggerCallback(t,null,r),s=!0,c.triggerSessionConnected(d.connections)}),i.on("connection#created",function(e){u(e)}),i.on("connection#deleted",function(e,t){(e=d.connections.get(e))?e.destroy(t):g.warn("A connection was deleted that we do not know about")}),i.on("stream#created",function(e,t){if(a){if(null==e.connection||null==e.connection.id)return void d.logEvent("SessionDispatcher:stream#created","Event",{connection:e.connection,info:"Stream did not contain a connection object. Event ignored"});u(e.connection)}var n=e.connectionId?e.connectionId:e.connection.id;if(d.connections.has(n))e=b(e,d);else{var r={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:(_[e.id]=e).id};d.logEvent("streamCreated","warning",r)}e&&(e.publisher&&e.publisher.setStream(e),i.triggerCallback(t,null,e))}),i.on("stream#deleted",function(e,t){var n=d.streams.get(e);n?n.destroy(t):g.error("A stream does not exist with the id of "+e+", for stream#deleted message!")}),i.on("stream#updated",function(e,t){var n=d.streams.get(e);n?n._.update(t):g.error("A stream does not exist with the id of "+e+", for stream#updated message!")}),i.on("streamChannel#updated",function(e,t,n){var r;e&&(r=d.streams.get(e))?r._.updateChannel(t,n):g.error("Unable to determine streamId, or the stream does not exist, for streamChannel message!")});function t(n,e,r,i){var t,o,a={streamId:e},s=m.subscribers,c=m.publishers;switch(t=i.params.subscriber?{widgetId:i.params.subscriber}:a,n){case"offer":o=[].concat(s.where(t),c.where(a)).slice(0,1);break;case"answer":case"pranswer":o=[].concat(c.where(a),s.where(t)).slice(0,1);break;case"generateoffer":case"unsubscribe":o=c.where(a);break;case"candidate":o=[].concat(s.where(t),c.where(a));break;default:return void g.debug("jsep#"+n+" is not currently implemented")}if(0!==o.length){var u=d.connections.get(r);!u&&r.match(/^symphony\./)&&(u=h.fromHash({id:r,creationTime:Math.floor(p())}),d.connections.add(u)),o.forEach(function(){var t=(0,f.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.processMessage(n,r,i);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),g.error("Error occurred during processMessage",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}));return function(e){return t.apply(this,arguments)}}())}}return i.on("jsep#offer",t.bind(null,"offer")),i.on("jsep#answer",t.bind(null,"answer")),i.on("jsep#pranswer",t.bind(null,"pranswer")),i.on("jsep#generateoffer",t.bind(null,"generateoffer")),i.on("jsep#unsubscribe",t.bind(null,"unsubscribe")),i.on("jsep#candidate",t.bind(null,"candidate")),i.on("subscriberChannel#updated",function(e,t,n){e&&d.streams.has(e)?d.streams.get(e)._.updateChannel(t,n):g.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!")}),i.on("subscriberChannel#update",function(e,t,n){t&&d.streams.has(t)?m.subscribers.has(e)?m.subscribers.get(e).disableVideo(n.active):g.error("Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!"):g.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!")}),i.on("signal",function(e,t){if(a){var n=t.connection||t.fromConnection;null!=n&&null!=n.id||(n=function(e){return{id:e,creationTime:(new Date).getTime(),data:{},capablities:{},permissions:[]}}(e),d.logEvent("SessionDispatcher:Signal","Event",{fromAddress:e,connection:t.connection,fromConnection:t.fromConnection,info:"Signal did not contain a connection object. One has been constructed",constructedConnection:n})),u(n)}var r=t.type,i=t.data,o=d.connections.get(e);d.connection&&e===d.connection.connectionId?s?d._.dispatchSignal(o,r,i):c.enqueue("sessionConnected","signal",e,r,i):d.connections.get(e)?d._.dispatchSignal(o,r,i):""===e?d._.dispatchSignal(null,r,i):c.enqueue("connectionCreated"+e,"signal",e,r,i)}),i.on("archive#created",function(e){y(e,d)}),i.on("archive#updated",function(e,t){var n=d.archives.get(e);n?n._.update(t):g.error("An archive does not exist with the id of "+e+", for archive#updated message!")}),i}},function(e,t,n){"use strict";var o=n(21)(),r=n(5);e.exports=function(e,t,n){var i=this;this.id=e,this.name=t,this.status=n,this._={},r(this),this._.update=function(r){Object.keys(r).forEach(function(e){var t=i[e];i[e]=r[e];var n=new o.ArchiveUpdatedEvent(i,e,t,i[e]);i.dispatchEvent(n)})},this.destroy=function(){}}},function(e,t,n){"use strict";var h=n(0)("Stream"),v=n(3),g=n(39),m=n(5),b=n(21)(),y=["name","archiving"];e.exports=function(e,t,n,r,i,o){var a,s=this;this.id=e,this.streamId=e,this.name=t,this.creationTime=Number(n),this.connection=r,this.channel=o,this.publisher=g.publishers.find({streamId:this.id}),m(this);function c(e,t,n,r){var i=t;switch(i){case"active":i="audio"===e.type?"hasAudio":"hasVideo",s[i]=r;break;case"disableWarning":if(i="audio"===e.type?"audioDisableWarning":"videoDisableWarning",s[i]=r,!s["audio"===e.type?"hasAudio":"hasVideo"])return;break;case"fitMode":s[i="defaultFitMode"]=r;break;case"source":i="audio"===e.type?"audioType":"videoType",s[i]=r;break;case"videoDimensions":s.videoDimensions=r;break;case"orientation":case"width":case"height":return}"screen"===s.videoType&&"hasVideo"===i&&!1===r||s.dispatchEvent(new b.StreamUpdatedEvent(s,i,n,r))}function u(){return s.publisher?s.publisher:g.subscribers.find(function(e){return e.stream&&e.stream.id===s.id&&e.session.id===i.id})}function d(){return!s.publisher}this.getChannelsOfType=function(t){return s.channel.filter(function(e){return e.type===t})},this.getChannel=function(e){for(var t=0;t<s.channel.length;++t)if(s.channel[t].id===e)return s.channel[t];return null};var l=this.getChannelsOfType("audio")[0],f=this.getChannelsOfType("video")[0];this.hasAudio=null!=l&&l.active,this.hasVideo=null!=f&&f.active,this.videoType=f&&f.source,this.defaultFitMode=f&&f.fitMode,this.videoDimensions={},f&&(this.videoDimensions.width=f.width,this.videoDimensions.height=f.height,this.videoDimensions.orientation=f.orientation,f.on("update",c),this.frameRate=f.frameRate),l&&l.on("update",c),this.setChannelActiveState=function(e,t,n){var r={active:t};n&&(r.activeReason=n),p(e,r)},this.setVideoDimensions=function(e,t){p("video",{width:e,height:t,orientation:0})},this.setRestrictFrameRate=function(e){p("video",{restrictFrameRate:e})},this.setPreferredResolution=function(e){if(d()){if(i.sessionInfo.p2pEnabled)h.warn("Stream.setPreferredResolution will not work in a P2P Session");else if(!e||void 0!==e.width||void 0!==e.height){var t=s.getChannelsOfType("video")[0];if(t){if(e&&e.width){if(isNaN(parseInt(e.width,10)))throw new v.Error("stream preferred width must be an integer","Subscriber");t.preferredWidth=parseInt(e.width,10)}else t.preferredWidth=void 0;if(e&&e.height){if(isNaN(parseInt(e.height,10)))throw new v.Error("stream preferred height must be an integer","Subscriber");t.preferredHeight=parseInt(e.height,10)}else t.preferredHeight=void 0;i._.subscriberChannelUpdate(s,u(),t,{preferredWidth:t.preferredWidth||0,preferredHeight:t.preferredHeight||0})}}}else h.warn("setPreferredResolution has no affect when called by a publisher")},this.getPreferredResolution=function(){var e=s.getChannelsOfType("video")[0];if(e&&(e.preferredWidth||e.preferredHeight))return{width:e.preferredWidth,height:e.preferredHeight}},this.setPreferredFrameRate=function(e){if(d())if(i.sessionInfo.p2pEnabled)h.warn("Stream.setPreferredFrameRate will not work in a P2P Session");else{if(e&&isNaN(parseFloat(e)))throw new v.Error("stream preferred frameRate must be a number","Subscriber");var t=s.getChannelsOfType("video")[0];t&&(t.preferredFrameRate=e?parseFloat(e):void 0,i._.subscriberChannelUpdate(s,u(),t,{preferredFrameRate:t.preferredFrameRate||0}))}else h.warn("setPreferredFrameRate has no affect when called by a publisher")},this.getPreferredFrameRate=function(){var e=s.getChannelsOfType("video")[0];return e?e.preferredFrameRate:void 0};var p=function(e,t){var n;if(s.publisher)n=function(e){return i._.streamChannelUpdate(s,e,t)};else{var r=u();n=function(e){return i._.subscriberChannelUpdate(s,r,e,t)}}s.getChannelsOfType(e).forEach(n)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(e,t){void 0===e&&(e="clientDisconnected"),a=e,s.destroyed=!0,s.destroyedReason=a,!0!==t&&s.dispatchEvent(new b.DestroyedEvent("destroyed",s,a))},this._={},this._.updateProperty=function(e,t){if(-1!==y.indexOf(e)){var n=s[e],r=t;switch(e){case"name":s[e]=r;break;case"archiving":var i=u();s.publisher&&i&&i._.archivingStatus(r),s[e]=r}var o=new b.StreamUpdatedEvent(s,e,n,r);s.dispatchEvent(o)}else h.warn('Unknown stream property "'+e+'" was modified to "'+t+'".')},this._.update=function(e){for(var t in e)e.hasOwnProperty(t)&&s._.updateProperty(t,e[t])},this._.updateChannel=function(e,t){var n=s.getChannel(e);n&&n.update(t)}}},function(e,t,n){"use strict";var r=n(110)().getMediaDevices;e.exports=function(t){r().then(function(e){return t(void 0,e)},t)}},function(e,t,n){"use strict";n(318);var r,i=n(29),o=n(190)(),a=n(26),s=n(5),c=n(143),u=n(24)(),d=n(27),l=n(225),f=u.onlyLocal(),p={};p.noConflict=n(523)(),window.OT=p,e.exports=p,r=p,Object.defineProperty(window,"TB",{get:function(){return r===p&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),r},set:function(e){r=e},configurable:!0});var h=n(145)(window),v=n(3),g=n(72),m=n(146),b=n(250),y=n(147),E=n(148),_=n(251),C=n(252),T=n(149),S=n(9),w=n(12),O=n(263),I=n(245),A=n(0)("OT"),x=n(136),R=n(579),N=n(38),k=n(7),D=n(106).parseIceServers,M=n(271),P=n(39),L=n(152),j=n(154),U=n(155),F=n(107)({global:h}),B=n(16)({errorReporting:o}),V=n(160)(),z=n(279)({otError:B}),W=n(281)(),H=n(286)({global:h}),G=n(110)({getNativeEnumerateDevices:H}),Y=n(21)(),q=n(161)(),Z=n(620)({otError:B,global:h}),K=n(162)({chromeExtensionHelper:z,otError:B}),J=n(626)({deviceHelpers:G,generateConstraintInfo:O,getUserMediaHelper:Z,global:h,OTHelpers:v,OTPlugin:k,screenSharing:K}),Q=n(630)({otError:B,processPubOptions:J}),X=n(164)({otError:B}),$=n(51),ee=n(290)(),te=n(291)({otError:B}),ne=n(292)({global:h,videoElementErrorMap:te}),re=n(165)({global:h}),ie=n(295)({PeerConnection:F,setCertificates:re}),oe=n(296)({PeerConnection:F,setCertificates:re}),ae=n(297)(),se=n(637)({otError:B}),ce=n(111)({NativeVideoElementWrapper:ne}),ue=n(153)(),de=n(166)({VideoElementFacade:ce}),le=n(299)({interpretPeerConnectionError:X,otError:B,SubscriberPeerConnection:oe,WidgetView:de}),fe=n(169)({APIKEY:g,createChromeMixin:W,deviceHelpers:G,EnvironmentLoader:T,Errors:S,Events:Y,ExceptionCodes:w,calculateCapableSimulcastStreams:b,global:h,interpretPeerConnectionError:X,IntervalRunner:$,Microphone:ee,otError:B,OTErrorClass:N,OTHelpers:v,parseIceServers:D,processPubOptions:J,PUBLISH_MAX_DELAY:M,PublisherPeerConnection:ie,PublishingState:ae,StreamChannel:L,systemRequirements:U,VideoOrientation:ue,WidgetView:de}),pe=n(303)({otError:B,Publisher:fe}),he=n(304)({global:h,initPublisher:pe,otError:B,Publisher:fe,Subscriber:le}),ve=n(698)({Session:he});s(p);var ge=n(699);l(p,"$",{name:"OT.$",getMessage:"Please use an external library like jQuery to select elements from the page.",value:v}),p.APIKEY=g.value,p.AnalyserAudioLevelSampler=E,p.Archive=n(314),p.ArchiveEvent=Y.ArchiveEvent,p.ArchiveUpdatedEvent=Y.ArchiveUpdatedEvent,p.AudioLevelTransformer=m,p.AudioLevelUpdatedEvent=Y.AudioLevelUpdatedEvent,p.Capabilities=n(170),p.Chrome=y,p.Connection=n(172),p.ConnectionCapabilities=p.Connection.Capabilities,p.ConnectionEvent=Y.ConnectionEvent,Object.keys(x).forEach(function(e){p[e.toUpperCase()]=x[e].priority}),p.NONE=0,p.debug=A.debug,p.error=A.error,p.info=A.info,p.log=A.log,p.warn=A.warn,p.DestroyedEvent=Y.DestroyedEvent,p.Dialogs=C,p.EnvLoadedEvent=Y.EnvLoadedEvent,p.Error=N,p.Error.on(a.EXCEPTION,function(e){if(e.target===p.Error){var t=i(e);(t.target=p).dispatchEvent(t)}else p.dispatchEvent(e)}),p.Event=c,p.ExceptionCodes=w,p.ExceptionEvent=Y.ExceptionEvent,p.getDevices=n(316),p.GetStatsAudioLevelSampler=_,p.HAS_REQUIREMENTS=1,p.IntervalRunner=$,p.IssueReportedEvent=Y.IssueReportedEvent,p.MediaStoppedEvent=Y.MediaStoppedEvent,p.Microphone=ee,p.NOT_HAS_REQUIREMENTS=0,p.PeerConnection=F,p.PeerConnection.QOS=n(278).default,p.Publisher=fe,p.PublisherPeerConnection=ie,p.PublishingState=ae,p.Session=he,p.SessionConnectEvent=Y.SessionConnectEvent,p.SessionDisconnectEvent=Y.SessionDisconnectEvent,p.SessionDispatcher=n(313),p.Signal=n(311),p.SignalEvent=Y.SignalEvent,p.Stream=n(315),p.StreamChannel=L,p.StreamEvent=Y.StreamEvent,p.StreamPropertyChangedEvent=Y.StreamPropertyChangedEvent,p.StreamUpdatedEvent=Y.StreamUpdatedEvent,p.StylableComponent=j,p.Subscriber=le,p.SubscriberPeerConnection=oe,p.SubscribingState=n(300),p.VideoDimensionsChangedEvent=Y.VideoDimensionsChangedEvent,p.VideoDisableWarningEvent=Y.VideoDisableWarningEvent,p.VideoElement=ce,p.VideoEnabledChangedEvent=Y.VideoEnabledChangedEvent,p.VideoOrientation=ue,p.WidgetView=de,p.getSupportedCodecs=ge,p._={AnalyticsHelper:d,getClientGuid:I.get,StaticConfig:u},Object.defineProperty(p,"version",{value:f.version});var me={};l(me,"version",{value:f.version,name:"OT.properties.version",getWarning:"Please use OT.version instead",warnOnSet:!0,setWarning:"Mutating version has no effect"}),["buildHash","minimumVersion","debug",["websiteURL","websiteUrl"],["cdnURL","cdnUrl"],["loggingURL","loggingUrl"],["apiURL","apiUrl"],["supportSSL",!0],["cdnURLSSL","cdnUrl"],["loggingURLSSL","loggingUrl"],["apiURLSSL","apiUrl"],"enableErrorReporting",["assetURL","assetUrl"]].forEach(function(e){var t,n;if(Array.isArray(e)){var r=e[0],i=e[1];n=r,t=f[i]||i}else t=f[e],n=e;l(me,n,{value:t,name:"OT.properties."+n,warnOnSet:!0,setWarning:"Mutating "+n+" has no effect"})}),p.properties=me,p.audioContext=V,p.checkScreenSharingCapability=K.checkCapability,p.checkSystemRequirements=U.check,p.components={},p.generateSimpleStateMachine=q,p.getDevices=n(316),p.getErrorTitleByCode=N.getTitleByCode,p.getLogs=A.getLogs,p.getStatsAdpater=n(276),p.getStatsHelpers=n(75),p.getUserMedia=Q,p.handleJsException=N.handleJsException,p.initPublisher=pe,p.initSession=function(e,t,n){return null==t&&(t=e,e=null),0===g.value.length&&e&&(g.value=e,p.APIKEY=e),ve(e,t,n)};function be(e,t){return function(){return console.warn(function(e){return e+" is deprecated and will be removed in a future version of OpenTok"}(e)),t}}Object.defineProperties(p,{isUnloaded:{get:be("OT.isUnloaded",T.isUnloaded)},onLoad:{get:be("OT.onLoad",T.onLoad)},onUnload:{get:be("OT.onUnload",T.onUnload)},overrideGuidStorage:{get:be("OT.overrideGuidStorage",I.override)}}),p.pickScreenSharingHelper=K.pickHelper,p.publishers=P.publishers,p.registerScreenSharingExtension=K.registerExtension,p.registerScreenSharingExtensionHelper=K.registerExtensionHelper,p.reportIssue=se,p.sessions=P.sessions,p.setLogLevel=R,p.shouldLog=A.shouldLog,p.subscribers=P.subscribers,p.unblockAudio=n(168),p.upgradeSystemRequirements=U.upgrade,T.onUnload(function(){P.publishers.destroy(),P.subscribers.destroy(),P.sessions.destroy("unloaded")})},function(e,t,n){var r=n(319);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(333)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(320)(!1);var r=n(321),i=r(n(322)),o=r(n(323)),a=r(n(324)),s=r(n(325)),c=r(n(326)),u=r(n(327)),d=r(n(328)),l=r(n(329)),f=r(n(330)),p=r(n(331)),h=r(n(332));t.push([e.i,"/*!\n * Copyright (c) 2017 TokBox, Inc.\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n */\n\n/**\n * OT Base styles\n */\n\n/* Root OT object, this is where our CSS reset happens */\n.OT_root,\n.OT_root * {\n  color: #ffffff;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font-family: Arial, Helvetica, sans-serif;\n  vertical-align: baseline;\n}\n\n/**\n * Specific Element Reset\n */\n\n.OT_root h1,\n.OT_root h2,\n.OT_root h3,\n.OT_root h4,\n.OT_root h5,\n.OT_root h6 {\n  color: #ffffff;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 100%;\n  font-weight: bold;\n}\n\n.OT_root header {\n\n}\n\n.OT_root footer {\n\n}\n\n.OT_root div {\n\n}\n\n.OT_root section {\n\n}\n\n.OT_root video {\n\n}\n\n.OT_root button {\n\n}\n\n.OT_root strong {\n  font-weight: bold;\n}\n\n.OT_root em {\n  font-style: italic;\n}\n\n.OT_root a,\n.OT_root a:link,\n.OT_root a:visited,\n.OT_root a:hover,\n.OT_root a:active {\n  font-family: Arial, Helvetica, sans-serif;\n}\n\n.OT_root ul, .OT_root ol {\n  margin: 1em 1em 1em 2em;\n}\n\n.OT_root ol {\n  list-style: decimal outside;\n}\n\n.OT_root ul {\n  list-style: disc outside;\n}\n\n.OT_root dl {\n  margin: 4px;\n}\n\n.OT_root dl dt,\n.OT_root dl dd {\n  float: left;\n  margin: 0;\n  padding: 0;\n}\n\n.OT_root dl dt {\n  clear: left;\n  text-align: right;\n  width: 50px;\n}\n\n.OT_root dl dd {\n  margin-left: 10px;\n}\n\n.OT_root img {\n  border: 0 none;\n}\n\n/* Modal dialog styles */\n\n/* Modal dialog styles */\n\n.OT_dialog-centering {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\n.OT_dialog-centering-child {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.OT_dialog {\n  position: relative;\n\n  box-sizing: border-box;\n  max-width: 576px;\n  margin-right: auto;\n  margin-left: auto;\n  padding: 36px;\n  text-align: center; /* centers all the inline content */\n\n  background-color: #363636;\n  color: #fff;\n  box-shadow: 2px 4px 6px #999;\n  font-family: 'Didact Gothic', sans-serif;\n  font-size: 13px;\n  line-height: 1.4;\n}\n\n.OT_dialog * {\n  font-family: inherit;\n  box-sizing: inherit;\n}\n\n.OT_closeButton {\n  color: #999999;\n  cursor: pointer;\n  font-size: 32px;\n  line-height: 36px;\n  position: absolute;\n  right: 18px;\n  top: 0;\n}\n\n.OT_dialog-messages {\n  text-align: center;\n}\n\n.OT_dialog-messages-main {\n  margin-bottom: 36px;\n  line-height: 36px;\n\n  font-weight: 300;\n  font-size: 24px;\n}\n\n.OT_dialog-messages-minor {\n  margin-bottom: 18px;\n\n  font-size: 13px;\n  line-height: 18px;\n  color: #A4A4A4;\n}\n\n.OT_dialog-messages-minor strong {\n  color: #ffffff;\n}\n\n.OT_dialog-actions-card {\n  display: inline-block;\n}\n\n.OT_dialog-button-title {\n  margin-bottom: 18px;\n  line-height: 18px;\n\n  font-weight: 300;\n  text-align: center;\n  font-size: 14px;\n  color: #999999;\n}\n.OT_dialog-button-title label {\n  color: #999999;\n}\n\n.OT_dialog-button-title a,\n.OT_dialog-button-title a:link,\n.OT_dialog-button-title a:active {\n  color: #02A1DE;\n}\n\n.OT_dialog-button-title strong {\n  color: #ffffff;\n  font-weight: 100;\n  display: block;\n}\n\n.OT_dialog-button {\n  display: inline-block;\n\n  margin-bottom: 18px;\n  padding: 0 1em;\n\n  background-color: #1CA3DC;\n  text-align: center;\n  cursor: pointer;\n}\n\n.OT_dialog-button:disabled {\n  cursor: not-allowed;\n  opacity: 0.5;\n}\n\n.OT_dialog-button-large {\n  line-height: 36px;\n  padding-top: 9px;\n  padding-bottom: 9px;\n\n  font-weight: 100;\n  font-size: 24px;\n}\n\n.OT_dialog-button-small {\n  line-height: 18px;\n  padding-top: 9px;\n  padding-bottom: 9px;\n\n  background-color: #444444;\n  color: #999999;\n  font-size: 16px;\n}\n\n.OT_dialog-progress-bar {\n  display: inline-block; /* prevents margin collapse */\n  width: 100%;\n  margin-top: 5px;\n  margin-bottom: 41px;\n\n  border: 1px solid #4E4E4E;\n  height: 8px;\n}\n\n.OT_dialog-progress-bar-fill {\n  height: 100%;\n\n  background-color: #29A4DA;\n}\n\n.OT_dialog-plugin-upgrading .OT_dialog-plugin-upgrade-percentage {\n  line-height: 54px;\n\n  font-size: 48px;\n  font-weight: 100;\n}\n\n/* Helpers */\n\n.OT_centered {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  margin: 0;\n}\n\n.OT_dialog-hidden {\n  display: none;\n}\n\n.OT_dialog-button-block {\n  display: block;\n}\n\n.OT_dialog-no-natural-margin {\n  margin-bottom: 0;\n}\n\n/* Publisher and Subscriber styles */\n\n.OT_publisher, .OT_subscriber {\n  position: relative;\n  min-width: 48px;\n  min-height: 48px;\n}\n\n.OT_publisher .OT_video-element,\n.OT_subscriber .OT_video-element {\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  transform-origin: 0 0;\n}\n\n/* Styles that are applied when the video element should be mirrored */\n.OT_publisher.OT_mirrored .OT_video-element {\n  transform: scale(-1, 1);\n  transform-origin: 50% 50%;\n}\n\n.OT_subscriber_error {\n  background-color: #000;\n  color: #fff;\n  text-align: center;\n}\n\n.OT_subscriber_error > p {\n  padding: 20px;\n}\n\n/* The publisher/subscriber name/mute background */\n.OT_publisher .OT_bar,\n.OT_subscriber .OT_bar,\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name,\n.OT_publisher .OT_archiving,\n.OT_subscriber .OT_archiving,\n.OT_publisher .OT_archiving-status,\n.OT_subscriber .OT_archiving-status,\n.OT_publisher .OT_archiving-light-box,\n.OT_subscriber .OT_archiving-light-box {\n  -ms-box-sizing: border-box;\n  box-sizing: border-box;\n  top: 0;\n  left: 0;\n  right: 0;\n  display: block;\n  height: 34px;\n  position: absolute;\n}\n\n.OT_publisher .OT_bar,\n.OT_subscriber .OT_bar {\n  background: rgba(0, 0, 0, 0.4);\n}\n\n.OT_publisher .OT_edge-bar-item,\n.OT_subscriber .OT_edge-bar-item {\n  z-index: 1; /* required to get audio level meter underneath */\n}\n\n/* The publisher/subscriber name panel/archiving status bar */\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name {\n  background-color: transparent;\n  color: #ffffff;\n  font-size: 15px;\n  line-height: 34px;\n  font-weight: normal;\n  padding: 0 4px 0 36px;\n}\n\n.OT_publisher .OT_archiving-status,\n.OT_subscriber .OT_archiving-status {\n  background: rgba(0, 0, 0, 0.4);\n  top: auto;\n  bottom: 0;\n  left: 34px;\n  padding: 0 4px;\n  color: rgba(255, 255, 255, 0.8);\n  font-size: 15px;\n  line-height: 34px;\n  font-weight: normal;\n}\n\n.OT_micro .OT_archiving-status,\n.OT_micro:hover .OT_archiving-status,\n.OT_mini .OT_archiving-status,\n.OT_mini:hover .OT_archiving-status {\n  display: none;\n}\n\n.OT_publisher .OT_archiving-light-box,\n.OT_subscriber .OT_archiving-light-box {\n  background: rgba(0, 0, 0, 0.4);\n  top: auto;\n  bottom: 0;\n  right: auto;\n  width: 34px;\n  height: 34px;\n}\n\n.OT_archiving-light {\n  width: 7px;\n  height: 7px;\n  border-radius: 30px;\n  position: absolute;\n  top: 14px;\n  left: 14px;\n  background-color: #575757;\n  box-shadow: 0 0 5px 1px #575757;\n}\n\n.OT_archiving-light.OT_active {\n  background-color: #970d13;\n  -webkit-animation: OT_pulse 1.3s ease-in;\n  -moz-animation: OT_pulse 1.3s ease-in;\n  -webkit-animation: OT_pulse 1.3s ease-in;\n  -webkit-animation-iteration-count: infinite;\n  -moz-animation-iteration-count: infinite;\n  -webkit-animation-iteration-count: infinite;\n}\n\n.OT_mini .OT_bar,\n.OT_bar.OT_mode-mini,\n.OT_bar.OT_mode-mini-auto {\n  bottom: 0;\n  height: auto;\n}\n\n.OT_mini .OT_name.OT_mode-off,\n.OT_mini .OT_name.OT_mode-on,\n.OT_mini .OT_name.OT_mode-auto,\n.OT_mini:hover .OT_name.OT_mode-auto {\n  display: none;\n}\n\n.OT_publisher .OT_name,\n.OT_subscriber .OT_name {\n    left: 10px;\n    right: 37px;\n    height: 34px;\n    padding-left: 0;\n}\n\n.OT_publisher .OT_mute,\n.OT_subscriber .OT_mute {\n    border: none;\n    cursor: pointer;\n    display: block;\n    position: absolute;\n    text-align: center;\n    text-indent: -9999em;\n    background-color: transparent;\n    background-repeat: no-repeat;\n}\n\n.OT_publisher .OT_mute,\n.OT_subscriber .OT_mute {\n  right: 0;\n  top: 0;\n  border-left: 1px solid rgba(255, 255, 255, 0.2);\n  height: 36px;\n  width: 37px;\n}\n\n.OT_mini .OT_mute,\n.OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold,\n.OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {\n  top: 50%;\n  left: 50%;\n  right: auto;\n  margin-top: -18px;\n  margin-left: -18.5px;\n  border-left: none;\n}\n\n.OT_publisher .OT_mute {\n  background-image: url("+i+");\n  background-position: 9px 5px;\n}\n\n.OT_publisher .OT_mute.OT_active {\n  background-image: url("+o+");\n  background-position: 9px 4px;\n}\n\n.OT_subscriber .OT_mute {\n  background-image: url("+a+");\n  background-position: 8px 7px;\n}\n\n.OT_subscriber .OT_mute.OT_active {\n  background-image: url("+s+");\n  background-position: 7px 7px;\n}\n\n/**\n * Styles for display modes\n *\n * Note: It's important that these completely control the display and opacity\n * attributes, no other selectors should atempt to change them.\n */\n\n/* Default display mode transitions for various chrome elements */\n.OT_publisher .OT_edge-bar-item,\n.OT_subscriber .OT_edge-bar-item {\n  transition-property: top, bottom, opacity;\n  transition-duration: 0.5s;\n  transition-timing-function: ease-in;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_mode-off,\n.OT_publisher .OT_edge-bar-item.OT_mode-auto,\n.OT_subscriber .OT_edge-bar-item.OT_mode-auto,\n.OT_publisher .OT_edge-bar-item.OT_mode-mini-auto,\n.OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {\n  top: -25px;\n  opacity: 0;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_mode-off {\n  display: none;\n}\n\n.OT_mini .OT_mute.OT_mode-auto,\n.OT_publisher .OT_mute.OT_mode-mini-auto,\n.OT_subscriber .OT_mute.OT_mode-mini-auto {\n  top: 50%;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {\n  top: auto;\n  bottom: -25px;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_mode-on,\n.OT_subscriber .OT_edge-bar-item.OT_mode-on,\n.OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,\n.OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,\n.OT_publisher:hover .OT_edge-bar-item.OT_mode-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto,\n.OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {\n  top: 0;\n  opacity: 1;\n}\n\n.OT_mini .OT_mute.OT_mode-on,\n.OT_mini:hover .OT_mute.OT_mode-auto,\n.OT_mute.OT_mode-mini,\n.OT_root:hover .OT_mute.OT_mode-mini-auto {\n  top: 50%;\n}\n\n.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,\n.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,\n.OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,\n.OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {\n  top: auto;\n  bottom: 0;\n  opacity: 1;\n}\n\n\n/* Contains the video element, used to fix video letter-boxing */\n.OT_widget-container {\n  position: absolute;\n  background-color: #000000;\n  overflow: hidden;\n}\n\n.OT_hidden-audio {\n  position: absolute !important;\n  height: 1px !important;\n  width: 1px !important;\n}\n\n/* Load animation */\n.OT_root .OT_video-loading {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  display: none;\n\n  background-color: rgba(0, 0, 0, .75);\n}\n\n.OT_root .OT_video-loading .OT_video-loading-spinner {\n  background: url("+c+") no-repeat;\n  position: absolute;\n  width: 32px;\n  height: 32px;\n  left: 50%;\n  top: 50%;\n  margin-left: -16px;\n  margin-top: -16px;\n  animation: OT_spin 2s linear infinite;\n}\n@keyframes OT_spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.OT_publisher.OT_loading .OT_video-loading,\n.OT_subscriber.OT_loading .OT_video-loading {\n  display: block;\n}\n\n.OT_publisher.OT_loading .OT_video-element,\n.OT_subscriber.OT_loading .OT_video-element {\n  /*display: none;*/\n}\n\n.OT_video-centering {\n  display: table;\n  width: 100%;\n  height: 100%;\n}\n\n.OT_video-container {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.OT_video-poster {\n  position: absolute;\n  z-index: 1;\n  width: 100%;\n  height: 100%;\n  display: none;\n\n  opacity: .25;\n\n  background-repeat: no-repeat;\n  background-image: url("+u+");\n  background-size: auto 76%;\n}\n\n.OT_fit-mode-cover .OT_video-element {\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n\n/* Workaround for iOS freezing issue when cropping videos */\n/* https://bugs.webkit.org/show_bug.cgi?id=176439 */\n@media only screen\n  and (orientation: portrait) {\n  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {\n    -o-object-fit: contain !important;\n       object-fit: contain !important;\n  }\n}\n\n.OT_fit-mode-contain .OT_video-element {\n  -o-object-fit: contain;\n     object-fit: contain;\n}\n\n.OT_fit-mode-cover .OT_video-poster {\n  background-position: center bottom;\n}\n\n.OT_fit-mode-contain .OT_video-poster {\n  background-position: center;\n}\n\n.OT_audio-level-meter {\n  position: absolute;\n  width: 25%;\n  max-width: 224px;\n  min-width: 21px;\n  top: 0;\n  right: 0;\n  overflow: hidden;\n}\n\n.OT_audio-level-meter:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_audio-level-meter__audio-only-img {\n  position: absolute;\n  top: 22%;\n  right: 15%;\n  width: 40%;\n\n  opacity: .7;\n\n  background: url("+d+") no-repeat center;\n}\n\n.OT_audio-level-meter__audio-only-img:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_audio-level-meter__value {\n  will-change: transform;\n  position: absolute;\n  top: -100%;\n  right: -100%;\n  width: 200%;\n  height: 200%;\n  transform: scale(0);\n  border-radius: 50%;\n  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);\n}\n\n.OT_audio-level-meter.OT_mode-off {\n    display: none;\n}\n\n.OT_audio-level-meter.OT_mode-on,\n.OT_audio-only .OT_audio-level-meter.OT_mode-auto {\n  display: block;\n}\n\n.OT_audio-only.OT_publisher .OT_video-element,\n.OT_audio-only.OT_subscriber .OT_video-element {\n  display: none;\n}\n\n\n.OT_video-disabled-indicator {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: bottom right;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 3px;\n  right: 3px;\n}\n\n.OT_video-disabled {\n  background-image: url("+l+");\n  background-size: 33px auto;\n}\n\n.OT_video-disabled-warning {\n  background-image: url("+f+");\n  background-size: 33px auto;\n}\n\n.OT_video-disabled-indicator.OT_active {\n  display: block;\n}\n\n.OT_audio-blocked-indicator {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: center;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.OT_audio-blocked {\n  background-image: url("+p+");\n  background-size: 90px auto;\n}\n\n.OT_container-audio-blocked {\n  cursor: pointer;\n}\n\n.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {\n  display: none;\n}\n\n.OT_container-audio-blocked .OT_mute {\n  display: none;\n}\n\n.OT_audio-blocked-indicator.OT_active {\n  display: block;\n}\n\n.OT_video-unsupported {\n  opacity: 1;\n  border: none;\n  display: none;\n  position: absolute;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: url("+h+");\n  background-size: 58px auto;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  margin-top: -30px;\n}\n\n.OT_video-unsupported-bar {\n  display: none;\n  position: absolute;\n  width: 192%; /* copy the size of the audio meter bar for symmetry */\n  height: 192%;\n  top: -96% /* half of the size */;\n  left: -96%;\n  border-radius: 50%;\n\n  background-color: rgba(0, 0, 0, .8);\n}\n\n.OT_video-unsupported-img {\n  display: none;\n  position: absolute;\n  top: 11%;\n  left: 15%;\n  width: 70%;\n  opacity: .7;\n  background-image: url("+h+");\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 100% auto;\n}\n\n.OT_video-unsupported-img:before {\n  /* makes the height of the container 93% of its width (90/97 px) */\n  content: '';\n  display: block;\n  padding-top: 93%;\n}\n\n.OT_video-unsupported-text {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  height: 100%;\n  margin-top: 40px;\n}\n\n.OT_video-unsupported.OT_active {\n  display: block;\n}\n\n.OT_mini .OT_video-unsupported,\n.OT_micro .OT_video-unsupported {\n  position: absolute;\n  width: 25%;\n  max-width: 224px;\n  min-width: 21px;\n  top: 0;\n  left: 0;\n  overflow: hidden;\n  background: none;\n  bottom: auto;\n  right: auto;\n  margin: auto;\n}\n\n.OT_mini .OT_video-unsupported:before,\n.OT_micro .OT_video-unsupported:before {\n  /* makes the height of the container equals its width */\n  content: '';\n  display: block;\n  padding-top: 100%;\n}\n\n.OT_mini .OT_video-unsupported-bar,\n.OT_micro .OT_video-unsupported-bar,\n.OT_mini .OT_video-unsupported-img,\n.OT_micro .OT_video-unsupported-img {\n  display: block;\n}\n\n.OT_mini .OT_video-unsupported-text,\n.OT_micro .OT_video-unsupported-text {\n  display: none;\n}\n\n.OT_hide-forced {\n  display: none;\n}\n\n.OT_ModalDialog {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  right: 0px;\n  bottom: 0px;\n  z-index: 1000;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n#tb_alert {\n  position: fixed;\n  width: 570px;\n  font-family: \"Lucida Grande\", Arial;\n  top: 50%;\n  left: 50%;\n  margin-top: -75px;\n  margin-left: -285px;\n}\n\n#tb_alert * {\n  box-sizing: border-box;\n}\n\n#tb_alert>div,\n#tb_alert>div>div {\n  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n#tb_alert>div {\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n  background-color: gray;\n  position: relative;\n  padding: 30px;\n  overflow: visible;\n  margin-left: 70px;\n  color: #c8c5c5;\n  border-bottom-color: rgba(255, 255, 255, 0.1);\n  border-left-color: rgba(255, 255, 255, 0.1);\n\n\n  background-color: #333;\n\n  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));\n\n  background-image: -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));\n\n  background-size: 4px 4px;\n  background-position: 0 0, 2px 2px;\n}\n\n#tb_alert>div>div {\n  background-color: #9c1408;\n  background-image: linear-gradient(0deg, #dd0c0a 0%, #9c1408 100%);\n\n  margin: -1px 0;\n\n  font-family: MS Trebuchet;\n  font-weight: bold;\n  font-size: 60px;\n  text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);\n\n  color: white;\n  width: 65px;\n  position: absolute;\n  padding: 42px 0;\n  text-align: center;\n  left: -70px;\n  top: 0;\n  bottom: 0;\n  border-top-left-radius: 5px;\n  border-bottom-left-radius: 5px;\n\n  border-bottom-color: transparent;\n  border-left: none;\n  border-right: none;\n}\n\n#tb_alert>div>div:after,\n#tb_alert>div>div:before {\n  content: \" \";\n  position: absolute;\n  right: -24px;\n  top: 40%;\n  border: 12px solid transparent;\n  border-left-color: #9c1408;\n}\n\n#tb_alert>div>div:before {\n  border-left-color: #bc3428;\n  top: 39%;\n}\n\n#tb_alert>div>h1 {\n  font-size: 24px;\n  padding-bottom: 5px;\n  color: #aaa;\n  font-weight: bold;\n  position: relative;\n  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);\n  margin: 0;\n}\n\n#tb_alert>div>p {\n  margin: 0;\n  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);\n  font-size: 14px;\n  line-height: 1.3em;\n}\n\n#tb_alert>div>.continue-text {\n  margin-top: 12px\n}\n\n#tb_alert>div a {\n  color: #a7d8df;\n  text-decoration: none;\n}\n\n#tb_alert>div>ul {\n  margin-bottom: 0;\n}\n\n#tb_alert>div>h1::before {\n  content: attr(data-text);\n  position: absolute;\n  left: 0;\n  color: white;\n  -webkit-mask-image: -webkit-gradient(\n    linear,\n    left top, left bottom,\n    from(rgba(0, 0, 0, 1)),\n    color-stop(60%, rgba(0, 0, 0, 0)),\n    to(rgba(0, 0, 0, 0))\n  );\n}\n\n#tb_alert button {\n  position: absolute;\n  right: 8px;\n  top: 5px;\n  background-color: #000;\n  color: #666;\n  border: none;\n  font-size: 20px;\n  /** Hack to bring it up to the proper line top */\n  line-height: 14px;\n  padding: 0;\n  padding-bottom: 3px;\n  cursor: pointer;\n}\n\n#tb_alert #section-mobile-browser,\n#tb_alert #section-supported-mobile-browser {\n  width: 200px;\n  top: 0px;\n  left: 25%;\n  margin-top: 0;\n  margin-left: 0;\n}\n\n@media all and (max-height: 300px) {\n  #tb_alert {\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    margin-left: 0;\n    margin-top: 0;\n  }\n  #tb_alert #section-mobile-browser,\n  #tb_alert #section-supported-mobile-browser {\n    margin-left: 0;\n    margin-top: 10px;\n    left: 0;\n  }\n}\n\n#tb_alert #section-normal-install,\n#tb_alert #section-upgrade-install,\n#tb_alert #section-mobile-browser,\n#tb_alert #section-supported-mobile-browser {\n  display: none;\n}\n",""])},function(e){"use strict";e.exports=function(n){var a=[];return a.toString=function(){return this.map(function(e){var t=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(n[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];null!=o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),a.push(o))}},a}},function(e){"use strict";e.exports=function(e,t){return"string"!=typeof e?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),/["'() \t\n]/.test(e)||t?'"'+e.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':e)}},function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAYAAACDBoQZAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABV0RVh0Q3JlYXRpb24gVGltZQAyNC82LzEzoCj+TwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAI3SURBVEiJlZQ/aBRREMZ/e5z4ngH/NKbQnFgo2oQUBiSNoCIhjTYmVilTprTQFMHCSgjprSyChBQKqUIQLBQDgo2gaCEYmySI/yDzhTtdi5tNNne7ubuBZZl53/e9mWHeQImZNGTSoknfTUr9v2jSUBmnTGjKpIaLtH4Nk6aKeEmB0BXgBVA54L5/wNUYwst8sIjwoDCe7ru74rjyzEw6DGx3yCovH2MIO2WZ9XcplCXSnw+0Eg8QamtvG77bLPCmHWgVk6om3TVpsHvhPTNp0PnVKrAE3ARuALeBE+XUpDXDBHgMXANGqsCYH1SBY8CXcrG2Us86D2CsAix3LqYrW64A48CWBxo9CmT4LWC8EkNouHMI2GgVTIpHIhPacN5WDKGRjcY6cCaGUAdW8oy0fCRWHF9z/u6cvQJO+XjMAPUO5dWBGcefdv6u2ALwF5iNIbwDJmi+0SLbBiYcN+u8hX0Ik+Z9X027XzNpzqT3Jm36f86kmp9PO36+7TqTomlnzQGPTOorSsukPj9PTVoz6Uh21rqCjgJPaL6IDeAp8BrYBE4CI8AdSPohfQ5MxhB+l7RjV3TUpFWT6i0ru+7x0SJe6RC56ADwNReqxRDWy/CdVtCfDn5PYj1ZNe+YdBy4AJwDBsito4SElPS+ST9oTvxn4GMM4ecepilyC7gHXKJDH1ssBd4CD2MIz7IyJ4HhHoWyZIadv0c26TJwHbgInKf55iLNhZnZL8CAb8An4AOwGkN4A/AfKl8uP6zIYRkAAAAASUVORK5CYII="},function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABV0RVh0Q3JlYXRpb24gVGltZQAyNC82LzEzoCj+TwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAANwSURBVEiJpZVdaFxFFMd/s013ZoO1QowiNOmDi58Ui6JQ6YMRabRWLdViFdGoiCBCHixYkVKKD36g6FMpKkhFRYwgEivaSm2hNuBTqijEKIiNH7XiRwmZ/2w1x4ed3d5udzdS/3C5d87M/OacMzPnOjMbB1YBtzrnDlFQlDxwLbAMmAUmKiH8wkIys3Gra87MrgeYi9FF6bEo/REla3nejtL53ZjOzHqBD4AhQMCdSqkEvNdl3hFgVSWEH9t1lpxzc8A6YBwIwLvB+8XAs12gA8DLHT1tfJhZGXgTuAOYB0aU0oXAti7waiWE707ztEl3rgZsyuAS8Hrw/iiwxZ1cu1VXtzOWig2lVFZKzwM7s2lH8H7esEey960KC0IxPHBAKb0FvJCtzwXv+4F7He5EJ5c7Q+tRng18rJQ+BZ7KPduD9ysM2whEbAFolAaitDdK92fbAeBzYFQpvQM8ke2PB+9vBG5xzu3P436L0sVR2hel9U3fojQJXAFMUj+r17Us/FPw/ipgR27vSrXaZjNbDUxhDON4kXrOr6yEcLgHuOSU4E8/9PNK6eHg/QPAq8B9vlz2Sul74JzCwShl1uES8Ez3DFECXlFKFwD3ACeATcH7y0ul0u7CuGngw2YrSl9FaTJKvs1dLz4vmdltZlbL9WKfUhqK0mdROq/B68nvWWBJJYQUpR8cbtDab/GoUloavL8ZeB8Y8uXyYmCtc+6vYmhQLxDLc6kb6wBsaEQpPQSsBY4Dq4E9ZtbXCv0E6AVuAp7Oi3SQA9iolADWAL8D1wD7zay/OSxKfVH6M0pfRKmcz97XHfKqKD3YmGtmK8zsWM7xtJktK4JH86TXorQow0eiNBaliSjtjtLWKA3k8TdE6XiU1pnZRWY2k8FTTWiu9m9k8J4oVdsFH6UQpW1RqkVpJkqD2eOqmX1pZhOuZcIiYDuwJZv2Ur+OP1OvCSuADUAfcBC4qxLCTNust/GmCmwG1gPF/9HfGbYTGKuE0K4cdldOyZHCJq35L/NK3Tp7KxUD/imYav8beqbqKTby/b0UqAKDwFLqm9LQo1EaBn4FvgWmzGw6R9SUy7ANwFZg5Rk4dgzYBTxZCaEGJ8O/vQ7s+Nfspn7gbuDcUzzN3q4EhoHLgCrGchxnAUsKi88CEThKPfxvgEPAR5UQUoP1L3gqGOfjzq/dAAAAAElFTkSuQmCC"},function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABV0RVh0Q3JlYXRpb24gVGltZQAyNC82LzEzoCj+TwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAHHSURBVDiNpZS/jw1RGIafc42YKzfZkF3byG3WCrJkCQXbXKVCQSJKnZ6GkOUPUGgUaqpV0miFgojsxo/EyhU2CEJYwX7vJstR7Cc5d9wxY73J5DznvOd7z5eZk4EaMmmvSS9Miia9NmlLnbpQI7gNTAPrgWPAIWCpmedH6hzwt+DMpDve8ayvjZm0aNJAVX2jwp8EJpxnAJp5/hiYB/avONyk3cDZZKmb8Cywpyo8M2kMGOzjXQJWJfNPCT8DtvULjDEOA6eACxlwBdjZu4N+n/pLgXeUNLwOOAHMNYCNf9j979CBhL8CGwodr44xDoYQngKPgE4DGCrpoKjDJm11/g60Cv4UcM75HjBadVuKGvdxCcgK3hug7fwZaP1r+JyPA4AK3ibgrfMQ8D4DFoC1NYKfA3eXMeQQvxX848Aa533ArYYX1dHVZp7/XMbYAj6kZgjhVQihG2McBzYD1zPgtE969gJn6L3/iwm3gZclTXSBo8DN0jZNOuj/lN/PxcR7YtJkabGr9IM28/wGcDlZGvHgHBgF7q843HUSeOi8a8EsAB3gB3C7KrxSJo2YNO+v5rxJD0y69t/ByQEdk975AR9N2l6n7hdmY8EeIeDPvgAAAABJRU5ErkJggg=="},function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABV0RVh0Q3JlYXRpb24gVGltZQAyNC82LzEzoCj+TwAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAAK2SURBVDiNnZVJiJRHFMd/79P01z2JGsG5jJKYixdRT2IUwQURFEG8CMktRCLmKiIe9JJx9OaCoLhcBPVkiAu4keQgJppACAojaEBQFPfRuNSrttu/h66RcrTb0Xf56q2/9+orqpB0SdI1SZPoIMH9u+B+M7g33OPZEPzTTvGDUgAGTATOSZrSpvg8YA8wFlgu1IPx43AASOpOU0jSA0kzhhTvDu63g7uC+6FkWxHcLw0LkEEuJMhjSbMzwC+puIL76mT7MukT3le7ADCze8BC4E9gNHBa0vzg/i2wNIu/mhq6DgRg5rAAwX2Mx2gvGo1lwO9ADThRViovgb+y+PsAXbWaEmxyu8KSxgEU7vFzYAAYaDaat2O9/itwDKiY2f6yUtmZQQYGCxh2H3jnFkmaC9yQNKsQmkrrJIGBXqrXY7wAHAY+MbN9ZaWyN032umOhJ8D4NgNcBEYCSwrgizdcLVRvjPV/gINAYWa7q2V5BJiTRT6ntZV558slzTSzh8B5YHpB66e+PSba6DH2A7uSaWu1LG8F9zLp9dRlLquAb9L6MtBTAJU2YwL0eozXgS1J76uW5ZrM3xgS/wiopnUTWqdogM7S5zHeBfqS/pOkzcAz4P8hsaOA/rT+CrhZADfeAwDY5DE+AdYlfW21LAvgUB5kZguAHZJqwGzgDwvuo4F/0zS5dAHdr5MxhKZVy3IOsD2Z9wErzayZJ0paAJwBprVtObh/Ftz/y64JBfdFqcAPkprpajkgacTQfEk9nTelBfk6uDcywPcA7nFcs9lcn0GOSup0WDpCNmSAbcm2zD3ekbRUUj1BTkrq+hhAEdxPJ0B/CF4Ej0eC+88AkhZLep4gv0ka9TGQ7uB+LUGupO/CQb+k+ZKeJsipPNc+ADIRWAGMAS7WqtU9uT89VMeBv81s8aD9FUjM5CrNJMFpAAAAAElFTkSuQmCC"},function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InRyYW5zcGFyZW50IiB4Mj0iMCIgeTI9IjEiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ib25lIiB4MT0iMSIgeDI9IjAiIHkyPSIxIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4wOCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0idHdvIiB4MT0iMSIgeDI9IjAiIHkxPSIxIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4wOCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJ0aHJlZSIgeDI9IjAiIHkxPSIxIj4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJmb3VyIiB4Mj0iMSIgeTE9IjEiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImZpdmUiIHgyPSIxIiB5Mj0iMSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPG1hc2sgaWQ9ImdyZC1tc2siPgogICAgICA8ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj4KICAgICAgICA8cGF0aCBzdHJva2U9InVybCgjdHJhbnNwYXJlbnQpIiBkPSJNODYuNi01MGExMDAgMTAwIDAgMCAxIDAgMTAwIgogICAgICAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSJ1cmwoI29uZSkiIGQ9Ik04Ni42IDUwQTEwMCAxMDAgMCAwIDEgMCAxMDAiCiAgICAgICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz4KICAgICAgICA8cGF0aCBzdHJva2U9InVybCgjdHdvKSIgZD0iTTAgMTAwYTEwMCAxMDAgMCAwIDEtODYuNi01MCIKICAgICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPgogICAgICAgIDxwYXRoIHN0cm9rZT0idXJsKCN0aHJlZSkiIGQ9Ik0tODYuNiA1MGExMDAgMTAwIDAgMCAxIDAtMTAwIgogICAgICAgICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+CiAgICAgICAgPHBhdGggc3Ryb2tlPSJ1cmwoI2ZvdXIpIiBkPSJNLTg2LjYtNTBBMTAwIDEwMCAwIDAgMSAwLTEwMCIKICAgICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPgogICAgICAgIDxwYXRoIHN0cm9rZT0idXJsKCNmaXZlKSIgZD0iTTAtMTAwYTEwMCAxMDAgMCAwIDEgODYuNiA1MCIKICAgICAgICAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPgogICAgICA8L2c+CiAgICA8L21hc2s+CiAgPC9kZWZzPgogIDxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHg9Ii0yMCIgeT0iLTIwIiBtYXNrPSJ1cmwoI2dyZC1tc2spIiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPgo="},function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZGllbnQiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj4KICAgICAgICA8c3RvcCBvZmZzZXQ9IjY2LjY2JSIgc3RvcC1jb2xvcj0id2hpdGUiIC8+CiAgICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSJ3aGl0ZSIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPHBhdGggZmlsbD0idXJsKCNncmFkaWVudCkiCiAgICAgICAgICBkPSJNNzkgMzA4YzE0LjI1LTYuNSA1NC4yNS0xOS43NSA3MS0yOSA5LTMuMjUgMjUtMjEgMjUtMjFzMy43NS0xMyAzLTIyYy0xLjc1LTYuNzUtMTUtNDMtMTUtNDMtMi41IDMtNC43NDEgMy4yNTktNyAxLTMuMjUtNy41LTIwLjUtNDQuNS0xNi01NyAxLjI1LTcuNSAxMC02IDEwLTYtMTEuMjUtMzMuNzUtOC02Ny04LTY3cy4wNzMtNy4zNDYgNi0xNWMtMy40OC42MzctOSA0LTkgNCAyLjU2My0xMS43MjcgMTUtMjEgMTUtMjEgLjE0OC0uMzEyLTEuMzIxLTEuNDU0LTEwIDEgMS41LTIuNzggMTYuNjc1LTguNjU0IDMwLTExIDMuNzg3LTkuMzYxIDEyLjc4Mi0xNy4zOTggMjItMjItMi4zNjUgMy4xMzMtMyA2LTMgNnMxNS42NDctOC4wODggNDEtNmMtMTkuNzUgMi0yNCA2LTI0IDZzNzQuNS0xMC43NSAxMDQgMzdjNy41IDkuNSAyNC43NSA1NS43NSAxMCA4OSAzLjc1LTEuNSA0LjUtNC41IDkgMSAuMjUgMTQuNzUtMTEuNSA2My0xOSA2Mi0yLjc1IDEtNC0zLTQtMy0xMC43NSAyOS41LTE0IDM4LTE0IDM4LTIgNC4yNS0zLjc1IDE4LjUtMSAyMiAxLjI1IDQuNSAyMyAyMyAyMyAyM2wxMjcgNTNjMzcgMzUgMjMgMTM1IDIzIDEzNWwtNDY4IDFzLTMtOTYuNzUgMTQtMTIwYzUuMjUtNi4yNSAyMS43NS0xOS43NSA2NS0zNnoiLz4KPC9zdmc+Cg=="},function(e){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgPHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6Ii8+CiAgICAgICAgPHBhdGggZD0iTTY4LjU0MiA0MC45MjRjLTMuNzM3LTUuMTkxLTEyLjcxMS00LjMwOC0xMi43MTEtNC4zMDgtMi4yMjMgMy4wMTQtNS4xMjYgMjQuNTg2LTMuNjI0IDI4LjcxOCAxLjQwMSAxLjMwMSAxMS42MTEgMS42MjkgMTMuMzgtMS40MzYgMS4yMjYtOC44MDQgMi45NTUtMjIuOTc1IDIuOTU1LTIyLjk3NXoiLz4KICAgICAgICA8cGF0aCBkPSJNNjguNjQ3IDU4LjZjLjcyOS00Ljc1MyAyLjM4LTkuNTYxIDIuMzgtMTQuODA0IDAtMjEuNDEyLTE0LjExNS0zOC43Ny0zMS41MjgtMzguNzctMTcuNDEyIDAtMzEuNTI3IDE3LjM1OC0zMS41MjcgMzguNzcgMCA0LjU0MS41MTUgOC45MzYgMS44MDIgMTIuOTUgMS42OTggNS4yOTUtNS41NDIgNi45OTEtNi42MTYgMi4wNzMtLjc0OC0zLjQyNS0zLjE1OC03LjAzMi0zLjE1OC0xMC43MTYgMC0yNi41NjcgMTcuNjg1LTQ4LjEwMyAzOS41LTQ4LjEwMyAyMS44MTYgMCAzOS41IDIxLjUzNiAzOS41IDQ4LjEwMyAwIC43MTgtMi44OTkgOS42OTMtMy4yOTIgMTEuNDA4LS43NTQgMy4yOTMtNy43NTEgMy41ODktNy4wNjEtLjkxMnoiLz4KICAgICAgICA8cGF0aCBkPSJNNS4wODQgNTEuMzg1Yy0uODA0LTMuNzgyLjU2OS03LjMzNSAzLjEzNC03LjkyMSAyLjYzNi0uNjAzIDUuNDg1IDIuMTUgNi4yODkgNi4xMzIuNzk3IDMuOTQ4LS43NTIgNy40NTctMy4zODggNy44NTktMi41NjYuMzkxLTUuMjM3LTIuMzE4LTYuMDM0LTYuMDd6Ii8+CiAgICAgICAgPHBhdGggZD0iTTczLjkxOCA1MS4zODVjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3oiLz4KICAgICAgICA8cGF0aCBkPSJNNzEuODggNTkuNjczYy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz4KICAgICAgICA8cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz4KICAgIDwvZz4KPC9zdmc+Cg=="},function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg=="},function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC"},function(e){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwcHgiIGhlaWdodD0iOTBweCIgdmlld0JveD0iMCAwIDE1MCA5MCIgdmVyc2lvbj0iMS4xIj4KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggNDYuMiAoNDQ0OTYpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPmF1ZGlvIG9mZjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPgogICAgICAgIDxwYXRoIGQ9Ik02NywxMiBMNi40NDgzNjkxNCw3Mi41NTE2MzA5IEwzLjc4NjUzMjM1ZS0yOSwzMSBMMy43ODY1MzIzNWUtMjksMTggTDI2LDAgTDY3LDEyIFogTTcwLDE5IEw3Niw2NiBMNDcsODQgTDExLjQ5Nzg2MzMsNzcuNTAyMTM2NyBMNzAsMTkgWiIgaWQ9InBhdGgtMSIvPgogICAgPC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxNTAiIGhlaWdodD0iOTAiIGZpbGw9ImJsYWNrIiByeD0iMzUiIHJ5PSI0NSIgb3BhY2l0eT0iMC41Ii8+CiAgICAKICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJhdWRpby1vZmYiPgogICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNi4wMDAwMDAsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iR3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPSIjcGF0aC0xIi8+CiAgICAgICAgICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICAgICAgICAgIDxnIGlkPSJDb21iaW5lZC1TaGFwZSIvPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zOS4yNDg2MTczLDUxLjMxMTkyMzQgQzM5Ljk0NjMyNDQsNjEuNjgxODE2NSA0Mi4wMzM1NjgzLDY5LjIwODkzNTYgNDQuNSw2OS4yMDg5MzU2IEM0Ny41Mzc1NjYxLDY5LjIwODkzNTYgNTAsNTcuNzkyMTk2OCA1MCw0My43MDg5MzU2IEM1MCwyOS42MjU2NzQ1IDQ3LjUzNzU2NjEsMTguMjA4OTM1NiA0NC41LDE4LjIwODkzNTYgQzQxLjk4OTY2NiwxOC4yMDg5MzU2IDM5Ljg3MjEzOTEsMjYuMDA2NDAzNCAzOS4yMTI2ODY1LDM2LjY2MjM3MjQgQzQxLjUwNDg5MSwzOC4yOTM3MDQ1IDQzLDQwLjk3MjI1MTUgNDMsNDQgQzQzLDQ3LjAxMTg5OTMgNDEuNTIwNTAyNyw0OS42NzgyNDM2IDM5LjI0ODYxNzMsNTEuMzExOTIzNCBaIE0yMC45ODUwMTc4LDMyLjIyNDMxOCBMMzYuNzMxMjA4OSwxNS4zNDcxNDU0IEwzNi43MzEyMTExLDE1LjM0NzE0NzUgQzM5LjQ5MDQ3NDgsMTIuMzg5Njk3NyA0NC4xMTUzNzExLDEyLjIwMjA4OTkgNDcuMTA1MTExMywxNC45MjYzMzI2IEM0Ny4xMDUxMTEzLDE0LjkyNjMzMjYgNDcuMTA1MTExMywxNC45MjYzMzI2IDQ3LjEwNTExMTMsMTQuOTI2MzMyNiBDNTEuNzAxNzAzOCwxOS4xMTQ3MzQ2IDU0LDI5LjIwODkzNTYgNTQsNDUuMjA4OTM1NiBDNTQsNTkuNzM2MzExOSA1MS42NTY1OTczLDY5LjA4OTA5OTUgNDYuOTY5NzkxOCw3My4yNjcyOTg2IEw0Ni45Njk3OTE4LDczLjI2NzI5ODYgQzQ0LjAxNjU2NzgsNzUuOTAwMDQyNCAzOS41MDEzMzIzLDc1LjY5MjI3NzQgMzYuODAyMzYyOSw3Mi43OTk0NTI2IEwyMC40MDQ5OTgyLDU1LjIyNDMxOCBMMTIsNTUuMjI0MzE4IEM5LjIzODU3NjI1LDU1LjIyNDMxOCA3LDUyLjk4NTc0MTggNyw1MC4yMjQzMTggTDcsMzcuMjI0MzE4IEM3LDM0LjQ2Mjg5NDMgOS4yMzg1NzYyNSwzMi4yMjQzMTggMTIsMzIuMjI0MzE4IEwxMiwzMi4yMjQzMTggTDIwLjk4NTAxNzgsMzIuMjI0MzE4IFoiIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0ZGRkZGRiIgbWFzaz0idXJsKCNtYXNrLTIpIi8+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNzAuNSwxMy41IEw4Ljk5Nzk2NzUxLDc1LjAwMjAzMjUiIGlkPSJMaW5lLTIiIHN0cm9rZT0iI0ZGRkZGRiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iOTdweCIgaGVpZ2h0PSI5MHB4IiB2aWV3Qm94PSIwIDAgOTcgOTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQ2LjIgKDQ0NDk2KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICAgIDx0aXRsZT52aWRlbyBvZmY8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8cGF0aCBkPSJNNzAsMTIgTDkuNDQ4MzY5MTQsNzIuNTUxNjMwOSBMMCw2MiBMMywxOCBMMjksMCBMNzAsMTIgWiBNNzgsMTQgTDc5LDY2IEw1MCw4NCBMMTQuNDk3ODYzMyw3Ny41MDIxMzY3IEw3OCwxNCBaIiBpZD0icGF0aC0xIj48L3BhdGg+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0idmlkZW8tb2ZmIj4KICAgICAgICAgICAgPGcgaWQ9Ikdyb3VwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgMy4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxtYXNrIGlkPSJtYXNrLTIiIGZpbGw9IndoaXRlIj4KICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgPC9tYXNrPgogICAgICAgICAgICAgICAgPGcgaWQ9IkNvbWJpbmVkLVNoYXBlIj48L2c+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOS4xMDk3NTI3LDIwLjk2ODE2MDUgTDQ4LjEwMTQxMTgsMjAuOTY4MTYwNSBDNTAuODYyODM1NSwyMC45NjgxNjA1IDUzLjEwMTQxMTgsMjMuMjA2NzM2NyA1My4xMDE0MTE4LDI1Ljk2ODE2MDUgTDUzLjEwMTQxMTgsNTguMTc5MzgwNSBDNTMuMTAxNDExOCw2MC45NDA4MDQzIDUwLjg2MjgzNTUsNjMuMTc5MzgwNSA0OC4xMDE0MTE4LDYzLjE3OTM4MDUgTDkuMTA5NzUyNyw2My4xNzkzODA1IEM2LjM0ODMyODk1LDYzLjE3OTM4MDUgNC4xMDk3NTI3LDYwLjk0MDgwNDMgNC4xMDk3NTI3LDU4LjE3OTM4MDUgTDQuMTA5NzUyNywyNS45NjgxNjA1IEw0LjEwOTc1MjcsMjUuOTY4MTYwNSBDNC4xMDk3NTI3LDIzLjIwNjczNjcgNi4zNDgzMjg5NSwyMC45NjgxNjA1IDkuMTA5NzUyNywyMC45NjgxNjA1IFogTTU2LjE5MDgwNzcsMzQuMzYyMzA4MyBDNTYuMTkwODA3NywzNC4wMTc0OSA2MS42NjIxMzk3LDMxLjIwMzE0MDEgNzIuNjA0ODAzOCwyNS45MTkyNTg4IEM3My4wMTE2MTY2LDI1LjcyMjgyMTMgNzMuNDU3NTQwNSwyNS42MjA3OTU2IDczLjkwOTI5NzQsMjUuNjIwNzk1NiBDNzUuNTY2MTU1MywyNS42MjA3OTU2IDc2LjkwOTMwNDEsMjYuOTYzOTQ0MyA3Ni45MDkzMDQxLDI4LjYyMDgwMjIgTDc2LjkwOTI5NzQsMjguNjIwODAyMiBMNzYuOTA5Mjk3NCw1NS40NTU2ODU2IEM3Ni45MDkyOTc0LDU1LjkwNzU4NTQgNzYuODA3MjA3Miw1Ni4zNTM2NDY3IDc2LjYxMDY1MDMsNTYuNzYwNTYwNCBDNzUuODg5OTg3OCw1OC4yNTI0ODE2IDc0LjA5NjMzNDQsNTguODc3NzEwMyA3Mi42MDQ0MTMyLDU4LjE1NzA0NzkgTDcyLjYwNDQxNzMsNTguMTU3MDM5NSBDNjEuNjYyMDEwOSw1Mi44NzEzODQxIDU2LjE5MDgwNzcsNTAuMDU2MTQ5MiA1Ni4xOTA4MDc3LDQ5LjcxMTMzNDkgTDU2LjE5MDgwNzcsMzQuMzYyMzA4MyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiIGZpbGw9IiNGRkZGRkYiIG1hc2s9InVybCgjbWFzay0yKSI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik04MS41LDE2LjUgTDE5Ljk5Nzk2NzUsNzguMDAyMDMyNSIgaWQ9IkxpbmUtMiIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PC9wYXRoPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},function(e,t,r){var n,i,o,c={},u=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),a=(o={},function(e,t){if("function"==typeof e)return e();if(void 0===o[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}o[e]=n}return o[e]}),s=null,d=0,l=[],f=r(334);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=c[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(y(r.parts[o],t))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(y(r.parts[o],t));c[r.id]={id:r.id,refs:1,parts:a}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function v(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=l[l.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),l.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertAt.before,n);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);0<=t&&l.splice(t,1)}function m(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return r.nc}();n&&(e.attrs.nonce=n)}return b(t,e.attrs),v(e,t),t}function b(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function y(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=o}if(e.singleton){var a=d++;n=s||(s=m(e)),r=C.bind(null,n,a,!1),i=C.bind(null,n,a,!0)}else i=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",b(t,e.attrs),v(e,t),t}(e),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){g(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=u()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=h(e,a);return p(s,a),function(e){for(var t=[],n=0;n<s.length;n++){var r=s[n];(i=c[r.id]).refs--,t.push(i)}e&&p(h(e,a),a);for(n=0;n<t.length;n++){var i;if(0===(i=t[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete c[i.id]}}}};var E,_=(E=[],function(e,t){return E[e]=t,E.filter(Boolean).join("\n")});function C(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,o=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?e:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(e){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(80),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(80);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(80);e.exports=function(e){return-1<r(this.__data__,e)}},function(e,t,n){var i=n(80);e.exports=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}},function(e,t,n){var r=n(79);e.exports=function(){this.__data__=new r,this.size=0}},function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e){e.exports=function(e){return this.__data__.get(e)}},function(e){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var i=n(79),o=n(113),a=n(114);e.exports=function(e,t){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!o||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(13),i=n(348),o=n(8),a=n(174),s=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,d=c.toString,l=u.hasOwnProperty,f=RegExp("^"+d.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:s).test(a(e))}},function(e,t,n){var r=n(42),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{var r=!(e[s]=void 0)}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},function(e,t,n){var r,i=n(349),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(14)["__core-js_shared__"];e.exports=r},function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(352),i=n(79),o=n(113);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(353),i=n(354),o=n(355),a=n(356),s=n(357);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=a,c.prototype.set=s,e.exports=c},function(e,t,n){var r=n(81);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(81),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(81),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(81);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(82);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(82);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(82);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var i=n(82);e.exports=function(e,t){var n=i(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}},function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(30),i=n(19);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e){e.exports=function(){return!1}},function(e,t,n){var r=n(30),i=n(116),o=n(19),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(178)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(43),i=n(67);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var i=n(8),o=n(66),a=n(370),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!i(e))return a(e);var t=o(e),n=[];for(var r in e)("constructor"!=r||!t&&s.call(e,r))&&n.push(r);return n}},function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(43),i=n(119);e.exports=function(e,t){return r(e,i(e),t)}},function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t,n){var r=n(43),i=n(181);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(41)(n(14),"DataView");e.exports=r},function(e,t,n){var r=n(41)(n(14),"Promise");e.exports=r},function(e){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},function(e,t,n){var i=n(122),o=n(378),a=n(379),s=n(380),c=n(188);e.exports=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return i(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return a(e);case"[object Set]":return new r;case"[object Symbol]":return s(e)}}},function(e,t,n){var r=n(122);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(42),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(382),i=n(65),o=n(117),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(44),i=n(19);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(384),i=n(65),o=n(117),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(44),i=n(19);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},function(s,e,c){"use strict";(function(t){var r=c(20),i=c(192),o=c(387),n=c(123);function a(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var e=a(n);e.Axios=o,e.create=function(e){return a(r.merge(n,e))},e.Cancel=c(196),e.CancelToken=c(401),e.isCancel=c(195),e.all=function(e){return t.all(e)},e.spread=c(402),s.exports=e,s.exports.default=e}).call(this,c(1))},function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},function(n,e,r){"use strict";(function(i){var o=r(123),a=r(20),t=r(396),s=r(397);function e(e){this.defaults=e,this.interceptors={request:new t,response:new t}}e.prototype.request=function(e,t){"string"==typeof e&&(e=a.merge({url:arguments[0]},t)),(e=a.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var n=[s,void 0],r=i.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},a.forEach(["delete","get","head","options"],function(n){e.prototype[n]=function(e,t){return this.request(a.merge(t||{},{method:n,url:e}))}}),a.forEach(["post","put","patch"],function(r){e.prototype[r]=function(e,t,n){return this.request(a.merge(n||{},{method:r,url:e,data:t}))}}),n.exports=e}).call(this,r(1))},function(e,t,n){"use strict";var i=n(20);e.exports=function(n,r){i.forEach(n,function(e,t){t!==r&&t.toUpperCase()===r.toUpperCase()&&(n[r]=e,delete n[t])})}},function(e,t,n){"use strict";var i=n(194);e.exports=function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(i("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e}},function(e,t,n){"use strict";var o=n(20);function a(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var r;if(n)r=n(t);else if(o.isURLSearchParams(t))r=t.toString();else{var i=[];o.forEach(t,function(e,t){null!=e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),i.push(a(t)+"="+a(e))}))}),r=i.join("&")}return r&&(e+=(-1===e.indexOf("?")?"?":"&")+r),e}},function(e,t,n){"use strict";var o=n(20),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,r,i={};return e&&o.forEach(e.split("\n"),function(e){if(r=e.indexOf(":"),t=o.trim(e.substr(0,r)).toLowerCase(),n=o.trim(e.substr(r+1)),t){if(i[t]&&0<=a.indexOf(t))return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([n]):i[t]?i[t]+", "+n:n}}),i}},function(e,t,n){"use strict";var r,i,o,a=n(20);function s(e){var t=e;return i&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}e.exports=a.isStandardBrowserEnv()?(i=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),r=s(window.location.href),function(e){var t=a.isString(e)?s(e):e;return t.protocol===r.protocol&&t.host===r.host}):function(){return!0}},function(e){"use strict";function s(){this.message="String contains an invalid character"}(s.prototype=new Error).code=5,s.prototype.name="InvalidCharacterError",e.exports=function(e){for(var t,n,r=String(e),i="",o=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if(255<(n=r.charCodeAt(o+=.75)))throw new s;t=t<<8|n}return i}},function(e,t,n){"use strict";var s=n(20);e.exports=s.isStandardBrowserEnv()?{write:function(e,t,n,r,i,o){var a=[];a.push(e+"="+encodeURIComponent(t)),s.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),s.isString(r)&&a.push("path="+r),s.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(20);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},e.exports=i},function(t,e,u){"use strict";(function(n){var e=u(20),r=u(398),i=u(195),o=u(123),a=u(399),s=u(400);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!a(t.url)&&(t.url=s(t.baseURL,t.url)),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=e.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),e.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return c(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),n.reject(e)})}}).call(this,u(1))},function(e,t,n){"use strict";var r=n(20);e.exports=function(t,n,e){return r.forEach(e,function(e){t=e(t,n)}),t}},function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(t,e,n){"use strict";(function(r){var i=n(196);function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new r(function(e){t=e});var n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.source=function(){var t;return{token:new e(function(e){t=e}),cancel:t}},t.exports=e}).call(this,n(1))},function(e){"use strict";e.exports=function(t){return function(e){return t.apply(null,e)}}},function(e,t,n){var U=n(404),F=n(69),B=Array.prototype.push;function V(n,e){return 2==e?function(e,t){return n(e,t)}:function(e){return n(e)}}function z(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function W(r,i){return function(){var e=arguments.length;if(e){for(var t=Array(e);e--;)t[e]=arguments[e];var n=t[0]=i.apply(void 0,t);return r.apply(void 0,t),n}}}e.exports=function c(n,e,t,r){var u="function"==typeof e,i=e===Object(e);if(i&&(r=t,t=e,e=void 0),null==t)throw new TypeError;r||(r={});var s={cap:!("cap"in r)||r.cap,curry:!("curry"in r)||r.curry,fixed:!("fixed"in r)||r.fixed,immutable:!("immutable"in r)||r.immutable,rearg:!("rearg"in r)||r.rearg},o=u?t:F,d="curry"in r&&r.curry,a="fixed"in r&&r.fixed,l="rearg"in r&&r.rearg,f=u?t.runInContext():void 0,p=u?t:{ary:n.ary,assign:n.assign,clone:n.clone,curry:n.curry,forEach:n.forEach,isArray:n.isArray,isError:n.isError,isFunction:n.isFunction,isWeakMap:n.isWeakMap,iteratee:n.iteratee,keys:n.keys,rearg:n.rearg,toInteger:n.toInteger,toPath:n.toPath},h=p.ary,v=p.assign,g=p.clone,m=p.curry,b=p.forEach,y=p.isArray,E=p.isError,_=p.isFunction,C=p.isWeakMap,T=p.keys,S=p.rearg,w=p.toInteger,O=p.toPath,I=T(U.aryMethod),A={castArray:function(n){return function(e){var t=e;return y(t)?n(z(t)):n.apply(void 0,arguments)}},iteratee:function(o){return function(e,t){var n=t,r=o(e,n),i=r.length;return s.cap&&"number"==typeof n?(n=2<n?n-2:1,i&&i<=n?r:V(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!_(n))return e(n,Object(t));var r=[];return b(T(t),function(e){_(t[e])&&r.push([e,n.prototype[e]])}),e(n,Object(t)),b(r,function(e){var t=e[1];_(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]}),n}},nthArg:function(n){return function(e){var t=e<0?1:w(e)+1;return m(n(e),t)}},rearg:function(r){return function(e,t){var n=t?t.length:0;return m(r(e,t),n)}},runInContext:function(t){return function(e){return c(n,t(e),r)}}};function x(e,t){if(s.cap){var n=U.iterateeRearg[e];if(n)return function(e,n){return M(e,function(e){var t=n.length;return function(n,e){return 2==e?function(e,t){return n.apply(void 0,arguments)}:function(e){return n.apply(void 0,arguments)}}(S(V(e,t),n),t)})}(t,n);var r=!u&&U.iterateeAry[e];if(r)return function(e,t){return M(e,function(e){return"function"==typeof e?V(e,t):e})}(t,r)}return t}function R(e,t,n){if(!s.fixed||!a&&U.skipFixed[e])return t;var r=U.methodSpread[e],i=r&&r.start;return void 0===i?h(t,n):function(o,a){return function(){for(var e=arguments.length,t=e-1,n=Array(e);e--;)n[e]=arguments[e];var r=n[a],i=n.slice(0,a);return r&&B.apply(i,r),a!=t&&B.apply(i,n.slice(a+1)),o.apply(this,i)}}(t,i)}function N(e,t,n){return s.rearg&&1<n&&(l||!U.skipRearg[e])?S(t,U.methodRearg[e]||U.aryRearg[n]):t}function k(e,t){for(var n=-1,r=(t=O(t)).length,i=r-1,o=g(Object(e)),a=o;null!=a&&++n<r;){var s=t[n],c=a[s];null==c||_(c)||E(c)||C(c)||(a[s]=g(n==i?c:Object(c))),a=a[s]}return o}function D(e,i){var o=U.aliasToReal[e]||e,a=U.remap[o]||o,s=r;return function(e){var t=u?f:p,n=u?f[a]:i,r=v(v({},s),e);return c(t,o,n,r)}}function M(r,i){return function(){var e=arguments.length;if(!e)return r();for(var t=Array(e);e--;)t[e]=arguments[e];var n=s.rearg?0:e-1;return t[n]=i(t[n]),r.apply(void 0,t)}}function P(e,t,n){var i,o=U.aliasToReal[e]||e,a=t,r=A[o];return r?a=r(t):s.immutable&&(U.mutate.array[o]?a=W(t,z):U.mutate.object[o]?a=W(t,function(t){return function(e){return t({},e)}}(t)):U.mutate.set[o]&&(a=W(t,k))),b(I,function(r){return b(U.aryMethod[r],function(e){if(o==e){var t=U.methodSpread[o],n=t&&t.afterRearg;return i=n?R(o,N(o,a,r),r):N(o,R(o,a,r),r),i=function(e,t,n){return d||s.curry&&1<n?m(t,n):t}(0,i=x(o,i),r),!1}}),!i}),i||(i=a),i==t&&(i=d?m(i,1):function(){return t.apply(this,arguments)}),i.convert=D(o,t),i.placeholder=t.placeholder=n,i}if(!i)return P(e,t,o);var L=t,j=[];return b(I,function(e){b(U.aryMethod[e],function(e){var t=L[U.remap[e]||e];t&&j.push([e,P(e,t,L)])})}),b(T(L),function(e){var t=L[e];if("function"==typeof t){for(var n=j.length;n--;)if(j[n][0]==e)return;t.convert=D(e,t),j.push([e,t])}}),b(j,function(e){L[e[0]]=e[1]}),L.convert=function(e){return L.runInContext.convert(e)(void 0)},L.placeholder=L,b(T(L),function(t){b(U.realToAlias[t]||[],function(e){L[e]=L[t]})}),L}},function(e,o){o.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},o.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},o.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},o.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},o.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},o.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},o.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},o.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},o.realToAlias=function(){var e=Object.prototype.hasOwnProperty,t=o.aliasToReal,n={};for(var r in t){var i=t[r];e.call(n,i)?n[i].push(r):n[i]=[r]}return n}(),o.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},o.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},o.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t,n){e.exports={ary:n(406),assign:n(176),clone:n(29),curry:n(427),forEach:n(115),isArray:n(10),isError:n(428),isFunction:n(13),isWeakMap:n(429),iteratee:n(430),keys:n(118),rearg:n(447),toInteger:n(91),toPath:n(450)}},function(e,t,n){var r=n(125);e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,128,void 0,void 0,void 0,void 0,t)}},function(e,t,n){var o=n(89),a=n(14);e.exports=function(t,e,n){var r=1&e,i=o(t);return function e(){return(this&&this!==a&&this instanceof e?i:t).apply(r?n:this,arguments)}}},function(e,t,n){var d=n(126),r=n(89),l=n(199),f=n(202),p=n(210),h=n(130),v=n(14);e.exports=function(a,s,c){var u=r(a);return function e(){for(var t=arguments.length,n=Array(t),r=t,i=p(e);r--;)n[r]=arguments[r];var o=t<3&&n[0]!==i&&n[t-1]!==i?[]:h(n,i);return(t-=o.length)<c?f(a,s,l,e.placeholder,void 0,n,o,void 0,void 0,c-t):d(this&&this!==v&&this instanceof e?u:a,this,n)}}},function(e){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},function(e,t,n){var i=n(127),o=n(203),a=n(411),s=n(413);e.exports=function(e){var t=a(e),n=s[t];if("function"!=typeof n||!(t in i.prototype))return!1;if(e===n)return!0;var r=o(n);return!!r&&e===r[0]}},function(e,t,n){var a=n(412),s=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=a[t],r=s.call(a,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}},function(e){e.exports={}},function(e,t,n){var r=n(127),i=n(205),o=n(128),a=n(10),s=n(19),c=n(414),u=Object.prototype.hasOwnProperty;function d(e){if(s(e)&&!a(e)&&!(e instanceof r)){if(e instanceof i)return e;if(u.call(e,"__wrapped__"))return c(e)}return new i(e)}(d.prototype=o.prototype).constructor=d,e.exports=d},function(e,t,n){var r=n(127),i=n(205),o=n(53);e.exports=function(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},function(e){var i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(1<n?"& ":"")+t[r],t=t.join(2<n?", ":" "),e.replace(i,"{\n/* [wrapped with "+t+"] */\n")}},function(e,t,n){var r=n(418),i=n(175),o=n(88),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e){e.exports=function(e){return function(){return e}}},function(e,t,n){var i=n(115),o=n(90),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(n,r){return i(a,function(e){var t="_."+e[0];r&e[1]&&!o(n,t)&&n.push(t)}),n.sort()}},function(e,t,n){var r=n(209),i=n(421),o=n(422);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},function(e){e.exports=function(e){return e!=e}},function(e){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t,n){var a=n(53),s=n(64),c=Math.min;e.exports=function(e,t){for(var n=e.length,r=c(t.length,n),i=a(e);r--;){var o=t[r];e[r]=s(o,n)?i[o]:void 0}return e}},function(e,t,n){var f=n(126),r=n(89),p=n(14);e.exports=function(s,e,c,u){var d=1&e,l=r(s);return function e(){for(var t=-1,n=arguments.length,r=-1,i=u.length,o=Array(i+n),a=this&&this!==p&&this instanceof e?l:s;++r<i;)o[r]=u[r];for(;n--;)o[r++]=arguments[++t];return f(a,d?c:this,o)}}},function(e,t,n){var u=n(200),d=n(201),l=n(130),f="__lodash_placeholder__",p=Math.min;e.exports=function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=128==r&&8==n||128==r&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var s=t[3];if(s){var c=e[3];e[3]=c?u(c,s,t[4]):s,e[4]=c?l(e[3],f):t[4]}return(s=t[5])&&(c=e[5],e[5]=c?d(c,s,t[6]):s,e[6]=c?l(e[5],f):t[6]),(s=t[7])&&(e[7]=s),128&r&&(e[8]=null==e[8]?t[8]:p(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}},function(e,t,n){var r=n(211);e.exports=function(e){return e?(e=r(e))!==1/0&&e!==-1/0?e==e?e:0:17976931348623157e292*(e<0?-1:1):0===e?e:0}},function(e,t,n){var i=n(125),o=8;function a(e,t,n){var r=i(e,o,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=a.placeholder,r}a.placeholder={},e.exports=a},function(e,t,n){var r=n(30),i=n(19),o=n(131);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}},function(e,t,n){var r=n(44),i=n(19);e.exports=function(e){return i(e)&&"[object WeakMap]"==r(e)}},function(e,t,n){var r=n(77),i=n(33);e.exports=function(e){return i("function"==typeof e?e:r(e,1))}},function(e,t,n){var r=n(432),i=n(438),o=n(216);e.exports=function(t){var n=i(t);return 1==n.length&&n[0][2]?o(n[0][0],n[0][1]):function(e){return e===t||r(e,t,n)}}},function(e,t,n){var p=n(78),h=n(132);e.exports=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],u=e[c],d=s[1];if(a&&s[2]){if(void 0===u&&!(c in e))return!1}else{var l=new p;if(r)var f=r(u,d,c,e,t,l);if(!(void 0===f?h(d,u,3,r,l):f))return!1}}return!0}},function(e,t,n){var m=n(78),b=n(212),y=n(436),E=n(437),_=n(44),C=n(10),T=n(63),S=n(85),w="[object Arguments]",O="[object Array]",I="[object Object]",A=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,i,o){var a=C(e),s=C(t),c=a?O:_(e),u=s?O:_(t),d=(c=c==w?I:c)==I,l=(u=u==w?I:u)==I,f=c==u;if(f&&T(e)){if(!T(t))return!1;d=!(a=!0)}if(f&&!d)return o||(o=new m),a||S(e)?b(e,t,n,r,i,o):y(e,t,c,n,r,i,o);if(!(1&n)){var p=d&&A.call(e,"__wrapped__"),h=l&&A.call(t,"__wrapped__");if(p||h){var v=p?e.value():e,g=h?t.value():t;return o||(o=new m),i(v,g,n,r,o)}}return f&&(o||(o=new m),E(e,t,n,r,i,o))}},function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(42),l=n(187),f=n(52),p=n(212),h=n(214),v=n(94),i=r?r.prototype:void 0,g=i?i.valueOf:void 0;e.exports=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new l(e),new l(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return f(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=h;case"[object Set]":var c=1&r;if(s||(s=v),e.size!=t.size&&!c)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var d=p(s(e),s(t),r,i,o,a);return a.delete(e),d;case"[object Symbol]":if(g)return g.call(e)==g.call(t)}return!1}},function(e,t,n){var y=n(182),E=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,r,i,o){var a=1&n,s=y(e),c=s.length;if(c!=y(t).length&&!a)return!1;for(var u=c;u--;){var d=s[u];if(!(a?d in t:E.call(t,d)))return!1}var l=o.get(e);if(l&&o.get(t))return l==t;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<c;){var h=e[d=s[u]],v=t[d];if(r)var g=a?r(v,h,d,t,e,o):r(h,v,d,e,t,o);if(!(void 0===g?h===v||i(h,v,n,r,o):g)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var m=e.constructor,b=t.constructor;m!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(e),o.delete(t),f}},function(e,t,n){var o=n(215),a=n(31);e.exports=function(e){for(var t=a(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,o(i)]}return t}},function(e,t,n){var i=n(132),o=n(54),a=n(218),s=n(133),c=n(215),u=n(216),d=n(46);e.exports=function(n,r){return s(n)&&c(r)?u(d(n),r):function(e){var t=o(e,n);return void 0===t&&t===r?a(e,n):i(r,t,3)}}},function(e,t,n){var r=n(134);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},function(e,t,n){var r=n(42),i=n(34),o=n(10),a=n(70),s=1/0,c=r?r.prototype:void 0,u=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var s=n(55),c=n(62),u=n(10),d=n(64),l=n(116),f=n(46);e.exports=function(e,t,n){for(var r=-1,i=(t=s(t,e)).length,o=!1;++r<i;){var a=f(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&l(i)&&d(a,i)&&(u(e)||c(e))}},function(e,t,n){var r=n(445),i=n(446),o=n(133),a=n(46);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e){e.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(e,t,n){var r=n(95);e.exports=function(t){return function(e){return r(e,t)}}},function(e,t,n){var r=n(125),i=n(135),o=i(function(e,t){return r(e,256,void 0,void 0,void 0,t)});e.exports=o},function(e,t,n){var r=n(219);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(42),i=n(62),o=n(10),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(34),i=n(53),o=n(10),a=n(70),s=n(217),c=n(46),u=n(96);e.exports=function(e){return o(e)?r(e,c):a(e)?[e]:i(s(u(e)))}},function(e,t,n){var r=n(452),i=n(218);e.exports=function(n,e){return r(n,e,function(e,t){return i(n,t)})}},function(e,t,n){var c=n(95),u=n(453),d=n(55);e.exports=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=c(e,a);n(s,a)&&u(o,d(a,e),s)}return o}},function(e,t,n){var l=n(83),f=n(55),p=n(64),h=n(8),v=n(46);e.exports=function(e,t,n,r){if(!h(e))return e;for(var i=-1,o=(t=f(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var c=v(t[i]),u=n;if(i!=a){var d=s[c];void 0===(u=r?r(d,c,s):void 0)&&(u=h(d)?d:p(t[i+1])?[]:{})}l(s,c,u),s=s[c]}return e}},function(e,t,n){var r=n(87)("mapKeys",n(455));r.placeholder=n(69),e.exports=r},function(e,t,n){var o=n(61),a=n(97),s=n(33);e.exports=function(e,r){var i={};return r=s(r,3),a(e,function(e,t,n){o(i,r(e,t,n),e)}),i}},function(e){e.exports=function(c){return function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[c?a:++r];if(!1===t(i[s],s,i))break}return e}}},function(o,r,e){(function(n){r.log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+o.exports.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.setItem("debug",e)}catch(e){}},r.load=function(){var e;try{e=r.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},r.useColors=function(){var e=function(e){var t="debug_"+e.toLowerCase();try{return r.storage.getItem(t)}catch(e){return void 0!==n&&"env"in n?n.env[t.toUpperCase()]:void 0}}("colors");if(/^(no|off|false|disabled)$/i.test(e))return!1;if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return Boolean("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],o.exports=e(458)(r),o.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,e(68))},function(e,t,r){e.exports=function(t){function n(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return c.colors[Math.abs(n)%c.colors.length]}function c(e){var r;function s(){if(s.enabled){var i=s,e=+new Date,t=e-(r||e);i.diff=t,i.prev=r,i.curr=e,r=e;for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];o[0]=c.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var a=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(e,t){if("%%"===e)return e;a++;var n=c.formatters[t];if("function"==typeof n){var r=o[a];e=n.call(i,r),o.splice(a,1),a--}return e}),c.formatArgs.call(i,o),(i.log||c.log).apply(i,o)}}return s.namespace=e,s.enabled=c.enabled(e),s.useColors=c.useColors(),s.color=n(e),s.destroy=i,"function"==typeof c.init&&c.init(s),c.instances.push(s),s}function i(){var e=c.instances.indexOf(this);return-1!==e&&(c.instances.splice(e,1),!0)}return c.debug=c.default=c,c.coerce=function(e){return e instanceof Error?e.stack||e.message:e},c.disable=function(){c.enable("")},c.enable=function(e){var t;c.save(e),c.names=[],c.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length;for(t=0;t<r;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?c.skips.push(new RegExp("^"+e.substr(1)+"$")):c.names.push(new RegExp("^"+e+"$")));for(t=0;t<c.instances.length;t++){var i=c.instances[t];i.enabled=c.enabled(i.namespace)}},c.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=c.skips.length;t<n;t++)if(c.skips[t].test(e))return!1;for(t=0,n=c.names.length;t<n;t++)if(c.names[t].test(e))return!0;return!1},c.humanize=r(459),Object.keys(t).forEach(function(e){c[e]=t[e]}),c.instances=[],c.names=[],c.skips=[],c.formatters={},c.selectColor=n,c.enable(c.load()),c}},function(e){var r=864e5;function i(e,t,n,r){var i=1.5*n<=t;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,t){t=t||{};var n=typeof e;if("string"==n&&0<e.length)return function(e){if(100<(e=String(e)).length)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"weeks":case"week":case"w":return 6048e5*n;case"days":case"day":case"d":return n*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*n;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*n;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}(e);if("number"==n&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(r<=t)return i(e,t,r,"day");if(36e5<=t)return i(e,t,36e5,"hour");if(6e4<=t)return i(e,t,6e4,"minute");if(1e3<=t)return i(e,t,1e3,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(r<=t)return Math.round(e/r)+"d";if(36e5<=t)return Math.round(e/36e5)+"h";if(6e4<=t)return Math.round(e/6e4)+"m";if(1e3<=t)return Math.round(e/1e3)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,v,g){(function(p){var h;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(){v&&v.nodeType,p&&p.nodeType;var e="object"==typeof window&&window;e.global!==e&&e.window!==e&&e.self;var t,m=2147483647,b=36,y=1,E=26,i=38,o=700,_=72,C=128,T="-",n=/^xn--/,r=/[^\x20-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,s={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=b-y,S=Math.floor,w=String.fromCharCode;function O(e){throw new RangeError(s[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function d(e,t){var n=e.split("@"),r="";return 1<n.length&&(r=n[0]+"@",e=n[1]),r+u((e=e.replace(a,".")).split("."),t).join(".")}function I(e){for(var t,n,r=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function A(e){return u(e,function(e){var t="";return 65535<e&&(t+=w((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=w(e)}).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function R(e,t,n){var r=0;for(e=n?S(e/o):e>>1,e+=S(e/t);c*E>>1<e;r+=b)e=S(e/c);return S(r+(c+1)*e/(e+i))}function l(e){var t,n,r,i,o,a,s,c,u,d,l,f=[],p=e.length,h=0,v=C,g=_;for((n=e.lastIndexOf(T))<0&&(n=0),r=0;r<n;++r)128<=e.charCodeAt(r)&&O("not-basic"),f.push(e.charCodeAt(r));for(i=0<n?n+1:0;i<p;){for(o=h,a=1,s=b;p<=i&&O("invalid-input"),l=e.charCodeAt(i++),(b<=(c=l-48<10?l-22:l-65<26?l-65:l-97<26?l-97:b)||c>S((m-h)/a))&&O("overflow"),h+=c*a,!(c<(u=s<=g?y:g+E<=s?E:s-g));s+=b)a>S(m/(d=b-u))&&O("overflow"),a*=d;g=R(h-o,t=f.length+1,0==o),S(h/t)>m-v&&O("overflow"),v+=S(h/t),h%=t,f.splice(h++,0,v)}return A(f)}function f(e){var t,n,r,i,o,a,s,c,u,d,l,f,p,h,v,g=[];for(f=(e=I(e)).length,t=C,o=_,a=n=0;a<f;++a)(l=e[a])<128&&g.push(w(l));for(r=i=g.length,i&&g.push(T);r<f;){for(s=m,a=0;a<f;++a)t<=(l=e[a])&&l<s&&(s=l);for(s-t>S((m-n)/(p=r+1))&&O("overflow"),n+=(s-t)*p,t=s,a=0;a<f;++a)if((l=e[a])<t&&++n>m&&O("overflow"),l==t){for(c=n,u=b;!(c<(d=u<=o?y:o+E<=u?E:u-o));u+=b)v=c-d,h=b-d,g.push(w(x(d+v%h,0))),c=S(v/h);g.push(w(x(c,0))),o=R(n,p,r==i),n=0,++r}++n,++t}return g.join("")}t={version:"1.4.1",ucs2:{decode:I,encode:A},decode:l,encode:f,toASCII:function(e){return d(e,function(e){return r.test(e)?"xn--"+f(e):e})},toUnicode:function(e){return d(e,function(e){return n.test(e)?l(e.slice(4).toLowerCase()):e})}},void 0===(h=function(){return t}.call(v,g,v,p))||(p.exports=h)}()}).call(this,g(84)(e))},function(e){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(463),t.encode=t.stringify=n(464)},function(e){"use strict";e.exports=function(e,t,n,r){t=t||"&",n=n||"=";var i={};if("string"!=typeof e||0===e.length)return i;var o=/\+/g;e=e.split(t);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s,c,u=e.length;0<a&&a<u&&(u=a);for(var d=0;d<u;++d){var l,f,p,h,v=e[d].replace(o,"%20"),g=v.indexOf(n);f=0<=g?(l=v.substr(0,g),v.substr(g+1)):(l=v,""),p=decodeURIComponent(l),h=decodeURIComponent(f),s=i,c=p,Object.prototype.hasOwnProperty.call(s,c)?m(i[p])?i[p].push(h):i[p]=[i[p],h]:i[p]=h}return i};var m=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e){"use strict";function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}e.exports=function(n,r,i,e){return r=r||"&",i=i||"=",null===n&&(n=void 0),"object"==typeof n?s(t(n),function(e){var t=encodeURIComponent(o(e))+i;return a(n[e])?s(n[e],function(e){return t+encodeURIComponent(o(e))}).join(r):t+encodeURIComponent(o(n[e]))}).join(r):e?encodeURIComponent(o(e))+i+encodeURIComponent(o(n)):""};var a=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var t=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){"use strict";var i=n(8),o={for:"htmlFor",class:"className"};e.exports=function(a){a.prototype.attr=function(t,e){var n=this;if(i(t)){var r;Object.keys(t).forEach(function(e){r=o[e]||e,n.first.setAttribute(r,t[e])})}else{if(void 0===e)return this.first.getAttribute(o[t]||t);this.first.setAttribute(o[t]||t,e)}return this},a.prototype.removeAttr=function(e){var t=o[e]||e;return this.forEach(function(e){e.removeAttribute(t)}),this},a.prototype.html=function(e){return void 0!==e&&(this.first.innerHTML=e),this.first.innerHTML},a.prototype.center=function(r,i){var o;return this.forEach(function(e){o=new a(e),r=r||parseInt(o.width(),10),i=i||parseInt(o.height(),10);var t=-.5*r+"px",n=-.5*i+"px";o.css("margin",n+" 0 0 "+t).addClass("OT_centered")}),this},a._attachToOTHelpers.centerElement=function(e,t,n){return new a(e).center(t,n)};function t(e){return 0<e.offsetWidth?e.offsetWidth+"px":new a(e).css("width")}function n(e){return 0<e.offsetHeight?e.offsetHeight+"px":new a(e).css("height")}a.prototype.width=function(e){return e?(this.css("width",e),this):this.isDisplayNone()?this.makeVisibleAndYield(function(e){return t(e)})[0]:t(this.get(0))},a._attachToOTHelpers.width=function(e,t){var n=new a(e).width(t);return t?a._attachToOTHelpers:n},a.prototype.height=function(e){return e?(this.css("height",e),this):this.isDisplayNone()?this.makeVisibleAndYield(function(e){return n(e)})[0]:n(this.get(0))},a._attachToOTHelpers.height=function(e,t){var n=new a(e).height(t);return t?a._attachToOTHelpers:n}}},function(e,t,n){"use strict";var a=n(4),c=window.getComputedStyle,u={Firefox:"moz",Opera:"O",IE:"ms",Chrome:"Webkit",Safari:"Webkit"};e.exports=function(s,o){function i(e,t){if(t in e.style)return t;var n=u[a.name]+t[0].toUpperCase()+t.slice(1);return n in e.style?n:t}var n={},r={};s.prototype.show=function(){return this.forEach(function(e){var t=e.style.display;""!==t&&"none"!==t||(e.style.display=n[e]||"",delete n[e]),function(e){return"none"===c(e).getPropertyValue("display")}(e)&&(n[e]="none",e.style.display=function(e){if(r[e.ownerDocument]&&r[e.ownerDocument][e.nodeName])return r[e.ownerDocument][e.nodeName];r[e.ownerDocument]||(r[e.ownerDocument]={});var t,n=e.ownerDocument.createElement(e.nodeName);return e.ownerDocument.body.appendChild(n),t=new s(n).css("display"),r[e.ownerDocument][e.nodeName]=t,new s(n).remove(),n=null,t}(e))})},s.prototype.hide=function(){return this.forEach(function(e){"none"!==e.style.display&&(n[e]=e.style.display,e.style.display="none")})},s.prototype.css=function(t,n){if(0!==this.length)return"string"!=typeof t?this.forEach(function(e){!function(e,t){var n=e.style;for(var r in t)t.hasOwnProperty(r)&&(n[i(e,r)]=t[r])}(e,t)}):void 0!==n?this.forEach(function(e){!function(e,t,n){e.style[i(e,t)]=n}(e,t,n)}):function(e,t){var n=i(e,t),r=c(e).getPropertyValue(n);return""===r&&(r=e.style[n]),r}(this.first,t)},s.prototype.makeVisibleAndYield=function(n){var r={display:"block",visibility:"hidden"},i=[];return this.forEach(function(e){var t=o(e);t?i.push(function(e,t,n){var r,i,o=new s(e),a={};for(r in t)t.hasOwnProperty(r)&&(a[r]=e.style[r],o.css(r,t[r]));for(r in i=n(e),t)t.hasOwnProperty(r)&&o.css(r,a[r]||"");return i}(t,r,n)):i.push(void 0)}),i}}},function(e,t,n){"use strict";var o=n(468);function a(e,t){return!!t&&(o()?e.classList.contains(t):-1<e.className.indexOf(t))}e.exports=function(e){e.prototype.addClass=function(e){if(e){var t=e.trim().split(/\s+/);this.forEach(function(e){!function(e,t){if(t&&0!==t.length&&1===e.nodeType){var n=t.length,r=0;if(o())for(;r<n;++r)e.classList.add(t[r]);else if(e.className||1!==t.length){for(var i=" "+e.className+" ";r<n;++r)~i.indexOf(" "+t[r]+" ")||(i+=t[r]+" ");e.className=i.trim()}else e.className=t.join(" ")}}(e,t)})}return this},e.prototype.removeClass=function(e){if(e){var t=e.trim().split(/\s+/);this.forEach(function(e){!function(e,t){if(t&&0!==t.length&&1===e.nodeType){var n=t.length,r=0;if(o())for(;r<n;++r)e.classList.remove(t[r]);else{for(var i=(" "+e.className+" ").replace(/[\s+]/," ");r<n;++r)i=i.replace(" "+t[r]+" "," ");e.className=i.trim()}}}(e,t)})}return this},e.prototype.toggleClass=function(e){if(e){var t=e.trim().split(/\s+/);this.forEach(function(e){!function(e,t){if(t&&0!==t.length&&1===e.nodeType){var n=t.length,r=0;if(o())for(;r<n;++r)e.classList.toggle(t[r]);else{for(var i=(" "+e.className+" ").replace(/[\s+]/," ");r<n;++r)a(e,t[r])?i=i.replace(" "+t[r]+" "," "):i+=t[r]+" ";e.className=i.trim()}}}(e,t)})}return this},e.prototype.hasClass=function(t){return this.some(function(e){return a(e,t)})}}},function(e){"use strict";e.exports=function(){return"undefined"!=typeof document&&"classList"in document.createElement("a")}},function(e,t,n){"use strict";var c=n(470);e.exports=function(s){var i=0,o=0;s.prototype.observeStyleChanges=function(t,n){var r=[];return this.forEach(function(e){r.push(function(t,i,n){function o(e){switch(e){case"width":return new s(t).width();case"height":return new s(t).height();default:return new s(t).css(e)}}var a={};i.forEach(function(e){a[e]=o(e)});var e=new window.MutationObserver(function(e){var r={};e.forEach(function(e){if("style"===e.attributeName){var n=new s(t).isDisplayNone();i.forEach(function(e){if(!n||"width"!==e&&"height"!==e){var t=o(e);t!==a[e]&&(r[e]=[a[e],t],a[e]=t)}})}}),c(r)||setTimeout(function(){n.call(null,r)})});return e.observe(t,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),e}(e,t,n))}),r},s.prototype.observeNodeOrChildNodeRemoval=function(t){var n=[];return this.forEach(function(e){n.push(function(e,n){var t=new window.MutationObserver(function(e){var t=[];e.forEach(function(e){e.removedNodes.length&&(t=t.concat(Array.prototype.slice.call(e.removedNodes)))}),t.length&&setTimeout(function(){n(new s(t))})});t.observe(e,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),o++;var r=t.disconnect;return t.disconnect=function(){r.apply(t,arguments),o--},t}(e,t))}),n},s.prototype.observeSize=function(t){var n=[];return this.forEach(function(e){n.push(function(t,n){var r={width:0,height:0},e=setInterval(function(){var e=t.getBoundingClientRect();r.width===e.width&&r.height===e.height||(n(e,r),r={width:e.width,height:e.height})},200);return i++,{disconnect:function(){clearInterval(e),i--}}}(e,t))}),n},s._attachToOTHelpers.observeStyleChanges=function(e,t,n){return new s(e).observeStyleChanges(t,n)[0]},s._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(e,t){return new s(e).observeNodeOrChildNodeRemoval(t)[0]},s.__testOnly||(s.__testOnly={}),s.__testOnly.sizeObserverCount=function(){return i},s.__testOnly.nodeRemovalObserverCount=function(){return o}}},function(e,t,n){var r=n(118),i=n(44),o=n(62),a=n(10),s=n(22),c=n(63),u=n(66),d=n(85),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(s(e)&&(a(e)||"string"==typeof e||"function"==typeof e.splice||c(e)||d(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!r(e).length;for(var n in e)if(l.call(e,n))return!1;return!0}},function(e,t,n){"use strict";var r=n(227),i=new r;e.exports=function(e,t){if(void 0===t)return e;i.has(t)||i.set(t,new r);var n=i.get(t);return n.has(e)||n.set(e,e.bind(t)),n.get(e)}},function(e){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&("function"==typeof e.set&&(e.set({},1)===e&&("function"==typeof e.delete&&("function"==typeof e.has&&"one"===e.get(t)))))}},function(e,t,n){"use strict";var r,i=n(139),o=n(475),a=n(25),s=n(476),c=n(74),u=n(234),d=n(508),l=n(47).toStringTag,f=n(509),p=Array.isArray,h=Object.defineProperty,v=Object.prototype.hasOwnProperty,g=Object.getPrototypeOf;e.exports=r=function(e){var t,n=e;if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return t=f&&i&&WeakMap!==r?i(new WeakMap,g(this)):this,null!=n&&(p(n)||(n=u(n))),h(t,"__weakMapData__",c("c","$weakMap$"+s())),n&&d(n,function(e){a(e),t.set(e[0],e[1])}),t},f&&(i&&i(r,WeakMap),r.prototype=Object.create(WeakMap.prototype,{constructor:c(r)})),Object.defineProperties(r.prototype,{delete:c(function(e){return!!v.call(o(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:c(function(e){if(v.call(o(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:c(function(e){return v.call(o(e),this.__weakMapData__)}),set:c(function(e,t){return h(o(e),this.__weakMapData__,c("c",t)),this}),toString:c(function(){return"[object WeakMap]"})}),h(r.prototype,l,c("c","WeakMap"))},function(e,t,n){"use strict";var r,i,o,a,s=Object.create;n(228)()||(r=n(229)),e.exports=r?1!==r.level?s:(a={configurable:(o={},!1),enumerable:(i={},!1),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){o[e]="__proto__"!==e?a:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(i,o),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(e,t){return s(null===e?i:e,t)}):s},function(e,t,n){"use strict";var r=n(230);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not an Object");return e}},function(e){"use strict";var t=Object.create(null),n=Math.random;e.exports=function(){for(var e;e=n().toString(36).slice(2),t[e];);return e}},function(e){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var a=n(479),s=n(25),c=Math.max;e.exports=function(t,n){var r,e,i,o=c(arguments.length,2);for(t=Object(s(t)),i=function(e){try{t[e]=n[e]}catch(e){r||(r=e)}},e=1;e<o;++e)a(n=arguments[e]).forEach(i);if(void 0!==r)throw r;return t}},function(e,t,n){"use strict";e.exports=n(480)()?Object.keys:n(481)},function(e){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";var r=n(56),i=Object.keys;e.exports=function(e){return i(r(e)?Object(e):e)}},function(e){"use strict";e.exports=function(e){return"function"==typeof e}},function(e){"use strict";var t="razdwatrzy";e.exports=function(){return"function"==typeof t.contains&&(!0===t.contains("dwa")&&!1===t.contains("foo"))}},function(e){"use strict";var n=String.prototype.indexOf;e.exports=function(e,t){return-1<n.call(this,e,t)}},function(e,t,n){"use strict";var r,i=n(139),o=n(233),a=n(74),s=n(47),c=n(235),u=Object.defineProperty;r=e.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");c.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",u(this,"__kind__",a("",t))},i&&i(r,c),delete r.prototype.constructor,r.prototype=Object.create(c.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),u(r.prototype,s.toStringTag,a("c","Array Iterator"))},function(e){"use strict";var t={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!t[typeof Symbol.iterator]&&(!!t[typeof Symbol.toPrimitive]&&!!t[typeof Symbol.toStringTag])}},function(e,t,n){"use strict";var r,i,o,a,s=n(74),c=n(488),u=Object.create,d=Object.defineProperties,l=Object.defineProperty,f=Object.prototype,p=u(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),a=!0}catch(e){}}var h,v=(h=u(null),function(e){for(var t,n,r=0;h[e+(r||"")];)++r;return h[e+=r||""]=!0,l(f,t="@@"+e,s.gs(null,function(e){n||(n=!0,l(this,t,s(e)),n=!1)})),t});o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?r(t):(n=u(o.prototype),t=void 0===t?"":String(t),d(n,{__description__:s("",t),__name__:s("",v(t))}))},d(i,{for:s(function(e){return p[e]?p[e]:p[e]=i(String(e))}),keyFor:s(function(e){var t;for(t in c(e),p)if(p[t]===e)return t}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),d(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),d(i.prototype,{toString:s(function(){return"Symbol ("+c(this).__description__+")"}),valueOf:s(function(){return c(this)})}),l(i.prototype,i.toPrimitive,s("",function(){var e=c(this);return"symbol"==typeof e?e:e.toString()})),l(i.prototype,i.toStringTag,s("c","Symbol")),l(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),l(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},function(e,t,n){"use strict";var r=n(489);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},function(e){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,n){"use strict";var r=n(25);e.exports=function(){return r(this).length=0,this}},function(e,t,n){"use strict";var r,o=n(492),i=n(232),a=n(48),s=n(502),c=n(48),u=n(25),d=Function.prototype.bind,l=Object.defineProperty,f=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,i=u(t)&&c(t.value);return delete(r=o(t)).writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&f.call(this,e)?i:(t.value=d.call(i,n.resolveContext?n.resolveContext(this):this),l(this,e,t),this[e])},r},e.exports=function(e,t){var n=i(t);return null!=n.resolveContext&&a(n.resolveContext),s(e,function(e,t){return r(t,e,n)})}},function(e,t,n){"use strict";var s=n(493),c=n(140),u=n(25);e.exports=function(t,e,n){var r=Object(u(t)),i=e,o=Object(n);if(r!==t&&!i)return r;var a={};return i?s(i,function(e){(o.ensure||e in t)&&(a[e]=t[e])}):c(a,t),a}},function(e,t,n){"use strict";e.exports=n(494)()?Array.from:n(495)},function(e){"use strict";e.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(t=n(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,n){"use strict";var v=n(47).iterator,g=n(98),m=n(496),b=n(497),y=n(48),E=n(25),_=n(56),C=n(99),T=Array.isArray,S=Function.prototype.call,w={configurable:!0,enumerable:!0,writable:!0,value:null},O=Object.defineProperty;e.exports=function(e,t,n){var r,i,o,a,s,c,u,d,l,f,p=t,h=n;if(e=Object(E(e)),_(p)&&y(p),this&&this!==Array&&m(this))r=this;else{if(!p){if(g(e))return 1!==(s=e.length)?Array.apply(null,e):((a=new Array(1))[0]=e[0],a);if(T(e)){for(a=new Array(s=e.length),i=0;i<s;++i)a[i]=e[i];return a}}a=[]}if(!T(e))if(void 0!==(l=e[v])){for(u=y(l).call(e),r&&(a=new r),d=u.next(),i=0;!d.done;)f=p?S.call(p,h,d.value,i):d.value,r?(w.value=f,O(a,i,w)):a[i]=f,d=u.next(),++i;s=i}else if(C(e)){for(s=e.length,r&&(a=new r),o=i=0;i<s;++i)f=e[i],i+1<s&&55296<=(c=f.charCodeAt(0))&&c<=56319&&(f+=e[++i]),f=p?S.call(p,h,f,o):f,r?(w.value=f,O(a,o,w)):a[o]=f,++o;s=o}if(void 0===s)for(s=b(e.length),r&&(a=new r(s)),i=0;i<s;++i)f=p?S.call(p,h,e[i],i):e[i],r?(w.value=f,O(a,i,w)):a[i]=f;return r&&(w.value=null,a.length=s),a}},function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(n(231));e.exports=function(e){return"function"==typeof e&&r.call(e)===i}},function(e,t,n){"use strict";var r=n(498),i=Math.max;e.exports=function(e){return i(0,r(e))}},function(e,t,n){"use strict";var r=n(499),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*o(i(e)):e}},function(e,t,n){"use strict";e.exports=n(500)()?Math.sign:n(501)},function(e){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},function(e,t,n){"use strict";var r=n(48),s=n(503),c=Function.prototype.call;e.exports=function(e,i,t){var o={},a=t;return r(i),s(e,function(e,t,n,r){o[t]=c.call(i,a,e,t,n,r)}),o}},function(e,t,n){"use strict";e.exports=n(504)("forEach")},function(e,t,n){"use strict";var u=n(48),d=n(25),l=Function.prototype.bind,f=Function.prototype.call,p=Object.keys,h=Object.prototype.propertyIsEnumerable;e.exports=function(s,c){return function(n,r,e,t){var i,o=e,a=t;return n=Object(d(n)),u(r),i=p(n),a&&i.sort("function"==typeof a?l.call(a,n):void 0),"function"!=typeof s&&(s=i[s]),f.call(s,i,function(e,t){return h.call(n,e)?f.call(r,o,n[e],e,n,t):c})}}},function(e,t,n){"use strict";var r,i=n(139),o=n(74),a=n(47),s=n(235),c=Object.defineProperty;r=e.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),c(this,"__length__",o("",e.length))},i&&i(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:55296<=(t=n.charCodeAt(0))&&t<=56319?n+this.__list__[this.__nextIndex__++]:n})}),c(r.prototype,a.toStringTag,o("c","String Iterator"))},function(e,t,n){"use strict";var r=n(507);e.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,n){"use strict";var r=n(98),i=n(56),o=n(99),a=n(47).iterator,s=Array.isArray;e.exports=function(e){return!!i(e)&&(!!s(e)||(!!o(e)||(!!r(e)||"function"==typeof e[a])))}},function(e,t,n){"use strict";var f=n(98),p=n(48),h=n(99),v=n(234),g=Array.isArray,m=Function.prototype.call,b=Array.prototype.some;e.exports=function(e,t,n){var r,i,o,a,s,c,u,d,l=n;if(g(e)||f(e)?r="array":h(e)?r="string":e=v(e),p(t),o=function(){a=!0},"array"!==r)if("string"!==r)for(i=e.next();!i.done;){if(m.call(t,l,i.value,o),a)return;i=e.next()}else for(c=e.length,s=0;s<c&&(u=e[s],s+1<c&&55296<=(d=u.charCodeAt(0))&&d<=56319&&(u+=e[++s]),m.call(t,l,u,o),!a);++s);else b.call(e,function(e){return m.call(t,l,e,o),a})}},function(e){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},function(e,t,n){"use strict";var s=n(13);e.exports=function(t,n,e,r,i){var o,a=e;t.currentState=e;return t.is=function(){return-1!==Array.prototype.indexOf.call(arguments,a)},t.isNot=function(){return-1===Array.prototype.indexOf.call(arguments,a)},function(e){if(a!==e){if(-1===n.indexOf(e))return void(i&&s(i)&&i("invalidState",e));t.previousState=a,o=a,t.currentState=e,a=e,r&&s(r)&&r(e,o)}}}},function(e,t,n){"use strict";var r=n(2)(n(11)),i=function(){function e(e){var t=(void 0===e?{}:e).waitTime,n=void 0===t?50:t;(0,r.default)(this,"queue",[]),(0,r.default)(this,"running",!1),this.waitTime=n}var t=e.prototype;return t.add=function(e){this.queue.push(e),this.run()},t.run=function(){var t=this;if(!this.running){this.running=!0;!function e(){0!==t.queue.length?t.queue.shift()(function(){setTimeout(e,t.waitTime)}):t.running=!1}()}},e}();e.exports=i},function(e,t,n){var h,v,g=n(239),m=n(240),b=0,y=0;e.exports=function(e,t,n){var r=t&&n||0,i=t||[],o=(e=e||{}).node||h,a=void 0!==e.clockseq?e.clockseq:v;if(null==o||null==a){var s=g();null==o&&(o=h=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==a&&(a=v=16383&(s[6]<<8|s[7]))}var c=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:y+1,d=c-b+(u-y)/1e4;if(d<0&&void 0===e.clockseq&&(a=a+1&16383),(d<0||b<c)&&void 0===e.nsecs&&(u=0),1e4<=u)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");b=c,v=a;var l=(1e4*(268435455&(c+=122192928e5))+(y=u))%4294967296;i[r++]=l>>>24&255,i[r++]=l>>>16&255,i[r++]=l>>>8&255,i[r++]=255&l;var f=c/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var p=0;p<6;++p)i[r+p]=o[p];return t||m(i)}},function(e,t,n){var a=n(239),s=n(240);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||s(i)}},function(e,t,n){"use strict";var r=n(237),i={};(e.exports=i).isElementNode=function(e){return e&&"object"==typeof e&&1===e.nodeType},i.createElement=function(e,r,t,n){var i=(n||document).createElement(e);r=r||{},Object.keys(r).forEach(function(t){if("object"==typeof r[t]){i[t]||(i[t]={});var n=r[t];Object.keys(n).forEach(function(e){i[t][e]=n[e]})}else"className"===t?i.className=r[t]:i.setAttribute(t,r[t])});function o(e){"string"==typeof e?i.innerHTML+=e:i.appendChild(e)}return Array.isArray(t)?t.forEach(o):t&&o(t),i},r(i)},function(e,t,n){var r=n(516),i="undefined"!=typeof window?window:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},o=i.Raven,a=new r;a.noConflict=function(){return i.Raven=o,a},a.afterLoad(),e.exports=a,e.exports.Client=r},function(e,t,n){var c=n(517),s=n(243),i=n(518),u=n(519),r=n(142),o=r.isErrorEvent,a=r.isDOMError,d=r.isDOMException,l=r.isError,f=r.isObject,p=r.isPlainObject,h=r.isUndefined,v=r.isFunction,g=r.isString,m=r.isArray,b=r.isEmptyObject,y=r.each,E=r.objectMerge,_=r.truncate,C=r.objectFrozen,T=r.hasKey,S=r.joinRegExp,w=r.urlencode,O=r.uuid4,I=r.htmlTreeAsString,A=r.isSameException,x=r.isSameStacktrace,R=r.parseUrl,N=r.fill,k=r.supportsFetch,D=r.supportsReferrerPolicy,M=r.serializeKeysForMessage,P=r.serializeException,L=r.sanitize,j=n(520).wrapMethod,U="source protocol user pass host port path".split(" "),F=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;function B(){return+new Date}var V="undefined"!=typeof window?window:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},z=V.document,W=V.navigator;function H(t,n){return v(n)?function(e){return n(e,t)}:n}function G(){for(var e in this._hasJSON=!("object"!=typeof JSON||!JSON.stringify),this._hasDocument=!h(z),this._hasNavigator=!h(W),this._lastCapturedException=null,this._lastData=null,this._lastEventId=null,this._globalServer=null,this._globalKey=null,this._globalProject=null,this._globalContext={},this._globalOptions={release:V.SENTRY_RELEASE&&V.SENTRY_RELEASE.id,logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],headers:null,collectWindowErrors:!0,captureUnhandledRejections:!0,maxMessageLength:0,maxUrlLength:250,stackTraceLimit:50,autoBreadcrumbs:!0,instrument:!0,sampleRate:1,sanitizeKeys:[]},this._fetchDefaults={method:"POST",referrerPolicy:D()?"origin":""},this._ignoreOnError=0,this._isRavenInstalled=!1,this._originalErrorStackTraceLimit=Error.stackTraceLimit,this._originalConsole=V.console||{},this._originalConsoleMethods={},this._plugins=[],this._startTime=B(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._keypressTimeout,this._location=V.location,this._lastHref=this._location&&this._location.href,this._resetBackoff(),this._originalConsole)this._originalConsoleMethods[e]=this._originalConsole[e]}(G.prototype={VERSION:"3.27.0",debug:!1,TraceKit:c,config:function(e,t){var n=this;if(n._globalServer)return this._logDebug("error","Error: Raven has already been configured"),n;if(!e)return n;var r=n._globalOptions;t&&y(t,function(e,t){"tags"===e||"extra"===e||"user"===e?n._globalContext[e]=t:r[e]=t}),n.setDSN(e),r.ignoreErrors.push(/^Script error\.?$/),r.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),r.ignoreErrors=S(r.ignoreErrors),r.ignoreUrls=!!r.ignoreUrls.length&&S(r.ignoreUrls),r.whitelistUrls=!!r.whitelistUrls.length&&S(r.whitelistUrls),r.includePaths=S(r.includePaths),r.maxBreadcrumbs=Math.max(0,Math.min(r.maxBreadcrumbs||100,100));var i={xhr:!0,console:!0,dom:!0,location:!0,sentry:!0},o=r.autoBreadcrumbs;"[object Object]"==={}.toString.call(o)?o=E(i,o):!1!==o&&(o=i),r.autoBreadcrumbs=o;var a={tryCatch:!0},s=r.instrument;return"[object Object]"==={}.toString.call(s)?s=E(a,s):!1!==s&&(s=a),r.instrument=s,c.collectWindowErrors=!!r.collectWindowErrors,n},install:function(){var e=this;return e.isSetup()&&!e._isRavenInstalled&&(c.report.subscribe(function(){e._handleOnErrorStackInfo.apply(e,arguments)}),e._globalOptions.captureUnhandledRejections&&e._attachPromiseRejectionHandler(),e._patchFunctionToString(),e._globalOptions.instrument&&e._globalOptions.instrument.tryCatch&&e._instrumentTryCatch(),e._globalOptions.autoBreadcrumbs&&e._instrumentBreadcrumbs(),e._drainPlugins(),e._isRavenInstalled=!0),Error.stackTraceLimit=e._globalOptions.stackTraceLimit,this},setDSN:function(e){var t=this,n=t._parseDSN(e),r=n.path.lastIndexOf("/"),i=n.path.substr(1,r);t._dsn=e,t._globalKey=n.user,t._globalSecret=n.pass&&n.pass.substr(1),t._globalProject=n.path.substr(r+1),t._globalServer=t._getGlobalServer(n),t._globalEndpoint=t._globalServer+"/"+i+"api/"+t._globalProject+"/store/",this._resetBackoff()},context:function(e,t,n){return v(e)&&(n=t||[],t=e,e={}),this.wrap(e,t).apply(this,n)},wrap:function(r,i,o){var a=this;if(h(i)&&!v(r))return r;if(v(r)&&(i=r,r=void 0),!v(i))return i;try{if(i.__raven__)return i;if(i.__raven_wrapper__)return i.__raven_wrapper__}catch(e){return i}function e(){var e=[],t=arguments.length,n=!r||r&&!1!==r.deep;for(o&&v(o)&&o.apply(this,arguments);t--;)e[t]=n?a.wrap(r,arguments[t]):arguments[t];try{return i.apply(this,e)}catch(e){throw a._ignoreNextOnError(),a.captureException(e,r),e}}for(var t in i)T(i,t)&&(e[t]=i[t]);return e.prototype=i.prototype,(i.__raven_wrapper__=e).__raven__=!0,e.__orig__=i,e},uninstall:function(){return c.report.uninstall(),this._detachPromiseRejectionHandler(),this._unpatchFunctionToString(),this._restoreBuiltIns(),this._restoreConsole(),Error.stackTraceLimit=this._originalErrorStackTraceLimit,this._isRavenInstalled=!1,this},_promiseRejectionHandler:function(e){this._logDebug("debug","Raven caught unhandled promise rejection:",e),this.captureException(e.reason,{mechanism:{type:"onunhandledrejection",handled:!1}})},_attachPromiseRejectionHandler:function(){return this._promiseRejectionHandler=this._promiseRejectionHandler.bind(this),V.addEventListener&&V.addEventListener("unhandledrejection",this._promiseRejectionHandler),this},_detachPromiseRejectionHandler:function(){return V.removeEventListener&&V.removeEventListener("unhandledrejection",this._promiseRejectionHandler),this},captureException:function(t,e){if(e=E({trimHeadFrames:0},e||{}),o(t)&&t.error)t=t.error;else{if(a(t)||d(t)){var n=t.name||(a(t)?"DOMError":"DOMException"),r=t.message?n+": "+t.message:n;return this.captureMessage(r,E(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}))}if(l(t))t=t;else{if(!p(t))return this.captureMessage(t,E(e,{stacktrace:!0,trimHeadFrames:e.trimHeadFrames+1}));e=this._getCaptureExceptionOptionsFromPlainObject(e,t),t=new Error(e.message)}}this._lastCapturedException=t;try{var i=c.computeStackTrace(t);this._handleStackInfo(i,e)}catch(e){if(t!==e)throw e}return this},_getCaptureExceptionOptionsFromPlainObject:function(e,t){var n=Object.keys(t).sort(),r=E(e,{message:"Non-Error exception captured with keys: "+M(n),fingerprint:[i(n)],extra:e.extra||{}});return r.extra.__serialized__=P(t),r},captureMessage:function(e,t){if(!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(e)){var n,r=E({message:e+=""},t=t||{});try{throw new Error(e)}catch(e){n=e}n.name=null;var i=c.computeStackTrace(n),o=m(i.stack)&&i.stack[1];o&&"Raven.captureException"===o.func&&(o=i.stack[2]);var a=o&&o.url||"";if((!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(a))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(a))){if(this._globalOptions.stacktrace||t.stacktrace||""===r.message){r.fingerprint=null==r.fingerprint?e:r.fingerprint,(t=E({trimHeadFrames:0},t)).trimHeadFrames+=1;var s=this._prepareFrames(i,t);r.stacktrace={frames:s.reverse()}}return r.fingerprint&&(r.fingerprint=m(r.fingerprint)?r.fingerprint:[r.fingerprint]),this._send(r),this}}},captureBreadcrumb:function(e){var t=E({timestamp:B()/1e3},e);if(v(this._globalOptions.breadcrumbCallback)){var n=this._globalOptions.breadcrumbCallback(t);if(f(n)&&!b(n))t=n;else if(!1===n)return this}return this._breadcrumbs.push(t),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},addPlugin:function(e){var t=[].slice.call(arguments,1);return this._plugins.push([e,t]),this._isRavenInstalled&&this._drainPlugins(),this},setUserContext:function(e){return this._globalContext.user=e,this},setExtraContext:function(e){return this._mergeContext("extra",e),this},setTagsContext:function(e){return this._mergeContext("tags",e),this},clearContext:function(){return this._globalContext={},this},getContext:function(){return JSON.parse(s(this._globalContext))},setEnvironment:function(e){return this._globalOptions.environment=e,this},setRelease:function(e){return this._globalOptions.release=e,this},setDataCallback:function(e){var t=this._globalOptions.dataCallback;return this._globalOptions.dataCallback=H(t,e),this},setBreadcrumbCallback:function(e){var t=this._globalOptions.breadcrumbCallback;return this._globalOptions.breadcrumbCallback=H(t,e),this},setShouldSendCallback:function(e){var t=this._globalOptions.shouldSendCallback;return this._globalOptions.shouldSendCallback=H(t,e),this},setTransport:function(e){return this._globalOptions.transport=e,this},lastException:function(){return this._lastCapturedException},lastEventId:function(){return this._lastEventId},isSetup:function(){return!!this._hasJSON&&(!!this._globalServer||(this.ravenNotConfiguredError||(this.ravenNotConfiguredError=!0,this._logDebug("error","Error: Raven has not been configured.")),!1))},afterLoad:function(){var e=V.RavenConfig;e&&this.config(e.dsn,e.config).install()},showReportDialog:function(e){if(z){if(!(e=E({eventId:this.lastEventId(),dsn:this._dsn,user:this._globalContext.user||{}},e)).eventId)throw new u("Missing eventId");if(!e.dsn)throw new u("Missing DSN");var t=encodeURIComponent,n=[];for(var r in e)if("user"===r){var i=e.user;i.name&&n.push("name="+t(i.name)),i.email&&n.push("email="+t(i.email))}else n.push(t(r)+"="+t(e[r]));var o=this._getGlobalServer(this._parseDSN(e.dsn)),a=z.createElement("script");a.async=!0,a.src=o+"/api/embed/error-page/?"+n.join("&"),(z.head||z.body).appendChild(a)}},_ignoreNextOnError:function(){var e=this;this._ignoreOnError+=1,setTimeout(function(){e._ignoreOnError-=1})},_triggerEvent:function(e,t){var n,r;if(this._hasDocument){for(r in t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),z.createEvent?(n=z.createEvent("HTMLEvents")).initEvent(e,!0,!0):(n=z.createEventObject()).eventType=e,t)T(t,r)&&(n[r]=t[r]);if(z.createEvent)z.dispatchEvent(n);else try{z.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(e){}}},_breadcrumbEventHandler:function(n){var r=this;return function(e){if(r._keypressTimeout=null,r._lastCapturedEvent!==e){var t;r._lastCapturedEvent=e;try{t=I(e.target)}catch(e){t="<unknown>"}r.captureBreadcrumb({category:"ui."+n,message:t})}}},_keypressEventHandler:function(){var i=this;return function(e){var t;try{t=e.target}catch(e){return}var n=t&&t.tagName;if(n&&("INPUT"===n||"TEXTAREA"===n||t.isContentEditable)){var r=i._keypressTimeout;r||i._breadcrumbEventHandler("input")(e),clearTimeout(r),i._keypressTimeout=setTimeout(function(){i._keypressTimeout=null},1e3)}}},_captureUrlChange:function(e,t){var n=R(this._location.href),r=R(t),i=R(e);this._lastHref=t,n.protocol===r.protocol&&n.host===r.host&&(t=r.relative),n.protocol===i.protocol&&n.host===i.host&&(e=i.relative),this.captureBreadcrumb({category:"navigation",data:{to:t,from:e}})},_patchFunctionToString:function(){var e=this;e._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){return"function"==typeof this&&this.__raven__?e._originalFunctionToString.apply(this.__orig__,arguments):e._originalFunctionToString.apply(this,arguments)}},_unpatchFunctionToString:function(){this._originalFunctionToString&&(Function.prototype.toString=this._originalFunctionToString)},_instrumentTryCatch:function(){var u=this,t=u._wrappedBuiltIns;function e(o){return function(e,t){for(var n=new Array(arguments.length),r=0;r<n.length;++r)n[r]=arguments[r];var i=n[0];return v(i)&&(n[0]=u.wrap({mechanism:{type:"instrument",data:{function:o.name||"<anonymous>"}}},i)),o.apply?o.apply(this,n):o(n[0],n[1])}}var d=this._globalOptions.autoBreadcrumbs;function n(c){var e=V[c]&&V[c].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(N(e,"addEventListener",function(s){return function(e,t,n,r){try{t&&t.handleEvent&&(t.handleEvent=u.wrap({mechanism:{type:"instrument",data:{target:c,function:"handleEvent",handler:t&&t.name||"<anonymous>"}}},t.handleEvent))}catch(e){}var i,o,a;return d&&d.dom&&("EventTarget"===c||"Node"===c)&&(o=u._breadcrumbEventHandler("click"),a=u._keypressEventHandler(),i=function(e){if(e){var t;try{t=e.type}catch(e){return}return"click"===t?o(e):"keypress"===t?a(e):void 0}}),s.call(this,e,u.wrap({mechanism:{type:"instrument",data:{target:c,function:"addEventListener",handler:t&&t.name||"<anonymous>"}}},t,i),n,r)}},t),N(e,"removeEventListener",function(i){return function(e,t,n,r){try{t=t&&(t.__raven_wrapper__?t.__raven_wrapper__:t)}catch(e){}return i.call(this,e,t,n,r)}},t))}N(V,"setTimeout",e,t),N(V,"setInterval",e,t),V.requestAnimationFrame&&N(V,"requestAnimationFrame",function(t){return function(e){return t(u.wrap({mechanism:{type:"instrument",data:{function:"requestAnimationFrame",handler:t&&t.name||"<anonymous>"}}},e))}},t);for(var r=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],i=0;i<r.length;i++)n(r[i])},_instrumentBreadcrumbs:function(){var s=this,e=this._globalOptions.autoBreadcrumbs,t=s._wrappedBuiltIns;function o(t,e){t in e&&v(e[t])&&N(e,t,function(e){return s.wrap({mechanism:{type:"instrument",data:{function:t,handler:e&&e.name||"<anonymous>"}}},e)})}if(e.xhr&&"XMLHttpRequest"in V){var n=V.XMLHttpRequest&&V.XMLHttpRequest.prototype;N(n,"open",function(n){return function(e,t){return g(t)&&-1===t.indexOf(s._globalKey)&&(this.__raven_xhr={method:e,url:t,status_code:null}),n.apply(this,arguments)}},t),N(n,"send",function(i){return function(){var e=this;function t(){if(e.__raven_xhr&&4===e.readyState){try{e.__raven_xhr.status_code=e.status}catch(e){}s.captureBreadcrumb({type:"http",category:"xhr",data:e.__raven_xhr})}}for(var n=["onload","onerror","onprogress"],r=0;r<n.length;r++)o(n[r],e);return"onreadystatechange"in e&&v(e.onreadystatechange)?N(e,"onreadystatechange",function(e){return s.wrap({mechanism:{type:"instrument",data:{function:"onreadystatechange",handler:e&&e.name||"<anonymous>"}}},e,t)}):e.onreadystatechange=t,i.apply(this,arguments)}},t)}e.xhr&&k()&&N(V,"fetch",function(a){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n,r=e[0],i="GET";if("string"==typeof r?n=r:"Request"in V&&r instanceof V.Request?(n=r.url,r.method&&(i=r.method)):n=""+r,-1!==n.indexOf(s._globalKey))return a.apply(this,e);e[1]&&e[1].method&&(i=e[1].method);var o={method:i,url:n,status_code:null};return a.apply(this,e).then(function(e){return o.status_code=e.status,s.captureBreadcrumb({type:"http",category:"fetch",data:o}),e}).catch(function(e){throw s.captureBreadcrumb({type:"http",category:"fetch",data:o,level:"error"}),e})}},t),e.dom&&this._hasDocument&&(z.addEventListener?(z.addEventListener("click",s._breadcrumbEventHandler("click"),!1),z.addEventListener("keypress",s._keypressEventHandler(),!1)):z.attachEvent&&(z.attachEvent("onclick",s._breadcrumbEventHandler("click")),z.attachEvent("onkeypress",s._keypressEventHandler())));var r=V.chrome,i=!(r&&r.app&&r.app.runtime)&&V.history&&V.history.pushState&&V.history.replaceState;if(e.location&&i){var a=V.onpopstate;V.onpopstate=function(){var e=s._location.href;if(s._captureUrlChange(s._lastHref,e),a)return a.apply(this,arguments)};function c(i){return function(e,t,n){var r=2<arguments.length?n:void 0;return r&&s._captureUrlChange(s._lastHref,r+""),i.apply(this,arguments)}}N(V.history,"pushState",c,t),N(V.history,"replaceState",c,t)}if(e.console&&"console"in V&&console.log){function u(e,t){s.captureBreadcrumb({message:e,level:t.level,category:"console"})}y(["debug","info","warn","error","log"],function(e,t){j(console,t,u)})}},_restoreBuiltIns:function(){for(var e;this._wrappedBuiltIns.length;){var t=(e=this._wrappedBuiltIns.shift())[0],n=e[1],r=e[2];t[n]=r}},_restoreConsole:function(){for(var e in this._originalConsoleMethods)this._originalConsole[e]=this._originalConsoleMethods[e]},_drainPlugins:function(){var i=this;y(this._plugins,function(e,t){var n=t[0],r=t[1];n.apply(i,[i].concat(r))})},_parseDSN:function(t){var e=F.exec(t),n={},r=7;try{for(;r--;)n[U[r]]=e[r]||""}catch(e){throw new u("Invalid DSN: "+t)}if(n.pass&&!this._globalOptions.allowSecretKey)throw new u("Do not specify your secret key in the DSN. See: http://bit.ly/raven-secret-key");return n},_getGlobalServer:function(e){var t="//"+e.host+(e.port?":"+e.port:"");return e.protocol&&(t=e.protocol+":"+t),t},_handleOnErrorStackInfo:function(e,t){(t=t||{}).mechanism=t.mechanism||{type:"onerror",handled:!1},this._ignoreOnError||this._handleStackInfo(e,t)},_handleStackInfo:function(e,t){var n=this._prepareFrames(e,t);this._triggerEvent("handle",{stackInfo:e,options:t}),this._processException(e.name,e.message,e.url,e.lineno,n,t)},_prepareFrames:function(r,e){var i=this,o=[];if(r.stack&&r.stack.length&&(y(r.stack,function(e,t){var n=i._normalizeFrame(t,r.url);n&&o.push(n)}),e&&e.trimHeadFrames))for(var t=0;t<e.trimHeadFrames&&t<o.length;t++)o[t].in_app=!1;return o=o.slice(0,this._globalOptions.stackTraceLimit)},_normalizeFrame:function(e,t){var n={filename:e.url,lineno:e.line,colno:e.column,function:e.func||"?"};return e.url||(n.filename=t),n.in_app=!(this._globalOptions.includePaths.test&&!this._globalOptions.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n.function)||/raven\.(min\.)?js$/.test(n.filename)),n},_processException:function(e,t,n,r,i,o){var a,s=(e?e+": ":"")+(t||"");if((!this._globalOptions.ignoreErrors.test||!this._globalOptions.ignoreErrors.test(t)&&!this._globalOptions.ignoreErrors.test(s))&&(i&&i.length?(n=i[0].filename||n,i.reverse(),a={frames:i}):n&&(a={frames:[{filename:n,lineno:r,in_app:!0}]}),(!this._globalOptions.ignoreUrls.test||!this._globalOptions.ignoreUrls.test(n))&&(!this._globalOptions.whitelistUrls.test||this._globalOptions.whitelistUrls.test(n)))){var c=E({exception:{values:[{type:e,value:t,stacktrace:a}]},transaction:n},o),u=c.exception.values[0];null==u.type&&""===u.value&&(u.value="Unrecoverable error caught"),!c.exception.mechanism&&c.mechanism&&(c.exception.mechanism=c.mechanism,delete c.mechanism),c.exception.mechanism=E({type:"generic",handled:!0},c.exception.mechanism||{}),this._send(c)}},_trimPacket:function(e){var t=this._globalOptions.maxMessageLength;if(e.message&&(e.message=_(e.message,t)),e.exception){var n=e.exception.values[0];n.value=_(n.value,t)}var r=e.request;return r&&(r.url&&(r.url=_(r.url,this._globalOptions.maxUrlLength)),r.Referer&&(r.Referer=_(r.Referer,this._globalOptions.maxUrlLength))),e.breadcrumbs&&e.breadcrumbs.values&&this._trimBreadcrumbs(e.breadcrumbs),e},_trimBreadcrumbs:function(e){for(var t,n,r,i=["to","from","url"],o=0;o<e.values.length;++o)if((n=e.values[o]).hasOwnProperty("data")&&f(n.data)&&!C(n.data)){r=E({},n.data);for(var a=0;a<i.length;++a)t=i[a],r.hasOwnProperty(t)&&r[t]&&(r[t]=_(r[t],this._globalOptions.maxUrlLength));e.values[o].data=r}},_getHttpData:function(){if(this._hasNavigator||this._hasDocument){var e={};return this._hasNavigator&&W.userAgent&&(e.headers={"User-Agent":W.userAgent}),V.location&&V.location.href&&(e.url=V.location.href),this._hasDocument&&z.referrer&&(e.headers||(e.headers={}),e.headers.Referer=z.referrer),e}},_resetBackoff:function(){this._backoffDuration=0,this._backoffStart=null},_shouldBackoff:function(){return this._backoffDuration&&B()-this._backoffStart<this._backoffDuration},_isRepeatData:function(e){var t=this._lastData;return!(!t||e.message!==t.message||e.transaction!==t.transaction)&&(e.stacktrace||t.stacktrace?x(e.stacktrace,t.stacktrace):!e.exception&&!t.exception||A(e.exception,t.exception))},_setBackoffState:function(e){if(!this._shouldBackoff()){var t=e.status;if(400===t||401===t||429===t){var n;try{n=k()?e.headers.get("Retry-After"):e.getResponseHeader("Retry-After"),n=1e3*parseInt(n,10)}catch(e){}this._backoffDuration=n||(2*this._backoffDuration||1e3),this._backoffStart=B()}}},_send:function(t){var e=this._globalOptions,n={project:this._globalProject,logger:e.logger,platform:"javascript"},r=this._getHttpData();r&&(n.request=r),t.trimHeadFrames&&delete t.trimHeadFrames,(t=E(n,t)).tags=E(E({},this._globalContext.tags),t.tags),t.extra=E(E({},this._globalContext.extra),t.extra),t.extra["session:duration"]=B()-this._startTime,this._breadcrumbs&&0<this._breadcrumbs.length&&(t.breadcrumbs={values:[].slice.call(this._breadcrumbs,0)}),this._globalContext.user&&(t.user=this._globalContext.user),e.environment&&(t.environment=e.environment),e.release&&(t.release=e.release),e.serverName&&(t.server_name=e.serverName),t=this._sanitizeData(t),Object.keys(t).forEach(function(e){null!=t[e]&&""!==t[e]&&!b(t[e])||delete t[e]}),v(e.dataCallback)&&(t=e.dataCallback(t)||t),t&&!b(t)&&(v(e.shouldSendCallback)&&!e.shouldSendCallback(t)||(this._shouldBackoff()?this._logDebug("warn","Raven dropped error due to backoff: ",t):"number"==typeof e.sampleRate?Math.random()<e.sampleRate&&this._sendProcessedPayload(t):this._sendProcessedPayload(t)))},_sanitizeData:function(e){return L(e,this._globalOptions.sanitizeKeys)},_getUuid:function(){return O()},_sendProcessedPayload:function(t,n){var r=this,e=this._globalOptions;if(this.isSetup())if(t=this._trimPacket(t),this._globalOptions.allowDuplicates||!this._isRepeatData(t)){this._lastEventId=t.event_id||(t.event_id=this._getUuid()),this._lastData=t,this._logDebug("debug","Raven about to send:",t);var i={sentry_version:"7",sentry_client:"raven-js/"+this.VERSION,sentry_key:this._globalKey};this._globalSecret&&(i.sentry_secret=this._globalSecret);var o=t.exception&&t.exception.values[0];this._globalOptions.autoBreadcrumbs&&this._globalOptions.autoBreadcrumbs.sentry&&this.captureBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:t.message,event_id:t.event_id,level:t.level||"error"});var a=this._globalEndpoint;(e.transport||this._makeRequest).call(this,{url:a,auth:i,data:t,options:e,onSuccess:function(){r._resetBackoff(),r._triggerEvent("success",{data:t,src:a}),n&&n()},onError:function(e){r._logDebug("error","Raven transport failed to send: ",e),e.request&&r._setBackoffState(e.request),r._triggerEvent("failure",{data:t,src:a}),e=e||new Error("Raven send failed (no additional details provided)"),n&&n(e)}})}else this._logDebug("warn","Raven dropped repeat event: ",t)},_makeRequest:function(n){var e=n.url+"?"+w(n.auth),t=null,r={};if(n.options.headers&&(t=this._evaluateHash(n.options.headers)),n.options.fetchParameters&&(r=this._evaluateHash(n.options.fetchParameters)),k()){r.body=s(n.data);var i=E({},this._fetchDefaults),o=E(i,r);return t&&(o.headers=t),V.fetch(e,o).then(function(e){if(e.ok)n.onSuccess&&n.onSuccess();else{var t=new Error("Sentry error code: "+e.status);t.request=e,n.onError&&n.onError(t)}}).catch(function(){n.onError&&n.onError(new Error("Sentry error code: network unavailable"))})}var a=V.XMLHttpRequest&&new V.XMLHttpRequest;a&&("withCredentials"in a||"undefined"!=typeof XDomainRequest)&&("withCredentials"in a?a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)n.onSuccess&&n.onSuccess();else if(n.onError){var e=new Error("Sentry error code: "+a.status);e.request=a,n.onError(e)}}:(a=new XDomainRequest,e=e.replace(/^https?:/,""),n.onSuccess&&(a.onload=n.onSuccess),n.onError&&(a.onerror=function(){var e=new Error("Sentry error code: XDomainRequest");e.request=a,n.onError(e)})),a.open("POST",e),t&&y(t,function(e,t){a.setRequestHeader(e,t)}),a.send(s(n.data)))},_evaluateHash:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]="function"==typeof r?r():r}return t},_logDebug:function(e){this._originalConsoleMethods[e]&&(this.debug||this._globalOptions.debug)&&Function.prototype.apply.call(this._originalConsoleMethods[e],this._originalConsole,[].slice.call(arguments,1))},_mergeContext:function(e,t){h(t)?delete this._globalContext[e]:this._globalContext[e]=E(this._globalContext[e]||{},t)}}).setUser=G.prototype.setUserContext,G.prototype.setReleaseContext=G.prototype.setRelease,e.exports=G},function(e,t,n){var d,r,i,o,a,l,f=n(142),p={collectWindowErrors:!0,debug:!1},s="undefined"!=typeof window?window:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},c=[].slice,h=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function b(){return"undefined"==typeof document||null==document.location?"":document.location.href}function v(e,t){var n=null;if(!t||p.collectWindowErrors){for(var r in i)if(i.hasOwnProperty(r))try{i[r].apply(null,[e].concat(c.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function u(e,t,n,r,i){var o=f.isErrorEvent(i)?i.error:i,a=f.isErrorEvent(e)?e.message:e;if(l)p.computeStackTrace.augmentStackTraceWithInitialElement(l,t,n,a),g();else if(o&&f.isError(o))v(p.computeStackTrace(o),!0);else{var s,c={url:t,line:n,column:r},u=void 0;if("[object String]"==={}.toString.call(a))(s=a.match(h))&&(u=s[1],a=s[2]);c.func="?",v({name:u,message:a,url:b(),stack:[c]},!0)}return!!d&&d.apply(this,arguments)}function g(){var e=l,t=o;v.apply(a=l=o=null,[e,!1].concat(t))}function m(e,t){var n=c.call(arguments,1);if(l){if(a===e)return;g()}var r=p.computeStackTrace(e);if(l=r,a=e,o=n,setTimeout(function(){a===e&&g()},r.incomplete?2e3:0),!1!==t)throw e}function y(e){if(void 0!==e.stack&&e.stack){for(var t,n,r,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,o=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=e.stack.split("\n"),d=[],l=(/^(.*) is undefined$/.exec(e.message),0),f=u.length;l<f;++l){if(n=i.exec(u[l])){var p=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=c.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:p?null:n[2],func:n[1]||"?",args:p?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=o.exec(u[l]))r={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=a.exec(u[l])))continue;n[3]&&-1<n[3].indexOf(" > eval")&&(t=s.exec(n[3]))?(n[3]=t[1],n[4]=t[2],n[5]=null):0!==l||n[5]||void 0===e.columnNumber||(d[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}if(!r.func&&r.line&&(r.func="?"),r.url&&"blob:"===r.url.substr(0,5)){var h=new XMLHttpRequest;if(h.open("GET",r.url,!1),h.send(null),200===h.status){var v=h.responseText||"",g=(v=v.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(g){var m=g[1];"~"===m.charAt(0)&&(m=("undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+m.slice(1)),r.url=m.slice(0,-4)}}}d.push(r)}return d.length?{name:e.name,message:e.message,url:b(),stack:d}:null}}function E(e,t,n,r){var i={url:t,line:n};if(i.url&&i.line){if(e.incomplete=!1,i.func||(i.func="?"),0<e.stack.length&&e.stack[0].url===i.url){if(e.stack[0].line===i.line)return!1;if(!e.stack[0].line&&e.stack[0].func===i.func)return e.stack[0].line=i.line,!1}return e.stack.unshift(i),e.partial=!0}return!(e.incomplete=!0)}function _(e,t){for(var n,r,i=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,o=[],a={},s=!1,c=_.caller;c&&!s;c=c.caller)if(c!==C&&c!==p.report){if(r={url:null,func:"?",line:null,column:null},c.name?r.func=c.name:(n=i.exec(c.toString()))&&(r.func=n[1]),void 0===r.func)try{r.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}a[""+c]?s=!0:a[""+c]=!0,o.push(r)}t&&o.splice(0,t);var u={name:e.name,message:e.message,url:b(),stack:o};return E(u,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),u}function C(e,t){var n=null;t=null==t?0:+t;try{if(n=y(e))return n}catch(e){if(p.debug)throw e}try{if(n=_(e,t+1))return n}catch(e){if(p.debug)throw e}return{name:e.name,message:e.message,url:b()}}p.report=(i=[],l=a=o=null,m.subscribe=function(e){r||(d=s.onerror,s.onerror=u,r=!0),i.push(e)},m.unsubscribe=function(e){for(var t=i.length-1;0<=t;--t)i[t]===e&&i.splice(t,1)},m.uninstall=function(){r&&(s.onerror=d,r=!1,d=void 0),i=[]},m),p.computeStackTrace=(C.augmentStackTraceWithInitialElement=E,C.computeStackTraceFromStackProp=y,C),e.exports=p},function(e){function l(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function s(e,t,n,r,i,o){return l(function(e,t){return e<<t|e>>>32-t}(l(l(t,e),l(r,o)),i),n)}function f(e,t,n,r,i,o,a){return s(t&n|~t&r,e,t,i,o,a)}function p(e,t,n,r,i,o,a){return s(t&r|n&~r,e,t,i,o,a)}function h(e,t,n,r,i,o,a){return s(t^n^r,e,t,i,o,a)}function v(e,t,n,r,i,o,a){return s(n^(t|~r),e,t,i,o,a)}function c(e,t){var n,r,i,o,a;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var s=1732584193,c=-271733879,u=-1732584194,d=271733878;for(n=0;n<e.length;n+=16)c=v(c=v(c=v(c=v(c=h(c=h(c=h(c=h(c=p(c=p(c=p(c=p(c=f(c=f(c=f(c=f(i=c,u=f(o=u,d=f(a=d,s=f(r=s,c,u,d,e[n],7,-680876936),c,u,e[n+1],12,-389564586),s,c,e[n+2],17,606105819),d,s,e[n+3],22,-1044525330),u=f(u,d=f(d,s=f(s,c,u,d,e[n+4],7,-176418897),c,u,e[n+5],12,1200080426),s,c,e[n+6],17,-1473231341),d,s,e[n+7],22,-45705983),u=f(u,d=f(d,s=f(s,c,u,d,e[n+8],7,1770035416),c,u,e[n+9],12,-1958414417),s,c,e[n+10],17,-42063),d,s,e[n+11],22,-1990404162),u=f(u,d=f(d,s=f(s,c,u,d,e[n+12],7,1804603682),c,u,e[n+13],12,-40341101),s,c,e[n+14],17,-1502002290),d,s,e[n+15],22,1236535329),u=p(u,d=p(d,s=p(s,c,u,d,e[n+1],5,-165796510),c,u,e[n+6],9,-1069501632),s,c,e[n+11],14,643717713),d,s,e[n],20,-373897302),u=p(u,d=p(d,s=p(s,c,u,d,e[n+5],5,-701558691),c,u,e[n+10],9,38016083),s,c,e[n+15],14,-660478335),d,s,e[n+4],20,-405537848),u=p(u,d=p(d,s=p(s,c,u,d,e[n+9],5,568446438),c,u,e[n+14],9,-1019803690),s,c,e[n+3],14,-187363961),d,s,e[n+8],20,1163531501),u=p(u,d=p(d,s=p(s,c,u,d,e[n+13],5,-1444681467),c,u,e[n+2],9,-51403784),s,c,e[n+7],14,1735328473),d,s,e[n+12],20,-1926607734),u=h(u,d=h(d,s=h(s,c,u,d,e[n+5],4,-378558),c,u,e[n+8],11,-2022574463),s,c,e[n+11],16,1839030562),d,s,e[n+14],23,-35309556),u=h(u,d=h(d,s=h(s,c,u,d,e[n+1],4,-1530992060),c,u,e[n+4],11,1272893353),s,c,e[n+7],16,-155497632),d,s,e[n+10],23,-1094730640),u=h(u,d=h(d,s=h(s,c,u,d,e[n+13],4,681279174),c,u,e[n],11,-358537222),s,c,e[n+3],16,-722521979),d,s,e[n+6],23,76029189),u=h(u,d=h(d,s=h(s,c,u,d,e[n+9],4,-640364487),c,u,e[n+12],11,-421815835),s,c,e[n+15],16,530742520),d,s,e[n+2],23,-995338651),u=v(u,d=v(d,s=v(s,c,u,d,e[n],6,-198630844),c,u,e[n+7],10,1126891415),s,c,e[n+14],15,-1416354905),d,s,e[n+5],21,-57434055),u=v(u,d=v(d,s=v(s,c,u,d,e[n+12],6,1700485571),c,u,e[n+3],10,-1894986606),s,c,e[n+10],15,-1051523),d,s,e[n+1],21,-2054922799),u=v(u,d=v(d,s=v(s,c,u,d,e[n+8],6,1873313359),c,u,e[n+15],10,-30611744),s,c,e[n+6],15,-1560198380),d,s,e[n+13],21,1309151649),u=v(u,d=v(d,s=v(s,c,u,d,e[n+4],6,-145523070),c,u,e[n+11],10,-1120210379),s,c,e[n+2],15,718787259),d,s,e[n+9],21,-343485551),s=l(s,r),c=l(c,i),u=l(u,o),d=l(d,a);return[s,c,u,d]}function u(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function d(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function r(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function n(e){return unescape(encodeURIComponent(e))}function i(e){return function(e){return u(c(d(e),8*e.length))}(n(e))}function o(e,t){return function(e,t){var n,r,i=d(e),o=[],a=[];for(o[15]=a[15]=void 0,16<i.length&&(i=c(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=c(o.concat(d(t)),512+8*t.length),u(c(a.concat(r),640))}(n(e),n(t))}e.exports=function(e,t,n){return t?n?o(t,e):function(e,t){return r(o(e,t))}(t,e):n?i(e):function(e){return r(i(e))}(e)}},function(e){function t(e){this.name="RavenConfigError",this.message=e}(t.prototype=new Error).constructor=t,e.exports=t},function(e,t,n){var c=n(142);e.exports={wrapMethod:function(e,r,i){var o=e[r],a=e;if(r in e){var s="warn"===r?"warning":r;e[r]=function(){var e=[].slice.call(arguments),t=c.safeJoin(e," "),n={level:s,logger:"console",extra:{arguments:e}};"assert"===r?!1===e[0]&&(t="Assertion failed: "+(c.safeJoin(e.slice(1)," ")||"console.assert"),n.extra.arguments=e.slice(1),i&&i(t,n)):i&&i(t,n),o&&Function.prototype.apply.call(o,a,e)}}}}},function(e,t,n){var g=n(92),m=n(90),b=n(144),y=n(34),E=n(65),_=n(93),C=Math.min;e.exports=function(e,t,n){for(var r=n?b:m,i=e[0].length,o=e.length,a=o,s=Array(o),c=1/0,u=[];a--;){var d=e[a];a&&t&&(d=y(d,E(t))),c=C(d.length,c),s[a]=!n&&(t||120<=i&&120<=d.length)?new g(a&&d):void 0}d=e[0];var l=-1,f=s[0];e:for(;++l<i&&u.length<c;){var p=d[l],h=t?t(p):p;if(p=n||0!==p?p:0,!(f?_(f,h):r(u,h,n))){for(a=o;--a;){var v=s[a];if(!(v?_(v,h):r(e[a],h,n)))continue e}f&&f.push(h),u.push(p)}}return u}},function(e,t,n){var r=n(100);e.exports=function(e){return r(e)?e:[]}},function(e){"use strict";e.exports=function(){var t=window.OT,n=window.TB;return function(){var e=window.OT;return window.OT=t,window.TB=n,e}}},function(e,t,n){"use strict";var a=n(2)(n(247));e.exports=function(i){function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.default)(i,t);return Object.setPrototypeOf(r,o.prototype),r}return o.prototype=Object.create(i.prototype),Object.defineProperties(o.prototype,function(t){var n={};return Object.getOwnPropertyNames(t).forEach(function(e){n[e]=Object.getOwnPropertyDescriptor(t,e)}),n}(i.prototype)),Object.keys(i).forEach(function(e){o[e]=i[e]}),o}},function(e,t,p){"use strict";var h=p(28);e.exports=function(e,t){var n=e&&e.window,r={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var i in t)hasOwnProperty.call(t,i)&&(r[i]=t[i]);var o=h.log,a=h.detectBrowser(n),s=p(526)||null,c=p(528)||null,u=p(532)||null,d=p(534)||null,l=p(535)||null,f={browserDetails:a,commonShim:l,extractVersion:h.extractVersion,disableLog:h.disableLog,disableWarnings:h.disableWarnings};switch(a.browser){case"chrome":if(!s||!s.shimPeerConnection||!r.shimChrome)return o("Chrome shim is not included in this adapter release."),f;o("adapter.js shimming chrome."),f.browserShim=s,l.shimCreateObjectURL(n),s.shimGetUserMedia(n),s.shimMediaStream(n),s.shimSourceObject(n),s.shimPeerConnection(n),s.shimOnTrack(n),s.shimAddTrackRemoveTrack(n),s.shimGetSendersWithDtmf(n),s.shimSenderReceiverGetStats(n),s.fixNegotiationNeeded(n),l.shimRTCIceCandidate(n),l.shimMaxMessageSize(n),l.shimSendThrowTypeError(n);break;case"firefox":if(!u||!u.shimPeerConnection||!r.shimFirefox)return o("Firefox shim is not included in this adapter release."),f;o("adapter.js shimming firefox."),f.browserShim=u,l.shimCreateObjectURL(n),u.shimGetUserMedia(n),u.shimSourceObject(n),u.shimPeerConnection(n),u.shimOnTrack(n),u.shimRemoveStream(n),u.shimSenderGetStats(n),u.shimReceiverGetStats(n),u.shimRTCDataChannel(n),l.shimRTCIceCandidate(n),l.shimMaxMessageSize(n),l.shimSendThrowTypeError(n);break;case"edge":if(!c||!c.shimPeerConnection||!r.shimEdge)return o("MS edge shim is not included in this adapter release."),f;o("adapter.js shimming edge."),f.browserShim=c,l.shimCreateObjectURL(n),c.shimGetUserMedia(n),c.shimPeerConnection(n),c.shimReplaceTrack(n),c.shimGetDisplayMedia(n),l.shimMaxMessageSize(n),l.shimSendThrowTypeError(n);break;case"safari":if(!d||!r.shimSafari)return o("Safari shim is not included in this adapter release."),f;o("adapter.js shimming safari."),f.browserShim=d,l.shimCreateObjectURL(n),d.shimRTCIceServerUrls(n),d.shimCreateOfferLegacy(n),d.shimCallbacksAPI(n),d.shimLocalStreamsAPI(n),d.shimRemoteStreamsAPI(n),d.shimTrackEventTransceiver(n),d.shimGetUserMedia(n),l.shimRTCIceCandidate(n),l.shimMaxMessageSize(n),l.shimSendThrowTypeError(n);break;default:o("Unsupported browser!")}return f}},function(e,t,n){"use strict";(function(c){var u=n(28),i=u.log;function s(n,t,e){var r=e?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return n.forEach(function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)}),o.forEach(function(t){n.forEach(function(e){e.type===r&&e.trackId===t.id&&!function t(n,r,i){r&&!i.has(r.id)&&(i.set(r.id,r),Object.keys(r).forEach(function(e){e.endsWith("Id")?t(n,n.get(r[e]),i):e.endsWith("Ids")&&r[e].forEach(function(e){t(n,n.get(e),i)})}))}(n,e,i)})}),i}e.exports={shimGetUserMedia:n(527),shimMediaStream:function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},shimOnTrack:function(o){if("object"!=typeof o||!o.RTCPeerConnection||"ontrack"in o.RTCPeerConnection.prototype)u.wrapPeerConnectionEvent(o,"track",function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var e=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return i._ontrackpoly||(i._ontrackpoly=function(r){r.stream.addEventListener("addtrack",function(t){var e;e=o.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===t.track.id}):{track:t.track};var n=new Event("track");n.track=t.track,n.receiver=e,n.transceiver={receiver:e},n.streams=[r.stream],i.dispatchEvent(n)}),r.stream.getTracks().forEach(function(t){var e;e=o.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(e){return e.track&&e.track.id===t.id}):{track:t};var n=new Event("track");n.track=t,n.receiver=e,n.transceiver={receiver:e},n.streams=[r.stream],i.dispatchEvent(n)})},i.addEventListener("addstream",i._ontrackpoly)),e.apply(i,arguments)}}},shimGetSendersWithDtmf:function(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var r=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,t){var n=i.apply(this,arguments);return n||(n=r(this,e),this._senders.push(n)),n};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;t._senders=t._senders||[],o.apply(t,[e]),e.getTracks().forEach(function(e){t._senders.push(r(t,e))})};var t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var n=this;n._senders=n._senders||[],t.apply(n,[e]),e.getTracks().forEach(function(t){var e=n._senders.find(function(e){return e.track===t});e&&n._senders.splice(n._senders.indexOf(e),1)})}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=a.apply(t,[]);return e.forEach(function(e){e._pc=t}),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(o){if("object"==typeof o&&o.RTCPeerConnection&&o.RTCRtpSender&&o.RTCRtpReceiver){if(!("getStats"in o.RTCRtpSender.prototype)){var n=o.RTCPeerConnection.prototype.getSenders;n&&(o.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e});var t=o.RTCPeerConnection.prototype.addTrack;t&&(o.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),o.RTCRtpSender.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return s(e,t.track,!0)})}}if(!("getStats"in o.RTCRtpReceiver.prototype)){var r=o.RTCPeerConnection.prototype.getReceivers;r&&(o.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=r.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),u.wrapPeerConnectionEvent(o,"track",function(e){return e.receiver._pc=e.srcElement,e}),o.RTCRtpReceiver.prototype.getStats=function(){var t=this;return this._pc.getStats().then(function(e){return s(e,t.track,!1)})}}if("getStats"in o.RTCRtpSender.prototype&&"getStats"in o.RTCRtpReceiver.prototype){var a=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(e){if(0<arguments.length&&e instanceof o.MediaStreamTrack){var t,n,r,i=e;return this.getSenders().forEach(function(e){e.track===i&&(t?r=!0:t=e)}),this.getReceivers().forEach(function(e){return e.track===i&&(n?r=!0:n=e),e.track===i}),r||t&&n?c.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():c.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return a.apply(this,arguments)}}}},shimSourceObject:function(e){var n=e&&e.URL;"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;this._srcObject=e,this.src&&n.revokeObjectURL(this.src),e?(this.src=n.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&n.revokeObjectURL(t.src),t.src=n.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&n.revokeObjectURL(t.src),t.src=n.createObjectURL(e)})):this.src=""}}))},shimAddTrackRemoveTrackWithNative:function(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(e){return t._shimmedLocalStreams[e][0]})};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,t){if(!t)return r.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=r.apply(this,arguments);return this._shimmedLocalStreams[t.id]?-1===this._shimmedLocalStreams[t.id].indexOf(n)&&this._shimmedLocalStreams[t.id].push(n):this._shimmedLocalStreams[t.id]=[t,n],n};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")});var t=n.getSenders();i.apply(this,arguments);var r=n.getSenders().filter(function(e){return-1===t.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(r)};var t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],t.apply(this,arguments)};var o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(n){var r=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(function(e){var t=r._shimmedLocalStreams[e].indexOf(n);-1!==t&&r._shimmedLocalStreams[e].splice(t,1),1===r._shimmedLocalStreams[e].length&&delete r._shimmedLocalStreams[e]}),o.apply(this,arguments)}},shimAddTrackRemoveTrack:function(a){if(a.RTCPeerConnection){var e=u.detectBrowser(a);if(a.RTCPeerConnection.prototype.addTrack&&65<=e.version)return this.shimAddTrackRemoveTrackWithNative(a);var n=a.RTCPeerConnection.prototype.getLocalStreams;a.RTCPeerConnection.prototype.getLocalStreams=function(){var t=this,e=n.apply(this);return t._reverseStreams=t._reverseStreams||{},e.map(function(e){return t._reverseStreams[e.id]})};var r=a.RTCPeerConnection.prototype.addStream;a.RTCPeerConnection.prototype.addStream=function(e){var n=this;if(n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{},e.getTracks().forEach(function(t){if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError")}),!n._reverseStreams[e.id]){var t=new a.MediaStream(e.getTracks());n._streams[e.id]=t,n._reverseStreams[t.id]=e,e=t}r.apply(n,[e])};var i=a.RTCPeerConnection.prototype.removeStream;a.RTCPeerConnection.prototype.removeStream=function(e){var t=this;t._streams=t._streams||{},t._reverseStreams=t._reverseStreams||{},i.apply(t,[t._streams[e.id]||e]),delete t._reverseStreams[t._streams[e.id]?t._streams[e.id].id:e.id],delete t._streams[e.id]},a.RTCPeerConnection.prototype.addTrack=function(t,e){var n=this;if("closed"===n.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find(function(e){return e===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(n.getSenders().find(function(e){return e.track===t}))throw new DOMException("Track already exists.","InvalidAccessError");n._streams=n._streams||{},n._reverseStreams=n._reverseStreams||{};var i=n._streams[e.id];if(i)i.addTrack(t),c.resolve().then(function(){n.dispatchEvent(new Event("negotiationneeded"))});else{var o=new a.MediaStream([t]);n._streams[e.id]=o,n._reverseStreams[o.id]=e,n.addStream(o)}return n.getSenders().find(function(e){return e.track===t})},["createOffer","createAnswer"].forEach(function(e){var o=a.RTCPeerConnection.prototype[e];a.RTCPeerConnection.prototype[e]=function(e,t,n){var r=this,i=arguments;return arguments.length&&"function"==typeof e?o.apply(r,[function(e){var t=s(r,e);i[0].apply(null,[t])},function(e){i[1]&&i[1].apply(null,e)},n]):o.apply(r,arguments).then(function(e){return s(r,e)})}});var t=a.RTCPeerConnection.prototype.setLocalDescription;a.RTCPeerConnection.prototype.setLocalDescription=function(e){return arguments.length&&e.type&&(e=function(r,e){var i=e.sdp;return Object.keys(r._reverseStreams||[]).forEach(function(e){var t=r._reverseStreams[e],n=r._streams[t.id];i=i.replace(new RegExp(t.id,"g"),n.id)}),new RTCSessionDescription({type:e.type,sdp:i})}(this,e)),t.apply(this,arguments)};var o=Object.getOwnPropertyDescriptor(a.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(a.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=o.get.apply(this);return""===e.type?e:s(this,e)}}),a.RTCPeerConnection.prototype.removeTrack=function(t){var n,r=this;if("closed"===r.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!t._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(t._pc===r))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");r._streams=r._streams||{},Object.keys(r._streams).forEach(function(e){r._streams[e].getTracks().find(function(e){return t.track===e})&&(n=r._streams[e])}),n&&(1===n.getTracks().length?r.removeStream(r._reverseStreams[n.id]):n.removeTrack(t.track),r.dispatchEvent(new Event("negotiationneeded")))}}function s(r,e){var i=e.sdp;return Object.keys(r._reverseStreams||[]).forEach(function(e){var t=r._reverseStreams[e],n=r._streams[t.id];i=i.replace(new RegExp(n.id,"g"),t.id)}),new RTCSessionDescription({type:e.type,sdp:i})}},shimPeerConnection:function(r){var e=u.detectBrowser(r);if(!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=function(e,t){return i("PeerConnection"),e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy),new r.webkitRTCPeerConnection(e,t)},r.RTCPeerConnection.prototype=r.webkitRTCPeerConnection.prototype,r.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get:function(){return r.webkitRTCPeerConnection.generateCertificate}})),r.RTCPeerConnection){var s=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(e,t,n){var r=this,i=arguments;if(0<arguments.length&&"function"==typeof e)return s.apply(this,arguments);if(0===s.length&&(0===arguments.length||"function"!=typeof e))return s.apply(this,[]);function o(e){var r={};return e.result().forEach(function(t){var n={id:t.id,timestamp:t.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type};t.names().forEach(function(e){n[e]=t.stat(e)}),r[n.id]=n}),r}function a(t){return new Map(Object.keys(t).map(function(e){return[e,t[e]]}))}if(2<=arguments.length){return s.apply(this,[function(e){i[1](a(o(e)))},e])}return new c(function(t,e){s.apply(r,[function(e){t(a(o(e)))},e])}).then(t,n)},e.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var i=r.RTCPeerConnection.prototype[e];r.RTCPeerConnection.prototype[e]=function(){var n=arguments,r=this,e=new c(function(e,t){i.apply(r,[n[0],e,t])});return n.length<2?e:e.then(function(){n[1].apply(null,[])},function(e){3<=n.length&&n[2].apply(null,[e])})}}),e.version<52&&["createOffer","createAnswer"].forEach(function(e){var i=r.RTCPeerConnection.prototype[e];r.RTCPeerConnection.prototype[e]=function(e){var n=this;if(arguments.length<1||1===arguments.length&&"object"==typeof e){var r=1===arguments.length?e:void 0;return new c(function(e,t){i.apply(n,[e,t,r])})}return i.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=r.RTCPeerConnection.prototype[t];r.RTCPeerConnection.prototype[t]=function(e){return e=new("addIceCandidate"===t?r.RTCIceCandidate:r.RTCSessionDescription)(e),n.apply(this,arguments)}});var n=r.RTCPeerConnection.prototype.addIceCandidate;r.RTCPeerConnection.prototype.addIceCandidate=function(e,t){return e?n.apply(this,arguments):(t&&t.apply(null),c.resolve())}}},fixNegotiationNeeded:function(e){u.wrapPeerConnectionEvent(e,"negotiationneeded",function(e){if("stable"===e.target.signalingState)return e})},shimGetDisplayMedia:function(o,e){!o.navigator||!o.navigator.mediaDevices||"getDisplayMedia"in o.navigator.mediaDevices||("function"==typeof e?(o.navigator.mediaDevices.getDisplayMedia=function(i){return e(i).then(function(e){var t=i.video&&i.video.width,n=i.video&&i.video.height,r=i.video&&i.video.frameRate;return i.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxFrameRate:r||3}},t&&(i.video.mandatory.maxWidth=t),n&&(i.video.mandatory.maxHeight=n),o.navigator.mediaDevices.getUserMedia(i)})},o.navigator.getDisplayMedia=function(e){return u.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),o.navigator.mediaDevices.getDisplayMedia(e)}):console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}}}).call(this,n(1))},function(e,t,n){"use strict";(function(o){var u=n(28),d=u.log;e.exports=function(e){function a(i){if("object"!=typeof i||i.mandatory||i.optional)return i;var o={};return Object.keys(i).forEach(function(t){if("require"!==t&&"advanced"!==t&&"mediaSource"!==t){var n="object"==typeof i[t]?i[t]:{ideal:i[t]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){o.optional=o.optional||[];var e={};"number"==typeof n.ideal?(e[r("min",t)]=n.ideal,o.optional.push(e),(e={})[r("max",t)]=n.ideal):e[r("",t)]=n.ideal,o.optional.push(e)}void 0!==n.exact&&"number"!=typeof n.exact?(o.mandatory=o.mandatory||{},o.mandatory[r("",t)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(o.mandatory=o.mandatory||{},o.mandatory[r(e,t)]=n[e])})}}),i.advanced&&(o.optional=(o.optional||[]).concat(i.advanced)),o}function r(n,r){if(61<=s.version)return r(n);if((n=JSON.parse(JSON.stringify(n)))&&"object"==typeof n.audio){var e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};e((n=JSON.parse(JSON.stringify(n))).audio,"autoGainControl","googAutoGainControl"),e(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=a(n.audio)}if(n&&"object"==typeof n.video){var i=n.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});var o,t=s.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!c.mediaDevices.getSupportedConstraints||!c.mediaDevices.getSupportedConstraints().facingMode||t))if(delete n.video.facingMode,"environment"===i.exact||"environment"===i.ideal?o=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(o=["front"]),o)return c.mediaDevices.enumerateDevices().then(function(e){var t=(e=e.filter(function(e){return"videoinput"===e.kind})).find(function(t){return o.some(function(e){return-1!==t.label.toLowerCase().indexOf(e)})});return!t&&e.length&&-1!==o.indexOf("back")&&(t=e[e.length-1]),t&&(n.video.deviceId=i.exact?{exact:t.deviceId}:{ideal:t.deviceId}),n.video=a(n.video),d("chrome: "+JSON.stringify(n)),r(n)});n.video=a(n.video)}return d("chrome: "+JSON.stringify(n)),r(n)}function i(e){return 64<=s.version?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}}var s=u.detectBrowser(e),c=e&&e.navigator;c.getUserMedia=function(e,t,n){r(e,function(e){c.webkitGetUserMedia(e,t,function(e){n&&n(i(e))})})};function t(n){return new o(function(e,t){c.getUserMedia(n,e,t)})}if(c.mediaDevices||(c.mediaDevices={getUserMedia:t,enumerateDevices:function(){return new o(function(t){var n={audio:"audioinput",video:"videoinput"};return e.MediaStreamTrack.getSources(function(e){t(e.map(function(e){return{label:e.label,kind:n[e.kind],deviceId:e.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),c.mediaDevices.getUserMedia){var n=c.mediaDevices.getUserMedia.bind(c.mediaDevices);c.mediaDevices.getUserMedia=function(e){return r(e,function(t){return n(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("","NotFoundError");return e},function(e){return o.reject(i(e))})})}}else c.mediaDevices.getUserMedia=function(e){return t(e)};void 0===c.mediaDevices.addEventListener&&(c.mediaDevices.addEventListener=function(){d("Dummy mediaDevices.addEventListener called.")}),void 0===c.mediaDevices.removeEventListener&&(c.mediaDevices.removeEventListener=function(){d("Dummy mediaDevices.removeEventListener called.")})}}).call(this,n(1))},function(e,t,n){"use strict";var i=n(28),o=n(529),a=n(530);e.exports={shimGetUserMedia:n(531),shimPeerConnection:function(e){var t=i.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var n=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set:function(e){n.set.call(this,e);var t=new Event("enabled");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||"dtmf"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var r=a(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=o(e.iceServers)),new r(e)},e.RTCPeerConnection.prototype=r.prototype},shimReplaceTrack:function(e){!e.RTCRtpSender||"replaceTrack"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(t){if("getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&!("getDisplayMedia"in t.navigator.mediaDevices)){var n=t.navigator.getDisplayMedia;t.navigator.mediaDevices.getDisplayMedia=function(e){return n.call(t.navigator,e)},t.navigator.getDisplayMedia=function(e){return i.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),n.call(t.navigator,e)}}}}},function(e,t,n){"use strict";var o=n(28);e.exports=function(e,r){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&o.deprecated("RTCIceServer.url","RTCIceServer.urls");var n="string"==typeof t;return n&&(t=[t]),t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!i?i=!0:0===e.indexOf("stun:")&&14393<=r&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}},function(e,t,r){"use strict";(function(h){var L=r(249);function c(e,t,n,r,i){var o=L.writeRtpDescription(e.kind,t);if(o+=L.writeIceParameters(e.iceGatherer.getLocalParameters()),o+=L.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),o+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?o+="a=sendrecv\r\n":e.rtpSender?o+="a=sendonly\r\n":e.rtpReceiver?o+="a=recvonly\r\n":o+="a=inactive\r\n",e.rtpSender){var a=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=a;var s="msid:"+(r?r.id:"-")+" "+a+"\r\n";o+="a="+s,o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+s,e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+s,o+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return o+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+L.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+L.localCName+"\r\n"),o}function j(u,d){function l(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]}var f={codecs:[],headerExtensions:[],fecMechanisms:[]};return u.codecs.forEach(function(n){for(var e=0;e<d.codecs.length;e++){var t=d.codecs[e];if(n.name.toLowerCase()===t.name.toLowerCase()&&n.clockRate===t.clockRate){if("rtx"===n.name.toLowerCase()&&n.parameters&&t.parameters.apt&&(r=n,i=t,o=u.codecs,a=d.codecs,c=s=void 0,s=l(r.parameters.apt,o),c=l(i.parameters.apt,a),!s||!c||s.name.toLowerCase()!==c.name.toLowerCase()))continue;(t=JSON.parse(JSON.stringify(t))).numChannels=Math.min(n.numChannels,t.numChannels),f.codecs.push(t),t.rtcpFeedback=t.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}var r,i,o,a,s,c}),u.headerExtensions.forEach(function(e){for(var t=0;t<d.headerExtensions.length;t++){var n=d.headerExtensions[t];if(e.uri===n.uri){f.headerExtensions.push(n);break}}}),f}function n(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function U(e,t){var n=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return n||e.addRemoteCandidate(t),!n}function v(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(D,M){function P(e,t){t.addTrack(e),t.dispatchEvent(new D.MediaStreamTrackEvent("addtrack",{track:e}))}function i(e,t,n,r){var i=new Event("track");i.track=t,i.receiver=n,i.transceiver={receiver:n},i.streams=r,D.setTimeout(function(){e._dispatchEvent("track",i)})}function r(e){var t=this,n=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){t[e]=n[e].bind(n)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",e=JSON.parse(JSON.stringify(e||{})),this.usingBundle="max-bundle"===e.bundlePolicy,"negotiate"===e.rtcpMuxPolicy)throw v("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(e.rtcpMuxPolicy||(e.rtcpMuxPolicy="require"),e.iceTransportPolicy){case"all":case"relay":break;default:e.iceTransportPolicy="all"}switch(e.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:e.bundlePolicy="balanced"}if(e.iceServers=function(e,r){var i=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var n="string"==typeof t;return n&&(t=[t]),t=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!i?i=!0:0===e.indexOf("stun:")&&14393<=r&&-1===e.indexOf("?transport=udp")}),delete e.url,e.urls=n?t[0]:t,!!t.length}})}(e.iceServers||[],M),this._iceGatherers=[],e.iceCandidatePoolSize)for(var r=e.iceCandidatePoolSize;0<r;r--)this._iceGatherers.push(new D.RTCIceGatherer({iceServers:e.iceServers,gatherPolicy:e.iceTransportPolicy}));else e.iceCandidatePoolSize=0;this._config=e,this.transceivers=[],this._sdpSessionId=L.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1}Object.defineProperty(r.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(r.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),r.prototype.onicecandidate=null,r.prototype.onaddstream=null,r.prototype.ontrack=null,r.prototype.onremovestream=null,r.prototype.onsignalingstatechange=null,r.prototype.oniceconnectionstatechange=null,r.prototype.onconnectionstatechange=null,r.prototype.onicegatheringstatechange=null,r.prototype.onnegotiationneeded=null,r.prototype.ondatachannel=null,r.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},r.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},r.prototype.getConfiguration=function(){return this._config},r.prototype.getLocalStreams=function(){return this.localStreams},r.prototype.getRemoteStreams=function(){return this.remoteStreams},r.prototype._createTransceiver=function(e,t){var n=0<this.transceivers.length,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();r.iceTransport=i.iceTransport,r.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(r),r},r.prototype.addTrack=function(t,e){if(this._isClosed)throw v("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var n;if(this.transceivers.find(function(e){return e.track===t}))throw v("InvalidAccessError","Track already exists.");for(var r=0;r<this.transceivers.length;r++)this.transceivers[r].track||this.transceivers[r].kind!==t.kind||(n=this.transceivers[r]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(e)&&this.localStreams.push(e),n.track=t,n.stream=e,n.rtpSender=new D.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},r.prototype.addStream=function(t){var n=this;if(15025<=M)t.getTracks().forEach(function(e){n.addTrack(e,t)});else{var r=t.clone();t.getTracks().forEach(function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",function(e){n.enabled=e.enabled})}),r.getTracks().forEach(function(e){n.addTrack(e,r)})}},r.prototype.removeTrack=function(t){if(this._isClosed)throw v("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof D.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var e=this.transceivers.find(function(e){return e.rtpSender===t});if(!e)throw v("InvalidAccessError","Sender was not created by this connection.");var n=e.stream;e.rtpSender.stop(),e.rtpSender=null,e.track=null,e.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&-1<this.localStreams.indexOf(n)&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},r.prototype.removeStream=function(e){var n=this;e.getTracks().forEach(function(t){var e=n.getSenders().find(function(e){return e.track===t});e&&n.removeTrack(e)})},r.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},r.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},r.prototype._createIceGatherer=function(n,e){var r=this;if(e&&0<n)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new D.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,"state",{value:"new",writable:!0}),this.transceivers[n].bufferedCandidateEvents=[],this.transceivers[n].bufferCandidates=function(e){var t=!e.candidate||0===Object.keys(e.candidate).length;i.state=t?"completed":"gathering",null!==r.transceivers[n].bufferedCandidateEvents&&r.transceivers[n].bufferedCandidateEvents.push(e)},i.addEventListener("localcandidate",this.transceivers[n].bufferCandidates),i},r.prototype._gather=function(s,c){var u=this,d=this.transceivers[c].iceGatherer;if(!d.onlocalcandidate){var e=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),d.onlocalcandidate=function(e){if(!(u.usingBundle&&0<c)){var t=new Event("icecandidate");t.candidate={sdpMid:s,sdpMLineIndex:c};var n=e.candidate,r=!n||0===Object.keys(n).length;if(r)"new"!==d.state&&"gathering"!==d.state||(d.state="completed");else{"new"===d.state&&(d.state="gathering"),n.component=1,n.ufrag=d.getLocalParameters().usernameFragment;var i=L.writeCandidate(n);t.candidate=Object.assign(t.candidate,L.parseCandidate(i)),t.candidate.candidate=i,t.candidate.toJSON=function(){return{candidate:t.candidate.candidate,sdpMid:t.candidate.sdpMid,sdpMLineIndex:t.candidate.sdpMLineIndex,usernameFragment:t.candidate.usernameFragment}}}var o=L.getMediaSections(u._localDescription.sdp);o[t.candidate.sdpMLineIndex]+=r?"a=end-of-candidates\r\n":"a="+t.candidate.candidate+"\r\n",u._localDescription.sdp=L.getDescription(u._localDescription.sdp)+o.join("");var a=u.transceivers.every(function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state});"gathering"!==u.iceGatheringState&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),r||u._dispatchEvent("icecandidate",t),a&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},D.setTimeout(function(){e.forEach(function(e){d.onlocalcandidate(e)})},0)}},r.prototype._createIceAndDtlsTransports=function(){var e=this,t=new D.RTCIceTransport(null);t.onicestatechange=function(){e._updateIceConnectionState(),e._updateConnectionState()};var n=new D.RTCDtlsTransport(t);return n.ondtlsstatechange=function(){e._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,"state",{value:"failed",writable:!0}),e._updateConnectionState()},{iceTransport:t,dtlsTransport:n}},r.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},r.prototype._transceive=function(e,t,n){var r=j(e.localCapabilities,e.remoteCapabilities);t&&e.rtpSender&&(r.encodings=e.sendEncodingParameters,r.rtcp={cname:L.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(r.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(r)),n&&e.rtpReceiver&&0<r.codecs.length&&("video"===e.kind&&e.recvEncodingParameters&&M<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?r.encodings=e.recvEncodingParameters:r.encodings=[{}],r.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(r.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(r.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(r))},r.prototype.setLocalDescription=function(e){var t,l,f=this;if(-1===["offer","answer"].indexOf(e.type))return h.reject(v("TypeError",'Unsupported type "'+e.type+'"'));if(!n("setLocalDescription",e.type,f.signalingState)||f._isClosed)return h.reject(v("InvalidStateError","Can not set local "+e.type+" in state "+f.signalingState));if("offer"===e.type)t=L.splitSections(e.sdp),l=t.shift(),t.forEach(function(e,t){var n=L.parseRtpParameters(e);f.transceivers[t].localCapabilities=n}),f.transceivers.forEach(function(e,t){f._gather(e.mid,t)});else if("answer"===e.type){t=L.splitSections(f._remoteDescription.sdp),l=t.shift();var p=0<L.matchPrefix(l,"a=ice-lite").length;t.forEach(function(e,t){var n=f.transceivers[t],r=n.iceGatherer,i=n.iceTransport,o=n.dtlsTransport,a=n.localCapabilities,s=n.remoteCapabilities;if(!(L.isRejected(e)&&0===L.matchPrefix(e,"a=bundle-only").length)&&!n.rejected){var c=L.getIceParameters(e,l),u=L.getDtlsParameters(e,l);p&&(u.role="server"),f.usingBundle&&0!==t||(f._gather(n.mid,t),"new"===i.state&&i.start(r,c,p?"controlling":"controlled"),"new"===o.state&&o.start(u));var d=j(a,s);f._transceive(n,0<d.codecs.length,!1)}})}return f._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?f._updateSignalingState("have-local-offer"):f._updateSignalingState("stable"),h.resolve()},r.prototype.setRemoteDescription=function(O){var I=this;if(-1===["offer","answer"].indexOf(O.type))return h.reject(v("TypeError",'Unsupported type "'+O.type+'"'));if(!n("setRemoteDescription",O.type,I.signalingState)||I._isClosed)return h.reject(v("InvalidStateError","Can not set remote "+O.type+" in state "+I.signalingState));var A={};I.remoteStreams.forEach(function(e){A[e.id]=e});var x=[],e=L.splitSections(O.sdp),R=e.shift(),N=0<L.matchPrefix(R,"a=ice-lite").length,k=0<L.matchPrefix(R,"a=group:BUNDLE ").length;I.usingBundle=k;var t=L.matchPrefix(R,"a=ice-options:")[0];return I.canTrickleIceCandidates=!!t&&0<=t.substr(14).split(" ").indexOf("trickle"),e.forEach(function(e,t){var n=L.splitLines(e),r=L.getKind(e),i=L.isRejected(e)&&0===L.matchPrefix(e,"a=bundle-only").length,o=n[0].substr(2).split(" ")[2],a=L.getDirection(e,R),s=L.parseMsid(e),c=L.getMid(e)||L.generateIdentifier();if(i||"application"===r&&("DTLS/SCTP"===o||"UDP/DTLS/SCTP"===o))I.transceivers[t]={mid:c,kind:r,protocol:o,rejected:!0};else{var u,d,l,f,p,h,v,g,m;!i&&I.transceivers[t]&&I.transceivers[t].rejected&&(I.transceivers[t]=I._createTransceiver(r,!0));var b,y,E=L.parseRtpParameters(e);i||(b=L.getIceParameters(e,R),(y=L.getDtlsParameters(e,R)).role="client"),v=L.parseRtpEncodingParameters(e);var _=L.parseRtcpParameters(e),C=0<L.matchPrefix(e,"a=end-of-candidates",R).length,T=L.matchPrefix(e,"a=candidate:").map(function(e){return L.parseCandidate(e)}).filter(function(e){return 1===e.component});if(("offer"===O.type||"answer"===O.type)&&!i&&k&&0<t&&I.transceivers[t]&&(I._disposeIceAndDtlsTransports(t),I.transceivers[t].iceGatherer=I.transceivers[0].iceGatherer,I.transceivers[t].iceTransport=I.transceivers[0].iceTransport,I.transceivers[t].dtlsTransport=I.transceivers[0].dtlsTransport,I.transceivers[t].rtpSender&&I.transceivers[t].rtpSender.setTransport(I.transceivers[0].dtlsTransport),I.transceivers[t].rtpReceiver&&I.transceivers[t].rtpReceiver.setTransport(I.transceivers[0].dtlsTransport)),"offer"!==O.type||i){if("answer"===O.type&&!i){d=(u=I.transceivers[t]).iceGatherer,l=u.iceTransport,f=u.dtlsTransport,p=u.rtpReceiver,h=u.sendEncodingParameters,g=u.localCapabilities,I.transceivers[t].recvEncodingParameters=v,I.transceivers[t].remoteCapabilities=E,I.transceivers[t].rtcpParameters=_,T.length&&"new"===l.state&&(!N&&!C||k&&0!==t?T.forEach(function(e){U(u.iceTransport,e)}):l.setRemoteCandidates(T)),k&&0!==t||("new"===l.state&&l.start(d,b,"controlling"),"new"===f.state&&f.start(y)),!j(u.localCapabilities,u.remoteCapabilities).codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&u.sendEncodingParameters[0].rtx&&delete u.sendEncodingParameters[0].rtx,I._transceive(u,"sendrecv"===a||"recvonly"===a,"sendrecv"===a||"sendonly"===a),!p||"sendrecv"!==a&&"sendonly"!==a?delete u.rtpReceiver:(m=p.track,s?(A[s.stream]||(A[s.stream]=new D.MediaStream),P(m,A[s.stream]),x.push([m,p,A[s.stream]])):(A.default||(A.default=new D.MediaStream),P(m,A.default),x.push([m,p,A.default])))}}else{(u=I.transceivers[t]||I._createTransceiver(r)).mid=c,u.iceGatherer||(u.iceGatherer=I._createIceGatherer(t,k)),T.length&&"new"===u.iceTransport.state&&(!C||k&&0!==t?T.forEach(function(e){U(u.iceTransport,e)}):u.iceTransport.setRemoteCandidates(T)),g=D.RTCRtpReceiver.getCapabilities(r),M<15019&&(g.codecs=g.codecs.filter(function(e){return"rtx"!==e.name})),h=u.sendEncodingParameters||[{ssrc:1001*(2*t+2)}];var S,w=!1;if("sendrecv"===a||"sendonly"===a){if(w=!u.rtpReceiver,p=u.rtpReceiver||new D.RTCRtpReceiver(u.dtlsTransport,r),w)m=p.track,s&&"-"===s.stream||(S=s?(A[s.stream]||(A[s.stream]=new D.MediaStream,Object.defineProperty(A[s.stream],"id",{get:function(){return s.stream}})),Object.defineProperty(m,"id",{get:function(){return s.track}}),A[s.stream]):(A.default||(A.default=new D.MediaStream),A.default)),S&&(P(m,S),u.associatedRemoteMediaStreams.push(S)),x.push([m,p,S])}else u.rtpReceiver&&u.rtpReceiver.track&&(u.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===u.rtpReceiver.track.id});t&&function(e,t){t.removeTrack(e),t.dispatchEvent(new D.MediaStreamTrackEvent("removetrack",{track:e}))}(t,e)}),u.associatedRemoteMediaStreams=[]);u.localCapabilities=g,u.remoteCapabilities=E,u.rtpReceiver=p,u.rtcpParameters=_,u.sendEncodingParameters=h,u.recvEncodingParameters=v,I._transceive(I.transceivers[t],!1,w)}}}),void 0===I._dtlsRole&&(I._dtlsRole="offer"===O.type?"active":"passive"),I._remoteDescription={type:O.type,sdp:O.sdp},"offer"===O.type?I._updateSignalingState("have-remote-offer"):I._updateSignalingState("stable"),Object.keys(A).forEach(function(e){var r=A[e];if(r.getTracks().length){if(-1===I.remoteStreams.indexOf(r)){I.remoteStreams.push(r);var t=new Event("addstream");t.stream=r,D.setTimeout(function(){I._dispatchEvent("addstream",t)})}x.forEach(function(e){var t=e[0],n=e[1];r.id===e[2].id&&i(I,t,n,[r])})}}),x.forEach(function(e){e[2]||i(I,e[0],e[1],[])}),D.setTimeout(function(){I&&I.transceivers&&I.transceivers.forEach(function(e){e.iceTransport&&"new"===e.iceTransport.state&&0<e.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))})},4e3),h.resolve()},r.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},r.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},r.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,D.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}},0))},r.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e="new",0<t.failed?e="failed":0<t.checking?e="checking":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected?e="connected":0<t.completed&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},r.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e="new",0<t.failed?e="failed":0<t.connecting?e="connecting":0<t.disconnected?e="disconnected":0<t.new?e="new":0<t.connected&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},r.prototype.createOffer=function(e){var s=this;if(s._isClosed)return h.reject(v("InvalidStateError","Can not call createOffer after close"));var t=s.transceivers.filter(function(e){return"audio"===e.kind}).length,n=s.transceivers.filter(function(e){return"video"===e.kind}).length,r=e;if(r){if(r.mandatory||r.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==r.offerToReceiveAudio&&(t=!0===r.offerToReceiveAudio?1:!1===r.offerToReceiveAudio?0:r.offerToReceiveAudio),void 0!==r.offerToReceiveVideo&&(n=!0===r.offerToReceiveVideo?1:!1===r.offerToReceiveVideo?0:r.offerToReceiveVideo)}for(s.transceivers.forEach(function(e){"audio"===e.kind?--t<0&&(e.wantReceive=!1):"video"===e.kind&&--n<0&&(e.wantReceive=!1)});0<t||0<n;)0<t&&(s._createTransceiver("audio"),t--),0<n&&(s._createTransceiver("video"),n--);var i=L.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(e,t){var n=e.track,r=e.kind,i=e.mid||L.generateIdentifier();e.mid=i,e.iceGatherer||(e.iceGatherer=s._createIceGatherer(t,s.usingBundle));var o=D.RTCRtpSender.getCapabilities(r);M<15019&&(o.codecs=o.codecs.filter(function(e){return"rtx"!==e.name})),o.codecs.forEach(function(t){"H264"===t.name&&void 0===t.parameters["level-asymmetry-allowed"]&&(t.parameters["level-asymmetry-allowed"]="1"),e.remoteCapabilities&&e.remoteCapabilities.codecs&&e.remoteCapabilities.codecs.forEach(function(e){t.name.toLowerCase()===e.name.toLowerCase()&&t.clockRate===e.clockRate&&(t.preferredPayloadType=e.payloadType)})}),o.headerExtensions.forEach(function(t){(e.remoteCapabilities&&e.remoteCapabilities.headerExtensions||[]).forEach(function(e){t.uri===e.uri&&(t.id=e.id)})});var a=e.sendEncodingParameters||[{ssrc:1001*(2*t+1)}];n&&15019<=M&&"video"===r&&!a[0].rtx&&(a[0].rtx={ssrc:a[0].ssrc+1}),e.wantReceive&&(e.rtpReceiver=new D.RTCRtpReceiver(e.dtlsTransport,r)),e.localCapabilities=o,e.sendEncodingParameters=a}),"max-compat"!==s._config.bundlePolicy&&(i+="a=group:BUNDLE "+s.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),i+="a=ice-options:trickle\r\n",s.transceivers.forEach(function(e,t){i+=c(e,e.localCapabilities,"offer",e.stream,s._dtlsRole),i+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===s.iceGatheringState||0!==t&&s.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,i+="a="+L.writeCandidate(e)+"\r\n"}),"completed"===e.iceGatherer.state&&(i+="a=end-of-candidates\r\n"))});var o=new D.RTCSessionDescription({type:"offer",sdp:i});return h.resolve(o)},r.prototype.createAnswer=function(){var i=this;if(i._isClosed)return h.reject(v("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==i.signalingState&&"have-local-pranswer"!==i.signalingState)return h.reject(v("InvalidStateError","Can not call createAnswer in signalingState "+i.signalingState));var o=L.writeSessionBoilerplate(i._sdpSessionId,i._sdpSessionVersion++);i.usingBundle&&(o+="a=group:BUNDLE "+i.transceivers.map(function(e){return e.mid}).join(" ")+"\r\n"),o+="a=ice-options:trickle\r\n";var a=L.getMediaSections(i._remoteDescription.sdp).length;i.transceivers.forEach(function(e,t){if(!(a<t+1)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?o+="m=application 0 DTLS/SCTP 5000\r\n":o+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?o+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(o+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(o+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var n;if(e.stream)"audio"===e.kind?n=e.stream.getAudioTracks()[0]:"video"===e.kind&&(n=e.stream.getVideoTracks()[0]),n&&15019<=M&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1});var r=j(e.localCapabilities,e.remoteCapabilities);!r.codecs.filter(function(e){return"rtx"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,o+=c(e,r,"answer",e.stream,i._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(o+="a=rtcp-rsize\r\n")}});var e=new D.RTCSessionDescription({type:"answer",sdp:o});return h.resolve(e)},r.prototype.addIceCandidate=function(c){var u,d=this;return c&&void 0===c.sdpMLineIndex&&!c.sdpMid?h.reject(new TypeError("sdpMLineIndex or sdpMid required")):new h(function(e,t){if(!d._remoteDescription)return t(v("InvalidStateError","Can not add ICE candidate without a remote description"));if(c&&""!==c.candidate){var n=c.sdpMLineIndex;if(c.sdpMid)for(var r=0;r<d.transceivers.length;r++)if(d.transceivers[r].mid===c.sdpMid){n=r;break}var i=d.transceivers[n];if(!i)return t(v("OperationError","Can not add ICE candidate"));if(i.rejected)return e();var o=0<Object.keys(c.candidate).length?L.parseCandidate(c.candidate):{};if("tcp"===o.protocol&&(0===o.port||9===o.port))return e();if(o.component&&1!==o.component)return e();if((0===n||0<n&&i.iceTransport!==d.transceivers[0].iceTransport)&&!U(i.iceTransport,o))return t(v("OperationError","Can not add ICE candidate"));var a=c.candidate.trim();0===a.indexOf("a=")&&(a=a.substr(2)),(u=L.getMediaSections(d._remoteDescription.sdp))[n]+="a="+(o.type?a:"end-of-candidates")+"\r\n",d._remoteDescription.sdp=L.getDescription(d._remoteDescription.sdp)+u.join("")}else for(var s=0;s<d.transceivers.length&&(d.transceivers[s].rejected||(d.transceivers[s].iceTransport.addRemoteCandidate({}),(u=L.getMediaSections(d._remoteDescription.sdp))[s]+="a=end-of-candidates\r\n",d._remoteDescription.sdp=L.getDescription(d._remoteDescription.sdp)+u.join(""),!d.usingBundle));s++);e()})},r.prototype.getStats=function(t){if(t&&t instanceof D.MediaStreamTrack){var n=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)}),!n)throw v("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach(function(t){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(e){t[e]&&r.push(t[e].getStats())})}),h.all(r).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})};["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(e){var t=D[e];if(t&&t.prototype&&t.prototype.getStats){var n=t.prototype.getStats;t.prototype.getStats=function(){return n.apply(this).then(function(t){var n=new Map;return Object.keys(t).forEach(function(e){t[e].type=function(e){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type}(t[e]),n.set(e,t[e])}),n})}}});var e=["createOffer","createAnswer"];return e.forEach(function(e){var i=r.prototype[e];r.prototype[e]=function(e,t,n){var r=arguments;return"function"==typeof r[0]||"function"==typeof r[1]?i.apply(this,[n]).then(function(e){"function"==typeof r[0]&&r[0].apply(null,[e])},function(e){"function"==typeof r[1]&&r[1].apply(null,[e])}):i.apply(this,arguments)}}),(e=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach(function(e){var n=r.prototype[e];r.prototype[e]=function(){var t=arguments;return"function"==typeof t[1]||"function"==typeof t[2]?n.apply(this,arguments).then(function(){"function"==typeof t[1]&&t[1].apply(null)},function(e){"function"==typeof t[2]&&t[2].apply(null,[e])}):n.apply(this,arguments)}}),["getStats"].forEach(function(e){var t=r.prototype[e];r.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then(function(){"function"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),r}}).call(this,r(1))},function(e,t,n){"use strict";(function(r){e.exports=function(e){var t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return r.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}}(e))})}}}).call(this,n(1))},function(e,t,n){"use strict";(function(o){var a=n(28);e.exports={shimGetUserMedia:n(533),shimOnTrack:function(e){"object"!=typeof e||!e.RTCPeerConnection||"ontrack"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=e),this.addEventListener("addstream",this._ontrackpoly=function(n){n.stream.getTracks().forEach(function(e){var t=new Event("track");t.track=e,t.receiver={track:e},t.transceiver={receiver:t.receiver},t.streams=[n.stream],this.dispatchEvent(t)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(e){"object"==typeof e&&(!e.HTMLMediaElement||"srcObject"in e.HTMLMediaElement.prototype||Object.defineProperty(e.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(e){this.mozSrcObject=e}}))},shimPeerConnection:function(s){var c=a.detectBrowser(s);if("object"==typeof s&&(s.RTCPeerConnection||s.mozRTCPeerConnection)){s.RTCPeerConnection||(s.RTCPeerConnection=function(e,t){if(c.version<38&&e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];if(i.hasOwnProperty("urls"))for(var o=0;o<i.urls.length;o++){var a={url:i.urls[o]};0===i.urls[o].indexOf("turn")&&(a.username=i.username,a.credential=i.credential),n.push(a)}else n.push(e.iceServers[r])}e.iceServers=n}return new s.mozRTCPeerConnection(e,t)},s.RTCPeerConnection.prototype=s.mozRTCPeerConnection.prototype,s.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(s.RTCPeerConnection,"generateCertificate",{get:function(){return s.mozRTCPeerConnection.generateCertificate}}),s.RTCSessionDescription=s.mozRTCSessionDescription,s.RTCIceCandidate=s.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var n=s.RTCPeerConnection.prototype[t];s.RTCPeerConnection.prototype[t]=function(e){return e=new("addIceCandidate"===t?s.RTCIceCandidate:s.RTCSessionDescription)(e),n.apply(this,arguments)}});var n=s.RTCPeerConnection.prototype.addIceCandidate;s.RTCPeerConnection.prototype.addIceCandidate=function(e,t){return e?n.apply(this,arguments):(t&&t.apply(null),o.resolve())};var r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=s.RTCPeerConnection.prototype.getStats;s.RTCPeerConnection.prototype.getStats=function(e,t,n){return i.apply(this,[e||null]).then(function(n){if(c.version<48&&(n=function(t){var n=new Map;return Object.keys(t).forEach(function(e){n.set(e,t[e]),n[e]=t[e]}),n}(n)),c.version<53&&!t)try{n.forEach(function(e){e.type=r[e.type]||e.type})}catch(e){if("TypeError"!==e.name)throw e;n.forEach(function(e,t){n.set(t,Object.assign({},e,{type:r[e.type]||e.type}))})}return n}).then(t,n)}}},shimSenderGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)){var n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e});var t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=t.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):o.resolve(new Map)}}},shimReceiverGetStats:function(e){if("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var t=this,e=n.apply(t,[]);return e.forEach(function(e){e._pc=t}),e}),a.wrapPeerConnectionEvent(e,"track",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){var n=this;a.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(e){e.track&&-1!==t.getTracks().indexOf(e.track)&&n.removeTrack(e)})})},shimRTCDataChannel:function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},shimGetDisplayMedia:function(n,r){!n.navigator||!n.navigator.mediaDevices||"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=function(e){if(e&&e.video)return!0===e.video?e.video={mediaSource:r}:e.video.mediaSource=r,n.navigator.mediaDevices.getUserMedia(e);var t=new DOMException("getDisplayMedia without video constraints is undefined");return t.name="NotFoundError",t.code=8,o.reject(t)},n.navigator.getDisplayMedia=function(e){return a.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),n.navigator.mediaDevices.getDisplayMedia(e)})}}}).call(this,n(1))},function(e,t,n){"use strict";(function(f){var p=n(28),h=p.log;e.exports=function(e){function i(e){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[e.name]||e.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[e.message]||e.message,constraint:e.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}}function r(e,t,n){function r(r){if("object"!=typeof r||r.require)return r;var i=[];return Object.keys(r).forEach(function(e){if("require"!==e&&"advanced"!==e&&"mediaSource"!==e){var t=r[e]="object"==typeof r[e]?r[e]:{ideal:r[e]};if(void 0===t.min&&void 0===t.max&&void 0===t.exact||i.push(e),void 0!==t.exact&&("number"==typeof t.exact?t.min=t.max=t.exact:r[e]=t.exact,delete t.exact),void 0!==t.ideal){r.advanced=r.advanced||[];var n={};"number"==typeof t.ideal?n[e]={min:t.ideal,max:t.ideal}:n[e]=t.ideal,r.advanced.push(n),delete t.ideal,Object.keys(t).length||delete r[e]}}}),i.length&&(r.require=i),r}return e=JSON.parse(JSON.stringify(e)),o.version<38&&(h("spec: "+JSON.stringify(e)),e.audio&&(e.audio=r(e.audio)),e.video&&(e.video=r(e.video)),h("ff37: "+JSON.stringify(e))),a.mozGetUserMedia(e,t,function(e){n(i(e))})}var o=p.detectBrowser(e),a=e&&e.navigator,t=e&&e.MediaStreamTrack;if(a.mediaDevices||(a.mediaDevices={getUserMedia:function(n){return new f(function(e,t){r(n,e,t)})},addEventListener:function(){},removeEventListener:function(){}}),a.mediaDevices.enumerateDevices=a.mediaDevices.enumerateDevices||function(){return new f(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},o.version<41){var n=a.mediaDevices.enumerateDevices.bind(a.mediaDevices);a.mediaDevices.enumerateDevices=function(){return n().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}if(o.version<49){var s=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(t){return s(t).then(function(e){if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach(function(e){e.stop()}),new DOMException("The object can not be found here.","NotFoundError");return e},function(e){return f.reject(i(e))})}}if(!(55<o.version&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){var c=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},u=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(e){return"object"==typeof e&&"object"==typeof e.audio&&(e=JSON.parse(JSON.stringify(e)),c(e.audio,"autoGainControl","mozAutoGainControl"),c(e.audio,"noiseSuppression","mozNoiseSuppression")),u(e)},t&&t.prototype.getSettings){var d=t.prototype.getSettings;t.prototype.getSettings=function(){var e=d.apply(this,arguments);return c(e,"mozAutoGainControl","autoGainControl"),c(e,"mozNoiseSuppression","noiseSuppression"),e}}if(t&&t.prototype.applyConstraints){var l=t.prototype.applyConstraints;t.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"==typeof e&&(e=JSON.parse(JSON.stringify(e)),c(e,"autoGainControl","mozAutoGainControl"),c(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}a.getUserMedia=function(e,t,n){if(o.version<44)return r(e,t,n);p.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(e).then(t,n)}}}).call(this,n(1))},function(e,t,n){"use strict";(function(u){var a=n(28);e.exports={shimLocalStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getStreamById=function(t){var n=null;return this._localStreams&&this._localStreams.forEach(function(e){e.id===t&&(n=e)}),this._remoteStreams&&this._remoteStreams.forEach(function(e){e.id===t&&(n=e)}),n}),!("addStream"in e.RTCPeerConnection.prototype)){var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),-1===this._localStreams.indexOf(t)&&this._localStreams.push(t);var n=this;t.getTracks().forEach(function(e){r.call(n,e,t)})},e.RTCPeerConnection.prototype.addTrack=function(e,t){return t&&(this._localStreams?-1===this._localStreams.indexOf(t)&&this._localStreams.push(t):this._localStreams=[t]),r.call(this,e,t)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);var t=this._localStreams.indexOf(e);if(-1!==t){this._localStreams.splice(t,1);var n=this,r=e.getTracks();this.getSenders().forEach(function(e){-1!==r.indexOf(e.track)&&n.removeTrack(e)})}})}},shimRemoteStreamsAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=e)}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(n._remoteStreams||(n._remoteStreams=[]),!(0<=n._remoteStreams.indexOf(e))){n._remoteStreams.push(e);var t=new Event("addstream");t.stream=e,n.dispatchEvent(t)}})}),t.apply(n,arguments)}}},shimCallbacksAPI:function(e){if("object"==typeof e&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,o=t.createOffer,a=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t,n){var r=2<=arguments.length?n:e,i=o.apply(this,[r]);return t?(i.then(e,t),u.resolve()):i},t.createAnswer=function(e,t,n){var r=2<=arguments.length?n:e,i=a.apply(this,[r]);return t?(i.then(e,t),u.resolve()):i};var n=function(e,t,n){var r=i.apply(this,[e]);return n?(r.then(t,n),u.resolve()):r};t.setLocalDescription=n,n=function(e,t,n){var r=s.apply(this,[e]);return n?(r.then(t,n),u.resolve()):r},t.setRemoteDescription=n,n=function(e,t,n){var r=c.apply(this,[e]);return n?(r.then(t,n),u.resolve()):r},t.addIceCandidate=n}},shimGetUserMedia:function(e){var r=e&&e.navigator;r.getUserMedia||(r.webkitGetUserMedia?r.getUserMedia=r.webkitGetUserMedia.bind(r):r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(e,t,n){r.mediaDevices.getUserMedia(e).then(t,n)}.bind(r)))},shimRTCIceServerUrls:function(e){var o=e.RTCPeerConnection;e.RTCPeerConnection=function(e,t){if(e&&e.iceServers){for(var n=[],r=0;r<e.iceServers.length;r++){var i=e.iceServers[r];!i.hasOwnProperty("urls")&&i.hasOwnProperty("url")?(a.deprecated("RTCIceServer.url","RTCIceServer.urls"),(i=JSON.parse(JSON.stringify(i))).urls=i.url,delete i.url,n.push(i)):n.push(e.iceServers[r])}e.iceServers=n}return new o(e,t)},e.RTCPeerConnection.prototype=o.prototype,"generateCertificate"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return o.generateCertificate}})},shimTrackEventTransceiver:function(e){"object"==typeof e&&e.RTCPeerConnection&&"receiver"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(e){var r=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var t=this.getTransceivers().find(function(e){return e.sender.track&&"audio"===e.sender.track.kind});!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return e.sender.track&&"video"===e.sender.track.kind});!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection("sendonly"):"recvonly"===n.direction&&n.setDirection("inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return r.apply(this,arguments)}}}}).call(this,n(1))},function(e,t,n){"use strict";var c=n(249),u=n(28);e.exports={shimRTCIceCandidate:function(t){if(t.RTCIceCandidate&&!(t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)){var i=t.RTCIceCandidate;t.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var t=new i(e),n=c.parseCandidate(e.candidate),r=Object.assign(t,n);return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new i(e)},t.RTCIceCandidate.prototype=i.prototype,u.wrapPeerConnectionEvent(t,"icecandidate",function(e){return e.candidate&&Object.defineProperty(e,"candidate",{value:new t.RTCIceCandidate(e.candidate),writable:"false"}),e})}},shimCreateObjectURL:function(e){var t=e&&e.URL;if("object"==typeof e&&e.HTMLMediaElement&&"srcObject"in e.HTMLMediaElement.prototype&&t.createObjectURL&&t.revokeObjectURL){var n=t.createObjectURL.bind(t),r=t.revokeObjectURL.bind(t),i=new Map,o=0;t.createObjectURL=function(e){if("getTracks"in e){var t="polyblob:"+ ++o;return i.set(t,e),u.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),t}return n(e)},t.revokeObjectURL=function(e){r(e),i.delete(e)};var a=Object.getOwnPropertyDescriptor(e.HTMLMediaElement.prototype,"src");Object.defineProperty(e.HTMLMediaElement.prototype,"src",{get:function(){return a.get.apply(this)},set:function(e){return this.srcObject=i.get(e)||null,a.set.apply(this,[e])}});var s=e.HTMLMediaElement.prototype.setAttribute;e.HTMLMediaElement.prototype.setAttribute=function(e,t){return 2===arguments.length&&"src"===(""+e).toLowerCase()&&(this.srcObject=i.get(t)||null),s.apply(this,arguments)}}},shimMaxMessageSize:function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var a=u.detectBrowser(e);"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var s=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){if(this._sctp=null,function(e){var t=c.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=c.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")})}(e)){var t,n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(e),r=function(e){var t=65536;return"firefox"===a.browser&&(t=a.version<57?-1===e?16384:2147483637:a.version<60?57===a.version?65535:65536:2147483637),t}(n),i=function(e,t){var n=65536;"firefox"===a.browser&&57===a.version&&(n=65535);var r=c.matchPrefix(e.sdp,"a=max-message-size:");return 0<r.length?n=parseInt(r[0].substr(19),10):"firefox"===a.browser&&-1!==t&&(n=2147483637),n}(e,n);t=0===r&&0===i?Number.POSITIVE_INFINITY:0===r||0===i?Math.max(r,i):Math.min(r,i);var o={};Object.defineProperty(o,"maxMessageSize",{get:function(){return t}}),this._sctp=o}return s.apply(this,arguments)}}},shimSendThrowTypeError:function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},u.wrapPeerConnectionEvent(e,"datachannel",function(e){return n(e.channel,e.target),e})}function n(r,i){var o=r.send;r.send=function(e){var t=e,n=t.length||t.size||t.byteLength;if("open"===r.readyState&&i.sctp&&n>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}}}},function(e){e.exports='<div class="OT_dialog-centering"><div class="OT_dialog-centering-child"><div class="OT_root OT_dialog OT_dialog-plugin-prompt"><div role="OT_close" class="OT_closeButton"></div><div class="OT_dialog-messages"><div class="OT_dialog-messages-main">This app requires real-time communication</div></div><div class="OT_dialog-section" role="OT_downloadSection"><div class="OT_dialog-single-button-with-title"><div class="OT_dialog-button-title"><input name="OT_acceptEULA" id="OT_acceptEULA" type="checkbox" role="OT_acceptEULA"><label for="OT_acceptEULA" style="margin:0 5px">accept</label> <a target="_blank" href="http://tokbox.com/support/ie-eula">end-user license agreement</a></div><div class="OT_dialog-actions-card"><button role="OT_download" class="OT_dialog-button OT_dialog-button-large OT_dialog-button-disabled" disabled="disabled">Download plugin</button><div role="OT_close" class="OT_dialog-button OT_dialog-button-small OT_dialog-no-natural-margin OT_dialog-button-block">cancel</div></div></div></div><div class="OT_dialog-section OT_dialog-hidden" role="OT_refreshSection"><div class="OT_dialog-button-title">You will then be able to continue using this application in Internet Explorer.</div><div class="OT_dialog-button OT_dialog-button-large OT_dialog-no-natural-margin" role="OT_refresh">Refresh browser</div></div></div></div></div>'},function(e){e.exports='<div class="OT_dialog-centering"><div class="OT_dialog-centering-child"><div class="OT_ROOT OT_dialog OT_dialog-plugin-upgrading"><div class="OT_dialog-messages"><div class="OT_dialog-messages-main">One moment please... <strong class="OT_dialog-plugin-upgrade-percentage" role="OT_progressText">0%</strong></div><div class="OT_dialog-progress-bar"><div class="OT_dialog-progress-bar-fill" role="OT_progressBar" style="width:0%"></div></div><div class="OT_dialog-messages-minor OT_dialog-no-natural-margin">Please wait while the OpenTok plugin is updated</div></div></div></div></div>'},function(e){e.exports='<div class="OT_dialog-centering"><div class="OT_dialog-centering-child"><div class="OT_root OT_dialog OT_dialog-plugin-upgraded"><div class="OT_dialog-messages"><div class="OT_dialog-messages-main">Update Complete.</div><div class="OT_dialog-messages-minor">The OpenTok plugin has been succesfully updated. Please reload your browser.</div></div><div class="OT_dialog-single-button"><div class="OT_dialog-button OT_dialog-button-large OT_dialog-no-natural-margin" role="OT_refresh">Reload</div></div></div></div></div>'},function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(540),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(D,e,t){(function(k){!function(e){"use strict";var c,t=Object.prototype,u=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",a="object"==typeof D,s=e.regeneratorRuntime;if(s)a&&(D.exports=s);else{(s=e.regeneratorRuntime=a?D.exports:{}).wrap=y;var d="suspendedStart",l="suspendedYield",f="executing",p="completed",h={},v={};v[i]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(R([])));m&&m!==t&&u.call(m,i)&&(v=m);var b=T.prototype=_.prototype=Object.create(v);C.prototype=b.constructor=T,T.constructor=C,T[o]=C.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,T):(e.__proto__=T,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(b),e},s.awrap=function(e){return{__await:e}},S(w.prototype),w.prototype[r]=function(){return this},s.AsyncIterator=w,s.async=function(e,t,n,r){var i=new w(y(e,t,n,r));return s.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(b),b[o]="Generator",b[i]=function(){return this},b.toString=function(){return"[object Generator]"},s.keys=function(n){var r=[];for(var e in n)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=R,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&u.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return o.type="throw",o.arg=n,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=u.call(i,"catchLoc"),s=u.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&u.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:R(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=c),h}}}function y(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),a=new x(r||[]);return o._invoke=function(o,a,s){var c=d;return function(e,t){if(c===f)throw new Error("Generator is already running");if(c===p){if("throw"===e)throw t;return N()}for(s.method=e,s.arg=t;;){var n=s.delegate;if(n){var r=O(n,s);if(r){if(r===h)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===d)throw c=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=f;var i=E(o,a,s);if("normal"===i.type){if(c=s.done?p:l,i.arg===h)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(c=p,s.method="throw",s.arg=i.arg)}}}(e,n,a),o}function E(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function _(){}function C(){}function T(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function w(c){var t;this._invoke=function(n,r){function e(){return new k(function(e,t){!function t(e,n,r,i){var o=E(c[e],c,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&u.call(s,"__await")?k.resolve(s.__await).then(function(e){t("next",e,r,i)},function(e){t("throw",e,r,i)}):k.resolve(s).then(function(e){a.value=e,r(a)},function(e){return t("throw",e,r,i)})}i(o.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}}function O(e,t){var n=e.iterator[t.method];if(n===c){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=c,O(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=E(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(u.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=c,e.done=!0,e};return r.next=r}}return{next:N}}function N(){return{value:c,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())}).call(this,t(1))},function(e,t,a){"use strict";var s=a(27);e.exports=function(e){var t=e.analytics,n=void 0===t?new s:t,r=e.meta,i=void 0===r?a(101):r,o=e.readiness;(void 0===o?a(102):o).listen(function(e){if(-1!==i.installedVersion()){var t={version:i.installedVersion()};e&&(t.message=e),n.logEvent({action:"OTPlugin-Load",variation:e?"Failure":"Success",payload:t})}})}},function(e){"use strict";e.exports={pluginVersion:"3.0.0.161",maxPluginVersion:"3.2.0.0"}},function(e,x,R){(function(a,s){var t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},c=/%[sdj%]/g;x.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(c,function(e){if("%%"===e)return"%";if(i<=n)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])m(a)||!d(a)?o+=" "+a:o+=" "+u(a);return o},x.deprecate=function(e,t){if(void 0!==a&&!0===a.noDeprecation)return e;if(void 0===a)return function(){return x.deprecate(e,t).apply(this,arguments)};var n=!1;return function(){if(!n){if(a.throwDeprecation)throw new Error(t);a.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}};var e,r={};function u(e,t){var n={seen:[],stylize:o};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&x._extend(n,t),E(n.showHidden)&&(n.showHidden=!1),E(n.depth)&&(n.depth=2),E(n.colors)&&(n.colors=!1),E(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),f(n,e,n.depth)}function i(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function o(e,t){return e}function f(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==x.inspect&&(!n.constructor||n.constructor.prototype!==n)){var e=n.inspect(r,t);return y(e)||(e=f(t,e,r)),e}var i=function(e,t){if(E(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(b(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(t,n);if(i)return i;var o=Object.keys(n),a=function(e){var t={};return e.forEach(function(e){t[e]=!0}),t}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(n)),T(n)&&(0<=o.indexOf("message")||0<=o.indexOf("description")))return p(n);if(0===o.length){if(S(n)){var s=n.name?": "+n.name:"";return t.stylize("[Function"+s+"]","special")}if(_(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return p(n)}var c,u="",d=!1,l=["{","}"];v(n)&&(d=!0,l=["[","]"]),S(n)&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return _(n)&&(u=" "+RegExp.prototype.toString.call(n)),C(n)&&(u=" "+Date.prototype.toUTCString.call(n)),T(n)&&(u=" "+p(n)),0!==o.length||d&&0!=n.length?r<0?_(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),c=d?function(t,n,r,i,e){for(var o=[],a=0,s=n.length;a<s;++a)O(n,String(a))?o.push(h(t,n,r,i,String(a),!0)):o.push("");return e.forEach(function(e){e.match(/^\d+$/)||o.push(h(t,n,r,i,e,!0))}),o}(t,n,r,a,o):o.map(function(e){return h(t,n,r,a,e,d)}),t.seen.pop(),function(e,t,n){if(60<e.reduce(function(e,t){return 0,0<=t.indexOf("\n")&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,u,l)):l[0]+u+l[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?-1<(s=m(n)?f(e,c.value,null):f(e,c.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),E(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+s}function v(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function m(e){return null===e}function b(e){return"number"==typeof e}function y(e){return"string"==typeof e}function E(e){return void 0===e}function _(e){return d(e)&&"[object RegExp]"===n(e)}function d(e){return"object"==typeof e&&null!==e}function C(e){return d(e)&&"[object Date]"===n(e)}function T(e){return d(e)&&("[object Error]"===n(e)||e instanceof Error)}function S(e){return"function"==typeof e}function n(e){return Object.prototype.toString.call(e)}function l(e){return e<10?"0"+e.toString(10):e.toString(10)}x.debuglog=function(t){if(E(e)&&(e=a.env.NODE_DEBUG||""),t=t.toUpperCase(),!r[t])if(new RegExp("\\b"+t+"\\b","i").test(e)){var n=a.pid;r[t]=function(){var e=x.format.apply(x,arguments);console.error("%s %d: %s",t,n,e)}}else r[t]=function(){};return r[t]},(x.inspect=u).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},x.isArray=v,x.isBoolean=g,x.isNull=m,x.isNullOrUndefined=function(e){return null==e},x.isNumber=b,x.isString=y,x.isSymbol=function(e){return"symbol"==typeof e},x.isUndefined=E,x.isRegExp=_,x.isObject=d,x.isDate=C,x.isError=T,x.isFunction=S,x.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},x.isBuffer=R(544);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}x.log=function(){console.log("%s - %s",function(){var e=new Date,t=[l(e.getHours()),l(e.getMinutes()),l(e.getSeconds())].join(":");return[e.getDate(),w[e.getMonth()],t].join(" ")}(),x.format.apply(x,arguments))},x.inherits=R(545),x._extend=function(e,t){if(!t||!d(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}x.promisify=function(o){if("function"!=typeof o)throw new TypeError('The "original" argument must be of type Function');if(I&&o[I]){var e;if("function"!=typeof(e=o[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,e=new s(function(e,t){n=e,r=t}),t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);t.push(function(e,t){e?r(e):n(t)});try{o.apply(this,t)}catch(e){r(e)}return e}return Object.setPrototypeOf(e,Object.getPrototypeOf(o)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,t(o))},x.promisify.custom=I,x.callbackify=function(o){if("function"!=typeof o)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");function r(){return n.apply(i,arguments)}var i=this;o.apply(this,e).then(function(e){a.nextTick(r,null,e)},function(e){a.nextTick(A,e,r)})}return Object.setPrototypeOf(e,Object.getPrototypeOf(o)),Object.defineProperties(e,t(o)),e}}).call(this,R(68),R(1))},function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){var n,r,i;r=[],void 0===(i="function"==typeof(n=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function l(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),n=function(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)}(t,"-"),r=t.substring(0,n).split(".");return r.push(t.substring(n+1)),r}function f(e){return isNaN(Number(e))?e:Number(e)}function p(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)")}return function(e,t){[e,t].forEach(p);for(var n=l(e),r=l(t),i=0;i<Math.max(n.length-1,r.length-1);i++){var o=parseInt(n[i]||0,10),a=parseInt(r[i]||0,10);if(a<o)return 1;if(o<a)return-1}var s=n[n.length-1],c=r[r.length-1];if(s&&c){var u=s.split(".").map(f),d=c.split(".").map(f);for(i=0;i<Math.max(u.length,d.length);i++){if(void 0===u[i]||"string"==typeof d[i]&&"number"==typeof u[i])return-1;if(void 0===d[i]||"string"==typeof u[i]&&"number"==typeof d[i])return 1;if(u[i]>d[i])return 1;if(d[i]>u[i])return-1}}else if(s||c)return s?-1:1;return 0}})?n.apply(t,r):n)||(e.exports=i)},function(n,e,r){"use strict";(function(e){var t=arguments,a=r(3),s=r(150),c=r(15),u=r(548),d=r(5),l=r(0)("proxyExtras"),f=r(549),p=r(551),h=r(552);n.exports=function(n,r){var i=new function(){};i.ready={},i.ready.promise=new e(function(e,t){i.ready.resolve=e,i.ready.reject=t}),d(i),i.listenForDeviceChanges=function(){i.ready.promise.then(function(){return s(u)}).then(function(){i._.registerXCallback("devicesChanged",function(){var e=Array.prototype.slice.call(t);l.debug(e),i.emit.apply(i,["devicesChanged"].concat(e))})})},i.refCounter=new f,i.refCounter.on("remove",function(){0===i.refCounter.count&&i.cleanup()});function o(e){e?(i._=e,i.parentElement=e.parentElement,i.OTHelpers=a(e)):(i._=null,i.parentElement=null,i.OTHelpers=a())}return i.uuid="OTPlugin_loaded_"+c().replace(/-+/g,""),i.isValid=function(){return i._.valid},i.cleanup=function(){o(null),i.emit("destroy")},i.destroy=function(){0===i.refCounter.count&&i.cleanup(),i.refCounter.forEach(function(e){e.destroy()})},i.enumerateDevices=function(e){i._.enumerateDevices(e)},o(null),p(i.uuid,function(e){if(e)return r("The plugin with the mimeType of "+n.mimeType+" timed out while loading: "+e),void i.destroy();i._.setAttribute("id","tb_plugin_"+i._.uuid),i._.removeAttribute("tb_callback_id"),i.uuid=i._.uuid,i.id=i._.id,i._.on&&i._.on(-1,{customEvent:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit.apply(i,[e].concat(n))}});function t(e){if(e)return l.error("Error while starting up plugin "+i.uuid+": "+e),i.ready.reject(e),r(e),void i.destroy();i.ready.resolve(),l.debug("Plugin "+i.id+" is loaded"),r(void 0,i)}i._.initialise?(i.on("ready",t),i._.initialise()):t()}),h(i.uuid,n,function(e,t){e?l.error(e):o(t)}),i}}).call(this,r(1))},function(e){"use strict";e.exports=3e3},function(e,t,n){"use strict";var r=n(2),i=r(n(32)),o=r(n(50)),a=n(35),s=n(550),c=n(258);e.exports=function(t){function e(){var e;return(e=t.call(this)||this)._liveObjects=[],e}(0,o.default)(e,t);var n=e.prototype;return n.forEach=function(e){return this._liveObjects.forEach(e)},n.add=function(e){return this._liveObjects.push(e),this.emit("add",e),this},n.remove=function(e){var t=this,n=s(this._liveObjects,e),r=c(this._liveObjects,n);return this._liveObjects=n,r.forEach(function(e){return t.emit("remove",e)}),this},n.removeAll=function(){var t=this;this.forEach(function(e){return t.remove(e)})},(0,i.default)(e,[{key:"count",get:function(){return this._liveObjects.length}}]),e}(a)},function(e,t,n){var r=n(257),i=n(73),o=n(100),a=i(function(e,t){return o(e)?r(e,t):[]});e.exports=a},function(e){"use strict";var n={};function o(t){if(n[t]&&(clearTimeout(n[t]),n[t]=null),window[t])try{delete window[t]}catch(e){window[t]=void 0}}e.exports=function(r,i){n[r]=setTimeout(function(){o(r),i("The object timed out while loading.")},5e3),window[r]=function(){o(r);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift(null),i.apply(void 0,t)}}},function(e,t,n){"use strict";var a=n(553);e.exports=function(e,t,n){var r=t||{},i=a(e,r),o=r.doc||window.document;o.body.insertAdjacentHTML("beforeend",i),n(void 0,o.body.querySelector("#"+e+"_obj"))}},function(e,t,n){"use strict";var a=n(4);e.exports=function(e,t){var n=t||{},r=[],i=['type="'+n.mimeType+'"','id="'+e+'_obj"','tb_callback_id="'+e+'"','width="0" height="0"'],o={userAgent:a.userAgent.toLowerCase(),windowless:n.windowless,onload:e};return!0!==n.isVisible&&i.push('visibility="hidden"'),r.push("<object "+i.join(" ")+">"),Object.keys(o).forEach(function(e){r.push('<param name="'+e+'" value="'+o[e]+'" />')}),r.push("</object>"),r.join("")}},function(e){"use strict";e.exports=function(n){return n.setStream=function(e,t){return n._.setStream(e,n._.msMatchesSelector(".OT_publisher.OT_mirrored object")),t&&setTimeout(t,200),n},n}},function(e){"use strict";e.exports=function(t){return t.selectSources=function(){var e;return(e=t._).selectSources.apply(e,arguments)},t.listenForDeviceChanges(),t}},function(e,t,n){"use strict";var r=n(29);e.exports=function(e){var t=r(e);this.hasVideo=void 0!==t.video&&!1!==t.video,this.hasAudio=void 0!==t.audio&&!1!==t.audio,!0===t.video&&(t.video={}),!0===t.audio&&(t.audio={}),this.hasVideo&&!t.video.mandatory&&(t.video.mandatory={}),this.hasAudio&&!t.audio.mandatory&&(t.audio.mandatory={}),this.screenSharing=this.hasVideo&&("screen"===t.video.mandatory.chromeMediaSource||"window"===t.video.mandatory.chromeMediaSource),this.audio=t.audio,this.video=t.video,this.setVideoSource=function(e){void 0!==e?t.video.mandatory.sourceId=e:delete t.video},this.setAudioSource=function(e){void 0!==e?t.audio.mandatory.sourceId=e:delete t.audio},this.toHash=function(){return t}}},function(e,t,n){"use strict";var r=n(102).isReady,i=n(103),o=n(102).listen;e.exports=function(){var e=new function(){};return e.enumerateDevices=function(t){o(function(e){e?t(e):i.mediaCapturer.enumerateDevices(t)})},e.addListener=function(t,n){o(function(e){e||i.mediaCapturer.on("devicesChanged",t,n)})},e.removeListener=function(e,t){r()&&i.mediaCapturer.off("devicesChanged",e,t)},e}},function(e,t,n){"use strict";var o=n(5);e.exports=function(t,e,n){var r=new function(){};o(r),r.id=e.id,r.kind=e.kind,r.label=e.label,r.streamId=t,r.readyState="live";var i=!0===e.enabled||"true"===e.enabled;return Object.defineProperty(r,"enabled",{get:function(){return i},set:function(e){(i=!0===e||"true"===e)?n._.enableMediaStreamTrack(t,r.id):n._.disableMediaStreamTrack(t,r.id)}}),r.setEnabled=function(e){r.enabled=e},r.stop=function(){r.readyState="ended",r.dispatchEvent({type:"ended"})},r.getAudioVolume=function(){return n._.getAudioVolume(r.streamId,r.id)},r.setAudioVolume=function(e){n._.setAudioVolume(r.streamId,r.id,e)},r}},function(e,t,n){"use strict";var r=n(2)(n(11)),i=n(0)("VideoContainer"),o=n(3);e.exports=function(){function e(e,t){var n=this;(0,r.default)(this,"getAudioVolume",function(){var e=n.stream.getAudioTracks()[0];return e?e.getAudioVolume():0}),this._audioInputLevelMonitoringEnabled=!1,this.plugin=e,this.domElement=e._,this.OTHelpers=o(e._),this.parentElement=e._.parentNode,this.stream=t,e.refCounter.add(this)}var t=e.prototype;return t.appendTo=function(e){e&&this.domElement.parentNode!==e&&(i.debug("VideoContainer appendTo",e),e.appendChild(this.domElement),this.parentElement=e)},t.show=function(e){return i.debug("VideoContainer show"),this.domElement.removeAttribute("width"),this.domElement.removeAttribute("height"),this.plugin.setStream(this.stream,e),o.show(this.domElement),this},t.setSize=function(e,t){return this.domElement.setAttribute("width",e),this.domElement.setAttribute("height",t),this.domElement},t.getAudioInputLevel=function(){return this._audioInputLevelMonitoringEnabled||(this.domElement.enableVolumeLevelMonitoring(!0),this._audioInputLevelMonitoringEnabled=!0),this.domElement.getInputLevel()},t.setAudioVolume=function(t){return this.stream.getAudioTracks().forEach(function(e){e.setAudioVolume(t)}),this},t.setFitMode=function(e){this.domElement.fitMode(e)},t.width=function(e){return void 0!==e&&(i.debug("VideoContainer set width to "+e),this.domElement.setAttribute("width",e)),this.domElement.getAttribute("width")},t.height=function(e){return void 0!==e&&(i.debug("VideoContainer set height to "+e),this.domElement.setAttribute("height",e)),this.domElement.getAttribute("height")},t.getImgData=function(){return this.domElement.getImgData("image/png")},t.videoWidth=function(){return this.domElement.videoWidth},t.videoHeight=function(){return this.domElement.videoHeight},t.destroy=function(){this.domElement.setStream(null),this.plugin.refCounter.remove(this)},e}()},function(t,e,m){"use strict";(function(a){function i(e){return e.localDescription&&e.remoteDescription}var e=m(2),s=e(m(17)),n=e(m(18)),o=e(m(23)),c=e(m(11)),r=m(13),u=m(15),d=m(561),l=m(0)("PluginPeerConnection"),f=m(260),p=m(261),h=m(262),v=m(5),g=function(){function e(e,n,r){var i=this,t=e.iceServers;(0,c.default)(this,"onaddstream",null),(0,c.default)(this,"onremovestream",null),(0,c.default)(this,"onicecandidate",null),(0,c.default)(this,"onsignalingstatechange",null),(0,c.default)(this,"oniceconnectionstatechange",null),(0,c.default)(this,"_candidateQueue",[]),(0,c.default)(this,"_knownCandidates",[]),(0,c.default)(this,"_iceCandidatePollingCutoff",null),(0,c.default)(this,"_closed",!1),v(this),this.id=u(),this._adaptedGetStats=d(r._,this.id),this._iceServers=t.map(function(e){return(0,o.default)({},e,{username:e.username||"",credential:e.credential||""})}),r.refCounter.add(this),l.debug("register global sharedWindowClosed callback"),r._.registerXCallback("sharedWindowClosed",function(){var e=i.getLocalStreams();e&&0<e.length&&e[0].getVideoTracks()?e[0].getVideoTracks().forEach(function(e){e.stop()}):l.warn("received sharedWindowClosed for a stream with no video tracks")}),this._plugin=r,this._whenPluginReady=new a(function(e,t){r._.initPeerConnection(i.id,{iceServers:i._iceServers},n,function(){l.debug("instantiated"),e()},function(e){l.error("error instantiating",e),t(e)})}),this._bindEvents(),this._whenStreamAdded=new a(function(e){0<r._.getLocalStreams(i.id).length?e():i.addEventListener("addstream",function(){setTimeout(function(){e()},200)})})}var t=e.prototype;return t._bindEvents=function(){var e=(0,n.default)(s.default.mark(function e(){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:l.debug("binding events"),this._plugin._.on(this.id,{addStream:function(e){var t={stream:f.fromJson(e,r._plugin),target:r};r._triggerEvent("addstream",t)},removeStream:function(e){var t={stream:f.getOrCreate(e,r._plugin),target:r};r._triggerEvent("removestream",t)},iceCandidate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r._plugin._.getIceCandidates?l.debug("Ignoring deprecated ice candidate source:",t):r._iceCandidate.apply(r,t)},signalingStateChange:function(e){var t={state:r.signalingState=e,target:r};r._triggerEvent("signalingstatechange",t)},iceConnectionChange:function(e){var t={state:r.iceConnectionState=e,target:r};r._triggerEvent("iceconnectionstatechange",t)}});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t._resetIceCandidatePollingCutoff=function(){this._iceCandidatePollingCutoff=Date.now()+1e4},t._pollForIceCandidates=function(){var e=(0,n.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.debug("Polling for ice candidates"),this._resetIceCandidatePollingCutoff();case 2:if(!this._closed&&Date.now()<this._iceCandidatePollingCutoff)return this._plugin._.registerXCallback("iceCandidate",this._onCumulativeIceCandidates.bind(this)),this._plugin._.getIceCandidates(),e.next=7,new a(function(e){return setTimeout(e,1e3)});e.next=9;break;case 7:e.next=2;break;case 9:l.debug("Finished polling for ice candidates");case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.createOffer=function(){var t=(0,n.default)(s.default.mark(function e(t){var n,r,i,o=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),e.next=3,this._whenPluginReady;case 3:return e.next=5,new a(function(r,e){return o._plugin._.createOffer(o.id,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t)},e,t)});case 5:return n=e.sent,r=n[0],i=n[1],e.abrupt("return",new h({type:r,sdp:i}));case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.createAnswer=function(){var t=(0,n.default)(s.default.mark(function e(t){var n,r,i,o=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t={}),e.next=3,this._whenPluginReady;case 3:return e.next=5,new a(function(r,e){return o._plugin._.createAnswer(o.id,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r(t)},e,t)});case 5:return n=e.sent,r=n[0],i=n[1],e.abrupt("return",new h({type:r,sdp:i}));case 9:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.setLocalDescription=function(){var t=(0,n.default)(s.default.mark(function e(n){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:return l.debug("setLocalDescription"),e.next=5,new a(function(e,t){return r._plugin._.setLocalDescription(r.id,n,e,t)});case 5:if(this.localDescription=n,this._maybeProcessPendingCandidates(),this._plugin._.getIceCandidates)return e.next=10,new a(function(e){return setTimeout(e,1e3)});e.next=11;break;case 10:this._pollForIceCandidates();case 11:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.setRemoteDescription=function(){var t=(0,n.default)(s.default.mark(function e(n){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:return l.debug("setRemoteDescription"),e.next=5,new a(function(e,t){return r._plugin._.setRemoteDescription(r.id,n,e,t)});case 5:this.remoteDescription=n,this._maybeProcessPendingCandidates();case 7:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.addIceCandidate=function(){var t=(0,n.default)(s.default.mark(function e(n){var r=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:if(l.debug("addIceCandidate"),i(this)){e.next=6;break}return this._candidateQueue.push(n),e.abrupt("return",void 0);case 6:return e.abrupt("return",new a(function(e,t){return r._plugin._.addIceCandidate(r.id,n,e,t)}));case 7:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.addStream=function(){var t=(0,n.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:this._plugin._.addStream(this.id,t,{});case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.removeStream=function(){var t=(0,n.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:this._plugin._.removeStream(this.id,t);case 3:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.getRemoteStreams=function(){var t=this;return(this._plugin._.getRemoteStreams(this.id)||[]).map(function(e){return f.getOrCreate(e,t._plugin)})},t.getLocalStreams=function(){var t=this;return this._plugin._.getLocalStreams(this.id).map(function(e){return f.getOrCreate(e,t._plugin)})},t.getStreamById=function(e){return f.getOrCreate(this._plugin._.getStreamById(this.id,e),this._plugin)},t.getStats=function(){var t=(0,n.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:return e.next=4,this._whenStreamAdded;case 4:return e.abrupt("return",this._adaptedGetStats(t));case 5:case"end":return e.stop()}},e,this)}));return function(e){return t.apply(this,arguments)}}(),t.close=function(){var e=(0,n.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._whenPluginReady;case 2:this._plugin._.destroyPeerConnection(this.id),this._plugin.refCounter.remove(this),this._closed=!0;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.destroy=function(){this.close()},t._maybeProcessPendingCandidates=function(){var t=this;i(this)&&(this._candidateQueue.forEach(function(e){t._plugin._.addIceCandidate(t.id,e,function(){},function(e){l.error("Failed to process candidate"),l.error(e)})}),this._candidateQueue.splice(0,this._candidateQueue.length))},t._triggerEvent=function(e,t){l.debug("triggerEvent",e,t),r(this["on"+e])&&this["on"+e](t),this.emit(e,t)},t._iceCandidate=function(e,t,n){this._resetIceCandidatePollingCutoff();var r=new p({candidate:e,sdpMid:t,sdpMLineIndex:n});this._lastIceCandidateReceivedTime=Date.now();var i={candidate:r,target:this};this._triggerEvent("icecandidate",i)},t._onCumulativeIceCandidates=function(e){var t=this;e.slice(this._knownCandidates.length).forEach(function(e){return t._iceCandidate.apply(t,e)}),this._knownCandidates=e},e}();t.exports=function(){var r=(0,n.default)(s.default.mark(function e(t,n,r){var i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new g(t,n,r),e.next=3,i._whenPluginReady;case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}},e)}));return function(e,t,n){return r.apply(this,arguments)}}()}).call(this,m(1))},function(r,e,i){"use strict";(function(e){var t=i(562),n=i(256),s=i(37),c=i(564),u=i(568);r.exports=function(r,i){var o=t(),a=s(function(){r.registerXCallback("getStatsSuccess",n(function(e){o.pop().success(e)})),r.registerXCallback("getStatsError",n(function(e){o.pop().error(e)}))});return c(function(n){return new e(function(t,e){a(),o.push({success:function(e){t(new u(JSON.parse(e)))},error:e}),r.getStats(i,n)})})}}).call(this,i(1))},function(e,t,n){"use strict";var r=n(36);e.exports=function(){var e={},t=[];return e.push=function(e){r(0===t.length),t.push(e)},e.pop=function(){return r(1===t.length),t.pop()},e}},function(e,t,n){var r=n(91);e.exports=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=r(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}},function(e,t,n){"use strict";var r=n(565),i=n(134),o=n(566),a=n(567);e.exports=function(e){var t=a(e),n=i(function(e){return o(function(){return t(e)})},r());return function(e){return n(e)()}}},function(e){"use strict";e.exports=function(){var n=[];return function(e){var t=n.indexOf(e);return-1===t&&(t=n.length,n.push(e)),String(t)}}},function(e,t,n){"use strict";var r=n(36),i=n(105).default;e.exports=function(e){var t;return function(){return r(0===arguments.length),t||(t=i(e(),function(){t=void 0}))}}},function(t,e,n){"use strict";(function(e){var o=n(36),a=n(105).default;t.exports=function(t){var n,r,i=[];return r=function(){if(0!==i.length&&!n){var e=i.shift();n=a(t(e.input),function(){n=void 0,r()}),e.resolve(n)}},function(t){return o(arguments.length<=1),new e(function(e){i.push({input:t,resolve:e}),r()})}}}).call(this,n(1))},function(e){"use strict";function t(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}t.prototype.forEach=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n])},e.exports=t},function(e){"use strict";e.exports={usePreviousDeviceSelection:!1}},function(e,t,n){var u=n(78),d=n(264),l=n(221),f=n(571),p=n(8),h=n(67),v=n(265);e.exports=function r(i,o,a,s,c){i!==o&&l(o,function(e,t){if(p(e))c||(c=new u),f(i,o,t,a,r,s,c);else{var n=s?s(v(i,t),e,t+"",i,o,c):void 0;void 0===n&&(n=e),d(i,t,n)}},h)}},function(e,t,n){var v=n(264),g=n(179),m=n(188),b=n(53),y=n(189),E=n(62),_=n(10),C=n(100),T=n(63),S=n(13),w=n(8),O=n(131),I=n(85),A=n(265),x=n(572);e.exports=function(e,t,n,r,i,o,a){var s=A(e,n),c=A(t,n),u=a.get(c);if(u)v(e,n,u);else{var d=o?o(s,c,n+"",e,t,a):void 0,l=void 0===d;if(l){var f=_(c),p=!f&&T(c),h=!f&&!p&&I(c);d=c,f||p||h?d=_(s)?s:C(s)?b(s):p?g(c,!(l=!1)):h?m(c,!(l=!1)):[]:O(c)||E(c)?E(d=s)?d=x(s):w(s)&&!S(s)||(d=y(c)):l=!1}l&&(a.set(c,d),i(d,c,r,o,a),a.delete(c)),v(e,n,d)}}},function(e,t,n){var r=n(43),i=n(67);e.exports=function(e){return r(e,i(e))}},function(e,t,n){"use strict";var s=n(36),c=n(266),r=n(0)("normalizeConstraintInput"),u={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960}},d=[1,7,15,30];function l(e){return e._inject&&e._inject.logging||r}function f(e,t,n,r,i){if(void 0!==t){var o=n(t);return o||i.warn("Invalid "+e+" passed to the Publisher. Got: "+t+", expecting one of "+r),o}}function p(e,t){var n,r,i=l(t),o=void 0===(n=t["publish"+c(e)])||Boolean(n),a=void 0===(r=t[e+"Source"])||null!==r&&!1!==r&&("object"==typeof r?!t["isCustom"+c(e)+"Track"]&&("string"!=typeof r.deviceId?(i.warn("Invalid "+e+"Source passed to Publisher. Expected either a device ID or device."),!0):r.deviceId):"string"!=typeof r?(i.warn("Ignoring invalid "+e+"Source parameter"),!0):r);return"audio"===e&&t.isScreenSharing&&!1!==a&&(t.audioSource&&l(t).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),a=!1),{source:a,publish:o}}var h=["user","environment","left","right"];e.exports=function(e){var t,r=l(e),n=e.env||{},i=e.isScreenSharing,o=e.isCustomAudioTrack,a=e.isCustomVideoTrack;return i&&s(e.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now"),e.disableAudioProcessing&&"Firefox"===n.name&&(t={mozAutoGainControl:!1,mozNoiseSupression:!1}),{isScreenSharing:i,isCustomAudioTrack:o,isCustomVideoTrack:a,audio:p("audio",e),video:p("video",e),usingOptionalMandatoryStyle:e.usingOptionalMandatoryStyle,enableRenegotiation:e.enableRenegotiation,enableStereo:e.enableStereo,disableAudioProcessing:e.disableAudioProcessing,prefixedAudioConstraints:t,videoDimensions:f("resolution",e.resolution,function(e){return u[e]},'"'+Object.keys(u).join('", "')+'"',r),frameRate:function(e,t){return"Chrome"===e.name&&-1!==e.userAgent.indexOf("Mac OS X")&&1===t?2:t}(n,f("frameRate",e.frameRate,function(e){return-1!==d.indexOf(e)?e:void 0},d.join(","),r)),maxResolution:function(){if(void 0===e.maxResolution)return i?{width:1920,height:1920}:void 0;var n={width:e.maxResolution.width,height:e.maxResolution.height};return Object.keys(n).forEach(function(e){var t=n[e];("number"!=typeof t||1920<t)&&(r.warn("Invalid maxResolution passed to the Publisher. maxResolution."+e+" must be less than or equal to 1920"),n[e]=1920)}),n}(),facingMode:function(e,t){if(void 0===e||0<=h.indexOf(e))return e;l(t).warn("Invalid facingMode passed to Publisher. Expected one of: "+h.join(", "))}(e.facingMode,e)}}},function(e,t,n){var r=n(575)("toUpperCase");e.exports=r},function(e,t,n){var o=n(576),a=n(268),s=n(269),c=n(96);e.exports=function(i){return function(e){e=c(e);var t=a(e)?s(e):void 0,n=t?t[0]:e.charAt(0),r=t?o(t,1).join(""):e.slice(1);return n[i]()+r}}},function(e,t,n){var i=n(267);e.exports=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&r<=n?e:i(e,t,n)}},function(e){e.exports=function(e){return e.split("")}},function(e){var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+i+")"+"?",u="[\\ufe0e\\ufe0f]?",d=u+c+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+u+c+")*"),l="(?:"+[o+r+"?",r,a,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+l+d,"g");e.exports=function(e){return e.match(f)||[]}},function(e,t,n){"use strict";var r=n(0),i=n(24)(),o=n(37),a=n(136),s=n(580),c=n(583),u="/opentok/webrtc/docs/js/release-notes.html",d=i.onlyLocal(),l=r("setLogLevel"),f=o(function(){l.info("%c\n          \n   \n               \n               \n              \n                   ",'font-family: "Fire Code", Courier, "Courier New", Consolas, "DejaVu Sans Mono"'),l.info("OpenTok JS SDK "+d.version),l.info("Release notes: "+d.websiteUrl+u),l.info("Known issues: "+d.websiteUrl+u+"l#knownIssues")});function p(e){if(void 0===e||!s(a,{priority:e})&&0!==e){var t=c(a,function(e,t){return"OT."+t.toUpperCase()+" = "+e.priority}).join(", ");l.error("level must be one of: OT.NONE = 0, "+t),l.warn("Using OT.WARN instead"),e=a.warn.priority}r.setLogLevel(e),e>=a.debug.priority&&f();return l.info("OpenTok JS SDK now uses the debug library. More info at https://www.npmjs.com/package/debug#browser-support"),l.info("Changed log level to: "+e),e}p(d.debug?a.debug.priority:a.warn.priority),e.exports=p},function(e,t,n){var i=n(213),o=n(33),a=n(581),s=n(10),c=n(138);e.exports=function(e,t,n){var r=s(e)?i:a;return n&&c(e,t,n)&&(t=void 0),r(e,o(t,3))}},function(e,t,n){var o=n(270);e.exports=function(e,r){var i;return o(e,function(e,t,n){return!(i=r(e,t,n))}),!!i}},function(e,t,n){var s=n(22);e.exports=function(o,a){return function(e,t){if(null==e)return e;if(!s(e))return o(e,t);for(var n=e.length,r=a?n:-1,i=Object(e);(a?r--:++r<n)&&!1!==t(i[r],r,i););return e}}},function(e,t,n){var r=n(34),i=n(33),o=n(584),a=n(10);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t,n){var a=n(270),s=n(22);e.exports=function(e,r){var i=-1,o=s(e)?Array(e.length):[];return a(e,function(e,t,n){o[++i]=r(e,t,n)}),o}},function(e){"use strict";e.exports=function(e){return"http:"!==e.substr(0,5)&&"https:"!==e.substr(0,6)&&"data:image/png;base64,"!==e.substr(0,22)?"data:image/png;base64,"+e:e}},function(e,t,n){"use strict";var r=n(45),u=n(0)("Style");e.exports=function(e,o){var a=this,s={},c={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]};a.getAll=function(){return r(s)},a.get=function(e){return e?s[e]:a.getAll()},a.setAll=function(t,n){return Object.keys(t).forEach(function(e){a.set(e,t[e],n)}),a},a.set=function(e,t,n){var r;u.debug("setStyle: "+e.toString());var i=function(e){switch(e){case"true":return!0;case"false":return!1;default:return e}}(t);return function(e,t){var n=c[e];return void 0!==n&&(null===n||-1!==n.indexOf(t))}(e,i)?i!==(r=s[e])&&(s[e]=i,n||o(e,t,r)):u.warn("Style.set::Invalid style property passed "+e+" : "+i),a},e&&a.setAll(e,!0)}},function(e,t,n){"use strict";var r=n(45);e.exports=function(e){var t=r(e);if(t.backgroundImageURI){var n=t.backgroundImageURI.split(":")[0];t.backgroundImageURI=-1!==["http","https","data"].indexOf(n)?n:"other"}return t}},function(e,t,n){"use strict";var r=n(7),i=n(4);e.exports=function(){return"Node"!==i.name&&(!("function"!=typeof window.webkitRTCPeerConnection||!window.webkitRTCPeerConnection.prototype.addStream)||("function"==typeof window.RTCPeerConnection||("function"==typeof window.mozRTCPeerConnection&&20<i.version||r.isInstalled())))}},function(e){"use strict";e.exports=void 0!==window.WebSocket},function(e){e.exports='<div id="tb_alert"><div id="section-normal-install"><div>!</div><button role="OT_close">&#x00D7;</button><h1 data-text="Incompatible Browser">Incompatible Browser</h1><p>The video component of this application requires <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a> or <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>.</p></div><div id="section-upgrade-install"><div>!</div><button role="OT_close">&#x00D7;</button><h1 data-text="Incompatible Browser">Incompatible Browser</h1><p>The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a> or <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>.</p><p class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></p></div><div id="section-supported-mobile-browser"><div>!</div><button role="OT_close">&#x00D7;</button><h1 data-text="Incompatible Browser">Incompatible Browser</h1><p>The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com.au/chrome/browser/mobile/">Google Chrome</a>.</p><p class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></p></div><div id="section-mobile-browser"><div>!</div><button role="OT_close">&#x00D7;</button><h1 data-text="Incompatible Browser">Incompatible Browser</h1><p>The video component of this application is not supported on your mobile device\'s browser at this time.</p></div></div>'},function(t,e,n){var r=n(592),i=n(248),o=n(593),a=n(247);function s(e){var n="function"==typeof Map?new Map:void 0;return t.exports=s=function(e){if(null===e||!o(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},s(e)}t.exports=s},function(t){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,n){"use strict";(function(n){e.exports=function(e,t){return t=t||function(){},e.then(function(e){return new n(function(e){e(t())}).then(function(){return e})},function(e){return new n(function(e){e(t())}).then(function(){throw e})})}}).call(this,n(1))},function(e,t,n){var r=n(55),i=n(274),o=n(596),a=n(46);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},function(e,t,n){var r=n(95),i=n(267);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},function(e,t,n){var r=n(131);e.exports=function(e){return r(e)?void 0:e}},function(e,t,n){var s=n(33),c=n(22),u=n(31);e.exports=function(a){return function(e,t,n){var r=Object(e);if(!c(e)){var i=s(t,3);e=u(e),t=function(e){return i(r[e],e,r)}}var o=a(e,t,n);return-1<o?r[i?e[o]:o]:void 0}}},function(s,e,c){"use strict";(function(e){var t=c(2),r=t(c(17)),n=t(c(18)),i=c(0)("hasValidPeerConnection");function o(t){return new e(function(e){t.addEventListener("signalingstatechange",function(){return e(!0)}),t.createOffer({offerToReceiveAudio:1}).then(function(e){return t.setLocalDescription(e)}).then(function(){return setTimeout(function(){e(!1)},1e3)})})}function a(){return(a=(0,n.default)(r.default.mark(function e(t){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=new t({iceServers:[]}),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),i.error("Error occurred creating PeerConnection",e.t0),e.abrupt("return",!1);case 8:return e.prev=8,e.next=11,o(n);case 11:e.next=18;break;case 13:e.prev=13,e.t1=e.catch(8),i.error("Error occurred checking the validity of the PeerConnection",e.t1);try{n.close()}catch(e){}return e.abrupt("return",!1);case 18:e.prev=18,n.close(),e.next=26;break;case 22:return e.prev=22,e.t2=e.catch(18),i.error("Error occurred closing PeerConnection",e.t2),e.abrupt("return",!1);case 26:return e.abrupt("return",!0);case 27:case"end":return e.stop()}},e,null,[[0,4],[8,13],[18,22]])}))).apply(this,arguments)}s.exports=function(e){return a.apply(this,arguments)}}).call(this,c(1))},function(e,t,n){"use strict";(function(s){var c=n(29),u=n(4),d=n(601),l=n(0)("createPeerConnection"),f=n(7);e.exports=function(e){var t=e.window,n=e.config,r=e.constraints,i=e.webRTCStream;l.debug("called");var o=c(n);if(f.isInstalled())return f.initPeerConnection(o,r,i);o.iceServers=d(u.name,o.iceServers),"Chrome"===u.name&&71<u.version&&(o.sdpSemantics="plan-b");var a=new t.RTCPeerConnection(o,r);return s.resolve(a)}}).call(this,n(1))},function(e,t,n){"use strict";var i=n(6),o=n(273),r={Edge:function(e){var r=!1;return e.map(function(e){if(e){var t=e.urls||e.url&&[e.url];if(t){var n=t.filter(function(e){return 0===e.indexOf("turn:")&&-1!==e.indexOf("transport=udp")&&-1===e.indexOf("turn:[")&&!r?r=!0:0===e.indexOf("stun:")});if(0!==n.length)return i(o(e,["url","urls"]),{urls:n})}}}).filter(function(e){return void 0!==e})},Safari:function(e){return e.map(function(e){if(void 0!==e.urls&&void 0===e.url)return e;var t=e.urls||e.url&&[e.url];return i(o(e,["url","urls"]),{urls:t})})}};e.exports=function(e,t){var n=r[e];return n?n(t):t}},function(e,t,n){"use strict";function v(e){var t=e.sdp,n=e.from,r=e.to;return t.replace(new RegExp("^(a=fmtp:\\d+ .*profile-level-id=)"+n,"gmi"),"$1"+r)}var g=n(58),m=n(4),b={baseline:"42001f",constBaseline:"42e01f"};e.exports={local:{offer:function(e,t){var n=void 0===e?{}:e,r=n.simulcastStreams,i=n.audioBitrate,o=n.priorityVideoCodec,a=void 0===o?"":o,s=n.codecFlags,c=void 0===s?{}:s,u=n.enableStereo,d=void 0!==u&&u,l=n.replaceBaselineProfile,f=void 0!==l&&l,p=t;1<r&&(p=g.enableSimulcast(p,r)),0<i&&(p=g.setAudioBitrate(p,i)),p=g.modifyReceiveStereo(p,!1),p=g.modifySendStereo(p,Boolean(d)),"Edge"!==m.name&&Object.keys(c).filter(function(e){return!1===c[e]}).forEach(function(e){p=g.removeVideoCodec(p,e)}),a&&"Edge"!==m.name?p=g.reprioritizeVideoCodec(p,a,"top"):"h264"!==a&&(p=g.reprioritizeVideoCodec(p,"h264","bottom"));var h=p;return f&&(h=v({sdp:h,from:b.baseline,to:b.constBaseline})),{local:p,remote:h}},answer:function(e,t){var n=void 0===e?{}:e,r=n.audioBitrate,i=n.codecFlags,o=n.enableStereo,a=void 0!==o&&o,s=n.replaceBaselineProfile,c=void 0!==s&&s,u=t;0<r&&(u=g.setAudioBitrate(u,r)),u=g.modifyReceiveStereo(u,Boolean(a)),u=g.modifySendStereo(u,!1),i&&Object.keys(i).filter(function(e){return!1===i[e]}).forEach(function(e){u=g.removeVideoCodec(u,e)});var d=u;return c&&(d=v({sdp:d,from:b.baseline,to:b.constBaseline})),{local:u,remote:d}}},remote:{offer:function(e,t){var n=e.replaceBaselineProfile,r=void 0!==n&&n,i=t;if(-1===i.indexOf("a=rtcp-fb")){i=i.replace(/^m=video(.*)$/gim,"m=video$1\r\na=rtcp-fb:* ccm fir\r\na=rtcp-fb:* nack ")}return r&&(i=v({sdp:i,from:b.constBaseline,to:b.baseline})),{local:i}},answer:function(e,t){var n=void 0===e?{}:e,r=n.audioBitrate,i=n.replaceBaselineProfile,o=void 0!==i&&i,a=t;return 0<r&&(a=g.setAudioBitrate(a,r)),o&&(a=v({sdp:a,from:b.constBaseline,to:b.baseline})),{local:a}}}}},function(e,t,n){var r=n(42),i=n(53),o=n(44),a=n(22),s=n(604),c=n(605),u=n(214),d=n(94),l=n(269),f=n(277),p=r?r.iterator:void 0;e.exports=function(e){if(!e)return[];if(a(e))return s(e)?l(e):i(e);if(p&&e[p])return c(e[p]());var t=o(e);return("[object Map]"==t?u:"[object Set]"==t?d:f)(e)}},function(e,t,n){var r=n(30),i=n(10),o=n(19);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},function(e){e.exports=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}},function(e,t,n){var r=n(34);e.exports=function(t,e){return r(e,function(e){return t[e]})}},function(r,e,i){"use strict";(function(e){function t(e){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),e&&this.setPeerConnection(e)}var n=i(608);t.prototype.setPeerConnection=function(e){if(this.pc)throw new Error("Peer connection already set");this.pc=e,this._forwardIceCandidate=n(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},t.prototype.canAddCandidates=function(){return!!(this.pc&&"closed"!==this.pc.iceConnectionState&&this.pc.remoteDescription&&this.pc.remoteDescription.type&&this.pc.localDescription&&this.pc.localDescription.type)},t.prototype.addIceCandidate=function(n){if(this.canAddCandidates())return this._forwardIceCandidate(n);var r=this.pending;return new e(function(e,t){r.push({iceCandidate:n,resolve:e,reject:t})})},t.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},t.prototype.process=function(){for(;this.pending.length;){var e=this.pending.shift();this._forwardIceCandidate(e.iceCandidate).then(e.resolve).catch(e.reject)}},t.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},r.exports=t}).call(this,i(1))},function(e,t,n){"use strict";(function(t){e.exports=function(i,e){var o=i[e];return function(r){return new t(function(e,t){var n=o.apply(i,[r,e,t]);n&&"function"==typeof n.then&&e(n)})}}}).call(this,n(1))},function(e,t,n){"use strict";var g=n(158),m=n(4),b=n(0)("offerProcessor"),y=n(58),E=n(610);e.exports=function(a,e,t,s,c,u,d,n,l,r,i,f){function p(t,n){return function(e){b.error(t),b.error(e),r&&r(t,e,n)}}function o(e){var t=y.hasSendStereo(u.sdp),n=y.getAudioBitrate(u.sdp),r=g(c,"local","answer",{enableStereo:t,audioBitrate:n,replaceBaselineProfile:f,codecFlags:d},e.sdp),i=new s({type:e.type,sdp:r.local}),o={type:e.type,sdp:r.remote};return a.setLocalDescription(i).then(function(){return l(o)}).catch(p("Error while setting LocalDescription","SetLocalDescription"))}var h=new s({type:u.type,sdp:g(c,"remote","offer",{replaceBaselineProfile:f},u.sdp).local}),v=p("Error while setting RemoteDescription","SetRemoteDescription");return E(h,n,m,e,t).then(function(){return i(!0),h}).catch(function(e){if(i(!1),!y.hasMediaType(h.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");b.debug("Couldn't set remote description",h,e,", trying without video");var t=new s({type:u.type,sdp:y.disableMediaType(h.sdp,"video")});return b.debug("offer without video",t.sdp),t}).then(function(e){return a.setRemoteDescription(e)}).then(function(){return a.createAnswer().then(o).catch(p("Error while setting createAnswer","CreateAnswer"))}).catch(v)}},function(e,t,n){"use strict";(function(c){var u=n(7);e.exports=function(e,t,n,r,i){if(!r)return u.isInstalled()&&!function(t){return!(-1<t.indexOf("m=video")&&!u.supportedVideoCodecs.some(function(e){return-1<t.indexOf(e+"/")}))}(e.sdp)?c.reject(new Error("No supported video codec for IE")):c.resolve(!0);var o={iceServers:[]};"Chrome"===n.name&&71<n.version&&(o.sdpSemantics="plan-b");function a(){try{s.close()}catch(e){}}var s=new r(o);return s.setRemoteDescription(new i(e)).then(function(){a()}).catch(function(e){throw a(),e})}}).call(this,n(1))},function(e,t,n){"use strict";var s=n(59),c=n(612);e.exports=function(n){function r(e){var t=new c(e);return i.push(t),t.on("close",function(){!function(t){i.filter(function(e){return t!==e})}(t)}),t}var i=[],o={},a={sentMessages:0,recvMessages:0};return o.add=function(e,t){return r(n.createDataChannel(e,t))},o.addMany=function(e){for(var t in e)e.hasOwnProperty(t)&&o.add(t,e[t])},o.get=function(t,n){return s(i,function(e){return e.equals(t,n)})},o.getOrAdd=function(e,t){var n=o.get(e,t);return n||(n=o.add(e,t)),n},o.getQosData=function(){var t={sentMessages:0,recvMessages:0};return i.forEach(function(e){t.sentMessages+=e.getQosData().sentMessages,t.recvMessages+=e.getQosData().recvMessages}),t},o.sampleQos=function(){var e=o.getQosData(),t={sentMessages:e.sentMessages-a.sentMessages,recvMessages:e.recvMessages-a.recvMessages};return a=e,t},o.destroy=function(){i.forEach(function(e){e.close()}),i=[]},n.addEventListener("datachannel",function(e){r(e.channel)}),o}},function(e,t,n){"use strict";function a(e){this.data=e.data,this.source=e.source,this.lastEventId=e.lastEventId,this.origin=e.origin,this.timeStamp=e.timeStamp,this.type=e.type,this.ports=e.ports,this.path=e.path}var s=n(5),c=n(0)("DataChannel");e.exports=function(t){function n(e){return i.push(e),r}function e(e){return t.send(e),o.sentMessages++,r}var r={},i=[],o={sentMessages:0,recvMessages:0};return s(r,!0),r.label=t.label,r.id=t.id,r.reliable=t.reliable,r.negotiated=t.negotiated,r.ordered=t.ordered,r.protocol=t.protocol,r._channel=t,r.close=function(){t.close()},r.equals=function(e,t){if(r.label!==e)return!1;for(var n in t)if(t.hasOwnProperty(n)&&r[n]!==t[n])return!1;return!0},r.getQosData=function(){return o},r.send=n,t.addEventListener("open",function(){r.send=e,function(){for(var e;e=i.shift();)r.send(e)}()},!1),t.addEventListener("close",function(e){r.send=n,r.trigger("close",e)},!1),t.addEventListener("error",function(e){c.error(e)},!1),t.addEventListener("message",function(e){var t=new a(e);o.recvMessages++,r.trigger("message",t)},!1),r}},function(e,t,n){"use strict";var l=n(6),f=n(158),p=n(0)("subscribeProcessor");e.exports=function(e){function i(n,r){return function(e){p.error(n,e);var t=new Error(n);throw t.reason=e,t.prefix=r,t}}var o=e.peerConnection,a=e.NativeRTCSessionDescription,s=e.sdpTransforms,c=e.simulcastStreams,u=e.offerOverrides,t=e.offerConstraints,d=e.replaceBaselineProfile;return p.debug("subscribeProcessor: creating offer"),o.createOffer(t).then(function(e){p.debug("subscribeProcessor: offer created",e);var t=f(s,"local","offer",l({simulcastStreams:c,replaceBaselineProfile:d},u),e.sdp),n=new a({type:e.type,sdp:t.local}),r=new a({type:e.type,sdp:t.remote});return p.debug("subscribeProcessor: setting local description"),o.setLocalDescription(n).then(function(){return r},i("Error while setting LocalDescription","SetLocalDescription"))},i("Error while creating Offer","CreateOffer")).then(function(e){return{sdp:e.sdp,type:e.type}})}},function(e,t,n){"use strict";t.__esModule=!0,t.parseStatsOldAPI=s,t.parseStatsOTPlugin=c,t.parseStatsNewAPI=u,t.default=function(e,t,n,r,i){{if(o.isInstalled())return c(e,t,n,r,i);if(-1!==["Firefox","Edge","Safari"].indexOf(T.env.name))return u(e,t,n,r,i)}return s(e,t,n,r,i)};var o=n(7),T=n(3),r=n(0)("QoS"),S=n(58),i=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth"],a=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoRtt","videoWidth"],w=function(e,t){return r.debug("Raw stats for peer conn "+e.id+":",t)};function s(u,e,d,t,l){function f(e){switch(e>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}u.getStats(function(e){if(e.result){var r=e.result();w(u,r);for(var t=function(t,n){return r.filter(function(e){return e.id===n.stat(t)})[0]},n=function(e){return t("localCandidateId",e)},i=function(e){return t("remoteCandidateId",e)},o=0;o<r.length;o++){var a=r[o];a.stat&&("true"===a.stat("googActiveConnection")&&(-1<a.stat("googChannelId").indexOf("audio")?(d.audioLocalAddress=a.stat("googLocalAddress"),d.audioRemoteAddress=a.stat("googRemoteAddress"),d.audioLocalCandidateType=a.stat("googLocalCandidateType"),d.audioRemoteCandidateType=a.stat("googRemoteCandidateType"),d.audioTransportType=a.stat("googTransportType"),d.audioLocalRelayProtocol=f(n(a).stat("priority")),d.audioRemoteRelayProtocol=f(i(a).stat("priority"))):-1<a.stat("googChannelId").indexOf("video")&&(d.videoLocalAddress=a.stat("googLocalAddress"),d.videoRemoteAddress=a.stat("googRemoteAddress"),d.videoLocalCandidateType=a.stat("googLocalCandidateType"),d.videoRemoteCandidateType=a.stat("googRemoteCandidateType"),d.videoTransportType=a.stat("googTransportType"),d.videoLocalRelayProtocol=f(n(a).stat("priority")),d.videoRemoteRelayProtocol=f(i(a).stat("priority")))),c=a,0<Number(c.stat("audioInputLevel"))?(d.audioSentPackets=Number(c.stat("packetsSent")),d.audioSentPacketsLost=Number(c.stat("packetsLost")),d.audioSentBytes=Number(c.stat("bytesSent")),d.audioCodec=c.stat("googCodecName"),d.audioRtt=Number(c.stat("googRtt"))):0<Number(c.stat("audioOutputLevel"))&&(d.audioRecvPackets=Number(c.stat("packetsReceived")),d.audioRecvPacketsLost=Number(c.stat("packetsLost")),d.audioRecvBytes=Number(c.stat("bytesReceived")),d.audioCodec=c.stat("googCodecName")),s=a,0<Number(s.stat("googFrameRateSent"))?(d.videoSentBytes=Number(s.stat("bytesSent")),d.videoSentPackets=Number(s.stat("packetsSent")),d.videoSentPacketsLost=Number(s.stat("packetsLost")),d.videoRtt=Number(s.stat("googRtt")),d.videoFrameRate=Number(s.stat("googFrameRateInput")),d.videoWidth=Number(s.stat("googFrameWidthSent")),d.videoHeight=Number(s.stat("googFrameHeightSent")),d.videoFrameRateSent=Number(s.stat("googFrameRateSent")),d.videoWidthInput=Number(s.stat("googFrameWidthInput")),d.videoHeightInput=Number(s.stat("googFrameHeightInput")),d.videoCodec=s.stat("googCodecName")):0<Number(s.stat("googFrameRateReceived"))&&(d.videoRecvBytes=Number(s.stat("bytesReceived")),d.videoRecvPackets=Number(s.stat("packetsReceived")),d.videoRecvPacketsLost=Number(s.stat("packetsLost")),d.videoFrameRate=Number(s.stat("googFrameRateOutput")),d.videoFrameRateReceived=Number(s.stat("googFrameRateReceived")),d.videoFrameRateDecoded=Number(s.stat("googFrameRateDecoded")),d.videoWidth=Number(s.stat("googFrameWidthReceived")),d.videoHeight=Number(s.stat("googFrameHeightReceived")),d.videoCodec=s.stat("googCodecName")))}"videoCodec"in d&&!d.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach(function(e){d["video"+e]=d["audio"+e]})}var s,c;l(null,d)})}function c(t,e,n,r,i){t.getStats(null).then(function(e){w(t,e),e.forEach(function(e){!function(e){return"true"===e.googActiveConnection}(e)?function(e){return void 0!==e.googFrameHeightSent||void 0!==e.googFrameHeightReceived||void 0!==n.videoBytesTransferred||void 0!==e.googFrameRateSent}(e)?function(e){0<Number(e.googFrameHeightSent)?(n.videoSentBytes=Number(e.bytesSent),n.videoSentPackets=Number(e.packetsSent),n.videoSentPacketsLost=Number(e.packetsLost),n.videoRtt=Number(e.googRtt),n.videoCodec=e.googCodecName,n.videoWidth=Number(e.googFrameWidthSent),n.videoHeight=Number(e.googFrameHeightSent),n.videoFrameRateSent=Number(e.googFrameRateSent),n.videoWidthInput=Number(e.googFrameWidthInput),n.videoHeightInput=Number(e.googFrameHeightInput)):0<Number(e.googFrameHeightReceived)&&(n.videoRecvBytes=Number(e.bytesReceived),n.videoRecvPackets=Number(e.packetsReceived),n.videoRecvPacketsLost=Number(e.packetsLost),n.videoRtt=Number(e.googRtt),n.videoCodec=e.googCodecName,n.videoFrameRateReceived=Number(e.googFrameRateReceived),n.videoFrameRateDecoded=Number(e.googFrameRateDecoded),n.videoWidth=Number(e.googFrameWidthReceived),n.videoHeight=Number(e.googFrameHeightReceived)),0<Number(e.googFrameRateInput)?n.videoFrameRate=Number(e.googFrameRateInput):0<Number(e.googFrameRateOutput)&&(n.videoFrameRate=Number(e.googFrameRateOutput))}(e):function(e){0<Number(e.audioInputLevel)?(n.audioSentBytes=Number(e.bytesSent),n.audioSentPackets=Number(e.packetsSent),n.audioSentPacketsLost=Number(e.packetsLost),n.audioRtt=Number(e.googRtt),n.audioCodec=e.googCodecName):0<Number(e.audioOutputLevel)&&(n.audioRecvBytes=Number(e.bytesReceived),n.audioRecvPackets=Number(e.packetsReceived),n.audioRecvPacketsLost=Number(e.packetsLost),n.audioCodec=e.googCodecName)}(e):-1<e.googChannelId.indexOf("audio")?(n.audioLocalAddress=e.googLocalAddress,n.audioRemoteAddress=e.googRemoteAddress,n.audioLocalCandidateType=e.googLocalCandidateType,n.audioRemoteCandidateType=e.googRemoteCandidateType,n.audioTransportType=e.googTransportType):-1<e.googChannelId.indexOf("video")&&(n.videoLocalAddress=e.googLocalAddress,n.videoRemoteAddress=e.googRemoteAddress,n.videoLocalCandidateType=e.googLocalCandidateType,n.videoRemoteCandidateType=e.googRemoteCandidateType,n.videoTransportType=e.googTransportType)}),n.videoFrameRateSent&&!n.videoLocalAddress&&(n.videoLocalAddress=n.audioLocalAddress,n.videoRemoteAddress=n.audioRemoteAddress,n.videoLocalCandidateType=n.audioLocalCandidateType,n.videoRemoteCandidateType=n.audioLocalCandidateType,n.videoTransportType=n.audioTransportType),O(n,r),i(null,n)},function(e){i(e)})}function u(y,e,E,_,C){y.getStats(null).then(function(e){function t(e){var t=e.type.toLowerCase().replace(/[^a-z]/g,""),n=e.id.toLowerCase();"outboundrtp"===t||"inboundrtp"===t?(-1!==n.indexOf("rtp")&&(-1!==n.indexOf("audio")?function(e,t){if("outboundrtp"===t?(E.audioSentPackets=e.packetsSent,E.audioSentPacketsLost=e.packetsLost,E.audioSentBytes=e.bytesSent):"inboundrtp"===t&&(E.audioRecvPackets=e.packetsReceived,E.audioRecvPacketsLost=e.packetsLost,E.audioRecvBytes=e.bytesReceived),void 0===E.audioCodec&&-1!==["Safari"].indexOf(T.env.name)&&void 0!==e.codecId){var n=("answer"===y.remoteDescription.type?y.remoteDescription:y.localDescription).sdp,r=e.codecId.lastIndexOf("_"),i=S.getCodecsAndCodecMap(n,"audio");-1!==r&&void 0!==i&&(E.audioCodec=i.codecMap[e.codecId.substring(r+1)])}}(e,t):-1!==n.indexOf("video")&&function(e,t){var n=!1;if("outboundrtp"===t?(E.videoSentPackets=e.packetsSent,E.videoSentPacketsLost=e.packetsLost,E.videoSentBytes=e.bytesSent,n=0<E.videoSentBytes):"inboundrtp"===t&&(E.videoRecvPackets=e.packetsReceived,E.videoRecvPacketsLost=e.packetsLost,E.videoRecvBytes=e.bytesReceived,n=0<E.videoRecvBytes),"number"==typeof e.framerateMean&&(E.videoFrameRate=n?Number(e.framerateMean):0),void 0===E.videoCodec&&-1!==["Safari"].indexOf(T.env.name)&&void 0!==e.codecId){var r=("answer"===y.remoteDescription.type?y.remoteDescription:y.localDescription).sdp,i=e.codecId.lastIndexOf("_"),o=S.getCodecsAndCodecMap(r,"video");-1!==i&&void 0!==o&&(E.videoCodec=o.codecMap[e.codecId.substring(i+1)])}}(e,t)),e.hasOwnProperty("roundTripTime")&&("video"===e.mediaType?E.videoRtt=e.roundTripTime:"audio"===e.mediaType&&(E.audioRtt=e.roundTripTime))):"localcandidate"===t?(r=e.candidateType,o=e.ipAddress+":"+e.portNumber,s=e.protocol||e.transport):"remotecandidate"===t?(i=e.candidateType,a=e.ipAddress+":"+e.portNumber):"track"===t&&0!==n.indexOf("video")&&(c=e.frameWidth,u=e.frameHeight,"number"==typeof e.framesPerSecond&&(E.videoFrameRate=e.framesPerSecond))}var r,i,o,a,s,c,u;if("function"==typeof e[Symbol.iterator]){w(y,Array.from(e));var n=e,d=Array.isArray(n),l=0;for(n=d?n:n[Symbol.iterator]();;){var f;if(d){if(l>=n.length)break;f=n[l++]}else{if((l=n.next()).done)break;f=l.value}var p=f;t(Array.isArray(p)?p[1]:p)}}else for(var h in w(y,e),e)e.hasOwnProperty(h)&&t(e[h]);if((E.audioRecvBytes||E.audioSentBytes)&&(E.audioLocalCandidateType=r,E.audioLocalAddress=o,E.audioRemoteCandidateType=i,E.audioRemoteAddress=a,E.audioTransportType=s,void 0===E.audioCodec)){var v=("answer"===y.remoteDescription.type?y.remoteDescription:y.localDescription).sdp,g=S.getCodecs(v,"audio");E.audioCodec=g[0]}if((E.videoRecvBytes||E.videoSentBytes)&&(E.videoLocalCandidateType=r,E.videoLocalAddress=o,E.videoRemoteCandidateType=i,E.videoRemoteAddress=a,E.videoTransportType=s,void 0===E.videoCodec)){var m=("answer"===y.remoteDescription.type?y.remoteDescription:y.localDescription).sdp,b=S.getCodecs(m,"video");E.videoCodec=b[0]}O(E,_),E.videoWidth=E.videoWidth||c,E.videoHeight=E.videoHeight||u,C(null,E)}).catch(function(e){C(e)})}function O(t,e){(e?i:a).forEach(function(e){t.hasOwnProperty(e)||(t[e]=null)})}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var i=r(n(11)),o=function(){function e(){(0,i.default)(this,"value",null),(0,i.default)(this,"changeCount",0)}return e.prototype.onValue=function(e){e&&e!==this.value&&(this.value&&(this.changeCount+=1),this.value=e)},e}();t.default=o},function(e,t,n){var b=n(8),y=n(617),E=n(211),_=Math.max,C=Math.min;e.exports=function(r,n,e){var i,o,a,s,c,u,d=0,l=!1,f=!1,t=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function p(e){var t=i,n=o;return i=o=void 0,d=e,s=r.apply(n,t)}function h(e){var t=e-u;return void 0===u||n<=t||t<0||f&&a<=e-d}function v(){var e=y();if(h(e))return g(e);c=setTimeout(v,function(e){var t=n-(e-u);return f?C(t,a-(e-d)):t}(e))}function g(e){return c=void 0,t&&i?p(e):(i=o=void 0,s)}function m(){var e=y(),t=h(e);if(i=arguments,o=this,u=e,t){if(void 0===c)return function(e){return d=e,c=setTimeout(v,n),l?p(e):s}(u);if(f)return c=setTimeout(v,n),p(u)}return void 0===c&&(c=setTimeout(v,n)),s}return n=E(n)||0,b(e)&&(l=!!e.leading,a=(f="maxWait"in e)?_(E(e.maxWait)||0,n):a,t="trailing"in e?!!e.trailing:t),m.cancel=function(){void 0!==c&&clearTimeout(c),i=u=o=c=void(d=0)},m.flush=function(){return void 0===c?s:g(y())},m}},function(e,t,n){var r=n(14);e.exports=function(){return r.Date.now()}},function(e,t,n){"use strict";var r=n(37);t.check=function(e){void 0===e&&(e={});var t=e.env||n(4);return"Chrome"===t.name&&-1<t.userAgent.toLowerCase().indexOf("android")&&t.version<65},t.once=r(function(){return t.check()})},function(e,t,n){"use strict";var p=n(40),h=n(3);e.exports=function(t){function e(e){a.nodeValue=e,r.setAttribute("title",e)}function n(){s&&(clearTimeout(s),s=null),u?h.addClass(i,"OT_active"):h.removeClass(i,"OT_active"),h.removeClass(c.domElement,"OT_archiving-"+(u?"off":"on")),h.addClass(c.domElement,"OT_archiving-"+(u?"on":"off")),t.show&&u?(e(d),h.addClass(o,"OT_mode-on"),h.removeClass(o,"OT_mode-auto"),c.setDisplayMode("on"),s=setTimeout(function(){h.addClass(o,"OT_mode-auto"),h.removeClass(o,"OT_mode-on")},5e3)):t.show&&!f?(h.addClass(o,"OT_mode-on"),h.removeClass(o,"OT_mode-auto"),c.setDisplayMode("on"),e(l),s=setTimeout(function(){c.setDisplayMode("off")},5e3)):c.setDisplayMode("off")}var r,i,o,a,s,c=this,u=t.archiving,d=t.archivingStarted||"Archiving on",l=t.archivingEnded||"Archiving off",f=!0;p(this,{mode:u&&t.show?"on":"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate:function(){r=h.createElement("div",{className:"OT_archiving-light-box"},""),i=h.createElement("div",{className:"OT_archiving-light"},""),r.appendChild(i),o=h.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),a=document.createTextNode(""),o.appendChild(a),c.domElement.appendChild(r),c.domElement.appendChild(o),n()}}),this.setShowArchiveStatus=function(e){t.show=e,c.domElement&&n.call(c)},this.setArchiving=function(e){u=e,f=!1,c.domElement&&n.call(c)}}},function(e,t,M){"use strict";(function(O){var I=M(6),A=M(8),x=M(150),R=M(621),N=M(27),k=M(38),D=M(5);e.exports=function(e){void 0===e&&(e={});function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(){return y||(C.mediaDevices?(e=C.mediaDevices).getUserMedia.bind(e):h.isInstalled()?h.getUserMedia.bind(h):void 0);var e}();return r?S(function(){return r.apply(void 0,t)}):O.reject(new Error("Cannot find getUserMedia"))}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(){return y||(C.mediaDevices&&C.getDisplayMedia?C.getDisplayMedia.bind(C):C.mediaDevices&&C.mediaDevices.getDisplayMedia?(e=C.mediaDevices).getDisplayMedia.bind(e):void 0);var e}();return r?S(function(){return r.apply(void 0,t)}):O.reject(new Error("Cannot find getDisplayMedia"))}function u(e,t){var n=e;"AbortError"===n&&"string"==typeof t&&t.match(/(screen|tab).?capture/i)&&(n="ScreenCaptureError");var r=w[n];if(r){var i=p(r.name,new Error(r.message+" (getUserMedia error: "+e+")"));return i.originalMessage=t,i}var o=new Error("Unknown error while getting user media: "+e);return o.originalMessage=t,o}var t,n,r,i,o,a,d,l=e.env||M(4),f=e.Errors||M(9),p=e.otError||M(16)(),h=e.OTPlugin||M(7),v=e.logging||M(0)("getUserMedia"),g=M(622),m=e.screenSharing||M(162)(),b=e.getDisplayMediaExtensionHelper||M(287),y=e.customGetUserMedia,E=e.global||window,_=e.analytics||new N,C=E.navigator,T=E.location,S=g(),w=(t={name:f.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},n={name:f.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},r={name:f.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},i={name:f.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},o={name:f.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},a={name:f.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"},d={AbortError:{name:f.UNABLE_TO_CAPTURE_MEDIA,message:"Unable to capture media. Unknown error occurred"},NotAllowedError:t,NotFoundError:i,NotReadableError:o,OverconstrainedError:r,SecurityError:I({},t,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),TypeError:r,PermissionDeniedError:t,PermissionDismissedError:t,NotSupportedError:n,ConstraintNotSatisfiedError:r,MandatoryUnsatisfiedError:r,OverConstrainedError:r,DevicesNotFoundError:i,NoDevicesFoundError:i,HardwareUnavailableError:o,SourceUnavailableError:o,TrackStartError:o,ScreenCaptureError:a,TabCaptureError:a},R({objectToTrack:d,keys:["PermissionDeniedError","PermissionDismissedError","NotSupportedError","ConstraintNotSatisfiedError","MandatoryUnsatisfiedError","OverConstrainedError","DevicesNotFoundError","NoDevicesFoundError","HardwareUnavailableError","SourceUnavailableError","TrackStartError","ScreenCaptureError","TabCaptureError"],onUsage:function(e){_.logEvent({action:"DeprecatedPropertyUsage:getUserMedia:errorMap",variation:"Event",payload:{key:e}})}}),d);return function(e,t){if(void 0===t&&(t=!1),v.debug("getUserMedia wrapper called with",e),function(e){if(!e||!A(e))return!0;for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}(e))return v.error("Couldn't get UserMedia: All constraints were false"),D(O.reject(p(f.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))));function n(){a=!1}var r=t&&b.isSupportedInThisBrowser?c:s,i=D(r(e).catch(function(e){var i=function(e){if(A(e)&&e.name){var t=e.name,n=e.message;if("Cannot find getUserMedia"!==n&&"Cannot find getDisplayMedia"!==n||(t="Chrome"===l.name&&73<l.version&&"https:"!==E.location.protocol?"NotAllowedError":"NotSupportedError"),"Safari"===l.name&&"Error"===t){var r=Object.prototype.toString.call(e).match(/^\[object (\w+Error)\]$/);r&&(t=r[1])}var i=u(t,n);return i.constraintName=e.constraint||e.constraintName,i instanceof k||_.logEvent({action:"UnexpectedError:getUserMedia:parseErrorEvent",variation:"Event",payload:{name:i.name,message:i.message,originalMessage:i.originalMessage}}),i}if("string"!=typeof e)return _.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error was not string or object with name property",error:e}}),new Error("Unknown error type while getting media");var o=u(e);return _.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error is string",error:e}}),o}(e);if(i.name===f.UNABLE_TO_CAPTURE_SCREEN)return new O(function(e,r){m.checkCapability(function(e){if("chrome"===e.extensionRequired){if(e.extensionRegistered&&!e.extensionInstalled){var t=p(f.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,i);t.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",r(t)}else if(!e.extensionRegistered){var n=p(f.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,i);n.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",r(n)}}else r(i)})});throw i}).then(function(e){return v.debug("got stream:",{stream:e,tracks:e.getTracks(),trackLabels:e.getTracks().map(function(e){return e.label})}),e})),o=-1!==T.protocol.indexOf("https")?500:100,a=!0;return i.then(n,n),x(o).then(function(){if(a){var e=function(){return i.emit("accessDialogClosed")};i.emit("accessDialogOpened"),i.then(e,e)}}),i}}}).call(this,M(1))},function(e){"use strict";e.exports=function(e){var t=void 0===e?{}:e,r=t.objectToTrack,i=t.keys,o=t.onUsage;if(!Array.isArray(i)&&void 0!==i)throw new Error("keys must be an array, or undefined");if("function"!=typeof o)throw new Error("onUsage must be a function");if(null==r)throw new Error("Expected objectToTrack to be a trackable object");Object.keys(r).forEach(function(t){if(void 0===i||-1!==i.indexOf(t)){var n=r[t];Object.defineProperty(r,t,{get:function(){return o(t),n},set:function(e){o(t,n=e)},enumerable:!0})}})}},function(t,e,i){"use strict";(function(r){var e=i(2),s=e(i(17)),n=e(i(18));t.exports=function(){var o=[],a=!1,t=function(){var e=(0,n.default)(s.default.mark(function e(){var t,n,r,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a)return e.abrupt("return");e.next=2;break;case 2:a=!0;case 3:if(o.length)return t=o.shift(),n=t.fn,r=t.resolve,i=t.reject,e.prev=5,e.t0=r,e.next=9,n();e.next=18;break;case 9:e.t1=e.sent,(0,e.t0)(e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),i(e.t2);case 16:e.next=3;break;case 18:a=!1;case 19:case"end":return e.stop()}},e,null,[[5,13]])}));return function(){return e.apply(this,arguments)}}();return function(n){var e=new r(function(e,t){o.push({fn:n,resolve:e,reject:t})});return t(),e}}}).call(this,i(1))},function(e){"use strict";e.exports=function(e){void 0===e&&(e={});var t=null;try{var n=function(){for(var e=window;"function"!=typeof e.require&&e.parent&&e.parent!==e;)e=e.parent;return e.require}();t=e.desktopCapturer||n("electron").desktopCapturer}catch(e){}return{isSupportedInThisBrowser:null!==t,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:function(){return{isInstalled:function(e){return e(!0)},getConstraints:function(r,e,i){t.getSources({types:[r]},function(e,t){if(e)i(e);else{var n=t[0];n?i(void 0,{audio:!1,video:{mandatory:{chromeMediaSource:r,chromeMediaSourceId:n.id}}}):i(new Error("Could not find Electron source for screensharing"))}})}}}}}},function(e,t,n){"use strict";var r=n(3);e.exports={isSupportedInThisBrowser:"Firefox"===r.env.name,autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register:function(){return{isInstalled:function(e){e("object"==typeof OTScreenSharing)},getConstraints:function(e,t,n){t.video={mediaSource:e},t.browserWindow&&(t.video.browserWindow=t.browserWindow,delete t.browserWindow),void 0!==t.scrollWithPage&&(t.video.scrollWithPage=t.scrollWithPage,delete t.scrollWithPage),n(void 0,t)}}}}},function(e,t,n){"use strict";var r=n(7);e.exports={isSupportedInThisBrowser:r.isSupported(),autoRegisters:!0,extensionRequired:!0,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register:function(){return{isInstalled:function(e){e(r.isInstalled())},getConstraints:function(e,t,n){t.video.mandatory.chromeMediaSource=e,n(void 0,t)}}}}},function(e,t,r){"use strict";var n=r(2),S=n(r(17)),w=n(r(18)),c=n(r(23)),O=r(627).normaliseOptions,I=r(288).isMediaStreamTrack,i=r(36),A=r(6),x=r(141),R=r(289).default,N=r(9),k=r(71),D=r(16),M=r(5),P=r(628),L=r(4),j="getUserMedia request was aborted";e.exports=function(t){void 0===t&&(t={}),["deviceHelpers","getUserMediaHelper"].forEach(function(e){i(t[e],e+" dependency must be injected into processPubOptions")});var o=t.generateConstraintInfo||r(263),b=t.global||window,y=t.logging||r(0)("processPubOptions"),e=t.navigator||b.navigator,a=t.OTPlugin||r(7),E=t.screenSharing||r(162)(),_=t.isiOS||r(163),s=r(629)({navigator:e||{}}),n=t,C=n.deviceHelpers,T=n.getUserMediaHelper;return function(e,u,d){var l=O(e,u,y),f=P(l.videoSource),p=I(l.audioSource),h=I(l.videoSource),t=!p&&null!==l.audioSource,n=!h&&null!==l.videoSource,v=t||n,r=!f||p,g=x(l,{mirror:!f&&!h,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:f?"contain":"cover",audioFallbackEnabled:r,insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,disableAudioProcessing:!1});if(g.name&&(g.name=String(g.name)),g.constraints)y.warn(u+": You have passed your own constraints not using ours");else{var i=o((0,c.default)({isScreenSharing:f,isCustomAudioTrack:p,isCustomVideoTrack:h},k(g,["audioSource","publishAudio","videoSource","publishVideo","resolution","maxResolution","frameRate","facingMode","enableRenegotiation","enableStereo","disableAudioProcessing"]),{env:L,usingOptionalMandatoryStyle:s(f)}));A(g,i)}v&&Object.prototype.hasOwnProperty.call(g,"usePreviousDeviceSelection")&&("https:"!==L.protocol&&y.warn(u+": https:// is required for usePreviousDeviceSelection"),"IE"!==L.name&&y.warn(u+": usePreviousDeviceSelection only works in Internet Explorer"),Object.prototype.hasOwnProperty.call(a,"settings")&&(a.settings.usePreviousDeviceSelection=g.usePreviousDeviceSelection));var m={isScreenSharing:f,isCustomAudioTrack:p,isCustomVideoTrack:h,shouldAllowAudio:r,properties:g};return M(m),m.getUserMedia=(0,w.default)(S.default.mark(function e(){var r,i,t,n,o,a,s,c;return S.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.emit.apply(m,["accessDialogOpened"].concat(t))},i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.emit.apply(m,["accessDialogClosed"].concat(t))},v){e.next=7;break}return t=new b.MediaStream,p&&t.addTrack(l.audioSource),h&&t.addTrack(l.videoSource),e.abrupt("return",t);case 7:if(f)return e.next=10,E.getConstraints({onAccessDialogOpened:r,onAccessDialogClosed:i,videoSource:l.videoSource,constraints:g.constraints});e.next=15;break;case 10:if(g.constraints=e.sent,d())throw D(N.CANCEL,new Error(j));e.next=13;break;case 13:e.next=25;break;case 15:return e.next=17,C.shouldAskForDevices();case 17:if(n=e.sent,d())throw D(N.CANCEL,new Error(j));e.next=20;break;case 20:y.debug(u+": shouldAskForDevices:",n),n.video||(y.warn(u+": Setting video constraint to false, there are no video sources"),g.constraints.video=!1),n.audio||(y.warn(u+": Setting audio constraint to false, there are no audio sources"),g.constraints.audio=!1),m.videoDevices=n.videoDevices,m.audioDevices=n.audioDevices;case 25:if(o=g.constraints,y.debug(u+": onConstraintsFound",o),d())throw D(N.CANCEL,new Error(j));e.next=29;break;case 29:return a="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=188088",s=function(){var e=(0,w.default)(S.default.mark(function e(){var t,n;return S.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=T(o,f)).on("accessDialogOpened",r),t.on("accessDialogClosed",i),e.prev=3,e.next=6,t;case 6:if(n=e.sent,_()&&g.publishVideo&&n.getVideoTracks().length&&"ended"===n.getVideoTracks()[0].readyState)throw n.getTracks().forEach(function(e){return e.stop()}),new Error(a);e.next=11;break;case 11:return e.abrupt("return",n);case 14:if(e.prev=14,e.t0=e.catch(3),_()&&e.t0.name===N.HARDWARE_UNAVAILABLE)throw new Error(a);e.next=18;break;case 18:throw e.t0;case 19:return e.prev=19,setTimeout(function(){t.off("accessDialogOpened",r),t.off("accessDialogClosed",i)}),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[3,14,19,22]])}));return function(){return e.apply(this,arguments)}}(),e.next=33,R(s,function(e,t){return e.message===a&&1===t&&!d()&&1e3})();case 33:if(c=e.sent,d())throw c.getTracks().forEach(function(e){e.stop()}),D(N.CANCEL,new Error(j));e.next=37;break;case 37:return p&&c.addTrack(l.audioSource),h&&c.addTrack(l.videoSource),e.abrupt("return",c);case 40:case"end":return e.stop()}},e)})),m}}},function(e,t,n){"use strict";var o=n(288).isMediaStreamTrack,a=n(29),s=n(4);t.normaliseOptions=function(e,t,n){var r=e&&"object"==typeof e?a(e):{};if(!1===r.audioSource&&(r.audioSource=null),!1===r.videoSource&&(r.videoSource=null),void 0===r.minVideoBitrate||"number"==typeof r.minVideoBitrate&&0<r.minVideoBitrate||(n.warn(t+": Invalid minVideoBitrate in publisher properties. minVideoBitrate must be a positive number"),delete r.minVideoBitrate),void 0===r.audioBitrate||6e3<=r.audioBitrate&&r.audioBitrate<=51e4||(n.warn(t+": Invalid audioBitrate in publisher properties. audioBitrate must be a number between 6000 and 510000 bits per second"),delete r.audioBitrate),"IE"===s.name||"Firefox"===s.name&&s.version<49){var i="IE"===s.name?"Internet Explorer":"Firefox 48 and below";o(r.audioSource)&&(r.audioSource=null,n.warn(t+": Cannot use custom tracks with "+i+". Setting audioSource to null")),o(r.videoSource)&&(r.videoSource=null,n.warn(t+": Cannot use custom tracks with "+i+". Setting videoSource to null"))}return r}},function(e){"use strict";e.exports=function(e){return-1<["screen","window","tab","browser","application"].indexOf(e)}},function(e,t,n){"use strict";var r=n(4),i=r.name,o=r.version;e.exports=function(e){var t=(void 0===e?{}:e).navigator,n=void 0===t?window.navigator:t;return function(e){return e||!(n.mediaDevices&&n.mediaDevices.getUserMedia)||"Chrome"===i&&o<61}}},function(e,t,d){"use strict";(function(a){var s=d(36),c=d(9),u=d(12);e.exports=function(t){void 0===t&&(t={}),["processPubOptions"].forEach(function(e){s(t[e],e+" dependency must be injected into OT.getUserMedia")});var n=t.env||d(4),r=t.logging||d(0)("getUserMedia"),i=t.otError||d(16)(),o=t.processPubOptions;return function(e){if(void 0===e&&(e={}),"IE"!==n.name)return o(e,"OT.getUserMedia",function(){return!1}).getUserMedia().catch(function(e){throw r.error("OT.getUserMedia failed to getUserMedia: "+e),e});var t=i(c.UNSUPPORTED_BROWSER,new Error("OT.getUserMedia is not supported with Internet Explorer"),u.UNABLE_TO_PUBLISH);return a.reject(t)}}}).call(this,d(1))},function(e){"use strict";e.exports=function(n,t){function r(e,t){return function(){throw new Error("Cannot "+e+" "+t+", "+n+" is destroyed")}}Object.keys(t).forEach(function(e){"function"==typeof t[e]?t[e]=r("call",e):Object.defineProperty(t,e,{get:r("get",e),set:r("set",e)})})}},function(e){"use strict";e.exports=function(e){if(!("srcObject"in e)){var n=window&&window.URL;"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(e,"srcObject",{get:function(){return this._srcObject},set:function(e){var t=this;if(this._srcObject=e,this.src&&n.revokeObjectURL(this.src),e)return this.src=n.createObjectURL(e),e.addEventListener("addtrack",function(){t.src&&n.revokeObjectURL(t.src),t.src=n.createObjectURL(e)}),e.addEventListener("removetrack",function(){t.src&&n.revokeObjectURL(t.src),t.src=n.createObjectURL(e)}),this._srcObject;this.src=""}})}}},function(e,t,n){var r=n(87)("assign",n(6));r.placeholder=n(69),e.exports=r},function(e,t,n){var r=n(87)("mapValues",n(635));r.placeholder=n(69),e.exports=r},function(e,t,n){var o=n(61),a=n(97),s=n(33);e.exports=function(e,r){var i={};return r=s(r,3),a(e,function(e,t,n){o(i,t,r(e,t,n))}),i}},function(e){"use strict";e.exports=function(e,i){var t=setTimeout(function(){e(function(e,t){if(!e)for(var n=0;n<t.length;n+=1){var r=t[n];-1!==r.id.indexOf("_send")&&"ssrc"===r.type&&"audio"===r.mediaType&&0===parseInt(r.bytesSent,10)&&i()}})},3e3);return function(){clearTimeout(t)}}},function(e,t,n){"use strict";(function(d){var t=new(n(27));e.exports=function(e){void 0===e&&(e={});var i=e.analytics||t,o=e.errors||n(9),a=e.ExceptionCodes||n(12),s=e.otError||n(16)(),c=e.sessionObjects||n(39),u=e.uuid||n(15);return function(t){void 0===t&&(t=function(){});var n=u();function r(e){e?t(s(o.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),a.REPORT_ISSUE_ERROR)):t(null,n)}0===c.sessions.length()?i.logEvent({action:"ReportIssue",variation:"Event",payload:{reportIssueId:n}},null,r):d.all(c.sessions.map(function(e){return e.reportIssue({id:n})})).then(function(){return r()},function(e){return r(e)})}}}).call(this,n(1))},function(t,e,r){"use strict";(function(n){var i=r(2)(r(11)),o=r(0)("PluginVideoElementWrapper"),a=r(294)(),s=r(639),c=r(293),u=r(5),d=r(51),e=function(){function e(e){var n=this,t=e.fitMode;(0,i.default)(this,"_pluginVideoContainer",void 0),(0,i.default)(this,"_parentDomElement",void 0),(0,i.default)(this,"_fitMode",void 0),this._fitMode=t,this.timeUpdateInterval=new d(function(){n.trigger("timeupdate")},30),u(this),c(this,function(){return n._pluginVideoContainer.domElement});var r=new s(function(){return{width:n.videoWidth(),height:n.videoHeight()}},function(e,t){n.trigger("videoDimensionsChanged",t,e)});this.on("_bind",function(){return r.start()}),this.on("_unbind",function(){return r.stop()})}var t=e.prototype;return t.domElement=function(){return this._pluginVideoContainer?this._pluginVideoContainer.domElement:void 0},t.videoWidth=function(){return this._pluginVideoContainer?Number(this._pluginVideoContainer["video"+(this.isRotated()?"Height":"Width")]()):0},t.videoHeight=function(){return this._pluginVideoContainer?Number(this._pluginVideoContainer["video"+(this.isRotated()?"Width":"Height")]()):0},t.imgData=function(){return this._pluginVideoContainer?this._pluginVideoContainer.getImgData():null},t.isAudioBlocked=function(){return!1},t.appendTo=function(e){return this._parentDomElement=e,this},t.rebind=function(){},t.bindToStream=function(e){var r=this,t=new n(function(t,n){r._parentDomElement&&document.body.contains(r._parentDomElement)||o.error("The VideoElement must be attached to a DOM node before a stream can be bound"),r._pluginVideoContainer=e._.render(),r.trigger("videoElementCreated",r.domElement()),r._pluginVideoContainer.setFitMode(r._fitMode),r._pluginVideoContainer.appendTo(r._parentDomElement),r._pluginVideoContainer.show(function(e){e&&n(e),t()});r._mediaStoppedListener=a(e,function(){r._mediaStoppedListener&&r._mediaStoppedListener.stop(),r.trigger("mediaStopped")},function(e){r.trigger("mediaStopped",e)}),r.trigger("_bind")});return t.then(function(){setTimeout(function(){r.trigger("loadedmetadata"),r.timeUpdateInterval.start()},10)}),t},t.unbindStream=function(){return this.timeUpdateInterval.stop(),this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.trigger("_unbind"),this._pluginVideoContainer&&(this._pluginVideoContainer.destroy(),this.domElement()&&this.domElement().parentNode&&this.domElement().parentNode.removeChild(this.domElement()),this._parentDomElement=null,this._pluginVideoContainer=null),this},t.destroy=function(){this.unbindStream(),this.trigger("destroyed")},t.setAudioVolume=function(e){this._pluginVideoContainer.setAudioVolume(parseFloat(e)/100)},t.getAudioVolume=function(){return 100*this._pluginVideoContainer.getAudioVolume()},t.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh()},t.audioChannelType=function(){return"unknown"},t.getAudioInputLevel=function(){return n.resolve(this._pluginVideoContainer.getAudioInputLevel())},t.whenTimeIncrements=function(e,t){setTimeout(e.bind(t))},e}();t.exports=e}).call(this,r(1))},function(e,t,n){"use strict";var a=n(51),s=n(640),c=n(45);e.exports=function(){function e(t,n,e){var r=(void 0===e?{}:e).frequency,i=void 0===r?60:r,o=c(t());Object.defineProperty(this,"intervalRunner",{value:new a(function(){var e=t();s(e,o)||n(e,o),o=e},i)})}var t=e.prototype;return t.start=function(){this.intervalRunner.start()},t.stop=function(){this.intervalRunner.stop()},e}()},function(e,t,n){var r=n(132);e.exports=function(e,t){return r(e,t)}},function(e){"use strict";e.exports=function(e){var t=e.window,n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});t.addEventListener("testPassive",null,r),t.removeEventListener("testPassive",null,r)}catch(e){}return n}},function(e){"use strict";e.exports=function(){var e=navigator.userAgent.match(/OS (\d+_\d+) like Mac/);if(null!==e&&e[1])return e[1].replace("_",".")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,a=n(298),s=(o=a)&&o.__esModule?o:{default:o};function c(){}var u=(r(d,[{key:"isCanceled",value:function(){return this.internalIsCanceled}},{key:"cancel",value:function(){this.internalIsCanceled||(this.internalIsCanceled=!0,this.listeners.forEach(function(e){return e()}),this.listeners=null)}},{key:"throwIfCanceled",value:function(){if(this.internalIsCanceled)throw new s.default("Operation has been canceled.")}},{key:"onCancel",value:function(t){var n=this;return this.internalIsCanceled?c:(this.listeners.push(t),function(){if(n.listeners){var e=n.listeners.indexOf(t);-1!==e&&n.listeners.splice(e,1)}})}},{key:"fork",value:function(){if(this.internalIsCanceled)return d.CANCELED;var e=new d;return this.onCancel(function(){return e.cancel()}),e}}]),d);function d(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),this.internalIsCanceled=!1,this.listeners=[]}(t.default=u).CANCELED=new u,u.CANCELED.internalIsCanceled=!0},function(e,t,n){"use strict";(function(i){var o=n(60),a=n(105).default,s=n(156);n(111)();e.exports=function(n,e){var r=o(n),t=new i(function(e){function t(){(2<n.videoWidth()||2<n.videoHeight())&&e(!0)}r.on("videoDimensionsChanged",t),t()});return a(s(t,e,function(){return!1}),function(){return r.removeAll()})}}).call(this,n(1))},function(e,t,n){"use strict";(function(i){var o=n(60),a=n(105).default,s=n(156);n(111)();e.exports=function(e,t){void 0===t&&(t=5e3);var n=o(e),r=new i(function(e){n.on("timeupdate",e),n.on("loadedmetadata",e)});return a(s(r,t,function(){return!1}),function(){return n.removeAll()})}}).call(this,n(1))},function(e,t,n){"use strict";var r=n(0)("WidgetView:fixMini");e.exports=function(e){var t=e.clientWidth,n=e.clientHeight;e.classList.remove("OT_micro"),e.classList.remove("OT_mini"),(t<64||n<64)&&(e.classList.add("OT_micro"),r.debug("OT_micro class added",{clientWidth:t,clientHeight:n,microWidth:64,microHeight:64})),(t<128||n<128)&&(e.classList.add("OT_mini"),r.debug("OT_mini class added",{clientWidth:t,clientHeight:n,miniWidth:128,miniHeight:128}))}},function(e,t,n){"use strict";var o=n(15);e.exports=function(e,t){var n,r;if(e&&e.nodeName?((n=e).getAttribute("id")&&0!==n.getAttribute("id").length||n.setAttribute("id","OT_"+o()),r=n.getAttribute("id")):e&&(n=document.getElementById(e))&&(r=e),r||(r="OT_"+o().replace(/-/g,"_")),!n)return(n=document.createElement("div")).id=r,n.setAttribute("id",r),n.style.backgroundColor="#000000",document.body.appendChild(n),n;var i=document.createElement("div");switch(i.id="OT_"+o(),t){case"append":return n.appendChild(i),i;case"before":return n.parentNode.insertBefore(i,n),i;case"after":return n.parentNode.insertBefore(i,n.nextSibling),i;case"replace":default:for(;n.firstChild;)n.removeChild(n.firstChild);return n}}},function(e){"use strict";e.exports=function(e,t){return void 0===t&&(t="px"),String(parseFloat(e,10))===String(e).trim()?""+String(e).trim()+t:e}},function(e,t,n){"use strict";(function(s){var c=n(51);e.exports=function(i,e){var t=void 0===e?{}:e,n=t.frequency,o=void 0===n?60:n,r=t.timeout,a=void 0===r?2e3:r;return new s(function(e,t){var n,r=new c(function(){!function(){try{return i()}catch(e){return console.error("waitUntil encountered an error calling predicate",e),!1}}()||(clearTimeout(n),r.stop(),e())},o);n=setTimeout(function(){r.stop(),t(new Error("TIMEOUT"))},a),r.start()})}}).call(this,n(1))},function(e,t,n){"use strict";var r=n(16)(),i=n(9),o=n(12);e.exports=function(e){return"404"===String(e.code)?r(i.STREAM_NOT_FOUND,new Error("stream not found"),o.UNABLE_TO_SUBSCRIBE):"409"===String(e.code)?r(i.STREAM_LIMIT_EXCEEDED,new Error("The limit for concurrent streams in the session has been reached"),o.STREAM_LIMIT_EXCEEDED):r(i.UNABLE_TO_SUBSCRIBE,new Error("subscriberCreate failed with unexpected code "+e.code+": "+e.message),o.UNEXPECTED_SERVER_RESPONSE)}},function(e,t,n){"use strict";var a=n(26),s=n(49),c=n(108),u=n(21)();e.exports=function(e){var t,n=e.subscriber,r=e.audioLevelSampler,i=0,o=new c(function(){var e=n.listenerCount(a.AUDIO_LEVEL_UPDATED);1e4<s()-t&&0===e?o.stop():(i=r.sample(),0<e&&n.dispatchEvent(new u.AudioLevelUpdatedEvent(i)))});return Object.defineProperty(n,"loudness",{get:function(){return o.start(),t=s(),i},set:function(){throw new TypeError("Cannot set readonly property loudness")}}),n.listenerCount(a.AUDIO_LEVEL_UPDATED)&&o.start(),n.on("audioLevelUpdated:added",function(){o.start()}),n.once(a.SUBSCRIBER_DESTROYED,function(){o.stop()}),{destroy:function(){r.destroy(),o.stop()}}}},function(e,t,n){"use strict";var r=n(4);e.exports=function(){return-1<["Chrome","IE","Opera","Safari"].indexOf(r.name)}},function(e,t,n){"use strict";var r=n(4).name;e.exports=function(){return-1<["Firefox","Safari","Edge","Chrome"].indexOf(r)}},function(e,t,n){"use strict";var o=n(40),a=n(3);e.exports=function(e){var n=!1,r=!1,t=function(e){var t=-1<["auto","on"].indexOf(this.getDisplayMode());a.removeClass(e,"OT_video-disabled OT_video-disabled-warning OT_active"),t&&(n?a.addClass(e,"OT_video-disabled"):r&&a.addClass(e,"OT_video-disabled-warning"),a.addClass(e,"OT_active"))}.bind(this);this.disableVideo=function(e){!0===(n=e)&&(r=!1),t(this.domElement)},this.setWarning=function(e){r=e,t(this.domElement)},o(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});var i=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){i(e),t(this.domElement)}}},function(e,t,n){"use strict";var o=n(40),a=n(3);e.exports=function(e){function t(e){var t=-1<["auto","on"].indexOf(n.getDisplayMode());a.removeClass(e,["OT_audio-blocked","OT_active"].join(" ")),t&&(r&&a.addClass(e,"OT_audio-blocked"),a.addClass(e,"OT_active"))}var n=this,r=!1;this.setAudioBlocked=function(e){r=e,t(n.domElement)},o(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});var i=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){i(e),t(n.domElement)}}},function(e,t,n){"use strict";var o=n(40),a=n(3);e.exports=function(e){function t(e){var t=-1<["auto","on"].indexOf(n.getDisplayMode());a.removeClass(e,["OT_active"].join(" ")),t&&r&&a.addClass(e,"OT_active")}var n=this,r=!1;this.setVideoUnsupported=function(e){r=e,t(n.domElement)},o(this,{mode:e.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});var i=this.setDisplayMode.bind(this);this.setDisplayMode=function(e){i(e),t(n.domElement)}}},function(e,t,n){"use strict";var u=n(71),d=n(6),r=n(59),l=n(75);e.exports=function(e,i){var o;void 0===i&&(i=5e3);function a(e){return void 0===e&&(e=[]),r(e,function(e){return l.isVideoTrackStat(e)})}var s=!1,c={};return function r(){s||e(function(e,t){if(!s){if(!e){var n=a(t);n?d(c,u(n,["timestamp","framesDecoded"])):c.timestamp||d(c,{timestamp:Date.now(),framesDecoded:0})}o=setTimeout(r,i)}})}(),{getFrameRateFromStats:function(e){return function(e){var t=void 0===e?{}:e,n=t.timestamp,r=t.framesDecoded;return c.framesDecoded<=r&&c.timestamp<n?(r-c.framesDecoded)/((n-c.timestamp)/1e3):0}(a(e))},destroy:function(){s=!0,o&&(clearTimeout(o),o=null)}}}},function(e){"use strict";e.exports=function(e){function t(){s.forEach(function(e){return clearTimeout(e)})}var n=e.connectivityState,r=e.onWarning,i=e.onTimeout,o=e.warningMs,a=e.timeoutMs,s=[];n.observe({onEnterConnecting:function(){s.push(setTimeout(r,o),setTimeout(i,a))},onEnterConnected:t,onEnterDisconnected:t})}},function(e,t,n){"use strict";var r=n(302);e.exports=function(e){var t=e.onInvalidTransition;return new r({init:"disconnected",transitions:[{name:"beginConnect",from:"disconnected",to:"connecting"},{name:"connect",from:"connecting",to:"connected"},{name:"fail",from:["connecting","connected"],to:"disconnected"},{name:"cancel",from:["connecting","connected"],to:"disconnected"},{name:"disconnect",from:["connecting","connected"],to:"disconnected"}],methods:{onInvalidTransition:t}})}},function(e,t,n){"use strict";var i=n(51);e.exports=function(e){var t=e.connectivityState,n=e.logAttempt,r=new i(n,.2,6);t.observe({onEnterConnecting:function(){r.start()},onEnterDisconnected:function(){r.stop()},onEnterConnected:function(){r.stop()}})}},function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}},function(e){"use strict";e.exports=function(e,t){var n=e.getSenders().find(function(e){return"video"===e.track.kind}),r=n.getParameters();r.encodings.forEach(function(e){e.active=t}),n.setParameters(r)}},function(e,t,n){"use strict";var r=n(124);e.exports=r(["audioDeviceId","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","enableRenegotiation","enableStereo","facingMode","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","resolution","showControls","style","usePreviousDeviceSelection","videoDeviceId","videoDimensions","videoSource","width"])},function(e,t,n){"use strict";var c=n(26),u=n(49),d=n(108),l=n(21)();e.exports=function(e){var r,i=e.publisher,o=e.widgetView,a=0,s=new d(function(){var e=i.listenerCount(c.AUDIO_LEVEL_UPDATED);if(1e4<u()-r&&0===e)s.stop();else{var t=o&&o.video();if(t){var n=t.getAudioInputLevel();a=n,0<e&&i.dispatchEvent(new l.AudioLevelUpdatedEvent(n))}}});Object.defineProperty(i,"loudness",{get:function(){return s.start(),r=u(),a},set:function(){throw new TypeError("Cannot set readonly property loudness")}}),i.listenerCount(c.AUDIO_LEVEL_UPDATED)&&s.start(),i.on("audioLevelUpdated:added",function(){s.start()}),i.once(c.PUBLISHER_DESTROYED,function(){s.stop()})}},function(e,t,n){"use strict";var r=n(2),s=r(n(17)),i=r(n(18));e.exports=function(o){var a=!1;return function(){var e=(0,i.default)(s.default.mark(function e(){var t,n,r,i=arguments;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a)throw new Error("The previous call to this function has not yet completed.");e.next=2;break;case 2:for(a=!0,e.prev=3,t=i.length,n=new Array(t),r=0;r<t;r++)n[r]=i[r];return e.next=7,o.call.apply(o,[this].concat(n));case 7:return e.abrupt("return",e.sent);case 8:return e.prev=8,a=!1,e.finish(8);case 11:case"end":return e.stop()}},e,this,[[3,,8,11]])}));return function(){return e.apply(this,arguments)}}()}},function(e,t,n){var r=n(667),i=n(97),o=n(33);e.exports=function(e,t){return r(e,o(t,3),i)}},function(e){e.exports=function(e,r,t){var i;return t(e,function(e,t,n){if(r(e,t,n))return i=t,!1}),i}},function(e,t,n){"use strict";(function(u){var d=n(58);e.exports=function(e){var t,n,r=e.RTCPeerConnection,i=e.env,o=e.stream,a=e.codecFlags;if(!r)return u.resolve(!0);if("Edge"===i.name)return!0;function s(){try{t.close()}catch(e){}try{n.close()}catch(e){}n=t=null}try{var c={iceServers:[]};"Chrome"===i.name&&71<i.version&&(c.sdpSemantics="plan-b"),t=new r(c),n=new r(c),t.addStream(o)}catch(e){return s(),u.resolve(!1)}return t.createOffer().then(function(e){var t={type:e.type,sdp:e.sdp};return Object.keys(a).forEach(function(e){a[e]||(t.sdp=d.removeVideoCodec(t.sdp,e))}),n.setRemoteDescription(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(e){return s(),e})}}).call(this,n(1))},function(e,t,n){"use strict";var r=n(9).INVALID_PARAMETER;e.exports=function(e){var n=e.otError;return function(e){if(e){var t=function(e,t){if(!e)throw n(r,new Error("iceConfig invalid: "+t))};"includeServers"in e&&t(-1!==["all","custom"].indexOf(e.includeServers),".includeServers must be all or custom"),"transportPolicy"in e&&t(-1!==["all","relay"].indexOf(e.transportPolicy),".transportPolicy must be all or relay"),t(Array.isArray(e.customServers),".customServers must be an array"),e.customServers.forEach(function(e){t(e.urls||!("url"in e),"ice servers need .urls, not .url"),t("string"==typeof e.urls||Array.isArray(e.urls),"ice server .urls must be a string or an array"),t(!e.username||"string"==typeof e.username,"ice server .username must be a string if present"),t(!e.credential||"string"==typeof e.credential,"ice server .credential must be a string if present")})}}}},function(e,t,n){"use strict";var r=n(12);e.exports=function(e){switch(e){case r.AUTHENTICATION_ERROR:case r.INVALID_SESSION_ID:case r.TERMS_OF_SERVICE_FAILURE:case r.UNEXPECTED_SERVER_RESPONSE:return e;case r.ANVIL_EMPTY_RESPONSE_BODY:case r.ANVIL_CONNECT_FAILED:return r.CONNECT_FAILED;case r.ANVIL_BADLY_FORMED_RESPONSE:case r.ANVIL_INVALID_HTTP_STATUS:case r.ANVIL_XDOMAIN_OR_PARSING_ERROR:case r.ANVIL_UNKNOWN_HTTP_ERROR:case r.ANVIL_UNEXPECTED_ERROR_CODE:default:return r.UNEXPECTED_SERVER_RESPONSE}}},function(e,t,i){"use strict";(function(P){var e=i(2);t.__esModule=!0,t.default=function(e){void 0===e&&(e={});function I(i,e,c,u,d,t,l){var f,p,h,v,g,m,n,o=this;function r(e){e.action&&e.variation||x.debug("Expected action and variation"),t.logEvent((0,j.default)({sessionId:p,partnerId:f,p2p:g,messagingServer:m,connectionId:i},e))}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];O(r?"error":"connected"),v.apply(void 0,t)}function y(e){var t="clientDisconnected";!o.is("disconnecting")&&n&&(t="networkDisconnected"),e&&4001===e.code&&(t="networkTimedout"),O("disconnected"),w.onClose(t)}function E(e){n=!0,x.error(e)}function _(){w.onReconnecting()}function C(){r({action:"Reconnect",variation:"Success",retries:o._rumor.reconnectRetriesCount(),messageQueueSize:o._rumor.messageQueueSize(),socketId:o.socketId}),w.onReconnected()}function T(){r({action:"Reconnect",variation:"Attempt",retries:o._rumor.reconnectRetriesCount(),messageQueueSize:o._rumor.messageQueueSize(),socketId:o.socketId})}function S(e){"connectionLimitExceeded"===e.message&&(e.code=A.CONNECTION_LIMIT_EXCEEDED),e.reason="ConnectToSession";var t=a(e);r({action:"Reconnect",variation:"Failure",failureReason:e.reason,failureCode:t.code,failureMessage:t.message,messageQueueSize:o._rumor.messageQueueSize(),socketId:o.socketId})}void 0===l&&(l=[]);var w=d||new s,O=N.statable(this,["disconnected","connecting","connected","error","disconnecting"],"disconnected");Object.defineProperty(this,"socketId",{get:function(){return this._rumor.socketID}}),this.connect=function(e,n,r,t){var o=this;if(this.is("disconnected","error")){O("connecting"),f=n.partnerId,p=n.sessionId,g=n.p2pEnabled,m=n.messagingServer,h=e,v=t;var a="/v2/partner/"+f+"/session/"+p;this._rumor=new I.RumorSocket({messagingURL:c,notifyDisconnectAddress:u,connectionId:i,enableReconnection:n.reconnection}),this._rumor.on("close",y),this._rumor.on("error",E),this._rumor.on("reconnecting",_),this._rumor.on("reconnectAttempt",T),this._rumor.on("reconnectFailure",S),this._rumor.on("reconnected",C),this._rumor.on("message",w.dispatch.bind(w));var s=function(e){b({reason:"WebSocketConnection",code:e.code,message:e.message})};this._rumor.once("error",s),this._rumor.once("open",function(){o._rumor.removeListener("error",s),x.debug("connected. Subscribing to "+a+" on "+c),o._rumor.subscribe([a]);var e=l;(I.hasIceRestartsCapability()||I.hasRenegotiationCapability())&&n.renegotiation&&(e.push("renegotiation"),e.push("regeneration"));var t=R.connections.create({apiKey:f,sessionId:p,connectionId:o._rumor.id,connectionEventsSuppressed:r.connectionEventsSuppressed,capabilities:e}),i=new P(function(n){d.on("connection#created",function e(t){t.id===o._rumor.id&&(n(t),d.off("connection#created",e))})});o.publish(t,{"X-TB-TOKEN-AUTH":h},!0,function(e,t){if(e)return"connectionLimitExceeded"===e.message&&(e.code=A.CONNECTION_LIMIT_EXCEEDED),void b({reason:"ConnectToSession",code:e.code,message:e.message,socketId:o.socketId});var n=t&&t.data?JSON.parse(t.data):null;n&&(n.connection&&0!==n.connection.length||(n.connection=[],Array.isArray(n.stream)&&n.stream.forEach(function(e){var t=e.connection;return n.connection.push(t)})));function r(e,t){e?b({reason:"GetSessionState",code:e.code,message:e.message,socketId:o.socketId}):b(void 0,t)}i.then(function(t){n.connection.some(function(e){return e.id===t.id})||n.connection.unshift(t);var e=(0,F.default)();w.registerCallback(e,r),w.emit("session#read",n,e)})})})}else x.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.")},this.disconnect=function(){this.is("disconnected")||(O("disconnecting"),this._rumor.disconnect())},this.publish=function(e,t,n,r){r=r||function(){};var i=(0,U.default)(r),o=(0,F.default)();if(x.debug("Publish (ID:"+o+") "+e),this._rumor.readyState!==k.OPEN||this._rumor.reconnecting&&!n){var a=new Error("Not connected.");return a.code=500,i(a),void x.error("cannot publish until the socket is connected.")}return w.registerCallback(o,i),this._rumor.publish([u],e,(0,j.default)({},t,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":o,"X-TB-FROM-ADDRESS":this._rumor.id}),n,function(e){e&&i.apply(void 0,arguments)}),o},this.send=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=function(){}),o.publish((0,B.default)(e),t,n,r)},this.streamCreate=function(e,n,t,r,i,o,a){var s=R.streams.create(f,p,n,e,t,r,i,o);this.publish(s,{},!0,function(e,t){a(e,n,t)})},this.streamDestroy=function(e){this.publish(R.streams.destroy(f,p,e),{},!0)},this.streamChannelUpdate=function(e,t,n){this.publish(R.streamChannels.update(f,p,e,t,n),{},!0)},this.subscriberCreate=function(e,t,n,r){this.publish(R.subscribers.create(f,p,e,t,this._rumor.id,n),{},!0,r)},this.subscriberDestroy=function(e,t){this.publish(R.subscribers.destroy(f,p,e,t),{},!0)},this.subscriberUpdate=function(e,t,n){this.publish(R.subscribers.update(f,p,e,t,n),{},!0)},this.subscriberChannelUpdate=function(e,t,n,r){this.publish(R.subscriberChannels.update(f,p,e,t,n,r),{},!0)},this.forceDisconnect=function(e,t){this.publish(R.connections.destroy({apiKey:f,sessionId:p,connectionId:e}),{},!0,t)},this.forceUnpublish=function(e,t){this.publish(R.streams.destroy(f,p,e),{},!0,t)},this.signal=function(e,o,a){var s=new D(p,this._rumor.id,e||{});s.valid?this.publish(s.toRaptorMessage(),{},s.retryAfterReconnect,function(e){var t,n,r;if(e)r=e.code&&-1<[400,403,404,413,500].indexOf(e.code)?(n=e.code,e.message):(n=A.UNEXPECTED_SERVER_RESPONSE,"Unexpected server response. Try this operation again later."),t=new M(n,r);else{var i=s.data?typeof s.data:null;a("signal","send",{type:i})}o&&(0,L.default)(o)&&o(t,s.toHash())}):o&&(0,L.default)(o)&&o(new M(s.error.code,s.error.reason),s.toHash())},this.id=function(){return this._rumor&&this._rumor.id}}var a=e.convertRumorError||i(305),s=e.Dispatcher||i(309),A=e.ExceptionCodes||i(12),t=e.hasIceRestartsCapability||i(306),n=e.hasRenegotiationCapability||i(688),x=e.logging||i(0)("RaptorSocket"),R=e.Message||i(310),N=e.OTHelpers||i(3),k=e.RumorSocket||(0,r.default)(),D=e.Signal||i(311),M=e.SignalError||i(693);return I.hasIceRestartsCapability=t,I.hasRenegotiationCapability=n,I.RumorSocket=k,I};var L=e(i(13)),j=e(i(6)),U=e(i(37)),F=e(i(15)),B=e(i(307)),r=e(i(672))}).call(this,i(1))},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=function(e){var t=(void 0===e?{}:e).WebSocket,n=void 0===t?d.default:t,r=(0,a.default)(),i=(0,c.default)({EventEmitter:o.default,WebSocket:n,logging:s.default,allocateId:r});return(0,u.default)({EventEmitter:o.default,ReconnectableSocket:i,logging:s.default,allocateId:r})};var o=r(n(35)),a=r(n(673)),s=r(n(0)),c=r(n(674)),u=r(n(679)),d=r(n(684))},function(e,t){"use strict";t.__esModule=!0,t.default=function(){var e=0;return function(){return e+=1}}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;function y(e){return function(){e.apply(void 0,arguments)}}var E=r(n(17)),_=r(n(18)),C=r(n(159)),s=r(n(32)),d=r(n(50)),T=r(n(11)),S=r(n(308)),i=n(76),w=r(n(675)),l=r(n(60)),O=r(n(676)),f=r(n(678)),p=i.codes.CLOSE_TIMEOUT;t.default=function(e){var t,n,r=e.EventEmitter,i=e.WebSocket,m=e.logging,b=e.allocateId,o=e.BUFFER_DRAIN_INTERVAL,c=void 0===o?100:o,a=e.BUFFER_DRAIN_MAX_RETRIES,u=void 0===a?10:a;return n=t=function(v){function g(e){var s,t="string"==typeof e?{url:e}:e,n=t.url,r=t.connectTimeout,i=void 0===r?15e3:r,o=t.pingThreshold,a=void 0===o?3e3:o,c=t.pingWarningDelay,u=void 0===c?100:c,d=t.disconnectThreshold,l=void 0===d?5900:d,f=t.reconnectMaxDuration,p=void 0===f?6e4:f;if(!n)throw new Error("Must provide url");s=v.call(this)||this,(0,T.default)((0,C.default)(s),"_url",void 0),(0,T.default)((0,C.default)(s),"_id",b()),(0,T.default)((0,C.default)(s),"_logger",m("ReconnectableSocket:"+s._id)),(0,T.default)((0,C.default)(s),"_webSocket",void 0),(0,T.default)((0,C.default)(s),"_connectTimer",void 0),(0,T.default)((0,C.default)(s),"_pingTimer",void 0),(0,T.default)((0,C.default)(s),"_pingWarningTimer",void 0),(0,T.default)((0,C.default)(s),"_disconnectTimer",void 0),(0,T.default)((0,C.default)(s),"_queuedMessages",[]),(0,T.default)((0,C.default)(s),"_draining",!1),s.readyStateMachine=(0,O.default)({reconnectMaxDuration:p,CLOSED:g.CLOSED,CLOSING:g.CLOSING}),s._url=n,(0,S.default)({logger:s._logger,obj:(0,C.default)(s),eventNames:["error","open","message","needsPing","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),s.readyStateMachine.observe("onEnterOpen",function(e){var t=e.from;s._resetPingTimers(),s._resetDisconnectTimer(),s._connectTimer.clear(),"reconnecting"===t?(s._queuedMessages.forEach(function(e){return s.send(e,!0)}),s._queuedMessages=[],s.emit("reconnected")):s.emit("open")}),s.readyStateMachine.observe("onEnterClosed",function(e,t){s.emit("close",t)}),s.readyStateMachine.observe("onEnterClosing",y(function(){var n=(0,_.default)(E.default.mark(function e(t,n){var r,i,o;return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.from,i=n.code,o=n.reason,s._clearTimers(),e.next=5,s._clearSocket({drain:"open"===r,code:i,reason:o});case 5:"reconnecting"===r&&s.emit("reconnectFailure",{code:i,reason:o}),setTimeout(function(){s.readyStateMachine.closed({code:i,reason:o})});case 7:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}())),s.readyStateMachine.observe("onEnterReconnecting",function(){s.emit("reconnecting")}),s.readyStateMachine.observe("onDisconnect",y(function(){var n=(0,_.default)(E.default.mark(function e(t,n){var r,i,o,a;return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.from,i=t.to,o=n.code,a=n.reason,"reconnecting"!==i){e.next=10;break}if(s._draining)return e.abrupt("return");e.next=5;break;case 5:return s._clearTimers(),s.emit("reconnectAttempt"),e.next=9,s._clearSocket({drain:"open"===r,code:o,reason:a});case 9:s._createSocket();case 10:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}()));function h(e,t){return new w.default({name:e,duration:t,logger:s._logger})}return s._connectTimer=h("connect",i),s._pingTimer=h("ping",a),s._pingWarningTimer=h("pingWarning",u),s._disconnectTimer=h("disconnect",l),s._createSocket(),s}(0,d.default)(g,v),(0,s.default)(g,[{key:"url",get:function(){return"function"==typeof this._url?this._url():this._url}},{key:"reconnecting",get:function(){return"reconnecting"===this.readyStateMachine.state}},{key:"binaryType",get:function(){return this._webSocket.binaryType}},{key:"bufferedAmount",get:function(){return this._webSocket.bufferedAmount}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"extensions",get:function(){return this._webSocket.extensions}},{key:"readyState",get:function(){return{reconnecting:g.OPEN,open:g.OPEN,closing:g.CLOSING,closed:g.CLOSED,connecting:g.CONNECTING}[this.readyStateMachine.state]}}]);var e=g.prototype;return e._createSocket=function(){var r=this,e=new i(this.url);e.binaryType="arraybuffer";var t=(0,l.default)(e);t.on("open",function(){r.readyStateMachine.open()}),t.on("close",function(e){var t=e.code,n=e.reason;r.readyStateMachine.disconnect({code:t,reason:n})}),t.on("error",function(e){r.emit("error",e)}),t.on("message",function(e){r.readyState!==g.CLOSING&&r._resetDisconnectTimer(),r.emit("message",e)}),this._webSocket=e,this._webSocketEvents=t,this._connectTimer.reset(function(){var e={code:p,reason:"Timeout while opening connection"},t=new Error(e.reason);t.code=p,r.emit("error",t),r.readyStateMachine.disconnect(e)})},e._clearSocket=function(){var t=(0,_.default)(E.default.mark(function e(n){var r,i,o,a,s;return E.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(r=void 0===n?{}:n).drain,o=void 0!==i&&i,a=r.code,s=r.reason,this._draining=!0,this._webSocketEvents&&this._webSocketEvents.removeAll(),this._webSocket.readyState===g.CLOSED){e.next=8;break}if(o)return e.next=7,(0,f.default)(this._webSocket,{BUFFER_DRAIN_INTERVAL:c,BUFFER_DRAIN_MAX_RETRIES:u});e.next=7;break;case 7:try{!(1e3===(t=a)||3e3<=t&&t<=4999)||void 0===a&&void 0===s?this._webSocket.close():this._webSocket.close(a,s)}catch(e){m.error("Could not close websocket",e)}case 8:this._draining=!1;case 9:case"end":return e.stop()}var t},e,this)}));return function(e){return t.apply(this,arguments)}}(),e.send=function(e,t){var n=this;void 0===t&&(t=!0),this.readyState===g.OPEN&&this._resetPingTimers();function r(){try{return n._webSocket.send(e),"sent"}catch(e){if(n._webSocket.readyState===i.OPEN)return n._logger.debug("webSocket.send threw exception even though it was open:",e),"dropped";throw e}}if("reconnecting"!==this.readyStateMachine.state)return r();if(this._webSocket.readyState===i.OPEN)try{r()}catch(e){}return t?(this._queuedMessages.push(e),"queued"):(this._logger.debug("Dropping message during reconnection since retryAfterReconnect is false:",e),"dropped")},e.close=function(e,t){if(this.readyState===g.CLOSING)throw new Error("Can not call close on a closing ReconnectableSocket");if(this.readyState===g.CLOSED)throw new Error("Can not call close on an already closed ReconnectableSocket");this.readyStateMachine.close({code:e,reason:t})},e._resetPingTimers=function(){var e=this;this._pingWarningTimer.clear(),this._pingTimer.reset(function(){e._pingWarningTimer.reset(function(){e._logger.warn("Did not send message after needsPing event. Other side may disconnect.")}),e.emit("needsPing")})},e._resetDisconnectTimer=function(){var e=this;this._disconnectTimer.reset(function(){return e.readyStateMachine.disconnect({code:p,reason:"No activity"})})},e._clearTimers=function(){[this._disconnectTimer,this._connectTimer,this._pingTimer,this._pingWarningTimer].forEach(function(e){return e.clear()})},g}(r),(0,T.default)(t,"CONNECTING",i.CONNECTING),(0,T.default)(t,"OPEN",i.OPEN),(0,T.default)(t,"CLOSING",i.CLOSING),(0,T.default)(t,"CLOSED",i.CLOSED),n}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var i=r(n(11)),o=function(){function e(e){var t=e.name,n=e.logger,r=e.duration;(0,i.default)(this,"name",void 0),(0,i.default)(this,"logger",void 0),(0,i.default)(this,"duration",void 0),(0,i.default)(this,"currId",void 0),this.name=t,this.logger=n,this.duration=r}var t=e.prototype;return t.reset=function(e){var t=this;this.clear();var n=setTimeout(function(){void 0!==t.currId&&(t.logger.spam(t.name+" timer with id "+t.currId+" expired, entering callback"),t.currId=void 0,e())},this.duration);this.currId=n,this.logger.spam("Started "+this.name+" timer with id "+this.currId+", expires in "+this.duration+"ms")},t.clear=function(){void 0!==this.currId&&(clearTimeout(this.currId),this.logger.spam("Cleared "+this.name+" timer with id "+this.currId),this.currId=void 0)},t.isRunning=function(){return void 0!==this.currId},e}();t.default=o},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var a=r(n(302)),s=r(n(677)),i=n(76),c=(0,r(n(0)).default)("ReconnectableSocketStateMachine"),u=i.codes.CLOSE_UNSUPPORTED,d=i.codes.CLOSE_UNEXPECTED_CONDITION;t.default=function(e){var n,r=e.reconnectMaxDuration,i=e.CLOSED,o=e.CLOSING;return new a.default({init:"connecting",methods:{onInvalidTransition:function(e,t,n){c.error("Invalid state transition",{transition:e,from:t,to:n})}},transitions:[{name:"open",from:["connecting","reconnecting"],to:"open"},{name:"close",from:["connecting","reconnecting","open"],to:"closing"},{name:"closed",from:"closing",to:"closed"},{name:"disconnect",from:["reconnecting","open","connecting"],to:function(e){var t=e.code;return"open"!==this.state&&n||(n=(0,s.default)(r)),0<r&&!n()&&-1===[u,d].indexOf(t)&&-1===[i,o].indexOf(this.readyState)?"reconnecting":"closing"}}]})}},function(e){"use strict";e.exports=function(e){var t=!1;return setTimeout(function(){t=!0},e),function(){return t}}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var u=r(n(17)),i=r(n(18)),d=r(n(150)),o=function(){var n=(0,i.default)(u.default.mark(function e(t,n){var r,i,o,a,s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=(r=void 0===n?{}:n).BUFFER_DRAIN_INTERVAL,o=void 0===i?100:i,a=r.BUFFER_DRAIN_MAX_RETRIES,s=void 0===a?10:a,c=0;case 2:if(!(c<s)){e.next=10;break}if(0===t.bufferedAmount)return e.abrupt("break",10);e.next=5;break;case 5:return e.next=7,(0,d.default)(o);case 7:c+=1,e.next=2;break;case 10:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}();t.default=o},function(e,t,n){"use strict";var r=n(112),i=n(2);t.__esModule=!0,t.default=void 0;var m=i(n(159)),o=i(n(32)),a=i(n(50)),b=i(n(11)),y=i(n(15)),E=i(n(308)),_=i(n(680)),s=r(n(171)),C=i(n(683)),T=n(76);t.default=function(e){var t,n,r=e.EventEmitter,h=e.ReconnectableSocket,v=e.logging,g=e.allocateId;return n=t=function(p){function t(e){var n,t=e.messagingURL,r=e.notifyDisconnectAddress,i=e.connectionId,o=e.enableReconnection,a=e.pingThreshold,s=void 0===a?2e3:a,c=e.disconnectThreshold,u=void 0===c?(o?3:25)*s-100:c,d=e.reconnectMaxDuration,l=void 0===d?o?6e4:0:d;n=p.call(this)||this,(0,b.default)((0,m.default)(n),"url",void 0),(0,b.default)((0,m.default)(n),"id",void 0),(0,b.default)((0,m.default)(n),"_opened",!1),(0,b.default)((0,m.default)(n),"_socket",void 0),(0,b.default)((0,m.default)(n),"_reconnectAttempts",0),(0,b.default)((0,m.default)(n),"_socketID",(0,y.default)()),(0,b.default)((0,m.default)(n),"_receivedTransactionIDs",[]),(0,b.default)((0,m.default)(n),"_notifyDisconnectAddress",void 0),(0,b.default)((0,m.default)(n),"_enableReconnection",void 0),(0,b.default)((0,m.default)(n),"_pendingMessages",[]),(0,b.default)((0,m.default)(n),"_logger",v("RumorSocket:"+g())),(0,E.default)({logger:n._logger,obj:(0,m.default)(n),eventNames:["open","message","error","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),n.url=t,n.id=i,n._notifyDisconnectAddress=r,n._enableReconnection=o,n.on("error",function(e){n._logger.error(e.message)});try{n._socket=new h({url:function(){return n._enableReconnection?[n.url,0<=n.url.indexOf("?")?"&":"?","socketId="+n._socketID,n._socket&&n._socket.reconnecting?"&reconnect=true":"","&attempt="+(0,y.default)()].join(""):n.url},pingThreshold:s,disconnectThreshold:u,reconnectMaxDuration:l})}catch(e){n._logger.error(e),n.emit("error",new C.default(T.codes.CLOSE_CONNECT_EXCEPTION))}function f(){n._opened=!0,n._socket.send(_.default.Connect(n.id,r).serialize()),n.emit("open",n.id)}return n._socket.once("open",f),n._socket.on("message",function(e){return n._receiveMessage(e)}),n._socket.once("close",function(e){n._logger.debug("ReconnectableSocket closed (code: "+e.code+")"),n._clearPendingMessages(),-1===[T.codes.CLOSE_NORMAL,T.codes.CLOSE_GOING_AWAY,T.codes.CLOSE_TIMEOUT].indexOf(e.code)&&n.emit("error",new C.default(e.code,e.reason||e.message)),n.emit("close",e)}),n._socket.on("error",function(e){var t=e.code;return n.emit("error",new C.default(t))}),n._socket.on("needsPing",function(){n._socket.send(_.default.Ping().serialize())}),n._socket.on("reconnecting",function(){n._opened&&(n._clearPendingMessagesWhichShouldntRetry(),n.emit("reconnecting"),n._reconnectAttempts=0)}),n._socket.on("reconnectAttempt",function(){n._opened&&(n._reconnectAttempts+=1,n._socket.send(_.default.Disconnect("1").serialize(),!1),n.emit("reconnectAttempt"))}),n._socket.on("reconnected",function(){n._opened?(n._pendingMessages.forEach(function(e){n._socket.send(e.rumorMessage.serialize())}),n.emit("reconnected")):f()}),n._socket.on("reconnectFailure",function(){n._opened&&(n._logger.debug("Reconnecting failed as connectivity was not restored within "+l+"ms"),n.emit("reconnectFailure",new C.default))}),n}(0,a.default)(t,p),(0,o.default)(t,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:h.CONNECTING}},{key:"reconnecting",get:function(){return this._opened&&this._socket&&this._socket.reconnecting}}]);var e=t.prototype;return e._clearPendingMessagesWhichShouldntRetry=function(){var e=this._pendingMessages.filter(function(e){return!e.retryAfterReconnect});this._pendingMessages=this._pendingMessages.filter(function(e){return e.retryAfterReconnect}),e.forEach(function(e){var t=new Error("Not connected.");t.code=500,e.completion(t)})},e._clearPendingMessages=function(){this._pendingMessages.forEach(function(e){var t=new Error("Not connected.");t.code=500,e.completion(t)}),this._pendingMessages=[]},e._sendAck=function(e){this._socket.send(_.default.Status([e.fromAddress],{"TRANSACTION-ID":e.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":this.id}).serialize())},e._receiveMessage=function(e){var t=this,n=_.default.deserialize(e.data);if(n.type!==s.PONG){if(this._logger.debug("Received:",n),n.transactionId&&(this._pendingMessages=this._pendingMessages.filter(function(e){return e.rumorMessage.transactionId===n.transactionId&&(t._logger.debug("Marking",n.transactionId," as received"),e.completion(void 0,n)),e.rumorMessage.transactionId!==n.transactionId})),n.transactionId&&n.type!==s.STATUS){if(this._sendAck(n),0<=this._receivedTransactionIDs.indexOf(n.transactionId))return;this._receivedTransactionIDs.push(n.transactionId)}this.emit("message",n)}},e.publish=function(e,t,n,r,i){void 0===i&&(i=function(){});var o=_.default.Publish(e,t,n);if("dropped"===this._socket.send(o.serialize(),!1)&&!r){var a=new Error("Not connected.");return a.code=500,void i(a)}this._pendingMessages.push({rumorMessage:o,retryAfterReconnect:r,completion:i})},e.subscribe=function(e){this._socket.send(_.default.Subscribe(e).serialize())},e.unsubscribe=function(e){this._socket.send(_.default.Unsubscribe(e).serialize())},e.disconnect=function(){if(this.readyState===t.OPEN&&this._socket.send(_.default.Disconnect().serialize()),this._socket.readyState!==h.CLOSED&&this._socket.readyState!==h.CLOSING){var e=T.codes.CLOSE_NORMAL;this._socket.close(e,T.messages[e])}},e.status=function(e,t){this._socket.send(_.default.Status(e,{"TRANSACTION-ID":t,"X-TB-FROM-ADDRESS":this.id}).serialize())},e.reconnectRetriesCount=function(){return this._reconnectAttempts},e.messageQueueSize=function(){return this._pendingMessages.length},(0,o.default)(t,[{key:"socketID",get:function(){return this._socketID}}]),t}(r),(0,b.default)(t,"CONNECTING",h.CONNECTING),(0,b.default)(t,"OPEN",h.OPEN),(0,b.default)(t,"CLOSING",h.CLOSING),(0,b.default)(t,"CLOSED",h.CLOSED),n}},function(e,t,n){"use strict";var r=n(112),i=n(2);t.__esModule=!0,t.default=void 0;var o=i(n(11)),a=i(n(15)),h=n(681),s=r(n(171)),c=function(){function p(e,t,n,r){(0,o.default)(this,"type",void 0),(0,o.default)(this,"toAddress",void 0),(0,o.default)(this,"headers",void 0),(0,o.default)(this,"data",void 0),this.type=e,this.toAddress=t,this.headers=n,this.data=r,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&"2"!==this.status[0]}return p.prototype.serialize=function(){var e,t,n,r,i=8,o=7,a=[],s=[],c=[];for(o++,n=0;n<this.toAddress.length;n++)a.push(new h.TextEncoder("utf-8").encode(this.toAddress[n])),o+=2,o+=a[n].length;for(var u in o++,n=0,this.headers)this.headers.hasOwnProperty(u)&&(s.push(new h.TextEncoder("utf-8").encode(u)),c.push(new h.TextEncoder("utf-8").encode(this.headers[u])),o+=4,o+=s[n].length,o+=c[n].length,n++);o+=(t=new h.TextEncoder("utf-8").encode(this.data)).length;var d=new ArrayBuffer(o),l=new Uint8Array(d,0,o);for(o-=4,l[0]=(4278190080&o)>>>24,l[1]=(16711680&o)>>>16,l[2]=(65280&o)>>>8,l[3]=(255&o)>>>0,l[4]=0,l[5]=0,l[6]=this.type,l[7]=this.toAddress.length,n=0;n<a.length;n++)for(e=a[n],l[i++]=e.length>>8&255,l[i++]=e.length>>0&255,r=0;r<e.length;r++)l[i++]=e[r];for(l[i++]=s.length,n=0;n<s.length;n++){for(e=s[n],l[i++]=e.length>>8&255,l[i++]=e.length>>0&255,r=0;r<e.length;r++)l[i++]=e[r];for(e=c[n],l[i++]=e.length>>8&255,l[i++]=e.length>>0&255,r=0;r<e.length;r++)l[i++]=e[r]}for(n=0;n<t.length;n++)l[i++]=t[n];return d},p.deserialize=function(e){var t,n,r,i,o,a,s,c;window.Buffer&&window.Buffer.isBuffer(e)&&(e=function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;++r)n[r]=e[r];return t}(e));var u=8,d=new Uint8Array(e);t=d[6];var l=[];for(c=0;c<d[7];c++)s=d[u++]<<8,s+=d[u++],n=new Uint8Array(e,u,s),l[c]=new h.TextDecoder("utf-8").decode(n),u+=s;for(r=d[u++],i={},c=0;c<r;c++)s=d[u++]<<8,s+=d[u++],n=new Uint8Array(e,u,s),o=new h.TextDecoder("utf-8").decode(n),u+=s,s=d[u++]<<8,s+=d[u++],n=new Uint8Array(e,u,s),a=new h.TextDecoder("utf-8").decode(n),i[o]=a,u+=s;var f=new Uint8Array(e,u);return new p(t,l,i,new h.TextDecoder("utf-8").decode(f))},p.Connect=function(e,t){var n={uniqueId:e,"TRANSACTION-ID":(0,a.default)(),notifyDisconnectAddress:t};return new p(s.CONNECT,[],n,"")},p.Disconnect=function(e){return new p(s.DISCONNECT,[],{reconnect:e},"")},p.Subscribe=function(e){return new p(s.SUBSCRIBE,e,{},"")},p.Unsubscribe=function(e){return new p(s.UNSUBSCRIBE,e,{},"")},p.Publish=function(e,t,n){return new p(s.MESSAGE,e,n||{},t||"")},p.Status=function(e,t){return new p(s.STATUS,e,t||{},"")},p.Ping=function(){return new p(s.PING,[],{},"")},p}();t.default=c},function(e,t,n){"use strict";var r=n(112);t.__esModule=!0,t.TextDecoder=t.TextEncoder=void 0;var i=r(n(682)),o=window.TextEncoder||i.TextEncoder;t.TextEncoder=o;var a=window.TextDecoder||i.TextDecoder;t.TextDecoder=a},function(e,t,n){"use strict";function u(e,t,n){return t<=e&&e<=n}function a(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}n.r(t),n.d(t,"TextEncoder",function(){return o}),n.d(t,"TextDecoder",function(){return i});function s(e){this.tokens=[].slice.call(e)}s.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};function d(e,t){if(e)throw TypeError("Decoder error");return t||65533}var r="utf-8";function i(e,t){if(!(this instanceof i))return new i(e,t);if((e=void 0!==e?String(e).toLowerCase():r)!==r)throw new Error("Encoding not supported. Only utf-8 is supported");t=a(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function o(e,t){if(!(this instanceof o))return new o(e,t);if((e=void 0!==e?String(e).toLowerCase():r)!==r)throw new Error("Encoding not supported. Only utf-8 is supported");t=a(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function c(e){var r=e.fatal,i=0,o=0,a=0,s=128,c=191;this.handler=function(e,t){if(-1===t&&0!==a)return a=0,d(r);if(-1===t)return-1;if(0===a){if(u(t,0,127))return t;if(u(t,194,223))a=1,i=t-192;else if(u(t,224,239))224===t&&(s=160),237===t&&(c=159),a=2,i=t-224;else{if(!u(t,240,244))return d(r);240===t&&(s=144),244===t&&(c=143),a=3,i=t-240}return i<<=6*a,null}if(!u(t,s,c))return i=a=o=0,s=128,c=191,e.prepend(t),d(r);if(c=191,i+=t-(s=128)<<6*(a-(o+=1)),o!==a)return null;var n=i;return i=a=o=0,n}}function l(e){e.fatal;this.handler=function(e,t){if(-1===t)return-1;if(u(t,0,127))return t;var n,r;u(t,128,2047)?(n=1,r=192):u(t,2048,65535)?(n=2,r=224):u(t,65536,1114111)&&(n=3,r=240);for(var i=[(t>>6*n)+r];0<n;){var o=t>>6*(n-1);i.push(128|63&o),n-=1}return i}}i.prototype={decode:function(e,t){var n;n="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=a(t),this._streaming||(this._decoder=new c({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var r,i=new s(n),o=[];!i.endOfStream()&&-1!==(r=this._decoder.handler(i,i.read()));)null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));if(!this._streaming){do{if(-1===(r=this._decoder.handler(i,i.read())))break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(o)}},o.prototype={encode:function(e,t){e=e?String(e):"",t=a(t),this._streaming||(this._encoder=new l(this._options)),this._streaming=Boolean(t.stream);for(var n,r=[],i=new s(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var o=t.charCodeAt(r);if(o<55296||57343<o)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var a=e.charCodeAt(r+1);if(56320<=a&&a<=57343){var s=1023&o,c=1023&a;i.push(65536+(s<<10)+c),r+=1}else i.push(65533)}r+=1}return i}(e));!i.endOfStream()&&-1!==(n=this._encoder.handler(i,i.read()));)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;-1!==(n=this._encoder.handler(i,i.read()));)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}}},function(e,t,n){"use strict";var r=n(112),i=n(2);t.__esModule=!0,t.default=void 0;var o=i(n(11)),a=r(n(76));t.default=function(e,t){void 0===e&&(e=a.codes.CLOSE_FALLBACK_CODE),void 0===t&&(t=a.messages[e]||"No message available from code."),(0,o.default)(this,"code",void 0),(0,o.default)(this,"message",void 0),this.code=e,this.message=t}},function(e,t,n){"use strict";var r=n(2);t.__esModule=!0,t.default=void 0;var i=r(n(685)),o=window.WebSocket?window.WebSocket:(i.default.CONNECTING||(i.default.CONNECTING=0,i.default.OPEN=1,i.default.CLOSING=2,i.default.CLOSED=3),i.default);t.default=o},function(e){var t=function(){return this}(),r=t.WebSocket||t.MozWebSocket;function n(e,t,n){return t?new r(e,t):new r(e)}e.exports=r?n:null,r&&(n.prototype=r.prototype)},function(e,t,n){"use strict";var r=n(687);e.exports=function(e){var t=r(e.data);return t.transactionId=e.transactionId,t.fromAddress=e.headers["X-TB-FROM-ADDRESS"],t}},function(e){"use strict";e.exports=function(e){if(0===e.length)return{};var t=JSON.parse(e),n=t.uri.substr(1).split("/");n.shift(),""===n[n.length-1]&&n.pop(),t.params={};for(var r=0,i=n.length;r<i-1;r+=2)t.params[n[r]]=n[r+1];return n.length%2==0?"channel"===n[n.length-2]&&6<n.length?t.resource=n[n.length-4]+"_"+n[n.length-2]:t.resource=n[n.length-2]:"channel"===n[n.length-1]&&5<n.length?t.resource=n[n.length-3]+"_"+n[n.length-1]:t.resource=n[n.length-1],t.signature=t.resource+"#"+t.method,t}},function(e,t,n){"use strict";var r=n(4).name,i=n(57).once;e.exports=function(){return i()&&-1<["Chrome","Firefox","Safari"].indexOf(r)}},function(e,t,n){"use strict";var r=n(7),i=n(4),o=n(57).once;e.exports=function(){return o()&&("Chrome"===i.name||"Firefox"===i.name||"Node"===i.name||"Safari"===i.name||"Edge"===i.name||r.isInstalled())}},function(e,t,n){"use strict";var r=n(57).once;e.exports=function(){return r()}},function(e,t,n){"use strict";var r=n(3);e.exports=function(){return"Chrome"===r.env.name&&r.env.version<25?"SDES_SRTP":"DTLS_SRTP"}},function(e){"use strict";e.exports=function(e){var t=e.supportsWebRTC;return{supportsWebRTC:"true"===t||!0===t}}},function(e){"use strict";e.exports=function(e,t){this.code=e,this.message=t,this.reason=t}},function(e){"use strict";e.exports=function(t){var n=[];this.enqueue=function(){n.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){for(var e;e=n.shift();)t.trigger.apply(t,e)}}},function(e,t,n){"use strict";var u=n(2)(n(23)),o=n(191),d=n(222),l=n(54),f=n(6),p=n(246),h=n(12),v=n(696),g=n(697),a=n(289).default,m={EMPTY_RESPONSE:"Response body was empty, probably due to connectivity loss",BADLY_FORMED:"Unknown error: JSON response was badly formed",NO_ERROR:"No error message",UNEXPECTED_SERVER_RESPONSE:function(e){return"Unexpected server response ("+e+"). Try this operation again later."}},s=[0,600,1200];e.exports=function(e){var t=void 0===e?{}:e,n=t.axios,c=void 0===n?o:n,r=t.retryDelays,i=void 0===r?s:r;return a(function(e){var t=e.anvilUrl,n=e.sessionId,s=e.token,r=e.clientVersion,i=e.connectionId,o=d.parse(t,!0),a=d.format({protocol:o.protocol,auth:o.auth,host:o.host,pathname:d.resolve((o.pathname||"").replace(/\/?$/,"/"),"session/"+n),query:(0,u.default)({},o.query,{extended:!0})});return c.get(a,{validateStatus:function(e){return 200<=e&&e<300},headers:{"X-OPENTOK-AUTH":s,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":r,"X-TB-CONNECTIONID":i,Accept:"application/json"}}).catch(function(e){if(e.response){var t=new Error(m.UNEXPECTED_SERVER_RESPONSE(e.response.statusCode+(e.response.status?" "+e.response.status:"")));throw t.code=h.ANVIL_INVALID_HTTP_STATUS,t.name=v(t.code),t}if(e.request){var n=new Error(m.CONNECT_FAILED);throw n.code=h.ANVIL_CONNECT_FAILED,n.name=v(n.code),n}var r=h.ANVIL_UNKNOWN_HTTP_ERROR,i=v(e.code);throw f(e,{code:r,name:i}),e}).then(function(e){var t=e.data;if("string"==typeof t){if(0<t.length)try{JSON.parse(t)}catch(e){throw e.message=m.UNEXPECTED_SERVER_RESPONSE(e.toString()),e.code=h.ANVIL_XDOMAIN_OR_PARSING_ERROR,e.name=v(e.code),e}var n=new Error(0===t.length?m.EMPTY_RESPONSE:m.BADLY_FORMED);throw n.code=0===t.length?h.ANVIL_EMPTY_RESPONSE_BODY:h.ANVIL_BADLY_FORMED_RESPONSE,n.name=v(n.code),n}if(null===t||0===t.length){var r=new Error(m.EMPTY_RESPONSE);throw r.code=h.ANVIL_EMPTY_RESPONSE_BODY,r.name=v(r.code),r}var i=t.filter(function(e){return null!=e.error})[0];if(i){var o=g(l(i,"error.code","500"));"Invalid token format"===l(i,"error.errorMessage.message")&&(i.error.errorMessage.message+=" Token: "+s);var a=new Error(l(i,"error.errorMessage.message",void 0===o?"Unknown error: "+i.error.code:m.NO_ERROR));throw a.code=o||h.ANVIL_UNEXPECTED_ERROR_CODE,a.name=v(a.code),a}return new p(t[0])})},function(e,t){return e.code&&3e3<=e.code&&e.code<=3007&&i[t]})}},function(e,t,n){"use strict";var r,i=n(12),o=n(9),a=((r={})[i.ANVIL_BADLY_FORMED_RESPONSE]=o.BADLY_FORMED_RESPONSE,r[i.ANVIL_INVALID_HTTP_STATUS]=o.INVALID_HTTP_STATUS,r[i.ANVIL_XDOMAIN_OR_PARSING_ERROR]=o.XDOMAIN_OR_PARSING_ERROR,r[i.ANVIL_UNKNOWN_HTTP_ERROR]=o.UNKNOWN_HTTP_ERROR,r[i.ANVIL_UNEXPECTED_ERROR_CODE]=o.UNEXPECTED_ERROR_CODE,r[i.ANVIL_EMPTY_RESPONSE_BODY]=o.EMPTY_RESPONSE_BODY,r[i.ANVIL_CONNECT_FAILED]=o.CONNECT_FAILED,r[i.AUTHENTICATION_ERROR]=o.AUTHENTICATION_ERROR,r[i.INVALID_SESSION_ID]=o.INVALID_SESSION_ID,r[i.TERMS_OF_SERVICE_FAILURE]=o.TERMS_OF_SERVICE_FAILURE,r[i.UNEXPECTED_SERVER_RESPONSE]=o.UNEXPECTED_SERVER_RESPONSE,r);e.exports=function(e){return a[e]}},function(e,t,n){"use strict";var r=n(12),i={400:r.INVALID_SESSION_ID,403:r.AUTHENTICATION_ERROR,404:r.INVALID_SESSION_ID,409:r.TERMS_OF_SERVICE_FAILURE,500:r.UNEXPECTED_SERVER_RESPONSE};e.exports=function(e){return i[e]}},function(e,t,n){"use strict";e.exports=function(e){void 0===e&&(e={});var i=e.Session||n(304)(),o=e.sessionObjects||n(39);return function(e,t,n){null==t&&(t=e,e=null),Array.isArray(t)&&1===t.length&&(t=t[0]);var r=o.sessions.get(t);return r||(r=new i(e,t,n),o.sessions.add(r)),r}}},function(e,t,n){"use strict";var r=n(2),u=r(n(17)),i=r(n(18)),d=n(258),l=n(700),f=n(4),p=n(9),h=n(12),v=n(16)(),g=n(7),m=n(58),b=n(145)(window),o=function(){var e=(0,i.default)(u.default.mark(function e(){var t,n,r,i,o,a,s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof window)return e.abrupt("return",{videoEncoders:[],videoDecoders:[]});e.next=2;break;case 2:if(t=b.RTCPeerConnection,g.isInstalled())return n=d(g.supportedVideoCodecs||[],["VP9"]),e.abrupt("return",{videoEncoders:n,videoDecoders:n});e.next=6;break;case 6:if("Chrome"!==f.name||"captureStream"in window.HTMLCanvasElement.prototype){e.next=8;break}return e.abrupt("return",{videoEncoders:["VP8"],videoDecoders:["VP8"]});case 8:if("Edge"===f.name)return e.abrupt("return",{videoEncoders:["H264","VP8"],videoDecoders:["H264","VP8"]});e.next=10;break;case 10:return(r=window.document.createElement("canvas")).getContext("2d"),i=r.captureStream(),e.prev=13,a={iceServers:[]},"Chrome"===f.name&&71<f.version&&(a.sdpSemantics="plan-b"),(o=new t(a)).addTrack?o.addTrack(i.getVideoTracks()[0],i):o.addStream&&o.addStream(i),e.next=20,o.createOffer();case 20:return s=e.sent,c=m.getCodecs(s.sdp,"video")||[],c=d(c,["VP9","rtx","red","ulpfec"]),c=l(c),e.abrupt("return",{videoEncoders:c,videoDecoders:c});case 27:throw e.prev=27,e.t0=e.catch(13),v(p.UNABLE_TO_ACCESS_MEDIA_ENGINE,new Error("OT.getSupportedCodecs was not able to get the list of supported codecs"),h.UNABLE_TO_ACCESS_MEDIA_ENGINE);case 30:return e.prev=30,o.close(),e.finish(30);case 33:case"end":return e.stop()}},e,null,[[13,27,30,33]])}));return function(){return e.apply(this,arguments)}}();e.exports=o},function(e,t,n){var r=n(701);e.exports=function(e){return e&&e.length?r(e):[]}},function(e,t,n){var p=n(92),h=n(90),v=n(144),g=n(93),m=n(702),b=n(94);e.exports=function(e,t,n){var r=-1,i=h,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=v;else if(200<=o){var u=t?null:m(e);if(u)return b(u);a=!1,i=g,c=new p}else c=t?[]:s;e:for(;++r<o;){var d=e[r],l=t?t(d):d;if(d=n||0!==d?d:0,a&&l==l){for(var f=c.length;f--;)if(c[f]===l)continue e;t&&c.push(l),s.push(d)}else i(c,l,n)||(c!==s&&c.push(l),s.push(d))}return s}},function(e,t,n){var r=n(185),i=n(204),o=n(94),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a}],e={},f.m=d,f.c=e,f.d=function(e,t,n){f.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},f.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},f.t=function(t,e){if(1&e&&(t=f(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(f.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)f.d(n,r,function(e){return t[e]}.bind(null,r));return n},f.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return f.d(t,"a",t),t},f.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},f.p="",f(f.s=317);function f(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return d[t].call(n.exports,n,n.exports,f),n.l=!0,n.exports}var d,e});
//# sourceMappingURL=opentok.min.js.map
