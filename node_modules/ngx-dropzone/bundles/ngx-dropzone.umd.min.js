!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-dropzone",["exports","@angular/core","@angular/common"],t):t(e["ngx-dropzone"]={},e.ng.core,e.ng.common)}(this,function(e,i,t){"use strict";function r(t,s,a,l){return new(a||(a=Promise))(function(e,i){function n(e){try{o(l.next(e))}catch(t){i(t)}}function r(e){try{o(l["throw"](e))}catch(t){i(t)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((l=l.apply(t,s||[])).next())})}function d(n,r){var o,s,a,e,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),"throw":t(1),"return":t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function i(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,s&&(a=2&e[0]?s["return"]:e[0]?s["throw"]||((a=s["return"])&&a.call(s),0):s.next)&&!(a=a.call(s,e[1])).done)return a;switch(s=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,s=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(a=0<(a=l.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){l.label=e[1];break}if(6===e[0]&&l.label<a[1]){l.label=a[1],a=e;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(e);break}a[2]&&l.ops.pop(),l.trys.pop();continue}e=r.call(n,l)}catch(t){e=[6,t],s=0}finally{o=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([t,e])}}}var n=function(){function e(){this.fileCache=[],this.rejectedFiles=[],this.previews=[]}return e.prototype.reset=function(){this.fileCache=[],this.rejectedFiles=[],this.previews=[]},e.prototype.parseFileList=function(o,s,a,l,p,c){return r(this,void 0,void 0,function(){var t,i,n,r;return d(this,function(e){switch(e.label){case 0:t="*"!==s,p||(this.fileCache=[],this.rejectedFiles=[],this.previews=[]),i=0,e.label=1;case 1:if(!(i<o.length))return[3,6];if(n=o.item(i),t)if(s.endsWith("/*")){if(s.split("/")[0]!==n.type.split("/")[0])return this.rejectedFiles.push(n),[3,5]}else if(!s.includes(n.type))return this.rejectedFiles.push(n),[3,5];if(a&&n.size>a)return this.rejectedFiles.push(n),[3,5];if(!l&&1<=this.fileCache.length){if(p)return[3,5];this.fileCache=[n]}return c?n.type.startsWith("image")?[4,this.readFile(n)]:[3,3]:[3,4];case 2:return(r=e.sent())&&this.previews.push(r),[3,4];case 3:r={data:null,filename:n.name},this.previews.push(r),e.label=4;case 4:this.fileCache.push(n),e.label=5;case 5:return i++,[3,1];case 6:return[2,{addedFiles:this.fileCache,rejectedFiles:this.rejectedFiles}]}})})},e.prototype.readFile=function(n){return r(this,void 0,void 0,function(){return d(this,function(e){return[2,new Promise(function(i,t){var e=new FileReader;e.onload=function(e){var t={data:e.target.result,filename:n.name};return i(t)},e.onerror=function(e){return console.error("FileReader failed on file "+n.name+". No preview image created."),t(null)},e.readAsDataURL(n)})]})})},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[]},e}(),o=function(){function e(e,t){this.host=e,this.service=t,this.label="Drop your files here (or click)",this.multiple=!0,this.accept="*",this.showPreviews=!1,this.preserveFiles=!0,this.filesAdded=new i.EventEmitter,this.filesRejected=new i.EventEmitter,this.disabled=!1,this.hovered=!1}return e.prototype.showFileSelector=function(){this.disabled||this.fileInput.nativeElement.click()},e.prototype.reset=function(){this.service.reset()},e.prototype.onFilesSelected=function(e){var t=this,i=e.target.files;this.handleFileDrop(i).then(function(){t.fileInput.nativeElement.value=""})},e.prototype.onDragOver=function(e){this.disabled||(this.preventDefault(e),this.hovered=!0)},e.prototype.onDragLeave=function(e){this.hovered=!1},e.prototype.onDrop=function(e){this.preventDefault(e),this.hovered=!1,this.handleFileDrop(e.dataTransfer.files)},e.prototype.handleFileDrop=function(n){return r(this,void 0,void 0,function(){var i=this;return d(this,function(e){return[2,new Promise(function(t){i.disabled||i.service.parseFileList(n,i.accept,i.maxFileSize,i.multiple,i.preserveFiles,i.showPreviews).then(function(e){i.filesAdded.next(e.addedFiles),e.rejectedFiles.length&&i.filesRejected.next(e.rejectedFiles),t()})})]})})},e.prototype.preventDefault=function(e){e.preventDefault(),e.stopPropagation()},e.decorators=[{type:i.Component,args:[{selector:"ngx-dropzone",template:'<input type="file" #fileInput class="file-input" (change)="onFilesSelected($event)" [multiple]="multiple"\n  [accept]="accept" />\n<div class="dropzone" (click)="showFileSelector()">\n  <p *ngIf="service.previews.length === 0">{{ label }}</p>\n  <div class="preview" [class.limit-width]="!p.data" *ngFor="let p of service.previews">\n    <img *ngIf="p.data" [src]="p.data">\n    <span *ngIf="p.data">{{ p.filename }}</span>\n    <div *ngIf="!p.data" class="preview-item">\n      <span>{{ p.filename }}</span>\n    </div>\n  </div>\n</div>\n',styles:[":host(){display:flex;height:180px;cursor:pointer;background:#fff;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px}:host().hovered{border:2px solid #717386;color:#dfdfe4}:host().disabled{opacity:.5;cursor:no-drop}:host()>.dropzone{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;width:100%;overflow-x:auto}:host()>.dropzone>p{margin:10px auto}:host()>.dropzone>.preview{height:80%;position:relative;text-align:center;padding:0 10px;width:-webkit-max-content;width:-moz-max-content;width:max-content}:host()>.dropzone>.preview.limit-width{max-width:25%}:host()>.dropzone>.preview>img{max-height:100%;border-radius:5px;opacity:.8}:host()>.dropzone>.preview>span{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);color:#fff}:host()>.dropzone>.preview>.preview-item{display:flex;text-align:center;align-items:center;height:100%;padding:0 40px;overflow-wrap:break-word;border-radius:5px;background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}:host()>.dropzone>.preview>.preview-item>span{color:#717386;max-width:100%}.file-input{display:none}"],providers:[n]}]}],e.ctorParameters=function(){return[{type:i.ElementRef},{type:n}]},e.propDecorators={label:[{type:i.Input}],multiple:[{type:i.Input}],accept:[{type:i.Input}],maxFileSize:[{type:i.Input}],showPreviews:[{type:i.Input}],preserveFiles:[{type:i.Input}],filesAdded:[{type:i.Output}],filesRejected:[{type:i.Output}],disabled:[{type:i.HostBinding,args:["class.disabled"]},{type:i.Input}],hovered:[{type:i.HostBinding,args:["class.hovered"]}],fileInput:[{type:i.ViewChild,args:["fileInput"]}],onDragOver:[{type:i.HostListener,args:["dragover",["$event"]]}],onDragLeave:[{type:i.HostListener,args:["dragleave",["$event"]]}],onDrop:[{type:i.HostListener,args:["drop",["$event"]]}]},e}(),s=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule],declarations:[o],exports:[o]}]}],e}();e.NgxDropzoneComponent=o,e.NgxDropzoneModule=s,e.Éµa=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-dropzone.umd.min.js.map