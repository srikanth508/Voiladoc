<ngx-spinner bdColor="rgba(68,64,66,0.8)" size="large" color="#fff" type="ball-clip-rotate-multiple"
  [fullScreen]="true">
  <p style="color: white"> Loading... </p>
</ngx-spinner>
<br />
<div class="container-fluid card card:hover">
  <br />
  <div class="row ">
    <div class="col-lg-3">
      <h5>Prescriptions</h5>
    </div>
    <div class="col-lg-6"></div>
    <div class="col-lg-3"></div>
  </div>
  <br />
</div>
<br />
<div class="container-fluid card card:hover ">
  <br>
  <div class="row">
    <br>
    <div class="col-lg-3">
      <input type="text" class="form-control" placeholder="Search" [(ngModel)]="search" name="search">
    </div>
  </div><br>
  <div class="row">
    <div class="col-lg-12" style="overflow: auto;">
      <table>
        <thead>
          <tr>
            <th>{{ labels[0].patientID }}</th>
            <th>{{ labels[0].patientName }}</th>
            <th>{{ labels[0].mobileNumber }}</th>
            <th>{{ labels[0].emailID }}</th>

            <th>{{ labels[0].actions }}</th>
          </tr>
          <tr *ngFor="let list of patientslist|filter:search">
            <td>{{list.id}}</td>
            <td>{{list.patientName}}</td>
            <td>{{list.mobileNumber}}</td>
            <td>{{list.emailID}}</td>
            <td>
              <img src="assets/Images/medical.png" data-toggle="modal" data-target="#mymodalss"
                (click)="GetAllPrescription(list.id,list.emailID)">

            </td>
          </tr>
        </thead>
      </table>
    </div>
    <br /><br />
  </div>
  <br /><br />
  <br />
</div>
<br /><br /><br /><br />





<div id="mymodalss" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">
    <div class="modal-content" style="width: 900px;
      height: auto;">
      <div class="modal-body" id="Prescriptions">
        <div class="container-fluid" *ngFor="let alldetails of pdfprslist">
          <div *ngIf="alldetails.prescriptionExists!='0'">
            <div class="row">
              <div class="col-lg-5">
                <img src="assets/Images/logo.png" style="width: 26%;">
              </div>
              <div class="col-lg-4">
                <h5><b>Prescription</b></h5>
              </div>
            </div>
            <hr style="color:#333;background-color:#333;">
            <div>
              <div class="row">
                <div class="col-lg-5">
                  <label><b>Patient Name</b> : {{alldetails.patientName}}</label><br>
                  <label><b>Mobile No</b> : {{alldetails.mobileNumber}}</label><br>
                  <label><b>Address</b> : {{alldetails.address}}</label><br>
                  <label><b> Email ID</b> : {{alldetails.emailID}}</label><br>
                  <label><b>Age</b> : {{alldetails.age}}</label><br>
                  <label><b> Date of birth</b> : {{alldetails.dateOfBirth}}</label><br>
                  <label><b> Gender</b> : {{alldetails.gender}}</label><br>
                </div>
                <div class="col-lg-3">
                  <h6><b>Appointment Date</b></h6>
                  <span><b>{{alldetails.appointmentdate}}</b></span>
                </div>
                <div class="col-lg-4">
                  <label><b>Doctor Name</b> : {{alldetails.doctorName}}</label>
                  <label><b>Registration No</b> : {{alldetails.registrationNo}}</label>
                  <label><b>Mobile No</b> : {{alldetails.doctorMobileNo}}</label>
                  <label><b>Department</b> : {{alldetails.departmentname}}</label>
                  <label><b>Address</b> : {{alldetails.doctorAddress}}</label>
                </div>
                <br>
              </div>
            </div><br><br><br><br>
            <div>
              <div class="row">
                <div class="col-lg-12">
                  <table>
                    <thead>
                      <tr>
                        <th id="imp">Date</th>
                        <th id="imp">Drug Name </th>
                        <th id="imp">Sig </th>
                        <th id="imp">Dispence Quantity </th>
                        <th id="imp">How Many Refills </th>
                        <th id="imp">Note to Pharmacist </th>
                      </tr>
                      <tr *ngFor="let medicines of alldetails.medicines">
                        <td style="    width: 13%;">{{medicines.date}}</td>
                        <td>{{medicines.medicineName}}</td>
                        <td>{{medicines.sig}}</td>
                        <td>{{medicines.dispenseQuantity}}</td>
                        <td>{{medicines.howmanyRefills}}</td>
                        <td>{{medicines.noteToPharmasist}}</td>
                      </tr>
                    </thead>
                  </table>
                </div><br>
              </div>
            </div><br><br><br><br><br><br><br>
            <div class="row">
              <div class="col-lg-12">
                <p style="justify-content: center;">
                  Prescriptions in the USA often have a box. When checked, the pharmacist is instructed to
                  label the medication and provide information about the prescription itself is given in addition to
                  instructions on taking the medication. Otherwise, the patient is simply given the instructions. Some
                  prescribers further inform the patient and pharmacist by providing the indication for the medication;
                  i.e. what is being treated. This assists the pharmacist in checking for errors as many common
                  medications can be used for multiple medical conditions. Some prescriptions will specify whether and
                  how
                  many "repeats" or "refills" are allowed; that is whether the patient may obtain more of the same
                  medication without getting a new prescription from the medical practitioner. Regulations may restrict
                  some types of drugs from being refilled.
                </p>
              </div>

            </div><br><br>
            <div class="row">
              <div class="col-lg-8">
              </div>
              <div class="col-lg-4">
                <img src="assets/Images/sign.png" style="width: 39%;"><br>
                <!-- <label>Prescription provided by doctor</label><br> -->
                <b>Dr. {{alldetails.doctorName}}</b><br>
                <label>Reg no :<b>{{alldetails.registrationNo}}</b></label>
              </div>
            </div><br><br><br><br><br><br><br><br><br><br>
          </div>
          <!-- soapnotes -->

          <div *ngIf="alldetails.soapNotesExist!='0'">
            <div class="row">
              <div class="col-lg-5">
                <img src="assets/Images/logo.png" style="width: 26%;">
              </div>
              <div class="col-lg-4">
                <h5><b>SOAP Notes</b></h5>
              </div>
            </div>
            <hr style="color:#333;background-color:#333;">
            <div>
              <div class="row">
                <div class="col-lg-5">
                  <label><b>Patient Name</b> : {{alldetails.patientName}}</label><br>
                  <label><b>Mobile No</b> : {{alldetails.mobileNumber}}</label><br>
                  <label><b>Address</b> : {{alldetails.address}}</label><br>
                  <label><b> Email ID</b> : {{alldetails.emailID}}</label><br>
                  <label><b>Age</b> : {{alldetails.age}}</label><br>
                  <label><b> Date of birth</b> : {{alldetails.dateOfBirth}}</label><br>
                  <label><b> Gender</b> : {{alldetails.gender}}</label><br>
                </div>
                <div class="col-lg-3">
                  <h6><b>Appointment Date</b></h6>
                  <span><b>{{alldetails.appointmentdate}}</b></span>
                </div>
                <div class="col-lg-4">
                  <label><b>Doctor Name</b> : {{alldetails.doctorName}}</label>
                  <label><b>Registration No</b> : {{alldetails.registrationNo}}</label>
                  <label><b>Mobile No</b> : {{alldetails.doctorMobileNo}}</label>
                  <label><b>Department</b> : {{alldetails.departmentname}}</label>
                  <label><b>Address</b> : {{alldetails.doctorAddress}}</label>
                </div>
                <br>
              </div>
            </div><br><br><br><br>
            <div>
              <h5>SOAP</h5>
              <div class="row" *ngFor="let soap of alldetails.soaplist">
                <div class="col-lg-6">
  
                  <label><b>Date : </b> {{soap.appointmentDate}}</label>
  
                </div><br>
                <div class="col-lg-6">
                  <label><b>Subjective : </b> {{soap.subjective}}</label>
                </div>
                <div class="col-lg-6">
                  <label><b>Objective : </b>{{soap.objective}}</label>
                </div>
                <div class="col-lg-6">
                  <label><b>Assessment : </b>{{soap.assessment}}</label>
                </div>
                <div class="col-lg-6">
                  <label><b>Plan : </b> {{soap.plan}}</label>
                </div>
                <div class="col-lg-6">
                  <label><b>Diagnostic : </b> {{soap.diagnostic}}</label>
                </div>
                <div class="col-lg-6">
                  <label><b>Diagnostic Code : </b> {{soap.diagnoticCode}}</label>
                </div>
                <div class="col-lg-6">
                  <label><b>Followup Plan : </b>{{soap.followUpPlan}}</label>
                </div>
              </div><br><br>
              <div class="row">
                <div class="col-lg-3">
                  <label><b>Allergies : </b> {{alldetails.knownAllergies}}</label>
                </div>
                <div class="col-lg-3">
                  <label><b>Vaccination Status : </b> {{alldetails.vaccinationStatus}}</label>
                </div>
              </div><br>
              <h5 >Vitals </h5><br>
              <div class="row">
                <div class="col-lg-4">
                  <label><b>BPM : </b> {{alldetails.bpm}}</label>
                 
                </div>
                <div class="col-lg-4">
                  <label><b>RR : </b> {{alldetails.rr}}</label>
                </div>
                <div class="col-lg-4">
                  <label><b>Oxygen : </b>{{alldetails.bpm}}</label>
                </div>
                <div class="col-lg-4">
                  <label><b>Stress : </b>{{alldetails.streeLevel}}</label>
                </div>
                <div class="col-lg-4">
                  <label><b>Blood Pressure : </b> {{alldetails.bloodPressureStatus}}</label>
                </div>
              </div>
              <br><br><br>

            <div class="row">
              <div class="col-lg-8">
              </div>
              <div class="col-lg-4">
                <img src="assets/Images/sign.png" style="width: 39%;"><br>
                <!-- <label>SOAP Notes provided by doctor</label><br> -->
                <b>Dr. {{alldetails.doctorName}}</b><br>
                <label>Reg no :<b>{{alldetails.registrationNo}}</b></label>
              </div>

            </div><br><br><br><br><br><br><br><br><br><br><br><br>
          </div>
          <!-- Test -->
          <div *ngIf="alldetails.diagnosticTestExist!='0'">
            <div class="row">
              <div class="col-lg-5">
                <img src="assets/Images/logo.png" style="width: 26%;">
              </div>
              <div class="col-lg-4">
                <h5><b>Diagnostic Test</b></h5>
              </div>
            </div>
            <hr style="color:#333;background-color:#333;">
            <div>


              <div class="row">
                <div class="col-lg-5">
                  <label><b>Patient Name</b> : {{alldetails.patientName}}</label><br>
                  <label><b>Mobile No</b> : {{alldetails.mobileNumber}}</label><br>
                  <label><b>Address</b> : {{alldetails.address}}</label><br>
                  <label><b> Email ID</b> : {{alldetails.emailID}}</label><br>
                  <label><b>Age</b> : {{alldetails.age}}</label><br>
                  <label><b> Date of birth</b> : {{alldetails.dateOfBirth}}</label><br>
                  <label><b> Gender</b> : {{alldetails.gender}}</label><br>
                </div>
                <div class="col-lg-3">
                  <h6><b>Appointment Date</b></h6>
                  <span><b>{{alldetails.appointmentdate}}</b></span>
                </div>
                <div class="col-lg-4">
                  <label><b>Doctor Name</b> : {{alldetails.doctorName}}</label>
                  <label><b>Registration No</b> : {{alldetails.registrationNo}}</label>
                  <label><b>Mobile No</b> : {{alldetails.doctorMobileNo}}</label>
                  <label><b>Department</b> : {{alldetails.departmentname}}</label>
                  <label><b>Address</b> : {{alldetails.doctorAddress}}</label>
                </div>
                <br>
              </div>
            </div>
            <div><br><br><br><br>
              <div>
                <div class="row">
                  <div class="col-lg-12">
                    <table>
                      <thead>
                        <tr>
                          <th id="imp">Date</th>
                          <th id="imp">Test Type </th>
                          <th id="imp">Test Name </th>
                          <th id="imp">Clinical Info </th>
                        </tr>
                        <tr *ngFor="let test of alldetails.diagnosticTest">
                          <td style="    width: 13%;">{{test.appdate}}</td>
                          <td>{{test.name}}</td>
                          <td>{{test.testName}}</td>
                          <td>{{test.clinicalInfo}}</td>
                        </tr>
                      </thead>
                    </table>
                  </div><br>
                </div>
              </div>
            </div><br><br><br><br><br><br><br>
            <div class="row">
              <div class="col-lg-12">
                <p style="justify-content: center;">
                  Prescriptions in the USA often have a box. When checked, the pharmacist is instructed to
                  label the medication and provide information about the prescription itself is given in addition to
                  instructions on taking the medication. Otherwise, the patient is simply given the instructions. Some
                  prescribers further inform the patient and pharmacist by providing the indication for the medication;
                  i.e. what is being treated. This assists the pharmacist in checking for errors as many common
                  medications can be used for multiple medical conditions. Some prescriptions will specify whether and
                  how
                  many "repeats" or "refills" are allowed; that is whether the patient may obtain more of the same
                  medication without getting a new prescription from the medical practitioner. Regulations may restrict
                  some types of drugs from being refilled.
                </p>
              </div>
              <!-- <div cl ass="col-lg-4">s
  <img src="assets/Images/sign.png" style="width: 39%;"><br>
  <label>Prescription provided by doctor</label>
</div> -->
            </div><br><br>
            <div class="row">
              <div class="col-lg-8">
              </div>
              <div class="col-lg-4">
                <img src="assets/Images/sign.png" style="width: 39%;"><br>
                <!-- <label>Diagnostic Test provided by doctor</label><br> -->
                <b>Dr. {{alldetails.doctorName}}</b><br>
                <label>Reg no :<b>{{alldetails.registrationNo}}</b></label>
              </div>
            </div>

          </div><br><br><br><br><br><br><br><br><br><br>



          <div>
            <div class="row">
              <div class="col-lg-5">
                <img src="assets/Images/logo.png" style="width: 26%;">
              </div>
              <div class="col-lg-4">
                <h5><b>Medical Questionare</b></h5>
              </div>
            </div>
            <hr style="color:#333;background-color:#333;">
            <div>
              <div class="row">
                <div class="col-lg-5">
                  <label><b>Patient Name</b> : {{alldetails.patientName}}</label><br>
                  <label><b>Mobile No</b> : {{alldetails.mobileNumber}}</label><br>
                  <label><b>Address</b> : {{alldetails.address}}</label><br>
                  <label><b> Email ID</b> : {{alldetails.emailID}}</label><br>
                  <label><b>Age</b> : {{alldetails.age}}</label><br>
                  <label><b> Date of birth</b> : {{alldetails.dateOfBirth}}</label><br>
                  <label><b> Gender</b> : {{alldetails.gender}}</label><br>
                </div>
                <div class="col-lg-3">
                  <h6><b>Appointment Date</b></h6>
                  <span><b>{{alldetails.appointmentdate}}</b></span>
                </div>
                <div class="col-lg-4">
                  <label><b>Doctor Name</b> : {{alldetails.doctorName}}</label>
                  <label><b>Registration No</b> : {{alldetails.registrationNo}}</label>
                  <label><b>Mobile No</b> : {{alldetails.doctorMobileNo}}</label>
                  <label><b>Department</b> : {{alldetails.departmentname}}</label>
                  <label><b>Address</b> : {{alldetails.doctorAddress}}</label>
                </div>
                <br>
              </div>
            </div>
            <div><br><br><br><br>
              <div>
                <!-- <div class="row">
                  <h5 style="text-align: center;"><b>Vital Details</b></h5>
                  <div class="table">
                    <thead>
                      <tr>
                        <td><b>BPM : {{alldetails.bpm}}</b></td>
                        <td><b>RR : {{alldetails.rr}}</b></td>
                        <td><b>Oxygen : {{alldetails.oxygenSaturation}}</b></td>
                        <td><b>Stress : {{alldetails.streeLevel}}</b></td>
                        <td><b>Blood Pressure : {{alldetails.bloodPressureStatus}}</b></td>
                      </tr>
                    </thead>
                  </div>
                </div><br><br> -->
                <div class="row">
                  <h5 style="text-align: center;"><b>Medical Questionare</b></h5><br>
                </div>
                <div class="row" *ngFor="let medical of alldetails.medicalquestion">
                  <div class="col-lg-4">
                    <label>National Identity No : <b>{{medical.nationalidno}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Attending Doctor : <b>{{medical.attendingdoctor}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Medical History : <b>{{medical.medicalHistory}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Surgery History : <b>{{medical.surgeryHistory}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Long Term Treatement : <b>{{medical.longtermTreatment}}</b></label>
                  </div>

                  <div class="col-lg-4">
                    <label>Dietary Issues : <b>{{medical.dietaryIssues}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Alcohol : <span *ngIf="medical.alcohol=='1'"> <b>Yes</b></span></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Smoke : <span *ngIf="medical.smoker=='1'"> <b>Yes</b></span></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Medical Insurence : <span *ngIf="medical.medicalinsurance=='1'"> <b>Yes</b></span></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Exercise : <span *ngIf="medical.exercise=='1'"> <b>Yes</b></span></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Height : <b>{{medical.height}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Weight : <b>{{medical.weight}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>BMI : <b>{{medical.bmi}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Vaccination Status : <b>{{medical.vaccinationStatus}}</b></label>
                  </div>
                  <div class="col-lg-4">
                    <label>Allergies : <b>{{medical.knownAllergies}}</b></label>
                  </div>
                </div>
              </div>
            </div><br><br><br><br><br><br><br><br><br><br>
            <div class="row">
              <div class="col-lg-8">
              </div>
              <div class="col-lg-4">
                <img src="assets/Images/sign.png" style="width: 39%;"><br>
                <!-- <label>Medical Questionare</label><br> -->
                <b>Dr. {{alldetails.doctorName}}</b><br>
                <label>Reg no :<b>{{alldetails.registrationNo}}</b></label>
              </div>
            </div><br><br><br><br><br><br><br><br><br><br>
          </div>


          <div *ngIf="alldetails.sickslipcount!='0'">
            <div class="row">
              <div class="col-lg-5">
                <img src="assets/Images/logo.png" style="width: 26%;">
              </div>
              <div class="col-lg-4">
                <h5><b>Medical Certificate</b></h5>
              </div>
            </div>
            <hr style="color:#333;background-color:#333;">
            <div>
              <div class="row">
                <div class="col-lg-5">
                  <label><b>Patient Name</b> : {{alldetails.patientName}}</label><br>
                  <label><b>Mobile No</b> : {{alldetails.mobileNumber}}</label><br>
                  <label><b>Address</b> : {{alldetails.address}}</label><br>
                  <label><b> Email ID</b> : {{alldetails.emailID}}</label><br>
                  <label><b>Age</b> : {{alldetails.age}}</label><br>
                  <label><b> Date of birth</b> : {{alldetails.dateOfBirth}}</label><br>
                  <label><b> Gender</b> : {{alldetails.gender}}</label><br>
                </div>
                <div class="col-lg-3">
                  <h6><b>Appointment Date</b></h6>
                  <span><b>{{alldetails.appointmentdate}}</b></span>
                </div>
                <div class="col-lg-4">
                  <label><b>Doctor Name</b> : {{alldetails.doctorName}}</label>
                  <label><b>Registration No</b> : {{alldetails.registrationNo}}</label>
                  <label><b>Mobile No</b> : {{alldetails.doctorMobileNo}}</label>
                  <label><b>Department</b> : {{alldetails.departmentname}}</label>
                  <label><b>Address</b> : {{alldetails.doctorAddress}}</label>
                </div>
                <br>
              </div>
            </div><br><br><br><br>
            <div>
              <div class="row" *ngFor="let sickslip of alldetails.sicksliplist">
                <div class="col-lg-12">

                  <p [innerHTML]="sickslip.description">
                  </p>

                </div><br>
              </div>
            </div><br><br><br><br><br><br>

            <div class="row">
              <div class="col-lg-8">
              </div>
              <div class="col-lg-4">
                <img src="assets/Images/sign.png" style="width: 39%;"><br>
                <!-- <label>Medical certificate provided by doctor</label><br> -->
                <b>{{alldetails.doctorName}}</b><br>
                <label>Reg no :<b>{{alldetails.registrationNo}}</b></label>
              </div>
            </div><br><br><br><br><br><br><br><br><br><br>
          </div>

          <div *ngIf="alldetails.referalsCount!='0'">
            <div class="row">
              <div class="col-lg-5">
                <img src="assets/Images/logo.png" style="width: 26%;">
              </div>
              <div class="col-lg-4">
                <h5><b>Doctor Referals</b></h5>
              </div>
            </div>
            <hr style="color:#333;background-color:#333;">
            <div>
              <div class="row">
                <div class="col-lg-5">
                  <label><b>Patient Name</b> : {{alldetails.patientName}}</label><br>
                  <label><b>Mobile No</b> : {{alldetails.mobileNumber}}</label><br>
                  <label><b>Address</b> : {{alldetails.address}}</label><br>
                  <label><b> Email ID</b> : {{alldetails.emailID}}</label><br>
                  <label><b>Age</b> : {{alldetails.age}}</label><br>
                  <label><b> Date of birth</b> : {{alldetails.dateOfBirth}}</label><br>
                  <label><b> Gender</b> : {{alldetails.gender}}</label><br>
                </div>
                <div class="col-lg-3">
                  <h6><b>Appointment Date</b></h6>
                  <span><b>{{alldetails.appointmentdate}}</b></span>
                </div>
                <div class="col-lg-4">
                  <label><b>Doctor Name</b> : {{alldetails.doctorName}}</label>
                  <label><b>Registration No</b> : {{alldetails.registrationNo}}</label>
                  <label><b>Mobile No</b> : {{alldetails.doctorMobileNo}}</label>
                  <label><b>Department</b> : {{alldetails.departmentname}}</label>
                  <label><b>Address</b> : {{alldetails.doctorAddress}}</label>
                </div>
                <br>
              </div>
            </div><br><br><br><br>

            <div class="row" *ngFor="let ref of alldetails.referalist">
              <div class="col-lg-12">
                <p [innerHTML]="ref.referalNotes">
                </p>

              </div><br>
            </div><br><br><br><br>
            <div class="row">
              <div class="col-lg-8">
              </div>
              <div class="col-lg-4">
                <img src="assets/Images/sign.png" style="width: 39%;"><br>
                <!-- <label>Doctor Referals provided by doctor</label><br> -->
                <b>Dr. {{alldetails.doctorName}}</b><br>
                <label>Reg no :<b>{{alldetails.registrationNo}}</b></label>

              </div>
            </div><br><br><br><br><br><br><br><br><br><br>
          </div>
        </div>
        <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
      </div>
      <div class="modal-footer" style="margin-top: -24px;">
        <button type="button" class="btn btn-default" style="background-color: #f18235;color: white;"
          (click)="SavePdf()">Send Mail</button>

        <button type="button" class="btn btn-default" style="background-color: #f18235;color: white;"
          (click)="DownPdf()">Download</button>
      </div>
    </div>
  </div>
</div>